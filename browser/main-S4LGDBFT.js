var _I=Object.create;var ea=Object.defineProperty,xI=Object.defineProperties,NI=Object.getOwnPropertyDescriptor,AI=Object.getOwnPropertyDescriptors,MI=Object.getOwnPropertyNames,Xo=Object.getOwnPropertySymbols,OI=Object.getPrototypeOf,du=Object.prototype.hasOwnProperty,hv=Object.prototype.propertyIsEnumerable;var Zr=(t,e)=>(e=Symbol[t])?e:Symbol.for("Symbol."+t);var fv=(t,e,n)=>e in t?ea(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,S=(t,e)=>{for(var n in e||={})du.call(e,n)&&fv(t,n,e[n]);if(Xo)for(var n of Xo(e))hv.call(e,n)&&fv(t,n,e[n]);return t},x=(t,e)=>xI(t,AI(e));var fu=(t,e)=>{var n={};for(var r in t)du.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&Xo)for(var r of Xo(t))e.indexOf(r)<0&&hv.call(t,r)&&(n[r]=t[r]);return n};var ur=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),gs=(t,e)=>{for(var n in e)ea(t,n,{get:e[n],enumerable:!0})},PI=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of MI(e))!du.call(t,i)&&i!==n&&ea(t,i,{get:()=>e[i],enumerable:!(r=NI(e,i))||r.enumerable});return t};var ys=(t,e,n)=>(n=t!=null?_I(OI(t)):{},PI(e||!t||!t.__esModule?ea(n,"default",{value:t,enumerable:!0}):n,t));var y=(t,e,n)=>new Promise((r,i)=>{var s=c=>{try{a(n.next(c))}catch(l){i(l)}},o=c=>{try{a(n.throw(c))}catch(l){i(l)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(s,o);a((n=n.apply(t,e)).next())}),dr=function(t,e){this[0]=t,this[1]=e},hu=(t,e,n)=>{var r=(o,a,c,l)=>{try{var u=n[o](a),d=(a=u.value)instanceof dr,f=u.done;Promise.resolve(d?a[0]:a).then(h=>d?r(o==="return"?o:"next",a[1]?{done:h.done,value:h.value}:h,c,l):c({value:h,done:f})).catch(h=>r("throw",h,c,l))}catch(h){l(h)}},i=o=>s[o]=a=>new Promise((c,l)=>r(o,a,c,l)),s={};return n=n.apply(t,e),s[Zr("asyncIterator")]=()=>s,i("next"),i("throw"),i("return"),s},pu=t=>{var e=t[Zr("asyncIterator")],n=!1,r,i={};return e==null?(e=t[Zr("iterator")](),r=s=>i[s]=o=>e[s](o)):(e=e.call(t),r=s=>i[s]=o=>{if(n){if(n=!1,s==="throw")throw o;return o}return n=!0,{done:!1,value:new dr(new Promise(a=>{var c=e[s](o);if(!(c instanceof Object))throw TypeError("Object expected");a(c)}),1)}}),i[Zr("iterator")]=()=>i,r("next"),"throw"in e?r("throw"):i.throw=s=>{throw s},"return"in e&&r("return"),i},pv=(t,e,n)=>(e=t[Zr("asyncIterator")])?e.call(t):(t=t[Zr("iterator")](),e={},n=(r,i)=>(i=t[r])&&(e[r]=s=>new Promise((o,a,c)=>(s=i.call(t,s),c=s.done,Promise.resolve(s.value).then(l=>o({value:l,done:c}),a)))),n("next"),n("return"),e);var Sp=ur((pH,Cp)=>{"use strict";var I={};I.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)};I.localCName=I.generateIdentifier();I.splitLines=function(t){return t.trim().split(`
`).map(e=>e.trim())};I.splitSections=function(t){return t.split(`
m=`).map((n,r)=>(r>0?"m="+n:n).trim()+`\r
`)};I.getDescription=function(t){let e=I.splitSections(t);return e&&e[0]};I.getMediaSections=function(t){let e=I.splitSections(t);return e.shift(),e};I.matchPrefix=function(t,e){return I.splitLines(t).filter(n=>n.indexOf(e)===0)};I.parseCandidate=function(t){let e;t.indexOf("a=candidate:")===0?e=t.substring(12).split(" "):e=t.substring(10).split(" ");let n={foundation:e[0],component:{1:"rtp",2:"rtcp"}[e[1]]||e[1],protocol:e[2].toLowerCase(),priority:parseInt(e[3],10),ip:e[4],address:e[4],port:parseInt(e[5],10),type:e[7]};for(let r=8;r<e.length;r+=2)switch(e[r]){case"raddr":n.relatedAddress=e[r+1];break;case"rport":n.relatedPort=parseInt(e[r+1],10);break;case"tcptype":n.tcpType=e[r+1];break;case"ufrag":n.ufrag=e[r+1],n.usernameFragment=e[r+1];break;default:n[e[r]]===void 0&&(n[e[r]]=e[r+1]);break}return n};I.writeCandidate=function(t){let e=[];e.push(t.foundation);let n=t.component;n==="rtp"?e.push(1):n==="rtcp"?e.push(2):e.push(n),e.push(t.protocol.toUpperCase()),e.push(t.priority),e.push(t.address||t.ip),e.push(t.port);let r=t.type;return e.push("typ"),e.push(r),r!=="host"&&t.relatedAddress&&t.relatedPort&&(e.push("raddr"),e.push(t.relatedAddress),e.push("rport"),e.push(t.relatedPort)),t.tcpType&&t.protocol.toLowerCase()==="tcp"&&(e.push("tcptype"),e.push(t.tcpType)),(t.usernameFragment||t.ufrag)&&(e.push("ufrag"),e.push(t.usernameFragment||t.ufrag)),"candidate:"+e.join(" ")};I.parseIceOptions=function(t){return t.substring(14).split(" ")};I.parseRtpMap=function(t){let e=t.substring(9).split(" "),n={payloadType:parseInt(e.shift(),10)};return e=e[0].split("/"),n.name=e[0],n.clockRate=parseInt(e[1],10),n.channels=e.length===3?parseInt(e[2],10):1,n.numChannels=n.channels,n};I.writeRtpMap=function(t){let e=t.payloadType;t.preferredPayloadType!==void 0&&(e=t.preferredPayloadType);let n=t.channels||t.numChannels||1;return"a=rtpmap:"+e+" "+t.name+"/"+t.clockRate+(n!==1?"/"+n:"")+`\r
`};I.parseExtmap=function(t){let e=t.substring(9).split(" ");return{id:parseInt(e[0],10),direction:e[0].indexOf("/")>0?e[0].split("/")[1]:"sendrecv",uri:e[1],attributes:e.slice(2).join(" ")}};I.writeExtmap=function(t){return"a=extmap:"+(t.id||t.preferredId)+(t.direction&&t.direction!=="sendrecv"?"/"+t.direction:"")+" "+t.uri+(t.attributes?" "+t.attributes:"")+`\r
`};I.parseFmtp=function(t){let e={},n,r=t.substring(t.indexOf(" ")+1).split(";");for(let i=0;i<r.length;i++)n=r[i].trim().split("="),e[n[0].trim()]=n[1];return e};I.writeFmtp=function(t){let e="",n=t.payloadType;if(t.preferredPayloadType!==void 0&&(n=t.preferredPayloadType),t.parameters&&Object.keys(t.parameters).length){let r=[];Object.keys(t.parameters).forEach(i=>{t.parameters[i]!==void 0?r.push(i+"="+t.parameters[i]):r.push(i)}),e+="a=fmtp:"+n+" "+r.join(";")+`\r
`}return e};I.parseRtcpFb=function(t){let e=t.substring(t.indexOf(" ")+1).split(" ");return{type:e.shift(),parameter:e.join(" ")}};I.writeRtcpFb=function(t){let e="",n=t.payloadType;return t.preferredPayloadType!==void 0&&(n=t.preferredPayloadType),t.rtcpFeedback&&t.rtcpFeedback.length&&t.rtcpFeedback.forEach(r=>{e+="a=rtcp-fb:"+n+" "+r.type+(r.parameter&&r.parameter.length?" "+r.parameter:"")+`\r
`}),e};I.parseSsrcMedia=function(t){let e=t.indexOf(" "),n={ssrc:parseInt(t.substring(7,e),10)},r=t.indexOf(":",e);return r>-1?(n.attribute=t.substring(e+1,r),n.value=t.substring(r+1)):n.attribute=t.substring(e+1),n};I.parseSsrcGroup=function(t){let e=t.substring(13).split(" ");return{semantics:e.shift(),ssrcs:e.map(n=>parseInt(n,10))}};I.getMid=function(t){let e=I.matchPrefix(t,"a=mid:")[0];if(e)return e.substring(6)};I.parseFingerprint=function(t){let e=t.substring(14).split(" ");return{algorithm:e[0].toLowerCase(),value:e[1].toUpperCase()}};I.getDtlsParameters=function(t,e){return{role:"auto",fingerprints:I.matchPrefix(t+e,"a=fingerprint:").map(I.parseFingerprint)}};I.writeDtlsParameters=function(t,e){let n="a=setup:"+e+`\r
`;return t.fingerprints.forEach(r=>{n+="a=fingerprint:"+r.algorithm+" "+r.value+`\r
`}),n};I.parseCryptoLine=function(t){let e=t.substring(9).split(" ");return{tag:parseInt(e[0],10),cryptoSuite:e[1],keyParams:e[2],sessionParams:e.slice(3)}};I.writeCryptoLine=function(t){return"a=crypto:"+t.tag+" "+t.cryptoSuite+" "+(typeof t.keyParams=="object"?I.writeCryptoKeyParams(t.keyParams):t.keyParams)+(t.sessionParams?" "+t.sessionParams.join(" "):"")+`\r
`};I.parseCryptoKeyParams=function(t){if(t.indexOf("inline:")!==0)return null;let e=t.substring(7).split("|");return{keyMethod:"inline",keySalt:e[0],lifeTime:e[1],mkiValue:e[2]?e[2].split(":")[0]:void 0,mkiLength:e[2]?e[2].split(":")[1]:void 0}};I.writeCryptoKeyParams=function(t){return t.keyMethod+":"+t.keySalt+(t.lifeTime?"|"+t.lifeTime:"")+(t.mkiValue&&t.mkiLength?"|"+t.mkiValue+":"+t.mkiLength:"")};I.getCryptoParameters=function(t,e){return I.matchPrefix(t+e,"a=crypto:").map(I.parseCryptoLine)};I.getIceParameters=function(t,e){let n=I.matchPrefix(t+e,"a=ice-ufrag:")[0],r=I.matchPrefix(t+e,"a=ice-pwd:")[0];return n&&r?{usernameFragment:n.substring(12),password:r.substring(10)}:null};I.writeIceParameters=function(t){let e="a=ice-ufrag:"+t.usernameFragment+`\r
a=ice-pwd:`+t.password+`\r
`;return t.iceLite&&(e+=`a=ice-lite\r
`),e};I.parseRtpParameters=function(t){let e={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},r=I.splitLines(t)[0].split(" ");e.profile=r[2];for(let s=3;s<r.length;s++){let o=r[s],a=I.matchPrefix(t,"a=rtpmap:"+o+" ")[0];if(a){let c=I.parseRtpMap(a),l=I.matchPrefix(t,"a=fmtp:"+o+" ");switch(c.parameters=l.length?I.parseFmtp(l[0]):{},c.rtcpFeedback=I.matchPrefix(t,"a=rtcp-fb:"+o+" ").map(I.parseRtcpFb),e.codecs.push(c),c.name.toUpperCase()){case"RED":case"ULPFEC":e.fecMechanisms.push(c.name.toUpperCase());break;default:break}}}I.matchPrefix(t,"a=extmap:").forEach(s=>{e.headerExtensions.push(I.parseExtmap(s))});let i=I.matchPrefix(t,"a=rtcp-fb:* ").map(I.parseRtcpFb);return e.codecs.forEach(s=>{i.forEach(o=>{s.rtcpFeedback.find(c=>c.type===o.type&&c.parameter===o.parameter)||s.rtcpFeedback.push(o)})}),e};I.writeRtpDescription=function(t,e){let n="";n+="m="+t+" ",n+=e.codecs.length>0?"9":"0",n+=" "+(e.profile||"UDP/TLS/RTP/SAVPF")+" ",n+=e.codecs.map(i=>i.preferredPayloadType!==void 0?i.preferredPayloadType:i.payloadType).join(" ")+`\r
`,n+=`c=IN IP4 0.0.0.0\r
`,n+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,e.codecs.forEach(i=>{n+=I.writeRtpMap(i),n+=I.writeFmtp(i),n+=I.writeRtcpFb(i)});let r=0;return e.codecs.forEach(i=>{i.maxptime>r&&(r=i.maxptime)}),r>0&&(n+="a=maxptime:"+r+`\r
`),e.headerExtensions&&e.headerExtensions.forEach(i=>{n+=I.writeExtmap(i)}),n};I.parseRtpEncodingParameters=function(t){let e=[],n=I.parseRtpParameters(t),r=n.fecMechanisms.indexOf("RED")!==-1,i=n.fecMechanisms.indexOf("ULPFEC")!==-1,s=I.matchPrefix(t,"a=ssrc:").map(u=>I.parseSsrcMedia(u)).filter(u=>u.attribute==="cname"),o=s.length>0&&s[0].ssrc,a,c=I.matchPrefix(t,"a=ssrc-group:FID").map(u=>u.substring(17).split(" ").map(f=>parseInt(f,10)));c.length>0&&c[0].length>1&&c[0][0]===o&&(a=c[0][1]),n.codecs.forEach(u=>{if(u.name.toUpperCase()==="RTX"&&u.parameters.apt){let d={ssrc:o,codecPayloadType:parseInt(u.parameters.apt,10)};o&&a&&(d.rtx={ssrc:a}),e.push(d),r&&(d=JSON.parse(JSON.stringify(d)),d.fec={ssrc:o,mechanism:i?"red+ulpfec":"red"},e.push(d))}}),e.length===0&&o&&e.push({ssrc:o});let l=I.matchPrefix(t,"b=");return l.length&&(l[0].indexOf("b=TIAS:")===0?l=parseInt(l[0].substring(7),10):l[0].indexOf("b=AS:")===0?l=parseInt(l[0].substring(5),10)*1e3*.95-50*40*8:l=void 0,e.forEach(u=>{u.maxBitrate=l})),e};I.parseRtcpParameters=function(t){let e={},n=I.matchPrefix(t,"a=ssrc:").map(s=>I.parseSsrcMedia(s)).filter(s=>s.attribute==="cname")[0];n&&(e.cname=n.value,e.ssrc=n.ssrc);let r=I.matchPrefix(t,"a=rtcp-rsize");e.reducedSize=r.length>0,e.compound=r.length===0;let i=I.matchPrefix(t,"a=rtcp-mux");return e.mux=i.length>0,e};I.writeRtcpParameters=function(t){let e="";return t.reducedSize&&(e+=`a=rtcp-rsize\r
`),t.mux&&(e+=`a=rtcp-mux\r
`),t.ssrc!==void 0&&t.cname&&(e+="a=ssrc:"+t.ssrc+" cname:"+t.cname+`\r
`),e};I.parseMsid=function(t){let e,n=I.matchPrefix(t,"a=msid:");if(n.length===1)return e=n[0].substring(7).split(" "),{stream:e[0],track:e[1]};let r=I.matchPrefix(t,"a=ssrc:").map(i=>I.parseSsrcMedia(i)).filter(i=>i.attribute==="msid");if(r.length>0)return e=r[0].value.split(" "),{stream:e[0],track:e[1]}};I.parseSctpDescription=function(t){let e=I.parseMLine(t),n=I.matchPrefix(t,"a=max-message-size:"),r;n.length>0&&(r=parseInt(n[0].substring(19),10)),isNaN(r)&&(r=65536);let i=I.matchPrefix(t,"a=sctp-port:");if(i.length>0)return{port:parseInt(i[0].substring(12),10),protocol:e.fmt,maxMessageSize:r};let s=I.matchPrefix(t,"a=sctpmap:");if(s.length>0){let o=s[0].substring(10).split(" ");return{port:parseInt(o[0],10),protocol:o[1],maxMessageSize:r}}};I.writeSctpDescription=function(t,e){let n=[];return t.protocol!=="DTLS/SCTP"?n=["m="+t.kind+" 9 "+t.protocol+" "+e.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+e.port+`\r
`]:n=["m="+t.kind+" 9 "+t.protocol+" "+e.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+e.port+" "+e.protocol+` 65535\r
`],e.maxMessageSize!==void 0&&n.push("a=max-message-size:"+e.maxMessageSize+`\r
`),n.join("")};I.generateSessionId=function(){return Math.random().toString().substr(2,22)};I.writeSessionBoilerplate=function(t,e,n){let r,i=e!==void 0?e:2;return t?r=t:r=I.generateSessionId(),`v=0\r
o=`+(n||"thisisadapterortc")+" "+r+" "+i+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`};I.getDirection=function(t,e){let n=I.splitLines(t);for(let r=0;r<n.length;r++)switch(n[r]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return n[r].substring(2);default:}return e?I.getDirection(e):"sendrecv"};I.getKind=function(t){return I.splitLines(t)[0].split(" ")[0].substring(2)};I.isRejected=function(t){return t.split(" ",2)[1]==="0"};I.parseMLine=function(t){let n=I.splitLines(t)[0].substring(2).split(" ");return{kind:n[0],port:parseInt(n[1],10),protocol:n[2],fmt:n.slice(3).join(" ")}};I.parseOLine=function(t){let n=I.matchPrefix(t,"o=")[0].substring(2).split(" ");return{username:n[0],sessionId:n[1],sessionVersion:parseInt(n[2],10),netType:n[3],addressType:n[4],address:n[5]}};I.isValidSDP=function(t){if(typeof t!="string"||t.length===0)return!1;let e=I.splitLines(t);for(let n=0;n<e.length;n++)if(e[n].length<2||e[n].charAt(1)!=="=")return!1;return!0};typeof Cp=="object"&&(Cp.exports=I)});var om=ur((Q6,DE)=>{"use strict";var SE=DE.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(t){return t.encoding?"rtpmap:%d %s/%s/%s":t.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(t){return t.address!=null?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(t){return t.subtype!=null?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(t){return"extmap:%d"+(t.direction?"/%s":"%v")+(t["encrypt-uri"]?" %s":"%v")+" %s"+(t.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(t){return t.sessionConfig!=null?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(t){var e="candidate:%s %d %s %d %s %d typ %s";return e+=t.raddr!=null?" raddr %s rport %d":"%v%v",e+=t.tcptype!=null?" tcptype %s":"%v",t.generation!=null&&(e+=" generation %d"),e+=t["network-id"]!=null?" network-id %d":"%v",e+=t["network-cost"]!=null?" network-cost %d":"%v",e}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(t){var e="ssrc:%d";return t.attribute!=null&&(e+=" %s",t.value!=null&&(e+=":%s")),e}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(t){return t.maxMessageSize!=null?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(t){return t.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(t){return"imageattr:%s %s %s"+(t.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(t){return"simulcast:%s %s"+(t.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(t){return"ts-refclk:%s"+(t.clksrcExt!=null?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(t){var e="mediaclk:";return e+=t.id!=null?"id=%s %s":"%v%s",e+=t.mediaClockValue!=null?"=%s":"",e+=t.rateNumerator!=null?" rate=%s":"",e+=t.rateDenominator!=null?"/%s":"",e}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};Object.keys(SE).forEach(function(t){var e=SE[t];e.forEach(function(n){n.reg||(n.reg=/(.*)/),n.format||(n.format="%s")})})});var TE=ur(Nn=>{"use strict";var ns=function(t){return String(Number(t))===t?Number(t):t},aO=function(t,e,n,r){if(r&&!n)e[r]=ns(t[1]);else for(var i=0;i<n.length;i+=1)t[i+1]!=null&&(e[n[i]]=ns(t[i+1]))},cO=function(t,e,n){var r=t.name&&t.names;t.push&&!e[t.push]?e[t.push]=[]:r&&!e[t.name]&&(e[t.name]={});var i=t.push?{}:r?e[t.name]:e;aO(n.match(t.reg),i,t.names,t.name),t.push&&e[t.push].push(i)},EE=om(),lO=RegExp.prototype.test.bind(/^([a-z])=(.*)/);Nn.parse=function(t){var e={},n=[],r=e;return t.split(/(\r\n|\r|\n)/).filter(lO).forEach(function(i){var s=i[0],o=i.slice(2);s==="m"&&(n.push({rtp:[],fmtp:[]}),r=n[n.length-1]);for(var a=0;a<(EE[s]||[]).length;a+=1){var c=EE[s][a];if(c.reg.test(o))return cO(c,r,o)}}),e.media=n,e};var IE=function(t,e){var n=e.split(/=(.+)/,2);return n.length===2?t[n[0]]=ns(n[1]):n.length===1&&e.length>1&&(t[n[0]]=void 0),t};Nn.parseParams=function(t){return t.split(/;\s?/).reduce(IE,{})};Nn.parseFmtpConfig=Nn.parseParams;Nn.parsePayloads=function(t){return t.toString().split(" ").map(Number)};Nn.parseRemoteCandidates=function(t){for(var e=[],n=t.split(" ").map(ns),r=0;r<n.length;r+=3)e.push({component:n[r],ip:n[r+1],port:n[r+2]});return e};Nn.parseImageAttributes=function(t){return t.split(" ").map(function(e){return e.substring(1,e.length-1).split(",").reduce(IE,{})})};Nn.parseSimulcastStreamList=function(t){return t.split(";").map(function(e){return e.split(",").map(function(n){var r,i=!1;return n[0]!=="~"?r=ns(n):(r=ns(n.substring(1,n.length)),i=!0),{scid:r,paused:i}})})}});var kE=ur((Z6,RE)=>{"use strict";var am=om(),uO=/%[sdv%]/g,dO=function(t){var e=1,n=arguments,r=n.length;return t.replace(uO,function(i){if(e>=r)return i;var s=n[e];switch(e+=1,i){case"%%":return"%";case"%s":return String(s);case"%d":return Number(s);case"%v":return""}})},Bo=function(t,e,n){var r=e.format instanceof Function?e.format(e.push?n:n[e.name]):e.format,i=[t+"="+r];if(e.names)for(var s=0;s<e.names.length;s+=1){var o=e.names[s];e.name?i.push(n[e.name][o]):i.push(n[e.names[s]])}else i.push(n[e.name]);return dO.apply(null,i)},fO=["v","o","s","i","u","e","p","c","b","t","r","z","a"],hO=["i","c","b","a"];RE.exports=function(t,e){e=e||{},t.version==null&&(t.version=0),t.name==null&&(t.name=" "),t.media.forEach(function(s){s.payloads==null&&(s.payloads="")});var n=e.outerOrder||fO,r=e.innerOrder||hO,i=[];return n.forEach(function(s){am[s].forEach(function(o){o.name in t&&t[o.name]!=null?i.push(Bo(s,o,t)):o.push in t&&t[o.push]!=null&&t[o.push].forEach(function(a){i.push(Bo(s,o,a))})})}),t.media.forEach(function(s){i.push(Bo("m",am.m[0],s)),r.forEach(function(o){am[o].forEach(function(a){a.name in s&&s[a.name]!=null?i.push(Bo(o,a,s)):a.push in s&&s[a.push]!=null&&s[a.push].forEach(function(c){i.push(Bo(o,a,c))})})})}),i.join(`\r
`)+`\r
`}});var _E=ur(An=>{"use strict";var Hr=TE(),pO=kE();An.write=pO;An.parse=Hr.parse;An.parseParams=Hr.parseParams;An.parseFmtpConfig=Hr.parseFmtpConfig;An.parsePayloads=Hr.parsePayloads;An.parseRemoteCandidates=Hr.parseRemoteCandidates;An.parseImageAttributes=Hr.parseImageAttributes;An.parseSimulcastStreamList=Hr.parseSimulcastStreamList});var xE=ur((Vo,Fl)=>{"use strict";(function(t,e){"use strict";var n="1.0.38",r="",i="?",s="function",o="undefined",a="object",c="string",l="major",u="model",d="name",f="type",h="vendor",p="version",m="architecture",C="console",v="mobile",E="tablet",_="smarttv",A="wearable",O="embedded",K=500,se="Amazon",Ee="Apple",et="ASUS",lr="BlackBerry",V="Browser",ve="Chrome",tt="Edge",xe="Firefox",nt="Google",mn="Huawei",gn="LG",Qe="Microsoft",rt="Motorola",it="Opera",Jo="Samsung",iv="Sharp",Qo="Sony",ou="Xiaomi",au="Zebra",sv="Facebook",ov="Chromium OS",av="Mac OS",TI=function(ne,de){var J={};for(var me in ne)de[me]&&de[me].length%2===0?J[me]=de[me].concat(ne[me]):J[me]=ne[me];return J},Yo=function(ne){for(var de={},J=0;J<ne.length;J++)de[ne[J].toUpperCase()]=ne[J];return de},cv=function(ne,de){return typeof ne===c?ps(de).indexOf(ps(ne))!==-1:!1},ps=function(ne){return ne.toLowerCase()},RI=function(ne){return typeof ne===c?ne.replace(/[^\d\.]/g,r).split(".")[0]:e},cu=function(ne,de){if(typeof ne===c)return ne=ne.replace(/^\s\s*/,r),typeof de===o?ne:ne.substring(0,K)},ms=function(ne,de){for(var J=0,me,yn,qt,ae,z,zt;J<de.length&&!z;){var uu=de[J],dv=de[J+1];for(me=yn=0;me<uu.length&&!z&&uu[me];)if(z=uu[me++].exec(ne),z)for(qt=0;qt<dv.length;qt++)zt=z[++yn],ae=dv[qt],typeof ae===a&&ae.length>0?ae.length===2?typeof ae[1]==s?this[ae[0]]=ae[1].call(this,zt):this[ae[0]]=ae[1]:ae.length===3?typeof ae[1]===s&&!(ae[1].exec&&ae[1].test)?this[ae[0]]=zt?ae[1].call(this,zt,ae[2]):e:this[ae[0]]=zt?zt.replace(ae[1],ae[2]):e:ae.length===4&&(this[ae[0]]=zt?ae[3].call(this,zt.replace(ae[1],ae[2])):e):this[ae]=zt||e;J+=2}},lu=function(ne,de){for(var J in de)if(typeof de[J]===a&&de[J].length>0){for(var me=0;me<de[J].length;me++)if(cv(de[J][me],ne))return J===i?e:J}else if(cv(de[J],ne))return J===i?e:J;return ne},kI={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},lv={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},uv={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[p,[d,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[p,[d,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[d,p],[/opios[\/ ]+([\w\.]+)/i],[p,[d,it+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[p,[d,it+" GX"]],[/\bopr\/([\w\.]+)/i],[p,[d,it]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[p,[d,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[d,p],[/\bddg\/([\w\.]+)/i],[p,[d,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[p,[d,"UC"+V]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[p,[d,"WeChat"]],[/konqueror\/([\w\.]+)/i],[p,[d,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[p,[d,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[p,[d,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[p,[d,"Smart Lenovo "+V]],[/(avast|avg)\/([\w\.]+)/i],[[d,/(.+)/,"$1 Secure "+V],p],[/\bfocus\/([\w\.]+)/i],[p,[d,xe+" Focus"]],[/\bopt\/([\w\.]+)/i],[p,[d,it+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[p,[d,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[p,[d,"Dolphin"]],[/coast\/([\w\.]+)/i],[p,[d,it+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[p,[d,"MIUI "+V]],[/fxios\/([-\w\.]+)/i],[p,[d,xe]],[/\bqihu|(qi?ho?o?|360)browser/i],[[d,"360 "+V]],[/(oculus|sailfish|huawei|vivo)browser\/([\w\.]+)/i],[[d,/(.+)/,"$1 "+V],p],[/samsungbrowser\/([\w\.]+)/i],[p,[d,Jo+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[d,/_/g," "],p],[/metasr[\/ ]?([\d\.]+)/i],[p,[d,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[d,"Sogou Mobile"],p],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[d,p],[/(lbbrowser)/i,/\[(linkedin)app\]/i],[d],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[d,sv],p],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[d,p],[/\bgsa\/([\w\.]+) .*safari\//i],[p,[d,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[p,[d,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[p,[d,ve+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[d,ve+" WebView"],p],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[p,[d,"Android "+V]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[d,p],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[p,[d,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[p,d],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[d,[p,lu,kI]],[/(webkit|khtml)\/([\w\.]+)/i],[d,p],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[d,"Netscape"],p],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[p,[d,xe+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[d,p],[/(cobalt)\/([\w\.]+)/i],[d,[p,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[m,"amd64"]],[/(ia32(?=;))/i],[[m,ps]],[/((?:i[346]|x)86)[;\)]/i],[[m,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[m,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[m,"armhf"]],[/windows (ce|mobile); ppc;/i],[[m,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[m,/ower/,r,ps]],[/(sun4\w)[;\)]/i],[[m,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[m,ps]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[u,[h,Jo],[f,E]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[u,[h,Jo],[f,v]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[u,[h,Ee],[f,v]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[u,[h,Ee],[f,E]],[/(macintosh);/i],[u,[h,Ee]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[u,[h,iv],[f,v]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[u,[h,mn],[f,E]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[u,[h,mn],[f,v]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[u,/_/g," "],[h,ou],[f,v]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[u,/_/g," "],[h,ou],[f,E]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[u,[h,"OPPO"],[f,v]],[/\b(opd2\d{3}a?) bui/i],[u,[h,"OPPO"],[f,E]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[u,[h,"Vivo"],[f,v]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[u,[h,"Realme"],[f,v]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[u,[h,rt],[f,v]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[u,[h,rt],[f,E]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[u,[h,gn],[f,E]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[u,[h,gn],[f,v]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[u,[h,"Lenovo"],[f,E]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[u,/_/g," "],[h,"Nokia"],[f,v]],[/(pixel c)\b/i],[u,[h,nt],[f,E]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[u,[h,nt],[f,v]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[u,[h,Qo],[f,v]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[u,"Xperia Tablet"],[h,Qo],[f,E]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[u,[h,"OnePlus"],[f,v]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[u,[h,se],[f,E]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[u,/(.+)/g,"Fire Phone $1"],[h,se],[f,v]],[/(playbook);[-\w\),; ]+(rim)/i],[u,h,[f,E]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[u,[h,lr],[f,v]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[u,[h,et],[f,E]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[u,[h,et],[f,v]],[/(nexus 9)/i],[u,[h,"HTC"],[f,E]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[h,[u,/_/g," "],[f,v]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[u,[h,"Acer"],[f,E]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[u,[h,"Meizu"],[f,v]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[u,[h,"Ulefone"],[f,v]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[h,u,[f,v]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[h,u,[f,E]],[/(surface duo)/i],[u,[h,Qe],[f,E]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[u,[h,"Fairphone"],[f,v]],[/(u304aa)/i],[u,[h,"AT&T"],[f,v]],[/\bsie-(\w*)/i],[u,[h,"Siemens"],[f,v]],[/\b(rct\w+) b/i],[u,[h,"RCA"],[f,E]],[/\b(venue[\d ]{2,7}) b/i],[u,[h,"Dell"],[f,E]],[/\b(q(?:mv|ta)\w+) b/i],[u,[h,"Verizon"],[f,E]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[u,[h,"Barnes & Noble"],[f,E]],[/\b(tm\d{3}\w+) b/i],[u,[h,"NuVision"],[f,E]],[/\b(k88) b/i],[u,[h,"ZTE"],[f,E]],[/\b(nx\d{3}j) b/i],[u,[h,"ZTE"],[f,v]],[/\b(gen\d{3}) b.+49h/i],[u,[h,"Swiss"],[f,v]],[/\b(zur\d{3}) b/i],[u,[h,"Swiss"],[f,E]],[/\b((zeki)?tb.*\b) b/i],[u,[h,"Zeki"],[f,E]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[h,"Dragon Touch"],u,[f,E]],[/\b(ns-?\w{0,9}) b/i],[u,[h,"Insignia"],[f,E]],[/\b((nxa|next)-?\w{0,9}) b/i],[u,[h,"NextBook"],[f,E]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[h,"Voice"],u,[f,v]],[/\b(lvtel\-)?(v1[12]) b/i],[[h,"LvTel"],u,[f,v]],[/\b(ph-1) /i],[u,[h,"Essential"],[f,v]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[u,[h,"Envizen"],[f,E]],[/\b(trio[-\w\. ]+) b/i],[u,[h,"MachSpeed"],[f,E]],[/\btu_(1491) b/i],[u,[h,"Rotor"],[f,E]],[/(shield[\w ]+) b/i],[u,[h,"Nvidia"],[f,E]],[/(sprint) (\w+)/i],[h,u,[f,v]],[/(kin\.[onetw]{3})/i],[[u,/\./g," "],[h,Qe],[f,v]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[u,[h,au],[f,E]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[u,[h,au],[f,v]],[/smart-tv.+(samsung)/i],[h,[f,_]],[/hbbtv.+maple;(\d+)/i],[[u,/^/,"SmartTV"],[h,Jo],[f,_]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[h,gn],[f,_]],[/(apple) ?tv/i],[h,[u,Ee+" TV"],[f,_]],[/crkey/i],[[u,ve+"cast"],[h,nt],[f,_]],[/droid.+aft(\w+)( bui|\))/i],[u,[h,se],[f,_]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[u,[h,iv],[f,_]],[/(bravia[\w ]+)( bui|\))/i],[u,[h,Qo],[f,_]],[/(mitv-\w{5}) bui/i],[u,[h,ou],[f,_]],[/Hbbtv.*(technisat) (.*);/i],[h,u,[f,_]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[h,cu],[u,cu],[f,_]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[f,_]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[h,u,[f,C]],[/droid.+; (shield) bui/i],[u,[h,"Nvidia"],[f,C]],[/(playstation [345portablevi]+)/i],[u,[h,Qo],[f,C]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[u,[h,Qe],[f,C]],[/((pebble))app/i],[h,u,[f,A]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[u,[h,Ee],[f,A]],[/droid.+; (glass) \d/i],[u,[h,nt],[f,A]],[/droid.+; (wt63?0{2,3})\)/i],[u,[h,au],[f,A]],[/(quest( \d| pro)?)/i],[u,[h,sv],[f,A]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[h,[f,O]],[/(aeobc)\b/i],[u,[h,se],[f,O]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[u,[f,v]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[u,[f,E]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[f,E]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[f,v]],[/(android[-\w\. ]{0,9});.+buil/i],[u,[h,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[p,[d,tt+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[p,[d,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[d,p],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[p,d]],os:[[/microsoft (windows) (vista|xp)/i],[d,p],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[d,[p,lu,lv]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[p,lu,lv],[d,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[p,/_/g,"."],[d,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[d,av],[p,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[p,d],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[d,p],[/\(bb(10);/i],[p,[d,lr]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[p,[d,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[p,[d,xe+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[p,[d,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[p,[d,"watchOS"]],[/crkey\/([\d\.]+)/i],[p,[d,ve+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[d,ov],p],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[d,p],[/(sunos) ?([\w\.\d]*)/i],[[d,"Solaris"],p],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[d,p]]},mt=function(ne,de){if(typeof ne===a&&(de=ne,ne=e),!(this instanceof mt))return new mt(ne,de).getResult();var J=typeof t!==o&&t.navigator?t.navigator:e,me=ne||(J&&J.userAgent?J.userAgent:r),yn=J&&J.userAgentData?J.userAgentData:e,qt=de?TI(uv,de):uv,ae=J&&J.userAgent==me;return this.getBrowser=function(){var z={};return z[d]=e,z[p]=e,ms.call(z,me,qt.browser),z[l]=RI(z[p]),ae&&J&&J.brave&&typeof J.brave.isBrave==s&&(z[d]="Brave"),z},this.getCPU=function(){var z={};return z[m]=e,ms.call(z,me,qt.cpu),z},this.getDevice=function(){var z={};return z[h]=e,z[u]=e,z[f]=e,ms.call(z,me,qt.device),ae&&!z[f]&&yn&&yn.mobile&&(z[f]=v),ae&&z[u]=="Macintosh"&&J&&typeof J.standalone!==o&&J.maxTouchPoints&&J.maxTouchPoints>2&&(z[u]="iPad",z[f]=E),z},this.getEngine=function(){var z={};return z[d]=e,z[p]=e,ms.call(z,me,qt.engine),z},this.getOS=function(){var z={};return z[d]=e,z[p]=e,ms.call(z,me,qt.os),ae&&!z[d]&&yn&&yn.platform&&yn.platform!="Unknown"&&(z[d]=yn.platform.replace(/chrome os/i,ov).replace(/macos/i,av)),z},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return me},this.setUA=function(z){return me=typeof z===c&&z.length>K?cu(z,K):z,this},this.setUA(me),this};mt.VERSION=n,mt.BROWSER=Yo([d,p,l]),mt.CPU=Yo([m]),mt.DEVICE=Yo([u,h,f,C,v,_,E,A,O]),mt.ENGINE=mt.OS=Yo([d,p]),typeof Vo!==o?(typeof Fl!==o&&Fl.exports&&(Vo=Fl.exports=mt),Vo.UAParser=mt):typeof define===s&&define.amd?define(function(){return mt}):typeof t!==o&&(t.UAParser=mt);var Yr=typeof t!==o&&(t.jQuery||t.Zepto);if(Yr&&!Yr.ua){var Zo=new mt;Yr.ua=Zo.getResult(),Yr.ua.get=function(){return Zo.getUA()},Yr.ua.set=function(ne){Zo.setUA(ne);var de=Zo.getResult();for(var J in de)Yr.ua[J]=de[J]}}})(typeof window=="object"?window:Vo)});var ME=ur(Ll=>{"use strict";Ll.byteLength=gO;Ll.toByteArray=vO;Ll.fromByteArray=CO;var dn=[],_t=[],mO=typeof Uint8Array<"u"?Uint8Array:Array,lm="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Wr=0,NE=lm.length;Wr<NE;++Wr)dn[Wr]=lm[Wr],_t[lm.charCodeAt(Wr)]=Wr;var Wr,NE;_t[45]=62;_t[95]=63;function AE(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");n===-1&&(n=e);var r=n===e?0:4-n%4;return[n,r]}function gO(t){var e=AE(t),n=e[0],r=e[1];return(n+r)*3/4-r}function yO(t,e,n){return(e+n)*3/4-n}function vO(t){var e,n=AE(t),r=n[0],i=n[1],s=new mO(yO(t,r,i)),o=0,a=i>0?r-4:r,c;for(c=0;c<a;c+=4)e=_t[t.charCodeAt(c)]<<18|_t[t.charCodeAt(c+1)]<<12|_t[t.charCodeAt(c+2)]<<6|_t[t.charCodeAt(c+3)],s[o++]=e>>16&255,s[o++]=e>>8&255,s[o++]=e&255;return i===2&&(e=_t[t.charCodeAt(c)]<<2|_t[t.charCodeAt(c+1)]>>4,s[o++]=e&255),i===1&&(e=_t[t.charCodeAt(c)]<<10|_t[t.charCodeAt(c+1)]<<4|_t[t.charCodeAt(c+2)]>>2,s[o++]=e>>8&255,s[o++]=e&255),s}function bO(t){return dn[t>>18&63]+dn[t>>12&63]+dn[t>>6&63]+dn[t&63]}function wO(t,e,n){for(var r,i=[],s=e;s<n;s+=3)r=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(t[s+2]&255),i.push(bO(r));return i.join("")}function CO(t){for(var e,n=t.length,r=n%3,i=[],s=16383,o=0,a=n-r;o<a;o+=s)i.push(wO(t,o,o+s>a?a:o+s));return r===1?(e=t[n-1],i.push(dn[e>>2]+dn[e<<4&63]+"==")):r===2&&(e=(t[n-2]<<8)+t[n-1],i.push(dn[e>>10]+dn[e>>4&63]+dn[e<<2&63]+"=")),i.join("")}});function mv(t,e){return Object.is(t,e)}var je=null,ta=!1,na=1,Fn=Symbol("SIGNAL");function oe(t){let e=je;return je=t,e}var ia={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function yu(t){if(ta)throw new Error("");if(je===null)return;je.consumerOnSignalRead(t);let e=je.nextProducerIndex++;if(Xr(je),e<je.producerNode.length&&je.producerNode[e]!==t&&vs(je)){let n=je.producerNode[e];sa(n,je.producerIndexOfThis[e])}je.producerNode[e]!==t&&(je.producerNode[e]=t,je.producerIndexOfThis[e]=vs(je)?wv(t,je,e):0),je.producerLastReadVersion[e]=t.version}function FI(){na++}function gv(t){if(!(vs(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===na)){if(!t.producerMustRecompute(t)&&!wu(t)){t.dirty=!1,t.lastCleanEpoch=na;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=na}}function yv(t){if(t.liveConsumerNode===void 0)return;let e=ta;ta=!0;try{for(let n of t.liveConsumerNode)n.dirty||LI(n)}finally{ta=e}}function vv(){return je?.consumerAllowSignalWrites!==!1}function LI(t){t.dirty=!0,yv(t),t.consumerMarkedDirty?.(t)}function vu(t){return t&&(t.nextProducerIndex=0),oe(t)}function bu(t,e){if(oe(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(vs(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)sa(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function wu(t){Xr(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(gv(n),r!==n.version))return!0}return!1}function bv(t){if(Xr(t),vs(t))for(let e=0;e<t.producerNode.length;e++)sa(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function wv(t,e,n){if(Cv(t),Xr(t),t.liveConsumerNode.length===0)for(let r=0;r<t.producerNode.length;r++)t.producerIndexOfThis[r]=wv(t.producerNode[r],t,r);return t.liveConsumerIndexOfThis.push(n),t.liveConsumerNode.push(e)-1}function sa(t,e){if(Cv(t),Xr(t),t.liveConsumerNode.length===1)for(let r=0;r<t.producerNode.length;r++)sa(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Xr(i),i.producerIndexOfThis[r]=e}}function vs(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Xr(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function Cv(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function Sv(t){let e=Object.create(jI);e.computation=t;let n=()=>{if(gv(e),yu(e),e.value===ra)throw e.error;return e.value};return n[Fn]=e,n}var mu=Symbol("UNSET"),gu=Symbol("COMPUTING"),ra=Symbol("ERRORED"),jI=x(S({},ia),{value:mu,dirty:!0,error:null,equal:mv,producerMustRecompute(t){return t.value===mu||t.value===gu},producerRecomputeValue(t){if(t.value===gu)throw new Error("Detected cycle in computations.");let e=t.value;t.value=gu;let n=vu(t),r;try{r=t.computation()}catch(i){r=ra,t.error=i}finally{bu(t,n)}if(e!==mu&&e!==ra&&r!==ra&&t.equal(e,r)){t.value=e;return}t.value=r,t.version++}});function UI(){throw new Error}var Dv=UI;function Ev(){Dv()}function Iv(t){Dv=t}var BI=null;function Tv(t){let e=Object.create(kv);e.value=t;let n=()=>(yu(e),e.value);return n[Fn]=e,n}function Cu(t,e){vv()||Ev(),t.equal(t.value,e)||(t.value=e,VI(t))}function Rv(t,e){vv()||Ev(),Cu(t,e(t.value))}var kv=x(S({},ia),{equal:mv,value:void 0});function VI(t){t.version++,FI(),yv(t),BI?.()}function L(t){return typeof t=="function"}function ei(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var oa=ei(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function fr(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Ie=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(L(r))try{r()}catch(s){e=s instanceof oa?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{_v(s)}catch(o){e=e??[],o instanceof oa?e=[...e,...o.errors]:e.push(o)}}if(e)throw new oa(e)}}add(e){var n;if(e&&e!==this)if(this.closed)_v(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&fr(n,e)}remove(e){let{_finalizers:n}=this;n&&fr(n,e),e instanceof t&&e._removeParent(this)}};Ie.EMPTY=(()=>{let t=new Ie;return t.closed=!0,t})();var Su=Ie.EMPTY;function aa(t){return t instanceof Ie||t&&"closed"in t&&L(t.remove)&&L(t.add)&&L(t.unsubscribe)}function _v(t){L(t)?t():t.unsubscribe()}var At={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ti={setTimeout(t,e,...n){let{delegate:r}=ti;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=ti;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function ca(t){ti.setTimeout(()=>{let{onUnhandledError:e}=At;if(e)e(t);else throw t})}function hr(){}var xv=Du("C",void 0,void 0);function Nv(t){return Du("E",void 0,t)}function Av(t){return Du("N",t,void 0)}function Du(t,e,n){return{kind:t,value:e,error:n}}var pr=null;function ni(t){if(At.useDeprecatedSynchronousErrorHandling){let e=!pr;if(e&&(pr={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=pr;if(pr=null,n)throw r}}else t()}function Mv(t){At.useDeprecatedSynchronousErrorHandling&&pr&&(pr.errorThrown=!0,pr.error=t)}var mr=class extends Ie{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,aa(e)&&e.add(this)):this.destination=WI}static create(e,n,r){return new vn(e,n,r)}next(e){this.isStopped?Iu(Av(e),this):this._next(e)}error(e){this.isStopped?Iu(Nv(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Iu(xv,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},$I=Function.prototype.bind;function Eu(t,e){return $I.call(t,e)}var Tu=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){la(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){la(r)}else la(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){la(n)}}},vn=class extends mr{constructor(e,n,r){super();let i;if(L(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&At.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Eu(e.next,s),error:e.error&&Eu(e.error,s),complete:e.complete&&Eu(e.complete,s)}):i=e}this.destination=new Tu(i)}};function la(t){At.useDeprecatedSynchronousErrorHandling?Mv(t):ca(t)}function HI(t){throw t}function Iu(t,e){let{onStoppedNotification:n}=At;n&&ti.setTimeout(()=>n(t,e))}var WI={closed:!0,next:hr,error:HI,complete:hr};var ri=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Ye(t){return t}function Ru(...t){return ku(t)}function ku(t){return t.length===0?Ye:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var te=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=zI(n)?n:new vn(n,r,i);return ni(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=Ov(r),new r((i,s)=>{let o=new vn({next:a=>{try{n(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[ri](){return this}pipe(...n){return ku(n)(this)}toPromise(n){return n=Ov(n),new n((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function Ov(t){var e;return(e=t??At.Promise)!==null&&e!==void 0?e:Promise}function qI(t){return t&&L(t.next)&&L(t.error)&&L(t.complete)}function zI(t){return t&&t instanceof mr||qI(t)&&aa(t)}function _u(t){return L(t?.lift)}function q(t){return e=>{if(_u(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function $(t,e,n,r,i){return new xu(t,e,n,r,i)}var xu=class extends mr{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function ii(){return q((t,e)=>{let n=null;t._refCount++;let r=$(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var si=class extends te{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,_u(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ie;let n=this.getSubject();e.add(this.source.subscribe($(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ie.EMPTY)}return e}refCount(){return ii()(this)}};var Pv=ei(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Pe=(()=>{class t extends te{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new ua(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new Pv}next(n){ni(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){ni(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){ni(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?Su:(this.currentObservers=null,s.push(n),new Ie(()=>{this.currentObservers=null,fr(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new te;return n.source=this,n}}return t.create=(e,n)=>new ua(e,n),t})(),ua=class extends Pe{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Su}};var M=class extends Pe{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var bs={now(){return(bs.delegate||Date).now()},delegate:void 0};var Ln=class extends Pe{constructor(e=1/0,n=1/0,r=bs){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){let{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;n||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){let{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){let o=n.now(),a=0;for(let c=1;c<r.length&&r[c]<=o;c+=2)a=c;a&&r.splice(0,a+1)}}};var da=class extends Ie{constructor(e,n){super()}schedule(e,n=0){return this}};var ws={setInterval(t,e,...n){let{delegate:r}=ws;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=ws;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var fa=class extends da{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return ws.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&ws.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,fr(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var oi=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};oi.now=bs.now;var ha=class extends oi{constructor(e,n=oi.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var Nu=new ha(fa),Fv=Nu;var Ze=new te(t=>t.complete());function pa(t){return t&&L(t.schedule)}function Au(t){return t[t.length-1]}function ma(t){return L(Au(t))?t.pop():void 0}function Gt(t){return pa(Au(t))?t.pop():void 0}function Lv(t,e){return typeof Au(t)=="number"?t.pop():e}function Uv(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function jv(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function gr(t){return this instanceof gr?(this.v=t,this):new gr(t)}function Bv(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(h){return function(p){return Promise.resolve(p).then(h,d)}}function a(h,p){r[h]&&(i[h]=function(m){return new Promise(function(C,v){s.push([h,m,C,v])>1||c(h,m)})},p&&(i[h]=p(i[h])))}function c(h,p){try{l(r[h](p))}catch(m){f(s[0][3],m)}}function l(h){h.value instanceof gr?Promise.resolve(h.value.v).then(u,d):f(s[0][2],h)}function u(h){c("next",h)}function d(h){c("throw",h)}function f(h,p){h(p),s.shift(),s.length&&c(s[0][0],s[0][1])}}function Vv(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof jv=="function"?jv(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,c){o=t[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}var ai=t=>t&&typeof t.length=="number"&&typeof t!="function";function ga(t){return L(t?.then)}function ya(t){return L(t[ri])}function va(t){return Symbol.asyncIterator&&L(t?.[Symbol.asyncIterator])}function ba(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function GI(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var wa=GI();function Ca(t){return L(t?.[wa])}function Sa(t){return Bv(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield gr(n.read());if(i)return yield gr(void 0);yield yield gr(r)}}finally{n.releaseLock()}})}function Da(t){return L(t?.getReader)}function fe(t){if(t instanceof te)return t;if(t!=null){if(ya(t))return KI(t);if(ai(t))return JI(t);if(ga(t))return QI(t);if(va(t))return $v(t);if(Ca(t))return YI(t);if(Da(t))return ZI(t)}throw ba(t)}function KI(t){return new te(e=>{let n=t[ri]();if(L(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function JI(t){return new te(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function QI(t){return new te(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,ca)})}function YI(t){return new te(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function $v(t){return new te(e=>{XI(t,e).catch(n=>e.error(n))})}function ZI(t){return $v(Sa(t))}function XI(t,e){var n,r,i,s;return Uv(this,void 0,void 0,function*(){try{for(n=Vv(t);r=yield n.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})}function st(t,e,n,r=0,i=!1){let s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function Ea(t,e=0){return q((n,r)=>{n.subscribe($(r,i=>st(r,t,()=>r.next(i),e),()=>st(r,t,()=>r.complete(),e),i=>st(r,t,()=>r.error(i),e)))})}function Ia(t,e=0){return q((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function Hv(t,e){return fe(t).pipe(Ia(e),Ea(e))}function Wv(t,e){return fe(t).pipe(Ia(e),Ea(e))}function qv(t,e){return new te(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function zv(t,e){return new te(n=>{let r;return st(n,e,()=>{r=t[wa](),st(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){n.error(o);return}s?n.complete():n.next(i)},0,!0)}),()=>L(r?.return)&&r.return()})}function Ta(t,e){if(!t)throw new Error("Iterable cannot be null");return new te(n=>{st(n,e,()=>{let r=t[Symbol.asyncIterator]();st(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function Gv(t,e){return Ta(Sa(t),e)}function Kv(t,e){if(t!=null){if(ya(t))return Hv(t,e);if(ai(t))return qv(t,e);if(ga(t))return Wv(t,e);if(va(t))return Ta(t,e);if(Ca(t))return zv(t,e);if(Da(t))return Gv(t,e)}throw ba(t)}function be(t,e){return e?Kv(t,e):fe(t)}function P(...t){let e=Gt(t);return be(t,e)}function ci(t,e){let n=L(t)?t:()=>t,r=i=>i.error(n());return new te(e?i=>e.schedule(r,0,i):r)}function Kt(t){return!!t&&(t instanceof te||L(t.lift)&&L(t.subscribe))}var bn=ei(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function Jv(t){return t instanceof Date&&!isNaN(t)}function j(t,e){return q((n,r)=>{let i=0;n.subscribe($(r,s=>{r.next(t.call(e,s,i++))}))})}var{isArray:eT}=Array;function tT(t,e){return eT(e)?t(...e):t(e)}function jn(t){return j(e=>tT(t,e))}var{isArray:nT}=Array,{getPrototypeOf:rT,prototype:iT,keys:sT}=Object;function Ra(t){if(t.length===1){let e=t[0];if(nT(e))return{args:e,keys:null};if(oT(e)){let n=sT(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function oT(t){return t&&typeof t=="object"&&rT(t)===iT}function ka(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Jt(...t){let e=Gt(t),n=ma(t),{args:r,keys:i}=Ra(t);if(r.length===0)return be([],e);let s=new te(aT(r,e,i?o=>ka(i,o):Ye));return n?s.pipe(jn(n)):s}function aT(t,e,n=Ye){return r=>{Qv(e,()=>{let{length:i}=t,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)Qv(e,()=>{let l=be(t[c],e),u=!1;l.subscribe($(r,d=>{s[c]=d,u||(u=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function Qv(t,e,n){t?st(n,t,e):e()}function Yv(t,e,n,r,i,s,o,a){let c=[],l=0,u=0,d=!1,f=()=>{d&&!c.length&&!l&&e.complete()},h=m=>l<r?p(m):c.push(m),p=m=>{s&&e.next(m),l++;let C=!1;fe(n(m,u++)).subscribe($(e,v=>{i?.(v),s?h(v):e.next(v)},()=>{C=!0},void 0,()=>{if(C)try{for(l--;c.length&&l<r;){let v=c.shift();o?st(e,o,()=>p(v)):p(v)}f()}catch(v){e.error(v)}}))};return t.subscribe($(e,h,()=>{d=!0,f()})),()=>{a?.()}}function Te(t,e,n=1/0){return L(e)?Te((r,i)=>j((s,o)=>e(r,s,i,o))(fe(t(r,i))),n):(typeof e=="number"&&(n=e),q((r,i)=>Yv(r,i,t,n)))}function Cs(t=1/0){return Te(Ye,t)}function Zv(){return Cs(1)}function wn(...t){return Zv()(be(t,Gt(t)))}function yr(t){return new te(e=>{fe(t()).subscribe(e)})}function Mu(...t){let e=ma(t),{args:n,keys:r}=Ra(t),i=new te(s=>{let{length:o}=n;if(!o){s.complete();return}let a=new Array(o),c=o,l=o;for(let u=0;u<o;u++){let d=!1;fe(n[u]).subscribe($(s,f=>{d||(d=!0,l--),a[u]=f},()=>c--,void 0,()=>{(!c||!d)&&(l||s.next(r?ka(r,a):a),s.complete())}))}});return e?i.pipe(jn(e)):i}var cT=["addListener","removeListener"],lT=["addEventListener","removeEventListener"],uT=["on","off"];function Ss(t,e,n,r){if(L(n)&&(r=n,n=void 0),r)return Ss(t,e,n).pipe(jn(r));let[i,s]=hT(t)?lT.map(o=>a=>t[o](e,a,n)):dT(t)?cT.map(Xv(t,e)):fT(t)?uT.map(Xv(t,e)):[];if(!i&&ai(t))return Te(o=>Ss(o,e,n))(fe(t));if(!i)throw new TypeError("Invalid event target");return new te(o=>{let a=(...c)=>o.next(1<c.length?c:c[0]);return i(a),()=>s(a)})}function Xv(t,e){return n=>r=>t[n](e,r)}function dT(t){return L(t.addListener)&&L(t.removeListener)}function fT(t){return L(t.on)&&L(t.off)}function hT(t){return L(t.addEventListener)&&L(t.removeEventListener)}function _a(t,e,n){return n?_a(t,e).pipe(jn(n)):new te(r=>{let i=(...o)=>r.next(o.length===1?o[0]:o),s=t(i);return L(e)?()=>e(i,s):void 0})}function Ou(t=0,e,n=Fv){let r=-1;return e!=null&&(pa(e)?n=e:r=e),new te(i=>{let s=Jv(t)?+t-n.now():t;s<0&&(s=0);let o=0;return n.schedule(function(){i.closed||(i.next(o++),0<=r?this.schedule(void 0,r):i.complete())},s)})}function Ds(...t){let e=Gt(t),n=Lv(t,1/0),r=t;return r.length?r.length===1?fe(r[0]):Cs(n)(be(r,e)):Ze}function ot(t,e){return q((n,r)=>{let i=0;n.subscribe($(r,s=>t.call(e,s,i++)&&r.next(s)))})}function Un(t){return q((e,n)=>{let r=null,i=!1,s;r=e.subscribe($(n,void 0,void 0,o=>{s=fe(t(o,Un(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function eb(t,e,n,r,i){return(s,o)=>{let a=n,c=e,l=0;s.subscribe($(o,u=>{let d=l++;c=a?t(c,u,d):(a=!0,u),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}function at(t,e){return L(e)?Te(t,e,1):Te(t,1)}function Pu(t){return q((e,n)=>{let r=!1,i=null,s=null,o=()=>{if(s?.unsubscribe(),s=null,r){r=!1;let a=i;i=null,n.next(a)}};e.subscribe($(n,a=>{s?.unsubscribe(),r=!0,i=a,s=$(n,o,hr),fe(t(a)).subscribe(s)},()=>{o(),n.complete()},void 0,()=>{i=s=null}))})}function Fu(t,e=Nu){return q((n,r)=>{let i=null,s=null,o=null,a=()=>{if(i){i.unsubscribe(),i=null;let l=s;s=null,r.next(l)}};function c(){let l=o+t,u=e.now();if(u<l){i=this.schedule(void 0,l-u),r.add(i);return}a()}n.subscribe($(r,l=>{s=l,o=e.now(),i||(i=e.schedule(c,t),r.add(i))},()=>{a(),r.complete()},void 0,()=>{s=i=null}))})}function Bn(t){return q((e,n)=>{let r=!1;e.subscribe($(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function ct(t){return t<=0?()=>Ze:q((e,n)=>{let r=0;e.subscribe($(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Lu(t){return j(()=>t)}function Ue(t,e=Ye){return t=t??pT,q((n,r)=>{let i,s=!0;n.subscribe($(r,o=>{let a=e(o);(s||!t(i,a))&&(s=!1,i=a,r.next(o))}))})}function pT(t,e){return t===e}function li(t,e){return Ue((n,r)=>e?e(n[t],r[t]):n[t]===r[t])}function xa(t=mT){return q((e,n)=>{let r=!1;e.subscribe($(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function mT(){return new bn}function Es(t){return q((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Qt(t,e){let n=arguments.length>=2;return r=>r.pipe(t?ot((i,s)=>t(i,s,r)):Ye,ct(1),n?Bn(e):xa(()=>new bn))}function ui(t){return t<=0?()=>Ze:q((e,n)=>{let r=[];e.subscribe($(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function ju(t,e){let n=arguments.length>=2;return r=>r.pipe(t?ot((i,s)=>t(i,s,r)):Ye,ui(1),n?Bn(e):xa(()=>new bn))}function Uu(){return q((t,e)=>{let n,r=!1;t.subscribe($(e,i=>{let s=n;n=i,r&&e.next([s,i]),r=!0}))})}function Bu(t,e){return q(eb(t,e,arguments.length>=2,!0))}function tb(t={}){let{connector:e=()=>new Pe,resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return s=>{let o,a,c,l=0,u=!1,d=!1,f=()=>{a?.unsubscribe(),a=void 0},h=()=>{f(),o=c=void 0,u=d=!1},p=()=>{let m=o;h(),m?.unsubscribe()};return q((m,C)=>{l++,!d&&!u&&f();let v=c=c??e();C.add(()=>{l--,l===0&&!d&&!u&&(a=Vu(p,i))}),v.subscribe(C),!o&&l>0&&(o=new vn({next:E=>v.next(E),error:E=>{d=!0,f(),a=Vu(h,n,E),v.error(E)},complete:()=>{u=!0,f(),a=Vu(h,r),v.complete()}}),fe(m).subscribe(o))})(s)}}function Vu(t,e,...n){if(e===!0){t();return}if(e===!1)return;let r=new vn({next:()=>{r.unsubscribe(),t()}});return fe(e(...n)).subscribe(r)}function Fe(t,e,n){let r,i=!1;return t&&typeof t=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:n}=t:r=t??1/0,tb({connector:()=>new Ln(r,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function Cn(...t){let e=Gt(t);return q((n,r)=>{(e?wn(t,n,e):wn(t,n)).subscribe(r)})}function lt(t,e){return q((n,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();n.subscribe($(r,c=>{i?.unsubscribe();let l=0,u=s++;fe(t(c,u)).subscribe(i=$(r,d=>r.next(e?e(c,d,u,l++):d),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function $u(t){return q((e,n)=>{fe(t).subscribe($(n,()=>n.complete(),hr)),!n.closed&&e.subscribe(n)})}function Is(t,e=!1){return q((n,r)=>{let i=0;n.subscribe($(r,s=>{let o=t(s,i++);(o||e)&&r.next(s),!o&&r.complete()}))})}function Ge(t,e,n){let r=L(t)||e||n?{next:t,error:e,complete:n}:t;return r?q((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe($(s,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),s.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Ye}var gT="https://g.co/ng/security#xss",B=class extends Error{constructor(e,n){super(Jd(e,n)),this.code=e}};function Jd(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function Bs(t){return{toString:t}.toString()}var Na="__parameters__";function yT(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function Lb(t,e,n){return Bs(()=>{let r=yT(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,l,u){let d=c.hasOwnProperty(Na)?c[Na]:Object.defineProperty(c,Na,{value:[]})[Na];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var Ts=globalThis;function he(t){for(let e in t)if(t[e]===he)return e;throw Error("Could not find renamed property on target object.")}function ut(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(ut).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function nd(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var vT=he({__forward_ref__:he});function jb(t){return t.__forward_ref__=jb,t.toString=function(){return ut(this())},t}function Dt(t){return Ub(t)?t():t}function Ub(t){return typeof t=="function"&&t.hasOwnProperty(vT)&&t.__forward_ref__===jb}function U(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function zn(t){return{providers:t.providers||[],imports:t.imports||[]}}function nc(t){return nb(t,Vb)||nb(t,$b)}function Bb(t){return nc(t)!==null}function nb(t,e){return t.hasOwnProperty(e)?t[e]:null}function bT(t){let e=t&&(t[Vb]||t[$b]);return e||null}function rb(t){return t&&(t.hasOwnProperty(ib)||t.hasOwnProperty(wT))?t[ib]:null}var Vb=he({\u0275prov:he}),ib=he({\u0275inj:he}),$b=he({ngInjectableDef:he}),wT=he({ngInjectorDef:he}),Y=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=U({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Hb(t){return t&&!!t.\u0275providers}var CT=he({\u0275cmp:he}),ST=he({\u0275dir:he}),DT=he({\u0275pipe:he}),ET=he({\u0275mod:he}),Ua=he({\u0275fac:he}),Rs=he({__NG_ELEMENT_ID__:he}),sb=he({__NG_ENV_ID__:he});function Qd(t){return typeof t=="string"?t:t==null?"":String(t)}function IT(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Qd(t)}function TT(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new B(-200,t)}function Yd(t,e){throw new B(-201,!1)}var Z=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(Z||{}),rd;function Wb(){return rd}function St(t){let e=rd;return rd=t,e}function qb(t,e,n){let r=nc(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&Z.Optional)return null;if(e!==void 0)return e;Yd(t,"Injector")}var RT={},ks=RT,id="__NG_DI_FLAG__",Ba="ngTempTokenPath",kT="ngTokenPath",_T=/\n/gm,xT="\u0275",ob="__source",pi;function NT(){return pi}function Vn(t){let e=pi;return pi=t,e}function AT(t,e=Z.Default){if(pi===void 0)throw new B(-203,!1);return pi===null?qb(t,void 0,e):pi.get(t,e&Z.Optional?null:void 0,e)}function G(t,e=Z.Default){return(Wb()||AT)(Dt(t),e)}function N(t,e=Z.Default){return G(t,rc(e))}function rc(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function sd(t){let e=[];for(let n=0;n<t.length;n++){let r=Dt(t[n]);if(Array.isArray(r)){if(r.length===0)throw new B(900,!1);let i,s=Z.Default;for(let o=0;o<r.length;o++){let a=r[o],c=MT(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(G(i,s))}else e.push(G(r))}return e}function zb(t,e){return t[id]=e,t.prototype[id]=e,t}function MT(t){return t[id]}function OT(t,e,n,r){let i=t[Ba];throw e[ob]&&i.unshift(e[ob]),t.message=PT(`
`+t.message,i,n,r),t[kT]=i,t[Ba]=null,t}function PT(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==xT?t.slice(2):t;let i=ut(e);if(Array.isArray(e))i=e.map(ut).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):ut(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(_T,`
  `)}`}var Zd=zb(Lb("Optional"),8);var Gb=zb(Lb("SkipSelf"),4);function yi(t,e){let n=t.hasOwnProperty(Ua);return n?t[Ua]:null}function FT(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],s=e[r];if(n&&(i=n(i),s=n(s)),s!==i)return!1}return!0}function LT(t){return t.flat(Number.POSITIVE_INFINITY)}function Xd(t,e){t.forEach(n=>Array.isArray(n)?Xd(n,e):e(n))}function Kb(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Va(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function jT(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let s=i-2;t[i]=t[s],i--}t[e]=n,t[e+1]=r}}function ef(t,e,n){let r=Vs(t,e);return r>=0?t[r|1]=n:(r=~r,jT(t,r,e,n)),r}function Hu(t,e){let n=Vs(t,e);if(n>=0)return t[n|1]}function Vs(t,e){return UT(t,e,1)}function UT(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}var _s={},gt=[],vi=new Y(""),Jb=new Y("",-1),Qb=new Y(""),$a=class{get(e,n=ks){if(n===ks){let r=new Error(`NullInjectorError: No provider for ${ut(e)}!`);throw r.name="NullInjectorError",r}return n}},Yb=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Yb||{}),Xt=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Xt||{}),Hn=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Hn||{});function BT(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function od(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{let s=i,o=n[++r];$T(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function VT(t){return t===3||t===4||t===6}function $T(t){return t.charCodeAt(0)===64}function tf(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?ab(t,n,i,null,e[++r]):ab(t,n,i,null,null))}}return t}function ab(t,e,n,r,i){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let a=t[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<t.length;){let a=t[s];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[s+1]=i);return}else if(r===t[s+1]){t[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),r!==null&&t.splice(s++,0,r),i!==null&&t.splice(s++,0,i)}var Zb="ng-template";function HT(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&BT(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(nf(t))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===n)return!0}return!1}function nf(t){return t.type===4&&t.value!==Zb}function WT(t,e,n){let r=t.type===4&&!n?Zb:t.value;return e===r}function qT(t,e,n){let r=4,i=t.attrs,s=i!==null?KT(i):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!Mt(r)&&!Mt(c))return!1;if(o&&Mt(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!WT(t,c,n)||c===""&&e.length===1){if(Mt(r))return!1;o=!0}}else if(r&8){if(i===null||!HT(t,i,c,n)){if(Mt(r))return!1;o=!0}}else{let l=e[++a],u=zT(c,i,nf(t),n);if(u===-1){if(Mt(r))return!1;o=!0;continue}if(l!==""){let d;if(u>s?d="":d=i[u+1].toLowerCase(),r&2&&l!==d){if(Mt(r))return!1;o=!0}}}}return Mt(r)||o}function Mt(t){return(t&1)===0}function zT(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){let o=e[i];if(o===t)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return JT(e,t)}function GT(t,e,n=!1){for(let r=0;r<e.length;r++)if(qT(t,e[r],n))return!0;return!1}function KT(t){for(let e=0;e<t.length;e++){let n=t[e];if(VT(n))return e}return t.length}function JT(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function cb(t,e){return t?":not("+e.trim()+")":e}function QT(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(r&2){let a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!Mt(o)&&(e+=cb(s,i),i=""),r=o,s=s||!Mt(r);n++}return i!==""&&(e+=cb(s,i)),e}function YT(t){return t.map(QT).join(",")}function ZT(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let s=t[r];if(typeof s=="string")i===2?s!==""&&e.push(s,t[++r]):i===8&&n.push(s);else{if(!Mt(i))break;i=s}r++}return{attrs:e,classes:n}}function rn(t){return Bs(()=>{let e=rw(t),n=x(S({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Yb.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Xt.Emulated,styles:t.styles||gt,_:null,schemas:t.schemas||null,tView:null,id:""});iw(n);let r=t.dependencies;return n.directiveDefs=ub(r,!1),n.pipeDefs=ub(r,!0),n.id=t0(n),n})}function XT(t){return br(t)||Xb(t)}function e0(t){return t!==null}function Gn(t){return Bs(()=>({type:t.type,bootstrap:t.bootstrap||gt,declarations:t.declarations||gt,imports:t.imports||gt,exports:t.exports||gt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function lb(t,e){if(t==null)return _s;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],s,o,a=Hn.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(n[s]=a!==Hn.None?[r,a]:r,e[s]=o):n[s]=r}return n}function Ei(t){return Bs(()=>{let e=rw(t);return iw(e),e})}function br(t){return t[CT]||null}function Xb(t){return t[ST]||null}function ew(t){return t[DT]||null}function tw(t){let e=br(t)||Xb(t)||ew(t);return e!==null?e.standalone:!1}function nw(t,e){let n=t[ET]||null;if(!n&&e===!0)throw new Error(`Type ${ut(t)} does not have '\u0275mod' property.`);return n}function rw(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||_s,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||gt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:lb(t.inputs,e),outputs:lb(t.outputs),debugInfo:null}}function iw(t){t.features?.forEach(e=>e(t))}function ub(t,e){if(!t)return null;let n=e?ew:XT;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(e0)}function t0(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function ic(t){return{\u0275providers:t}}function rf(...t){return{\u0275providers:sw(!0,t),\u0275fromNgModule:!0}}function sw(t,...e){let n=[],r=new Set,i,s=o=>{n.push(o)};return Xd(e,o=>{let a=o;ad(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&ow(i,s),n}function ow(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];sf(i,s=>{e(s,r)})}}function ad(t,e,n,r){if(t=Dt(t),!t)return!1;let i=null,s=rb(t),o=!s&&br(t);if(!s&&!o){let c=t.ngModule;if(s=rb(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=t}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of c)ad(l,e,n,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let l;try{Xd(s.imports,u=>{ad(u,e,n,r)&&(l||=[],l.push(u))})}finally{}l!==void 0&&ow(l,e)}if(!a){let l=yi(i)||(()=>new i);e({provide:i,useFactory:l,deps:gt},i),e({provide:Qb,useValue:i,multi:!0},i),e({provide:vi,useValue:()=>G(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let l=t;sf(c,u=>{e(u,l)})}}else return!1;return i!==t&&t.providers!==void 0}function sf(t,e){for(let n of t)Hb(n)&&(n=n.\u0275providers),Array.isArray(n)?sf(n,e):e(n)}var n0=he({provide:String,useValue:he});function aw(t){return t!==null&&typeof t=="object"&&n0 in t}function r0(t){return!!(t&&t.useExisting)}function i0(t){return!!(t&&t.useFactory)}function cd(t){return typeof t=="function"}var sc=new Y(""),Ma={},s0={},Wu;function of(){return Wu===void 0&&(Wu=new $a),Wu}var Et=class{},xs=class extends Et{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,ud(e,o=>this.processProvider(o)),this.records.set(Jb,di(void 0,this)),i.has("environment")&&this.records.set(Et,di(void 0,this));let s=this.records.get(sc);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(Qb,gt,Z.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=oe(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),oe(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=Vn(this),r=St(void 0),i;try{return e()}finally{Vn(n),St(r)}}get(e,n=ks,r=Z.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(sb))return e[sb](this);r=rc(r);let i,s=Vn(this),o=St(void 0);try{if(!(r&Z.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=d0(e)&&nc(e);l&&this.injectableDefInScope(l)?c=di(ld(e),Ma):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&Z.Self?of():this.parent;return n=r&Z.Optional&&n===ks?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[Ba]=a[Ba]||[]).unshift(ut(e)),s)throw a;return OT(a,e,"R3InjectorError",this.source)}else throw a}finally{St(o),Vn(s)}}resolveInjectorInitializers(){let e=oe(null),n=Vn(this),r=St(void 0),i;try{let s=this.get(vi,gt,Z.Self);for(let o of s)o()}finally{Vn(n),St(r),oe(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(ut(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new B(205,!1)}processProvider(e){e=Dt(e);let n=cd(e)?e:Dt(e&&e.provide),r=a0(e);if(!cd(e)&&e.multi===!0){let i=this.records.get(n);i||(i=di(void 0,Ma,!0),i.factory=()=>sd(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=oe(null);try{return n.value===Ma&&(n.value=s0,n.value=n.factory()),typeof n.value=="object"&&n.value&&u0(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{oe(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Dt(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function ld(t){let e=nc(t),n=e!==null?e.factory:yi(t);if(n!==null)return n;if(t instanceof Y)throw new B(204,!1);if(t instanceof Function)return o0(t);throw new B(204,!1)}function o0(t){if(t.length>0)throw new B(204,!1);let n=bT(t);return n!==null?()=>n.factory(t):()=>new t}function a0(t){if(aw(t))return di(void 0,t.useValue);{let e=c0(t);return di(e,Ma)}}function c0(t,e,n){let r;if(cd(t)){let i=Dt(t);return yi(i)||ld(i)}else if(aw(t))r=()=>Dt(t.useValue);else if(i0(t))r=()=>t.useFactory(...sd(t.deps||[]));else if(r0(t))r=()=>G(Dt(t.useExisting));else{let i=Dt(t&&(t.useClass||t.provide));if(l0(t))r=()=>new i(...sd(t.deps));else return yi(i)||ld(i)}return r}function di(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function l0(t){return!!t.deps}function u0(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function d0(t){return typeof t=="function"||typeof t=="object"&&t instanceof Y}function ud(t,e){for(let n of t)Array.isArray(n)?ud(n,e):n&&Hb(n)?ud(n.\u0275providers,e):e(n)}function Tr(t,e){t instanceof xs&&t.assertNotDestroyed();let n,r=Vn(t),i=St(void 0);try{return e()}finally{Vn(r),St(i)}}function cw(){return Wb()!==void 0||NT()!=null}function lw(t){if(!cw())throw new B(-203,!1)}function f0(t){return typeof t=="function"}var Tn=0,X=1,H=2,Ke=3,Pt=4,Lt=5,Ha=6,Ns=7,Ft=8,bi=9,en=10,Be=11,As=12,db=13,Ii=14,tn=15,$s=16,fi=17,Sn=18,oc=19,uw=20,$n=21,qu=22,wr=23,Dn=25,dw=1;var Cr=7,Wa=8,wi=9,yt=10,af=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(af||{});function mi(t){return Array.isArray(t)&&typeof t[dw]=="object"}function Rn(t){return Array.isArray(t)&&t[dw]===!0}function cf(t){return(t.flags&4)!==0}function ac(t){return t.componentOffset>-1}function cc(t){return(t.flags&1)===1}function Hs(t){return!!t.template}function h0(t){return(t[H]&512)!==0}var dd=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function fw(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function lc(){return hw}function hw(t){return t.type.prototype.ngOnChanges&&(t.setInput=m0),p0}lc.ngInherit=!0;function p0(){let t=mw(this),e=t?.current;if(e){let n=t.previous;if(n===_s)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function m0(t,e,n,r,i){let s=this.declaredInputs[r],o=mw(t)||g0(t,{previous:_s,current:null}),a=o.current||(o.current={}),c=o.previous,l=c[s];a[s]=new dd(l&&l.currentValue,n,c===_s),fw(t,e,i,n)}var pw="__ngSimpleChanges__";function mw(t){return t[pw]||null}function g0(t,e){return t[pw]=e}var fb=null;var Yt=function(t,e,n){fb?.(t,e,n)},y0="svg",v0="math",b0=!1;function w0(){return b0}function nn(t){for(;Array.isArray(t);)t=t[Tn];return t}function gw(t,e){return nn(e[t])}function It(t,e){return nn(e[t.index])}function yw(t,e){return t.data[e]}function Rr(t,e){let n=e[t];return mi(n)?n:n[Tn]}function C0(t){return(t[H]&4)===4}function lf(t){return(t[H]&128)===128}function S0(t){return Rn(t[Ke])}function Ci(t,e){return e==null?null:t[e]}function vw(t){t[fi]=0}function D0(t){t[H]&1024||(t[H]|=1024,lf(t)&&Ms(t))}function E0(t,e){for(;t>0;)e=e[Ii],t--;return e}function uf(t){return!!(t[H]&9216||t[wr]?.dirty)}function fd(t){t[en].changeDetectionScheduler?.notify(1),uf(t)?Ms(t):t[H]&64&&(w0()?(t[H]|=1024,Ms(t)):t[en].changeDetectionScheduler?.notify())}function Ms(t){t[en].changeDetectionScheduler?.notify();let e=Os(t);for(;e!==null&&!(e[H]&8192||(e[H]|=8192,!lf(e)));)e=Os(e)}function bw(t,e){if((t[H]&256)===256)throw new B(911,!1);t[$n]===null&&(t[$n]=[]),t[$n].push(e)}function I0(t,e){if(t[$n]===null)return;let n=t[$n].indexOf(e);n!==-1&&t[$n].splice(n,1)}function Os(t){let e=t[Ke];return Rn(e)?e[Ke]:e}var ee={lFrame:Tw(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function T0(){return ee.lFrame.elementDepthCount}function R0(){ee.lFrame.elementDepthCount++}function k0(){ee.lFrame.elementDepthCount--}function ww(){return ee.bindingsEnabled}function _0(){return ee.skipHydrationRootTNode!==null}function x0(t){return ee.skipHydrationRootTNode===t}function N0(){ee.skipHydrationRootTNode=null}function ye(){return ee.lFrame.lView}function dt(){return ee.lFrame.tView}function Ti(t){return ee.lFrame.contextLView=t,t[Ft]}function Ri(t){return ee.lFrame.contextLView=null,t}function jt(){let t=Cw();for(;t!==null&&t.type===64;)t=t.parent;return t}function Cw(){return ee.lFrame.currentTNode}function A0(){let t=ee.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function kr(t,e){let n=ee.lFrame;n.currentTNode=t,n.isParent=e}function df(){return ee.lFrame.isParent}function Sw(){ee.lFrame.isParent=!1}function M0(t){return ee.lFrame.bindingIndex=t}function ff(){return ee.lFrame.bindingIndex++}function O0(t){let e=ee.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function P0(){return ee.lFrame.inI18n}function F0(t,e){let n=ee.lFrame;n.bindingIndex=n.bindingRootIndex=t,hd(e)}function L0(){return ee.lFrame.currentDirectiveIndex}function hd(t){ee.lFrame.currentDirectiveIndex=t}function j0(t){let e=ee.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function Dw(){return ee.lFrame.currentQueryIndex}function hf(t){ee.lFrame.currentQueryIndex=t}function U0(t){let e=t[X];return e.type===2?e.declTNode:e.type===1?t[Lt]:null}function Ew(t,e,n){if(n&Z.SkipSelf){let i=e,s=t;for(;i=i.parent,i===null&&!(n&Z.Host);)if(i=U0(s),i===null||(s=s[Ii],i.type&10))break;if(i===null)return!1;e=i,t=s}let r=ee.lFrame=Iw();return r.currentTNode=e,r.lView=t,!0}function pf(t){let e=Iw(),n=t[X];ee.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function Iw(){let t=ee.lFrame,e=t===null?null:t.child;return e===null?Tw(t):e}function Tw(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function Rw(){let t=ee.lFrame;return ee.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var kw=Rw;function mf(){let t=Rw();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function B0(t){return(ee.lFrame.contextLView=E0(t,ee.lFrame.contextLView))[Ft]}function ki(){return ee.lFrame.selectedIndex}function Sr(t){ee.lFrame.selectedIndex=t}function gf(){let t=ee.lFrame;return yw(t.tView,t.selectedIndex)}function V0(){return ee.lFrame.currentNamespace}var _w=!0;function uc(){return _w}function dc(t){_w=t}function $0(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=hw(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function fc(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),u!=null&&(t.destroyHooks??=[]).push(n,u)}}function Oa(t,e,n){xw(t,e,3,n)}function Pa(t,e,n,r){(t[H]&3)===n&&xw(t,e,n,r)}function zu(t,e){let n=t[H];(n&3)===e&&(n&=16383,n+=1,t[H]=n)}function xw(t,e,n,r){let i=r!==void 0?t[fi]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(t[fi]+=65536),(a<s||s==-1)&&(H0(t,n,e,c),t[fi]=(t[fi]&4294901760)+c+2),c++}function hb(t,e){Yt(4,t,e);let n=oe(null);try{e.call(t)}finally{oe(n),Yt(5,t,e)}}function H0(t,e,n,r){let i=n[r]<0,s=n[r+1],o=i?-n[r]:n[r],a=t[o];i?t[H]>>14<t[fi]>>16&&(t[H]&3)===e&&(t[H]+=16384,hb(a,s)):hb(a,s)}var gi=-1,Ps=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function W0(t){return t instanceof Ps}function q0(t){return(t.flags&8)!==0}function z0(t){return(t.flags&16)!==0}function Nw(t){return t!==gi}function qa(t){return t&32767}function G0(t){return t>>16}function za(t,e){let n=G0(t),r=e;for(;n>0;)r=r[Ii],n--;return r}var pd=!0;function pb(t){let e=pd;return pd=t,e}var K0=256,Aw=K0-1,Mw=5,J0=0,Zt={};function Q0(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Rs)&&(r=n[Rs]),r==null&&(r=n[Rs]=J0++);let i=r&Aw,s=1<<i;e.data[t+(i>>Mw)]|=s}function Ow(t,e){let n=Pw(t,e);if(n!==-1)return n;let r=e[X];r.firstCreatePass&&(t.injectorIndex=e.length,Gu(r.data,t),Gu(e,null),Gu(r.blueprint,null));let i=yf(t,e),s=t.injectorIndex;if(Nw(i)){let o=qa(i),a=za(i,e),c=a[X].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=i,s}function Gu(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Pw(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function yf(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=Bw(i),r===null)return gi;if(n++,i=i[Ii],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return gi}function Y0(t,e,n){Q0(t,e,n)}function Fw(t,e,n){if(n&Z.Optional||t!==void 0)return t;Yd(e,"NodeInjector")}function Lw(t,e,n,r){if(n&Z.Optional&&r===void 0&&(r=null),!(n&(Z.Self|Z.Host))){let i=t[bi],s=St(void 0);try{return i?i.get(e,r,n&Z.Optional):qb(e,r,n&Z.Optional)}finally{St(s)}}return Fw(r,e,n)}function jw(t,e,n,r=Z.Default,i){if(t!==null){if(e[H]&2048&&!(r&Z.Self)){let o=tR(t,e,n,r,Zt);if(o!==Zt)return o}let s=Uw(t,e,n,r,Zt);if(s!==Zt)return s}return Lw(e,n,r,i)}function Uw(t,e,n,r,i){let s=X0(n);if(typeof s=="function"){if(!Ew(e,t,r))return r&Z.Host?Fw(i,n,r):Lw(e,n,r,i);try{let o;if(o=s(r),o==null&&!(r&Z.Optional))Yd(n);else return o}finally{kw()}}else if(typeof s=="number"){let o=null,a=Pw(t,e),c=gi,l=r&Z.Host?e[tn][Lt]:null;for((a===-1||r&Z.SkipSelf)&&(c=a===-1?yf(t,e):e[a+8],c===gi||!gb(r,!1)?a=-1:(o=e[X],a=qa(c),e=za(c,e)));a!==-1;){let u=e[X];if(mb(s,a,u.data)){let d=Z0(a,e,n,o,r,l);if(d!==Zt)return d}c=e[a+8],c!==gi&&gb(r,e[X].data[a+8]===l)&&mb(s,a,e)?(o=u,a=qa(c),e=za(c,e)):a=-1}}return i}function Z0(t,e,n,r,i,s){let o=e[X],a=o.data[t+8],c=r==null?ac(a)&&pd:r!=o&&(a.type&3)!==0,l=i&Z.Host&&s===a,u=Fa(a,o,n,c,l);return u!==null?Si(e,o,u,a):Zt}function Fa(t,e,n,r,i){let s=t.providerIndexes,o=e.data,a=s&1048575,c=t.directiveStart,l=t.directiveEnd,u=s>>20,d=r?a:a+u,f=i?a+u:l;for(let h=d;h<f;h++){let p=o[h];if(h<c&&n===p||h>=c&&p.type===n)return h}if(i){let h=o[c];if(h&&Hs(h)&&h.type===n)return c}return null}function Si(t,e,n,r){let i=t[n],s=e.data;if(W0(i)){let o=i;o.resolving&&TT(IT(s[n]));let a=pb(o.canSeeViewProviders);o.resolving=!0;let c,l=o.injectImpl?St(o.injectImpl):null,u=Ew(t,r,Z.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&$0(n,s[n],e)}finally{l!==null&&St(l),pb(a),o.resolving=!1,kw()}}return i}function X0(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Rs)?t[Rs]:void 0;return typeof e=="number"?e>=0?e&Aw:eR:e}function mb(t,e,n){let r=1<<t;return!!(n[e+(t>>Mw)]&r)}function gb(t,e){return!(t&Z.Self)&&!(t&Z.Host&&e)}var vr=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return jw(this._tNode,this._lView,e,rc(r),n)}};function eR(){return new vr(jt(),ye())}function _r(t){return Bs(()=>{let e=t.prototype.constructor,n=e[Ua]||md(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let s=i[Ua]||md(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function md(t){return Ub(t)?()=>{let e=md(Dt(t));return e&&e()}:yi(t)}function tR(t,e,n,r,i){let s=t,o=e;for(;s!==null&&o!==null&&o[H]&2048&&!(o[H]&512);){let a=Uw(s,o,n,r|Z.Self,Zt);if(a!==Zt)return a;let c=s.parent;if(!c){let l=o[uw];if(l){let u=l.get(n,Zt,r);if(u!==Zt)return u}c=Bw(o),o=o[Ii]}s=c}return i}function Bw(t){let e=t[X],n=e.type;return n===2?e.declTNode:n===1?t[Lt]:null}function yb(t,e=null,n=null,r){let i=Vw(t,e,n,r);return i.resolveInjectorInitializers(),i}function Vw(t,e=null,n=null,r,i=new Set){let s=[n||gt,rf(t)];return r=r||(typeof t=="object"?void 0:ut(t)),new xs(s,e||of(),r||null,i)}var _i=(()=>{let e=class e{static create(r,i){if(Array.isArray(r))return yb({name:""},i,r,"");{let s=r.name??"";return yb({name:s},r.parent,r.providers,s)}}};e.THROW_IF_NOT_FOUND=ks,e.NULL=new $a,e.\u0275prov=U({token:e,providedIn:"any",factory:()=>G(Jb)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})();var nR="ngOriginalError";function Ku(t){return t[nR]}var En=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Ku(e);for(;n&&Ku(n);)n=Ku(n);return n||null}},$w=new Y("",{providedIn:"root",factory:()=>N(En).handleError.bind(void 0)}),Ws=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=rR,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),gd=class extends Ws{constructor(e){super(),this._lView=e}onDestroy(e){return bw(this._lView,e),()=>I0(this._lView,e)}};function rR(){return new gd(ye())}function iR(){return xi(jt(),ye())}function xi(t,e){return new Kn(It(t,e))}var Kn=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=iR;let t=e;return t})();function sR(t){return t instanceof Kn?t.nativeElement:t}var yd=class extends Pe{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,cw()&&(this.destroyRef=N(Ws,{optional:!0})??void 0)}emit(e){let n=oe(null);try{super.next(e)}finally{oe(n)}}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=Ju(s),i&&(i=Ju(i)),o&&(o=Ju(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof Ie&&e.add(a),a}};function Ju(t){return e=>{setTimeout(t,void 0,e)}}var we=yd;function oR(){return this._results[Symbol.iterator]()}var vd=class t{get changes(){return this._changes??=new we}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let n=t.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=oR)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let r=LT(e);(this._changesDetected=!FT(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function Hw(t){return(t.flags&128)===128}var Ww=new Map,aR=0;function cR(){return aR++}function lR(t){Ww.set(t[oc],t)}function uR(t){Ww.delete(t[oc])}var vb="__ngContext__";function Wn(t,e){mi(e)?(t[vb]=e[oc],lR(e)):t[vb]=e}function qw(t){return Gw(t[As])}function zw(t){return Gw(t[Pt])}function Gw(t){for(;t!==null&&!Rn(t);)t=t[Pt];return t}var bd;function Kw(t){bd=t}function dR(){if(bd!==void 0)return bd;if(typeof document<"u")return document;throw new B(210,!1)}var vf=new Y("",{providedIn:"root",factory:()=>fR}),fR="ng",bf=new Y(""),Ni=new Y("",{providedIn:"platform",factory:()=>"unknown"});var wf=new Y("",{providedIn:"root",factory:()=>dR().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var hR="h",pR="b";var mR=()=>null;function Cf(t,e,n=!1){return mR(t,e,n)}var Jw=!1,gR=new Y("",{providedIn:"root",factory:()=>Jw});var wd=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${gT})`}};function Sf(t){return t instanceof wd?t.changingThisBreaksApplicationSecurity:t}var yR=/^>|^->|<!--|-->|--!>|<!-$/g,vR=/(<|>)/g,bR="\u200B$1\u200B";function wR(t){return t.replace(yR,e=>e.replace(vR,bR))}function Qw(t){return t instanceof Function?t():t}var In=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(In||{}),CR;function Df(t,e){return CR(t,e)}function hi(t,e,n,r,i){if(r!=null){let s,o=!1;Rn(r)?s=r:mi(r)&&(o=!0,r=r[Tn]);let a=nn(r);t===0&&n!==null?i==null?tC(e,n,a):Ga(e,n,a,i||null,!0):t===1&&n!==null?Ga(e,n,a,i||null,!0):t===2?UR(e,a,o):t===3&&e.destroyNode(a),s!=null&&VR(e,t,s,n,i)}}function SR(t,e){return t.createText(e)}function DR(t,e,n){t.setValue(e,n)}function ER(t,e){return t.createComment(wR(e))}function Yw(t,e,n){return t.createElement(e,n)}function IR(t,e){Zw(t,e),e[Tn]=null,e[Lt]=null}function TR(t,e,n,r,i,s){r[Tn]=i,r[Lt]=e,pc(t,r,n,1,i,s)}function Zw(t,e){e[en].changeDetectionScheduler?.notify(1),pc(t,e,e[Be],2,null,null)}function RR(t){let e=t[As];if(!e)return Qu(t[X],t);for(;e;){let n=null;if(mi(e))n=e[As];else{let r=e[yt];r&&(n=r)}if(!n){for(;e&&!e[Pt]&&e!==t;)mi(e)&&Qu(e[X],e),e=e[Ke];e===null&&(e=t),mi(e)&&Qu(e[X],e),n=e&&e[Pt]}e=n}}function kR(t,e,n,r){let i=yt+r,s=n.length;r>0&&(n[i-1][Pt]=e),r<s-yt?(e[Pt]=n[i],Kb(n,yt+r,e)):(n.push(e),e[Pt]=null),e[Ke]=n;let o=e[$s];o!==null&&n!==o&&_R(o,e);let a=e[Sn];a!==null&&a.insertView(t),fd(e),e[H]|=128}function _R(t,e){let n=t[wi],i=e[Ke][Ke][tn];e[tn]!==i&&(t[H]|=af.HasTransplantedViews),n===null?t[wi]=[e]:n.push(e)}function Xw(t,e){let n=t[wi],r=n.indexOf(e);n.splice(r,1)}function Cd(t,e){if(t.length<=yt)return;let n=yt+e,r=t[n];if(r){let i=r[$s];i!==null&&i!==t&&Xw(i,r),e>0&&(t[n-1][Pt]=r[Pt]);let s=Va(t,yt+e);IR(r[X],r);let o=s[Sn];o!==null&&o.detachView(s[X]),r[Ke]=null,r[Pt]=null,r[H]&=-129}return r}function eC(t,e){if(!(e[H]&256)){let n=e[Be];n.destroyNode&&pc(t,e,n,3,null,null),RR(e)}}function Qu(t,e){if(e[H]&256)return;let n=oe(null);try{e[H]&=-129,e[H]|=256,e[wr]&&bv(e[wr]),NR(t,e),xR(t,e),e[X].type===1&&e[Be].destroy();let r=e[$s];if(r!==null&&Rn(e[Ke])){r!==e[Ke]&&Xw(r,e);let i=e[Sn];i!==null&&i.detachView(t)}uR(e)}finally{oe(n)}}function xR(t,e){let n=t.cleanup,r=e[Ns];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[n[s+1]];n[s].call(o)}r!==null&&(e[Ns]=null);let i=e[$n];if(i!==null){e[$n]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function NR(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Ps)){let s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];Yt(4,a,c);try{c.call(a)}finally{Yt(5,a,c)}}else{Yt(4,i,s);try{s.call(i)}finally{Yt(5,i,s)}}}}}function AR(t,e,n){return MR(t,e.parent,n)}function MR(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[Tn];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=t.data[r.directiveStart+i];if(s===Xt.None||s===Xt.Emulated)return null}return It(r,n)}}function Ga(t,e,n,r,i){t.insertBefore(e,n,r,i)}function tC(t,e,n){t.appendChild(e,n)}function bb(t,e,n,r,i){r!==null?Ga(t,e,n,r,i):tC(t,e,n)}function OR(t,e,n,r){t.removeChild(e,n,r)}function Ef(t,e){return t.parentNode(e)}function PR(t,e){return t.nextSibling(e)}function FR(t,e,n){return jR(t,e,n)}function LR(t,e,n){return t.type&40?It(t,n):null}var jR=LR,wb;function hc(t,e,n,r){let i=AR(t,r,e),s=e[Be],o=r.parent||e[Lt],a=FR(o,r,e);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)bb(s,i,n[c],a,!1);else bb(s,i,n,a,!1);wb!==void 0&&wb(s,r,e,n,i)}function La(t,e){if(e!==null){let n=e.type;if(n&3)return It(e,t);if(n&4)return Sd(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return La(t,r);{let i=t[e.index];return Rn(i)?Sd(-1,i):nn(i)}}else{if(n&32)return Df(e,t)()||nn(t[e.index]);{let r=nC(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Os(t[tn]);return La(i,r)}else return La(t,e.next)}}}return null}function nC(t,e){if(e!==null){let r=t[tn][Lt],i=e.projection;return r.projection[i]}return null}function Sd(t,e){let n=yt+t+1;if(n<e.length){let r=e[n],i=r[X].firstChild;if(i!==null)return La(r,i)}return e[Cr]}function UR(t,e,n){let r=Ef(t,e);r&&OR(t,r,e,n)}function If(t,e,n,r,i,s,o){for(;n!=null;){let a=r[n.index],c=n.type;if(o&&e===0&&(a&&Wn(nn(a),r),n.flags|=2),(n.flags&32)!==32)if(c&8)If(t,e,n.child,r,i,s,!1),hi(e,t,i,a,s);else if(c&32){let l=Df(n,r),u;for(;u=l();)hi(e,t,i,u,s);hi(e,t,i,a,s)}else c&16?BR(t,e,r,n,i,s):hi(e,t,i,a,s);n=o?n.projectionNext:n.next}}function pc(t,e,n,r,i,s){If(n,r,t.firstChild,e,i,s,!1)}function BR(t,e,n,r,i,s){let o=n[tn],c=o[Lt].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];hi(e,t,i,u,s)}else{let l=c,u=o[Ke];Hw(r)&&(l.flags|=128),If(t,e,l,u,i,s,!0)}}function VR(t,e,n,r,i){let s=n[Cr],o=nn(n);s!==o&&hi(e,t,r,s,i);for(let a=yt;a<n.length;a++){let c=n[a];pc(c[X],c,t,e,r,s)}}function $R(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=r.indexOf("-")===-1?void 0:In.DashCase;i==null?t.removeStyle(n,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=In.Important),t.setStyle(n,r,i,s))}}function HR(t,e,n){t.setAttribute(e,"style",n)}function rC(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function iC(t,e,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&od(t,e,r),i!==null&&rC(t,e,i),s!==null&&HR(t,e,s)}var Jn={};function Ae(t=1){sC(dt(),ye(),ki()+t,!1)}function sC(t,e,n,r){if(!r)if((e[H]&3)===3){let s=t.preOrderCheckHooks;s!==null&&Oa(e,s,n)}else{let s=t.preOrderHooks;s!==null&&Pa(e,s,0,n)}Sr(n)}function Xe(t,e=Z.Default){let n=ye();if(n===null)return G(t,e);let r=jt();return jw(r,n,Dt(t),e)}function oC(t,e,n,r,i,s){let o=oe(null);try{let a=null;i&Hn.SignalBased&&(a=e[r][Fn]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&Hn.HasDecoratorInputTransform&&(s=t.inputTransforms[r].call(e,s)),t.setInput!==null?t.setInput(e,a,s,n,r):fw(e,a,r,s)}finally{oe(o)}}function WR(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Sr(~i);else{let s=i,o=n[++r],a=n[++r];F0(o,s);let c=e[s];a(2,c)}}}finally{Sr(-1)}}function mc(t,e,n,r,i,s,o,a,c,l,u){let d=e.blueprint.slice();return d[Tn]=i,d[H]=r|4|128|8|64,(l!==null||t&&t[H]&2048)&&(d[H]|=2048),vw(d),d[Ke]=d[Ii]=t,d[Ft]=n,d[en]=o||t&&t[en],d[Be]=a||t&&t[Be],d[bi]=c||t&&t[bi]||null,d[Lt]=s,d[oc]=cR(),d[Ha]=u,d[uw]=l,d[tn]=e.type==2?t[tn]:d,d}function qs(t,e,n,r,i){let s=t.data[e];if(s===null)s=qR(t,e,n,r,i),P0()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let o=A0();s.injectorIndex=o===null?-1:o.injectorIndex}return kr(s,!0),s}function qR(t,e,n,r,i){let s=Cw(),o=df(),a=o?s:s&&s.parent,c=t.data[e]=YR(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=c),s!==null&&(o?s.child==null&&c.parent!==null&&(s.child=c):s.next===null&&(s.next=c,c.prev=s)),c}function aC(t,e,n,r){if(n===0)return-1;let i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function cC(t,e,n,r,i){let s=ki(),o=r&2;try{Sr(-1),o&&e.length>Dn&&sC(t,e,Dn,!1),Yt(o?2:0,i),n(r,i)}finally{Sr(s),Yt(o?3:1,i)}}function Tf(t,e,n){if(cf(e)){let r=oe(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=t.data[o];if(a.contentQueries){let c=n[o];a.contentQueries(1,c,o)}}}finally{oe(r)}}}function Rf(t,e,n){ww()&&(rk(t,e,n,It(n,e)),(n.flags&64)===64&&fC(t,e,n))}function kf(t,e,n=It){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?n(e,t):t[o];t[i++]=a}}}function lC(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=_f(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function _f(t,e,n,r,i,s,o,a,c,l,u){let d=Dn+r,f=d+i,h=zR(d,f),p=typeof l=="function"?l():l;return h[X]={type:t,blueprint:h,template:n,queries:null,viewQuery:a,declTNode:e,data:h.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:p,incompleteFirstPass:!1,ssrId:u}}function zR(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Jn);return n}function GR(t,e,n,r){let s=r.get(gR,Jw)||n===Xt.ShadowDom,o=t.selectRootElement(e,s);return KR(o),o}function KR(t){JR(t)}var JR=()=>null;function QR(t,e,n,r){let i=mC(e);i.push(n),t.firstCreatePass&&gC(t).push(r,i.length-1)}function YR(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return _0()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function Cb(t,e,n,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,c=Hn.None;Array.isArray(o)?(a=o[0],c=o[1]):a=o;let l=s;if(i!==null){if(!i.hasOwnProperty(s))continue;l=i[s]}t===0?Sb(r,n,l,a,c):Sb(r,n,l,a)}return r}function Sb(t,e,n,r,i){let s;t.hasOwnProperty(n)?(s=t[n]).push(e,r):s=t[n]=[e,r],i!==void 0&&s.push(i)}function ZR(t,e,n){let r=e.directiveStart,i=e.directiveEnd,s=t.data,o=e.attrs,a=[],c=null,l=null;for(let u=r;u<i;u++){let d=s[u],f=n?n.get(d):null,h=f?f.inputs:null,p=f?f.outputs:null;c=Cb(0,d.inputs,u,c,h),l=Cb(1,d.outputs,u,l,p);let m=c!==null&&o!==null&&!nf(e)?pk(c,u,o):null;a.push(m)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function XR(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function uC(t,e,n,r,i,s,o,a){let c=It(e,n),l=e.inputs,u;!a&&l!=null&&(u=l[r])?(Nf(t,n,u,r,i),ac(e)&&ek(n,e.index)):e.type&3?(r=XR(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(c,r,i)):e.type&12}function ek(t,e){let n=Rr(e,t);n[H]&16||(n[H]|=64)}function xf(t,e,n,r){if(ww()){let i=r===null?null:{"":-1},s=sk(t,n),o,a;s===null?o=a=null:[o,a]=s,o!==null&&dC(t,e,n,o,i,a),i&&ok(n,r,i)}n.mergedAttrs=tf(n.mergedAttrs,n.attrs)}function dC(t,e,n,r,i,s){for(let l=0;l<r.length;l++)Y0(Ow(n,e),t,r[l].type);ck(n,t.data.length,r.length);for(let l=0;l<r.length;l++){let u=r[l];u.providersResolver&&u.providersResolver(u)}let o=!1,a=!1,c=aC(t,e,r.length,null);for(let l=0;l<r.length;l++){let u=r[l];n.mergedAttrs=tf(n.mergedAttrs,u.hostAttrs),lk(t,n,e,c,u),ak(c,u,i),u.contentQueries!==null&&(n.flags|=4),(u.hostBindings!==null||u.hostAttrs!==null||u.hostVars!==0)&&(n.flags|=64);let d=u.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}ZR(t,n,s)}function tk(t,e,n,r,i){let s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let a=~e.index;nk(o)!=a&&o.push(a),o.push(n,r,s)}}function nk(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function rk(t,e,n,r){let i=n.directiveStart,s=n.directiveEnd;ac(n)&&uk(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||Ow(n,e),Wn(r,e);let o=n.initialInputs;for(let a=i;a<s;a++){let c=t.data[a],l=Si(e,t,a,n);if(Wn(l,e),o!==null&&hk(e,a-i,l,c,n,o),Hs(c)){let u=Rr(n.index,e);u[Ft]=Si(e,t,a,n)}}}function fC(t,e,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,o=L0();try{Sr(s);for(let a=r;a<i;a++){let c=t.data[a],l=e[a];hd(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&ik(c,l)}}finally{Sr(-1),hd(o)}}function ik(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function sk(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if(GT(e,o.selectors,!1))if(r||(r=[]),Hs(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let c=a.length;Dd(t,e,c)}else r.unshift(o),Dd(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function Dd(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function ok(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let s=n[e[i+1]];if(s==null)throw new B(-301,!1);r.push(e[i],s)}}}function ak(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Hs(e)&&(n[""]=t)}}function ck(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function lk(t,e,n,r,i){t.data[r]=i;let s=i.factory||(i.factory=yi(i.type,!0)),o=new Ps(s,Hs(i),Xe);t.blueprint[r]=o,n[r]=o,tk(t,e,r,aC(t,n,i.hostVars,Jn),i)}function uk(t,e,n){let r=It(e,t),i=lC(n),s=t[en].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let a=gc(t,mc(t,i,null,o,r,e,null,s.createRenderer(r,n),null,null,null));t[e.index]=a}function dk(t,e,n,r,i,s){let o=It(t,e);fk(e[Be],o,s,t.value,n,r,i)}function fk(t,e,n,r,i,s,o){if(s==null)t.removeAttribute(e,i,n);else{let a=o==null?Qd(s):o(s,r||"",i);t.setAttribute(e,i,a,n)}}function hk(t,e,n,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let c=o[a++],l=o[a++],u=o[a++],d=o[a++];oC(r,n,c,l,u,d)}}function pk(t,e,n){let r=null,i=0;for(;i<n.length;){let s=n[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(t.hasOwnProperty(s)){r===null&&(r=[]);let o=t[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],n[i+1]);break}}i+=2}return r}function hC(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function pC(t,e){let n=t.contentQueries;if(n!==null){let r=oe(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],o=n[i+1];if(o!==-1){let a=t.data[o];hf(s),a.contentQueries(2,e[o],o)}}}finally{oe(r)}}}function gc(t,e){return t[As]?t[db][Pt]=e:t[As]=e,t[db]=e,e}function Ed(t,e,n){hf(0);let r=oe(null);try{e(t,n)}finally{oe(r)}}function mC(t){return t[Ns]||(t[Ns]=[])}function gC(t){return t.cleanup||(t.cleanup=[])}function yC(t,e){let n=t[bi],r=n?n.get(En,null):null;r&&r.handleError(e)}function Nf(t,e,n,r,i){for(let s=0;s<n.length;){let o=n[s++],a=n[s++],c=n[s++],l=e[o],u=t.data[o];oC(u,l,r,a,c,i)}}function mk(t,e,n){let r=gw(e,t);DR(t[Be],r,n)}function gk(t,e){let n=Rr(e,t),r=n[X];yk(r,n);let i=n[Tn];i!==null&&n[Ha]===null&&(n[Ha]=Cf(i,n[bi])),Af(r,n,n[Ft])}function yk(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Af(t,e,n){pf(e);try{let r=t.viewQuery;r!==null&&Ed(1,r,n);let i=t.template;i!==null&&cC(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Sn]?.finishViewCreation(t),t.staticContentQueries&&pC(t,e),t.staticViewQueries&&Ed(2,t.viewQuery,n);let s=t.components;s!==null&&vk(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[H]&=-5,mf()}}function vk(t,e){for(let n=0;n<e.length;n++)gk(t,e[n])}function bk(t,e,n,r){let i=oe(null);try{let s=e.tView,a=t[H]&4096?4096:16,c=mc(t,s,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];c[$s]=l;let u=t[Sn];return u!==null&&(c[Sn]=u.createEmbeddedView(s)),Af(s,c,n),c}finally{oe(i)}}function Db(t,e){return!e||e.firstChild===null||Hw(t)}function wk(t,e,n,r=!0){let i=e[X];if(kR(i,e,t,n),r){let o=Sd(n,t),a=e[Be],c=Ef(a,t[Cr]);c!==null&&TR(i,t[Lt],a,e,c,o)}let s=e[Ha];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function Ka(t,e,n,r,i=!1){for(;n!==null;){let s=e[n.index];s!==null&&r.push(nn(s)),Rn(s)&&Ck(s,r);let o=n.type;if(o&8)Ka(t,e,n.child,r);else if(o&32){let a=Df(n,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=nC(e,n);if(Array.isArray(a))r.push(...a);else{let c=Os(e[tn]);Ka(c[X],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function Ck(t,e){for(let n=yt;n<t.length;n++){let r=t[n],i=r[X].firstChild;i!==null&&Ka(r[X],r,i,e)}t[Cr]!==t[Tn]&&e.push(t[Cr])}var vC=[];function Sk(t){return t[wr]??Dk(t)}function Dk(t){let e=vC.pop()??Object.create(Ik);return e.lView=t,e}function Ek(t){t.lView[wr]!==t&&(t.lView=null,vC.push(t))}var Ik=x(S({},ia),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Ms(t.lView)},consumerOnSignalRead(){this.lView[wr]=this}}),bC=100;function wC(t,e=!0,n=0){let r=t[en],i=r.rendererFactory,s=!1;s||i.begin?.();try{Tk(t,n)}catch(o){throw e&&yC(t,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function Tk(t,e){Id(t,e);let n=0;for(;uf(t);){if(n===bC)throw new B(103,!1);n++,Id(t,1)}}function Rk(t,e,n,r){let i=e[H];if((i&256)===256)return;let s=!1;!s&&e[en].inlineEffectRunner?.flush(),pf(e);let o=null,a=null;!s&&kk(t)&&(a=Sk(e),o=vu(a));try{vw(e),M0(t.bindingStartIndex),n!==null&&cC(t,e,n,2,r);let c=(i&3)===3;if(!s)if(c){let d=t.preOrderCheckHooks;d!==null&&Oa(e,d,null)}else{let d=t.preOrderHooks;d!==null&&Pa(e,d,0,null),zu(e,0)}if(_k(e),CC(e,0),t.contentQueries!==null&&pC(t,e),!s)if(c){let d=t.contentCheckHooks;d!==null&&Oa(e,d)}else{let d=t.contentHooks;d!==null&&Pa(e,d,1),zu(e,1)}WR(t,e);let l=t.components;l!==null&&DC(e,l,0);let u=t.viewQuery;if(u!==null&&Ed(2,u,r),!s)if(c){let d=t.viewCheckHooks;d!==null&&Oa(e,d)}else{let d=t.viewHooks;d!==null&&Pa(e,d,2),zu(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[qu]){for(let d of e[qu])d();e[qu]=null}s||(e[H]&=-73)}catch(c){throw Ms(e),c}finally{a!==null&&(bu(a,o),Ek(a)),mf()}}function kk(t){return t.type!==2}function CC(t,e){for(let n=qw(t);n!==null;n=zw(n))for(let r=yt;r<n.length;r++){let i=n[r];SC(i,e)}}function _k(t){for(let e=qw(t);e!==null;e=zw(e)){if(!(e[H]&af.HasTransplantedViews))continue;let n=e[wi];for(let r=0;r<n.length;r++){let i=n[r],s=i[Ke];D0(i)}}}function xk(t,e,n){let r=Rr(e,t);SC(r,n)}function SC(t,e){lf(t)&&Id(t,e)}function Id(t,e){let r=t[X],i=t[H],s=t[wr],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&wu(s)),s&&(s.dirty=!1),t[H]&=-9217,o)Rk(r,t,r.template,t[Ft]);else if(i&8192){CC(t,1);let a=r.components;a!==null&&DC(t,a,1)}}function DC(t,e,n){for(let r=0;r<e.length;r++)xk(t,e[r],n)}function Mf(t){for(t[en].changeDetectionScheduler?.notify();t;){t[H]|=64;let e=Os(t);if(h0(t)&&!e)return t;t=e}return null}var Dr=class{get rootNodes(){let e=this._lView,n=e[X];return Ka(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Ft]}set context(e){this._lView[Ft]=e}get destroyed(){return(this._lView[H]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Ke];if(Rn(e)){let n=e[Wa],r=n?n.indexOf(this):-1;r>-1&&(Cd(e,r),Va(n,r))}this._attachedToViewContainer=!1}eC(this._lView[X],this._lView)}onDestroy(e){bw(this._lView,e)}markForCheck(){Mf(this._cdRefInjectingView||this._lView)}detach(){this._lView[H]&=-129}reattach(){fd(this._lView),this._lView[H]|=128}detectChanges(){this._lView[H]|=1024,wC(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new B(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,Zw(this._lView[X],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new B(902,!1);this._appRef=e,fd(this._lView)}},Er=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=Mk;let t=e;return t})(),Nk=Er,Ak=class extends Nk{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=bk(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new Dr(i)}};function Mk(){return Of(jt(),ye())}function Of(t,e){return t.type&4?new Ak(e,t,xi(t,e)):null}var v$=new RegExp(`^(\\d+)*(${pR}|${hR})*(.*)`);var Ok=()=>null;function Eb(t,e){return Ok(t,e)}var Td=class{},Rd=class{},Ja=class{};function Pk(t){let e=Error(`No component factory found for ${ut(t)}.`);return e[Fk]=t,e}var Fk="ngComponent";var kd=class{resolveComponentFactory(e){throw Pk(e)}},yc=(()=>{let e=class e{};e.NULL=new kd;let t=e;return t})(),Fs=class{};var Lk=(()=>{let e=class e{};e.\u0275prov=U({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),Yu={};var Ib=new Set;function vc(t){Ib.has(t)||(Ib.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function Tb(...t){}function jk(){let t=typeof Ts.requestAnimationFrame=="function",e=Ts[t?"requestAnimationFrame":"setTimeout"],n=Ts[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var Ne=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new we(!1),this.onMicrotaskEmpty=new we(!1),this.onStable=new we(!1),this.onError=new we(!1),typeof Zone>"u")throw new B(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=jk().nativeRequestAnimationFrame,Vk(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new B(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new B(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,Uk,Tb,Tb);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},Uk={};function Pf(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Bk(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Ts,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,_d(t),t.isCheckStableRunning=!0,Pf(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),_d(t))}function Vk(t){let e=()=>{Bk(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{if($k(a))return n.invokeTask(i,s,o,a);try{return Rb(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),kb(t)}},onInvoke:(n,r,i,s,o,a,c)=>{try{return Rb(t),n.invoke(i,s,o,a,c)}finally{t.shouldCoalesceRunChangeDetection&&e(),kb(t)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,_d(t),Pf(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function _d(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function Rb(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function kb(t){t._nesting--,Pf(t)}function $k(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}var EC=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of r)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=U({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function Qa(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=nd(i,a);else if(s==2){let c=a,l=e[++o];r=nd(r,c+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var Ya=class extends yc{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=br(e);return new Ls(n,this.ngModule)}};function _b(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let r=t[n];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return e}function Hk(t){let e=t.toLowerCase();return e==="svg"?y0:e==="math"?v0:null}var xd=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=rc(r);let i=this.injector.get(e,Yu,r);return i!==Yu||n===Yu?i:this.parentInjector.get(e,n,r)}},Ls=class extends Ja{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=_b(e.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return _b(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=YT(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=oe(null);try{i=i||this.ngModule;let o=i instanceof Et?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new xd(e,o):e,c=a.get(Fs,null);if(c===null)throw new B(407,!1);let l=a.get(Lk,null),u=a.get(EC,null),d=a.get(Td,null),f={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,afterRenderEventManager:u,changeDetectionScheduler:d},h=c.createRenderer(null,this.componentDef),p=this.componentDef.selectors[0][0]||"div",m=r?GR(h,r,this.componentDef.encapsulation,a):Yw(h,p,Hk(p)),C=512;this.componentDef.signals?C|=4096:this.componentDef.onPush||(C|=16);let v=null;m!==null&&(v=Cf(m,a,!0));let E=_f(0,null,null,1,0,null,null,null,null,null,null),_=mc(null,E,null,C,null,null,f,h,a,null,v);pf(_);let A,O;try{let K=this.componentDef,se,Ee=null;K.findHostDirectiveDefs?(se=[],Ee=new Map,K.findHostDirectiveDefs(K,se,Ee),se.push(K)):se=[K];let et=Wk(_,m),lr=qk(et,m,K,se,_,f,h);O=yw(E,Dn),m&&Kk(h,K,m,r),n!==void 0&&Jk(O,this.ngContentSelectors,n),A=Gk(lr,K,se,Ee,_,[Qk]),Af(E,_,null)}finally{mf()}return new Nd(this.componentType,A,xi(O,_),_,O)}finally{oe(s)}}},Nd=class extends Rd{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Dr(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let s=this._rootLView;Nf(s[X],s,i,e,n),this.previousInputValues.set(e,n);let o=Rr(this._tNode.index,s);Mf(o)}}get injector(){return new vr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function Wk(t,e){let n=t[X],r=Dn;return t[r]=e,qs(n,r,2,"#host",null)}function qk(t,e,n,r,i,s,o){let a=i[X];zk(r,t,e,o);let c=null;e!==null&&(c=Cf(e,i[bi]));let l=s.rendererFactory.createRenderer(e,n),u=16;n.signals?u=4096:n.onPush&&(u=64);let d=mc(i,lC(n),null,u,i[t.index],t,s,l,null,null,c);return a.firstCreatePass&&Dd(a,t,r.length-1),gc(i,d),i[t.index]=d}function zk(t,e,n,r){for(let i of t)e.mergedAttrs=tf(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Qa(e,e.mergedAttrs,!0),n!==null&&iC(r,n,e))}function Gk(t,e,n,r,i,s){let o=jt(),a=i[X],c=It(o,i);dC(a,i,o,n,null,r);for(let u=0;u<n.length;u++){let d=o.directiveStart+u,f=Si(i,a,d,o);Wn(f,i)}fC(a,i,o),c&&Wn(c,i);let l=Si(i,a,o.directiveStart+o.componentOffset,o);if(t[Ft]=i[Ft]=l,s!==null)for(let u of s)u(l,e);return Tf(a,o,i),l}function Kk(t,e,n,r){if(r)od(t,n,["ng-version","17.3.12"]);else{let{attrs:i,classes:s}=ZT(e.selectors[0]);i&&od(t,n,i),s&&s.length>0&&rC(t,n,s.join(" "))}}function Jk(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let s=n[i];r.push(s!=null?Array.from(s):null)}}function Qk(){let t=jt();fc(ye()[X],t)}var Qn=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=Yk;let t=e;return t})();function Yk(){let t=jt();return TC(t,ye())}var Zk=Qn,IC=class extends Zk{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return xi(this._hostTNode,this._hostLView)}get injector(){return new vr(this._hostTNode,this._hostLView)}get parentInjector(){let e=yf(this._hostTNode,this._hostLView);if(Nw(e)){let n=za(e,this._hostLView),r=qa(e),i=n[X].data[r+8];return new vr(i,n)}else return new vr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=xb(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-yt}createEmbeddedView(e,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=Eb(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(a,i,Db(this._hostTNode,o)),a}createComponent(e,n,r,i,s){let o=e&&!f0(e),a;if(o)a=n;else{let p=n||{};a=p.index,r=p.injector,i=p.projectableNodes,s=p.environmentInjector||p.ngModuleRef}let c=o?e:new Ls(br(e)),l=r||this.parentInjector;if(!s&&c.ngModule==null){let m=(o?l:this.parentInjector).get(Et,null);m&&(s=m)}let u=br(c.componentType??{}),d=Eb(this._lContainer,u?.id??null),f=d?.firstChild??null,h=c.create(l,i,f,s);return this.insertImpl(h.hostView,a,Db(this._hostTNode,d)),h}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(S0(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[Ke],l=new IC(c,c[Lt],c[Ke]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return wk(o,i,s,r),e.attachToViewContainerRef(),Kb(Zu(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=xb(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Cd(this._lContainer,n);r&&(Va(Zu(this._lContainer),n),eC(r[X],r))}detach(e){let n=this._adjustIndex(e,-1),r=Cd(this._lContainer,n);return r&&Va(Zu(this._lContainer),n)!=null?new Dr(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function xb(t){return t[Wa]}function Zu(t){return t[Wa]||(t[Wa]=[])}function TC(t,e){let n,r=e[t.index];return Rn(r)?n=r:(n=hC(r,e,null,t),e[t.index]=n,gc(e,n)),e_(n,e,t,r),new IC(n,t,e)}function Xk(t,e){let n=t[Be],r=n.createComment(""),i=It(e,t),s=Ef(n,i);return Ga(n,s,r,PR(n,i),!1),r}var e_=r_,t_=()=>!1;function n_(t,e,n){return t_(t,e,n)}function r_(t,e,n,r){if(t[Cr])return;let i;n.type&8?i=nn(r):i=Xk(e,n),t[Cr]=i}var Ad=class t{constructor(e){this.queryList=e,this.matches=null}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},Md=class t{constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let r=e.contentQueries!==null?e.contentQueries[0]:n.length,i=[];for(let s=0;s<r;s++){let o=n.getByIndex(s),a=this.queries[o.indexInDeclarationView];i.push(a.clone())}return new t(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)Ff(e,n).matches!==null&&this.queries[n].setDirty()}},Od=class{constructor(e,n,r=null){this.flags=n,this.read=r,typeof e=="string"?this.predicate=d_(e):this.predicate=e}},Pd=class t{constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){let i=n!==null?n.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,n!==null?n.push(s):n=[s])}return n!==null?new t(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Fd=class t{constructor(e,n=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let s=r[i];this.matchTNodeWithReadOption(e,n,i_(n,s)),this.matchTNodeWithReadOption(e,n,Fa(n,e,s,!1,!1))}else r===Er?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,Fa(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Kn||i===Qn||i===Er&&n.type&4)this.addMatch(n.index,-2);else{let s=Fa(n,e,i,!1,!1);s!==null&&this.addMatch(n.index,s)}else this.addMatch(n.index,r)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function i_(t,e){let n=t.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1]}return null}function s_(t,e){return t.type&11?xi(t,e):t.type&4?Of(t,e):null}function o_(t,e,n,r){return n===-1?s_(e,t):n===-2?a_(t,e,r):Si(t,t[X],n,e)}function a_(t,e,n){if(n===Kn)return xi(e,t);if(n===Er)return Of(e,t);if(n===Qn)return TC(e,t)}function RC(t,e,n,r){let i=e[Sn].queries[r];if(i.matches===null){let s=t.data,o=n.matches,a=[];for(let c=0;o!==null&&c<o.length;c+=2){let l=o[c];if(l<0)a.push(null);else{let u=s[l];a.push(o_(e,u,o[c+1],n.metadata.read))}}i.matches=a}return i.matches}function Ld(t,e,n,r){let i=t.queries.getByIndex(n),s=i.matches;if(s!==null){let o=RC(t,e,i,n);for(let a=0;a<s.length;a+=2){let c=s[a];if(c>0)r.push(o[a/2]);else{let l=s[a+1],u=e[-c];for(let d=yt;d<u.length;d++){let f=u[d];f[$s]===f[Ke]&&Ld(f[X],f,l,r)}if(u[wi]!==null){let d=u[wi];for(let f=0;f<d.length;f++){let h=d[f];Ld(h[X],h,l,r)}}}}}return r}function c_(t,e){return t[Sn].queries[e].queryList}function l_(t,e,n){let r=new vd((n&4)===4);return QR(t,e,r,r.destroy),(e[Sn]??=new Md).queries.push(new Ad(r))-1}function u_(t,e,n){let r=dt();return r.firstCreatePass&&(f_(r,new Od(t,e,n),-1),(e&2)===2&&(r.staticViewQueries=!0)),l_(r,ye(),e)}function d_(t){return t.split(",").map(e=>e.trim())}function f_(t,e,n){t.queries===null&&(t.queries=new Pd),t.queries.track(new Fd(e,n))}function Ff(t,e){return t.queries.getByIndex(e)}function h_(t,e){let n=t[X],r=Ff(n,e);return r.crossesNgTemplate?Ld(n,t,e,[]):RC(n,t,r,e)}function zs(t,e){vc("NgSignals");let n=Tv(t),r=n[Fn];return e?.equal&&(r.equal=e.equal),n.set=i=>Cu(r,i),n.update=i=>Rv(r,i),n.asReadonly=p_.bind(n),n}function p_(){let t=this[Fn];if(t.readonlyFn===void 0){let e=()=>this();e[Fn]=t,t.readonlyFn=e}return t.readonlyFn}var qn=class{},js=class{};var jd=class extends qn{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Ya(this);let i=nw(e);this._bootstrapComponents=Qw(i.bootstrap),this._r3Injector=Vw(e,n,[{provide:qn,useValue:this},{provide:yc,useValue:this.componentFactoryResolver},...r],ut(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Ud=class extends js{constructor(e){super(),this.moduleType=e}create(e){return new jd(this.moduleType,e,[])}};var Za=class extends qn{constructor(e){super(),this.componentFactoryResolver=new Ya(this),this.instance=null;let n=new xs([...e.providers,{provide:qn,useValue:this},{provide:yc,useValue:this.componentFactoryResolver}],e.parent||of(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Lf(t,e,n=null){return new Za({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var bc=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new M(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function kC(t){return g_(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function m_(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function g_(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function wc(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function y_(t){return(t.flags&32)===32}function v_(t,e,n,r,i,s,o,a,c){let l=e.consts,u=qs(e,t,4,o||null,Ci(l,a));xf(e,n,u,Ci(l,c)),fc(e,u);let d=u.tView=_f(2,u,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}function sn(t,e,n,r,i,s,o,a){let c=ye(),l=dt(),u=t+Dn,d=l.firstCreatePass?v_(u,l,c,e,n,r,i,s,o):l.data[u];kr(d,!1);let f=b_(l,c,d,t);uc()&&hc(l,c,f,d),Wn(f,c);let h=hC(f,c,f,d);return c[u]=h,gc(c,h),n_(h,d,c),cc(d)&&Rf(l,c,d),o!=null&&kf(c,d,a),sn}var b_=w_;function w_(t,e,n,r){return dc(!0),e[Be].createComment("")}function Cc(t,e,n,r){let i=ye(),s=ff();if(wc(i,s,e)){let o=dt(),a=gf();dk(a,i,t,e,n,r)}return Cc}function _C(t,e,n,r){return wc(t,ff(),n)?e+Qd(n)+r:Jn}function Aa(t,e){return t<<17|e<<2}function Ir(t){return t>>17&32767}function C_(t){return(t&2)==2}function S_(t,e){return t&131071|e<<17}function Bd(t){return t|2}function Di(t){return(t&131068)>>2}function Xu(t,e){return t&-131069|e<<2}function D_(t){return(t&1)===1}function Vd(t){return t|1}function E_(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Ir(o),c=Di(o);t[r]=n;let l=!1,u;if(Array.isArray(n)){let d=n;u=d[1],(u===null||Vs(d,u)>0)&&(l=!0)}else u=n;if(i)if(c!==0){let f=Ir(t[a+1]);t[r+1]=Aa(f,a),f!==0&&(t[f+1]=Xu(t[f+1],r)),t[a+1]=S_(t[a+1],r)}else t[r+1]=Aa(a,0),a!==0&&(t[a+1]=Xu(t[a+1],r)),a=r;else t[r+1]=Aa(c,0),a===0?a=r:t[c+1]=Xu(t[c+1],r),c=r;l&&(t[r+1]=Bd(t[r+1])),Nb(t,u,r,!0),Nb(t,u,r,!1),I_(e,u,t,r,s),o=Aa(a,c),s?e.classBindings=o:e.styleBindings=o}function I_(t,e,n,r,i){let s=i?t.residualClasses:t.residualStyles;s!=null&&typeof e=="string"&&Vs(s,e)>=0&&(n[r+1]=Vd(n[r+1]))}function Nb(t,e,n,r){let i=t[n+1],s=e===null,o=r?Ir(i):Di(i),a=!1;for(;o!==0&&(a===!1||s);){let c=t[o],l=t[o+1];T_(c,e)&&(a=!0,t[o+1]=r?Vd(l):Bd(l)),o=r?Ir(l):Di(l)}a&&(t[n+1]=r?Bd(i):Vd(i))}function T_(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?Vs(t,e)>=0:!1}var Ot={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function R_(t){return t.substring(Ot.key,Ot.keyEnd)}function k_(t){return __(t),xC(t,NC(t,0,Ot.textEnd))}function xC(t,e){let n=Ot.textEnd;return n===e?-1:(e=Ot.keyEnd=x_(t,Ot.key=e,n),NC(t,e,n))}function __(t){Ot.key=0,Ot.keyEnd=0,Ot.value=0,Ot.valueEnd=0,Ot.textEnd=t.length}function NC(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function x_(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}function Ve(t,e,n){let r=ye(),i=ff();if(wc(r,i,e)){let s=dt(),o=gf();uC(s,o,r,t,e,r[Be],n,!1)}return Ve}function $d(t,e,n,r,i){let s=e.inputs,o=i?"class":"style";Nf(t,n,s[o],o,r)}function AC(t){A_(U_,N_,t,!0)}function N_(t,e){for(let n=k_(e);n>=0;n=xC(e,n))ef(t,R_(e),!0)}function A_(t,e,n,r){let i=dt(),s=O0(2);i.firstUpdatePass&&M_(i,null,s,r);let o=ye();if(n!==Jn&&wc(o,s,n)){let a=i.data[ki()];if(OC(a,r)&&!MC(i,s)){let c=r?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(n=nd(c,n||"")),$d(i,a,o,n,r)}else B_(i,a,o,o[Be],o[s+1],o[s+1]=j_(t,e,n),r,s)}}function MC(t,e){return e>=t.expandoStartIndex}function M_(t,e,n,r){let i=t.data;if(i[n+1]===null){let s=i[ki()],o=MC(t,n);OC(s,r)&&e===null&&!o&&(e=!1),e=O_(i,s,e,r),E_(i,s,e,n,o,r)}}function O_(t,e,n,r){let i=j0(t),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=ed(null,t,e,n,r),n=Us(n,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||t[o]!==i)if(n=ed(i,t,e,n,r),s===null){let c=P_(t,e,r);c!==void 0&&Array.isArray(c)&&(c=ed(null,t,e,c[1],r),c=Us(c,e.attrs,r),F_(t,e,r,c))}else s=L_(t,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),n}function P_(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Di(r)!==0)return t[Ir(r)]}function F_(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[Ir(i)]=r}function L_(t,e,n){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=t[s].hostAttrs;r=Us(r,o,n)}return Us(r,e.attrs,n)}function ed(t,e,n,r,i){let s=null,o=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<o&&(s=e[a],r=Us(r,s.hostAttrs,i),s!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function Us(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),ef(t,o,n?!0:e[++s]))}return t===void 0?null:t}function j_(t,e,n){if(n==null||n==="")return gt;let r=[],i=Sf(n);if(Array.isArray(i))for(let s=0;s<i.length;s++)t(r,i[s],!0);else if(typeof i=="object")for(let s in i)i.hasOwnProperty(s)&&t(r,s,i[s]);else typeof i=="string"&&e(r,i);return r}function U_(t,e,n){let r=String(e);r!==""&&!r.includes(" ")&&ef(t,r,n)}function B_(t,e,n,r,i,s,o,a){i===Jn&&(i=gt);let c=0,l=0,u=0<i.length?i[0]:null,d=0<s.length?s[0]:null;for(;u!==null||d!==null;){let f=c<i.length?i[c+1]:void 0,h=l<s.length?s[l+1]:void 0,p=null,m;u===d?(c+=2,l+=2,f!==h&&(p=d,m=h)):d===null||u!==null&&u<d?(c+=2,p=u):(l+=2,p=d,m=h),p!==null&&V_(t,e,n,r,p,m,o,a),u=c<i.length?i[c]:null,d=l<s.length?s[l]:null}}function V_(t,e,n,r,i,s,o,a){if(!(e.type&3))return;let c=t.data,l=c[a+1],u=D_(l)?Ab(c,e,n,i,Di(l),o):void 0;if(!Xa(u)){Xa(s)||C_(l)&&(s=Ab(c,null,n,i,a,o));let d=gw(ki(),n);$R(r,o,d,i,s)}}function Ab(t,e,n,r,i,s){let o=e===null,a;for(;i>0;){let c=t[i],l=Array.isArray(c),u=l?c[1]:c,d=u===null,f=n[i+1];f===Jn&&(f=d?gt:void 0);let h=d?Hu(f,r):u===r?f:void 0;if(l&&!Xa(h)&&(h=Hu(c,r)),Xa(h)&&(a=h,o))return a;let p=t[i+1];i=o?Ir(p):Di(p)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=Hu(c,r))}return a}function Xa(t){return t!==void 0}function OC(t,e){return(t.flags&(e?8:16))!==0}function $_(t,e,n,r,i,s){let o=e.consts,a=Ci(o,i),c=qs(e,t,2,r,a);return xf(e,n,c,Ci(o,s)),c.attrs!==null&&Qa(c,c.attrs,!1),c.mergedAttrs!==null&&Qa(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function Ce(t,e,n,r){let i=ye(),s=dt(),o=Dn+t,a=i[Be],c=s.firstCreatePass?$_(o,s,i,e,n,r):s.data[o],l=H_(s,i,c,a,e,t);i[o]=l;let u=cc(c);return kr(c,!0),iC(a,l,c),!y_(c)&&uc()&&hc(s,i,l,c),T0()===0&&Wn(l,i),R0(),u&&(Rf(s,i,c),Tf(s,c,i)),r!==null&&kf(i,c),Ce}function De(){let t=jt();df()?Sw():(t=t.parent,kr(t,!1));let e=t;x0(e)&&N0(),k0();let n=dt();return n.firstCreatePass&&(fc(n,t),cf(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&q0(e)&&$d(n,e,ye(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&z0(e)&&$d(n,e,ye(),e.stylesWithoutHost,!1),De}function $e(t,e,n,r){return Ce(t,e,n,r),De(),$e}var H_=(t,e,n,r,i,s)=>(dc(!0),Yw(r,i,V0()));function W_(t,e,n,r,i){let s=e.consts,o=Ci(s,r),a=qs(e,t,8,"ng-container",o);o!==null&&Qa(a,o,!0);let c=Ci(s,i);return xf(e,n,a,c),e.queries!==null&&e.queries.elementStart(e,a),a}function jf(t,e,n){let r=ye(),i=dt(),s=t+Dn,o=i.firstCreatePass?W_(s,i,r,e,n):i.data[s];kr(o,!0);let a=q_(i,r,o,t);return r[s]=a,uc()&&hc(i,r,a,o),Wn(a,r),cc(o)&&(Rf(i,r,o),Tf(i,o,r)),n!=null&&kf(r,o),jf}function Uf(){let t=jt(),e=dt();return df()?Sw():(t=t.parent,kr(t,!1)),e.firstCreatePass&&(fc(e,t),cf(t)&&e.queries.elementEnd(t)),Uf}var q_=(t,e,n,r)=>(dc(!0),ER(e[Be],""));function Gs(){return ye()}var ec="en-US";var z_=ec;function G_(t){typeof t=="string"&&(z_=t.toLowerCase().replace(/_/g,"-"))}function Tt(t,e,n,r){let i=ye(),s=dt(),o=jt();return J_(s,i,i[Be],o,t,e,r),Tt}function K_(t,e,n,r){let i=t.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===n&&i[s+1]===r){let a=e[Ns],c=i[s+2];return a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function J_(t,e,n,r,i,s,o){let a=cc(r),l=t.firstCreatePass&&gC(t),u=e[Ft],d=mC(e),f=!0;if(r.type&3||o){let m=It(r,e),C=o?o(m):m,v=d.length,E=o?A=>o(nn(A[r.index])):r.index,_=null;if(!o&&a&&(_=K_(t,e,i,r.index)),_!==null){let A=_.__ngLastListenerFn__||_;A.__ngNextListenerFn__=s,_.__ngLastListenerFn__=s,f=!1}else{s=Ob(r,e,u,s,!1);let A=n.listen(C,i,s);d.push(s,A),l&&l.push(i,E,v,v+1)}}else s=Ob(r,e,u,s,!1);let h=r.outputs,p;if(f&&h!==null&&(p=h[i])){let m=p.length;if(m)for(let C=0;C<m;C+=2){let v=p[C],E=p[C+1],O=e[v][E].subscribe(s),K=d.length;d.push(s,O),l&&l.push(i,r.index,K,-(K+1))}}}function Mb(t,e,n,r){let i=oe(null);try{return Yt(6,e,n),n(r)!==!1}catch(s){return yC(t,s),!1}finally{Yt(7,e,n),oe(i)}}function Ob(t,e,n,r,i){return function s(o){if(o===Function)return r;let a=t.componentOffset>-1?Rr(t.index,e):e;Mf(a);let c=Mb(e,n,r,o),l=s.__ngNextListenerFn__;for(;l;)c=Mb(e,n,l,o)&&c,l=l.__ngNextListenerFn__;return i&&c===!1&&o.preventDefault(),c}}function Ks(t=1){return B0(t)}function Sc(t,e,n,r,i){let s=ye(),o=_C(s,e,n,r);if(o!==Jn){let a=dt(),c=gf();uC(a,c,s,t,o,s[Be],i,!1)}return Sc}function Ai(t,e,n){u_(t,e,n)}function xr(t){let e=ye(),n=dt(),r=Dw();hf(r+1);let i=Ff(n,r);if(t.dirty&&C0(e)===((i.metadata.flags&2)===2)){if(i.matches===null)t.reset([]);else{let s=h_(e,r);t.reset(s,sR),t.notifyOnChanges()}return!0}return!1}function Nr(){return c_(ye(),Dw())}function Yn(t,e=""){let n=ye(),r=dt(),i=t+Dn,s=r.firstCreatePass?qs(r,i,1,e,null):r.data[i],o=Q_(r,n,s,e,t);n[i]=o,uc()&&hc(r,n,o,s),kr(s,!1)}var Q_=(t,e,n,r,i)=>(dc(!0),SR(e[Be],r));function Bf(t){return PC("",t,""),Bf}function PC(t,e,n){let r=ye(),i=_C(r,t,e,n);return i!==Jn&&mk(r,ki(),i),PC}var Y_=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=sw(!1,r.type),s=i.length>0?Lf([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,s)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=U({token:e,providedIn:"environment",factory:()=>new e(G(Et))});let t=e;return t})();function Zn(t){vc("NgStandalone"),t.getStandaloneInjector=e=>e.get(Y_).getOrCreateStandaloneInjector(t)}var Dc=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var FC=new Y("");function Js(t){return!!t&&typeof t.then=="function"}function LC(t){return!!t&&typeof t.subscribe=="function"}var jC=new Y(""),UC=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=N(jC,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let s of this.appInits){let o=s();if(Js(o))r.push(o);else if(LC(o)){let a=new Promise((c,l)=>{o.subscribe({complete:c,error:l})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(s=>{this.reject(s)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Vf=new Y("");function Z_(){Iv(()=>{throw new B(600,!1)})}function X_(t){return t.isBoundToModule}function ex(t,e,n){try{let r=n();return Js(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var Qs=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=N($w),this.afterRenderEffectManager=N(EC),this.externalTestViews=new Set,this.beforeRender=new Pe,this.afterTick=new Pe,this.componentTypes=[],this.components=[],this.isStable=N(bc).hasPendingTasks.pipe(j(r=>!r)),this._injector=N(Et)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let s=r instanceof Ja;if(!this._injector.get(UC).done){let h=!s&&tw(r),p=!1;throw new B(405,p)}let a;s?a=r:a=this._injector.get(yc).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let c=X_(a)?void 0:this._injector.get(qn),l=i||a.selector,u=a.create(_i.NULL,[],l,c),d=u.location.nativeElement,f=u.injector.get(FC,null);return f?.registerApplication(d),u.onDestroy(()=>{this.detachView(u.hostView),td(this.components,u),f?.unregisterApplication(d)}),this._loadComponent(u),u}tick(){this._tick(!0)}_tick(r){if(this._runningTick)throw new B(101,!1);let i=oe(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(r)}catch(s){this.internalErrorHandler(s)}finally{this.afterTick.next(),this._runningTick=!1,oe(i)}}detectChangesInAttachedViews(r){let i=0,s=this.afterRenderEffectManager;for(;;){if(i===bC)throw new B(103,!1);if(r){let o=i===0;this.beforeRender.next(o);for(let{_lView:a,notifyErrorHandler:c}of this._views)tx(a,o,c)}if(i++,s.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>Hd(o))&&(s.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>Hd(o))))break}}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;td(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(Vf,[]);[...this._bootstrapListeners,...i].forEach(s=>s(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>td(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new B(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function td(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function tx(t,e,n){!e&&!Hd(t)||nx(t,n,e)}function Hd(t){return uf(t)}function nx(t,e,n){let r;n?(r=0,t[H]|=1024):t[H]&64?r=0:r=1,wC(t,e,r)}var Wd=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},$f=(()=>{let e=class e{compileModuleSync(r){return new Ud(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),s=nw(r),o=Qw(s.declarations).reduce((a,c)=>{let l=br(c);return l&&a.push(new Ls(l)),a},[]);return new Wd(i,o)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var rx=(()=>{let e=class e{constructor(){this.zone=N(Ne),this.applicationRef=N(Qs)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function ix(t){return[{provide:Ne,useFactory:t},{provide:vi,multi:!0,useFactory:()=>{let e=N(rx,{optional:!0});return()=>e.initialize()}},{provide:vi,multi:!0,useFactory:()=>{let e=N(cx);return()=>{e.initialize()}}},{provide:$w,useFactory:sx}]}function sx(){let t=N(Ne),e=N(En);return n=>t.runOutsideAngular(()=>e.handleError(n))}function ox(t){let e=ix(()=>new Ne(ax(t)));return ic([[],e])}function ax(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var cx=(()=>{let e=class e{constructor(){this.subscription=new Ie,this.initialized=!1,this.zone=N(Ne),this.pendingTasks=N(bc)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ne.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ne.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function lx(){return typeof $localize<"u"&&$localize.locale||ec}var Hf=new Y("",{providedIn:"root",factory:()=>N(Hf,Z.Optional|Z.SkipSelf)||lx()});var BC=new Y("");var ja=null;function ux(t=[],e){return _i.create({name:e,providers:[{provide:sc,useValue:"platform"},{provide:BC,useValue:new Set([()=>ja=null])},...t]})}function dx(t=[]){if(ja)return ja;let e=ux(t);return ja=e,Z_(),fx(e),e}function fx(t){t.get(bf,null)?.forEach(n=>n())}var Mi=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=hx;let t=e;return t})();function hx(t){return px(jt(),ye(),(t&16)===16)}function px(t,e,n){if(ac(t)&&!n){let r=Rr(t.index,e);return new Dr(r,r)}else if(t.type&47){let r=e[tn];return new Dr(r,e)}return null}var qd=class{constructor(){}supports(e){return kC(e)}create(e){return new zd(e)}},mx=(t,e)=>e,zd=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||mx}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){let o=!r||n&&n.currentIndex<Pb(r,i,s)?n:r,a=Pb(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,o.previousIndex==null)i++;else{s||(s=[]);let l=a-i,u=c-i;if(l!=u){for(let f=0;f<l;f++){let h=f<s.length?s[f]:s[f]=0,p=h+f;u<=p&&p<l&&(s[f]=h+1)}let d=o.previousIndex;s[d]=u-l}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!kC(e))throw new B(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,s,o,a),r=!0):(r&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)),n=n._next}else i=0,m_(e,a=>{o=this._trackByFn(i,a),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,a,o,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,o,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,i)):e=this._addAfter(new Gd(n,r),s,i)),e}_verifyReinsertion(e,n,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new tc),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new tc),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Gd=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Kd=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},tc=class{constructor(){this.map=new Map}put(e){let n=e.trackById,r=this.map.get(n);r||(r=new Kd,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function Pb(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function Fb(){return new Wf([new qd])}var Wf=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i!=null){let s=i.factories.slice();r=r.concat(s)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||Fb()),deps:[[e,new Gb,new Zd]]}}find(r){let i=this.factories.find(s=>s.supports(r));if(i!=null)return i;throw new B(901,!1)}};e.\u0275prov=U({token:e,providedIn:"root",factory:Fb});let t=e;return t})();function VC(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=dx(r),s=[ox(),...n||[]],a=new Za({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,c=a.get(Ne);return c.run(()=>{a.resolveInjectorInitializers();let l=a.get(En,null),u;c.runOutsideAngular(()=>{u=c.onError.subscribe({next:h=>{l.handleError(h)}})});let d=()=>a.destroy(),f=i.get(BC);return f.add(d),a.onDestroy(()=>{u.unsubscribe(),f.delete(d)}),ex(l,c,()=>{let h=a.get(UC);return h.runInitializers(),h.donePromise.then(()=>{let p=a.get(Hf,ec);G_(p||ec);let m=a.get(Qs);return e!==void 0&&m.bootstrap(e),m})})})}catch(e){return Promise.reject(e)}}function Ec(t,e){vc("NgSignals");let n=Sv(t);return e?.equal&&(n[Fn].equal=e.equal),n}var KC=null;function Oi(){return KC}function JC(t){KC??=t}var Ic=class{};var Rt=new Y(""),QC=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=U({token:e,factory:()=>N(Cx),providedIn:"platform"});let t=e;return t})();var Cx=(()=>{let e=class e extends QC{constructor(){super(),this._doc=N(Rt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Oi().getBaseHref(this._doc)}onPopState(r){let i=Oi().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=Oi().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,s){this._history.pushState(r,i,s)}replaceState(r,i,s){this._history.replaceState(r,i,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=U({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function YC(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function $C(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function Ar(t){return t&&t[0]!=="?"?"?"+t:t}var Rc=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=U({token:e,factory:()=>N(ZC),providedIn:"root"});let t=e;return t})(),Sx=new Y(""),ZC=(()=>{let e=class e extends Rc{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??N(Rt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return YC(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+Ar(this._platformLocation.search),s=this._platformLocation.hash;return s&&r?`${i}${s}`:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+Ar(o));this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+Ar(o));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(G(QC),G(Sx,8))},e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Ys=(()=>{let e=class e{constructor(r){this._subject=new we,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=Ix($C(HC(i))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+Ar(i))}normalize(r){return e.stripTrailingSlash(Ex(this._basePath,HC(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",s=null){this._locationStrategy.pushState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Ar(i)),s)}replaceState(r,i="",s=null){this._locationStrategy.replaceState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Ar(i)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(s=>s(r,i))}subscribe(r,i,s){return this._subject.subscribe({next:r,error:i,complete:s})}};e.normalizeQueryParams=Ar,e.joinWithSlash=YC,e.stripTrailingSlash=$C,e.\u0275fac=function(i){return new(i||e)(G(Rc))},e.\u0275prov=U({token:e,factory:()=>Dx(),providedIn:"root"});let t=e;return t})();function Dx(){return new Ys(G(Rc))}function Ex(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function HC(t){return t.replace(/\/index.html$/,"")}function Ix(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function XC(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var qf=class{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},eS=(()=>{let e=class e{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,s){this._viewContainer=r,this._template=i,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let r=this._ngForOf;if(!this._differ&&r)if(0)try{}catch{}else this._differ=this._differs.find(r).create(this.ngForTrackBy)}if(this._differ){let r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){let i=this._viewContainer;r.forEachOperation((s,o,a)=>{if(s.previousIndex==null)i.createEmbeddedView(this._template,new qf(s.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)i.remove(o===null?void 0:o);else if(o!==null){let c=i.get(o);i.move(c,a),WC(c,s)}});for(let s=0,o=i.length;s<o;s++){let c=i.get(s).context;c.index=s,c.count=o,c.ngForOf=this._ngForOf}r.forEachIdentityChange(s=>{let o=i.get(s.currentIndex);WC(o,s)})}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(Xe(Qn),Xe(Er),Xe(Wf))},e.\u0275dir=Ei({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let t=e;return t})();function WC(t,e){t.context.$implicit=e.item}var Pi=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new zf,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){qC("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){qC("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(Xe(Qn),Xe(Er))},e.\u0275dir=Ei({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),zf=class{constructor(){this.$implicit=null,this.ngIf=null}};function qC(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${ut(e)}'.`)}var Mr=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Gn({type:e}),e.\u0275inj=zn({});let t=e;return t})(),tS="browser",Tx="server";function Gf(t){return t===Tx}var Tc=class{};var Yf=class extends Ic{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Zf=class t extends Yf{static makeCurrent(){JC(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=Rx();return n==null?null:kx(n)}resetBaseElement(){Zs=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return XC(document.cookie,e)}},Zs=null;function Rx(){return Zs=Zs||document.querySelector("base"),Zs?Zs.getAttribute("href"):null}function kx(t){return new URL(t,document.baseURI).pathname}var _x=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=U({token:e,factory:e.\u0275fac});let t=e;return t})(),Xf=new Y(""),sS=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(s=>{s.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,s){return this._findPluginFor(i).addEventListener(r,i,s)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(o=>o.supports(r)),!i)throw new B(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(G(Xf),G(Ne))},e.\u0275prov=U({token:e,factory:e.\u0275fac});let t=e;return t})(),kc=class{constructor(e){this._doc=e}},Jf="ng-app-id",oS=(()=>{let e=class e{constructor(r,i,s,o={}){this.doc=r,this.appId=i,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Gf(o),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(s=>s.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${Jf}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(s=>{s.textContent!=null&&i.set(s.textContent,s)}),i}return null}changeUsageCount(r,i){let s=this.styleRef;if(s.has(r)){let o=s.get(r);return o.usage+=i,o.usage}return s.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let s=this.styleNodesInDOM,o=s?.get(i);if(o?.parentNode===r)return s.delete(i),o.removeAttribute(Jf),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(Jf,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let s=this.getStyleElement(r,i),o=this.styleRef,a=o.get(i)?.elements;a?a.push(s):o.set(i,{elements:[s],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(G(Rt),G(vf),G(wf,8),G(Ni))},e.\u0275prov=U({token:e,factory:e.\u0275fac});let t=e;return t})(),Qf={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},th=/%COMP%/g,aS="%COMP%",xx=`_nghost-${aS}`,Nx=`_ngcontent-${aS}`,Ax=!0,Mx=new Y("",{providedIn:"root",factory:()=>Ax});function Ox(t){return Nx.replace(th,t)}function Px(t){return xx.replace(th,t)}function cS(t,e){return e.map(n=>n.replace(th,t))}var nS=(()=>{let e=class e{constructor(r,i,s,o,a,c,l,u=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=c,this.ngZone=l,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=Gf(c),this.defaultRenderer=new Xs(r,a,l,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Xt.ShadowDom&&(i=x(S({},i),{encapsulation:Xt.Emulated}));let s=this.getOrCreateRenderer(r,i);return s instanceof _c?s.applyToHost(r):s instanceof eo&&s.applyStyles(),s}getOrCreateRenderer(r,i){let s=this.rendererByCompId,o=s.get(i.id);if(!o){let a=this.doc,c=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,f=this.platformIsServer;switch(i.encapsulation){case Xt.Emulated:o=new _c(l,u,i,this.appId,d,a,c,f);break;case Xt.ShadowDom:return new eh(l,u,r,i,a,c,this.nonce,f);default:o=new eo(l,u,i,d,a,c,f);break}s.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(G(sS),G(oS),G(vf),G(Mx),G(Rt),G(Ni),G(Ne),G(wf))},e.\u0275prov=U({token:e,factory:e.\u0275fac});let t=e;return t})(),Xs=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(Qf[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(rS(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(rS(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new B(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let s=Qf[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=Qf[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(In.DashCase|In.Important)?e.style.setProperty(n,r,i&In.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&In.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=Oi().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function rS(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var eh=class extends Xs{constructor(e,n,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=cS(i.id,i.styles);for(let u of l){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},eo=class extends Xs{constructor(e,n,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?cS(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},_c=class extends eo{constructor(e,n,r,i,s,o,a,c){let l=i+"-"+r.id;super(e,n,r,s,o,a,c,l),this.contentAttr=Ox(l),this.hostAttr=Px(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},Fx=(()=>{let e=class e extends kc{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,s){return r.addEventListener(i,s,!1),()=>this.removeEventListener(r,i,s)}removeEventListener(r,i,s){return r.removeEventListener(i,s)}};e.\u0275fac=function(i){return new(i||e)(G(Rt))},e.\u0275prov=U({token:e,factory:e.\u0275fac});let t=e;return t})(),iS=["alt","control","meta","shift"],Lx={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},jx={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},Ux=(()=>{let e=class e extends kc{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,s){let o=e.parseEventName(i),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Oi().onAndCancel(r,o.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),s=i.shift();if(i.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(i.pop()),a="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),a="code."),iS.forEach(u=>{let d=i.indexOf(u);d>-1&&(i.splice(d,1),a+=u+".")}),a+=o,i.length!=0||o.length===0)return null;let l={};return l.domEventName=s,l.fullKey=a,l}static matchEventFullKeyCode(r,i){let s=Lx[r.key]||r.key,o="";return i.indexOf("code.")>-1&&(s=r.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),iS.forEach(a=>{if(a!==s){let c=jx[a];c(r)&&(o+=a+".")}}),o+=s,o===i)}static eventCallback(r,i,s){return o=>{e.matchEventFullKeyCode(o,r)&&s.runGuarded(()=>i(o))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(G(Rt))},e.\u0275prov=U({token:e,factory:e.\u0275fac});let t=e;return t})();function lS(t,e){return VC(S({rootComponent:t},Bx(e)))}function Bx(t){return{appProviders:[...qx,...t?.providers??[]],platformProviders:Wx}}function Vx(){Zf.makeCurrent()}function $x(){return new En}function Hx(){return Kw(document),document}var Wx=[{provide:Ni,useValue:tS},{provide:bf,useValue:Vx,multi:!0},{provide:Rt,useFactory:Hx,deps:[]}];var qx=[{provide:sc,useValue:"root"},{provide:En,useFactory:$x,deps:[]},{provide:Xf,useClass:Fx,multi:!0,deps:[Rt,Ne,Ni]},{provide:Xf,useClass:Ux,multi:!0,deps:[Rt]},nS,oS,sS,{provide:Fs,useExisting:nS},{provide:Tc,useClass:_x,deps:[]},[]];var uS=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(G(Rt))},e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Q="primary",go=Symbol("RouteTitle"),oh=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Bi(t){return new oh(t)}function Gx(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=t[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Kx(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!on(t[n],e[n]))return!1;return!0}function on(t,e){let n=t?ah(t):void 0,r=e?ah(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!gS(t[i],e[i]))return!1;return!0}function ah(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function gS(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}else return t===e}function yS(t){return t.length>0?t[t.length-1]:null}function tr(t){return Kt(t)?t:Js(t)?be(Promise.resolve(t)):P(t)}var Jx={exact:bS,subset:wS},vS={exact:Qx,subset:Yx,ignored:()=>!0};function dS(t,e,n){return Jx[n.paths](t.root,e.root,n.matrixParams)&&vS[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function Qx(t,e){return on(t,e)}function bS(t,e,n){if(!Pr(t.segments,e.segments)||!Ac(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!bS(t.children[r],e.children[r],n))return!1;return!0}function Yx(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>gS(t[n],e[n]))}function wS(t,e,n){return CS(t,e,e.segments,n)}function CS(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!Pr(i,n)||e.hasChildren()||!Ac(i,n,r))}else if(t.segments.length===n.length){if(!Pr(t.segments,n)||!Ac(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!wS(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!Pr(t.segments,i)||!Ac(t.segments,i,r)||!t.children[Q]?!1:CS(t.children[Q],e,s,r)}}function Ac(t,e,n){return e.every((r,i)=>vS[n](t[i].parameters,r.parameters))}var Xn=class{constructor(e=new ce([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Bi(this.queryParams),this._queryParamMap}toString(){return eN.serialize(this)}},ce=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Mc(this)}},Or=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Bi(this.parameters),this._parameterMap}toString(){return DS(this)}};function Zx(t,e){return Pr(t,e)&&t.every((n,r)=>on(n.parameters,e[r].parameters))}function Pr(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function Xx(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===Q&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==Q&&(n=n.concat(e(i,r)))}),n}var Mh=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=U({token:e,factory:()=>new Pc,providedIn:"root"});let t=e;return t})(),Pc=class{parse(e){let n=new lh(e);return new Xn(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${to(e.root,!0)}`,r=rN(e.queryParams),i=typeof e.fragment=="string"?`#${tN(e.fragment)}`:"";return`${n}${r}${i}`}},eN=new Pc;function Mc(t){return t.segments.map(e=>DS(e)).join("/")}function to(t,e){if(!t.hasChildren())return Mc(t);if(e){let n=t.children[Q]?to(t.children[Q],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==Q&&r.push(`${i}:${to(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=Xx(t,(r,i)=>i===Q?[to(t.children[Q],!1)]:[`${i}:${to(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[Q]!=null?`${Mc(t)}/${n[0]}`:`${Mc(t)}/(${n.join("//")})`}}function SS(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function xc(t){return SS(t).replace(/%3B/gi,";")}function tN(t){return encodeURI(t)}function ch(t){return SS(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Oc(t){return decodeURIComponent(t)}function fS(t){return Oc(t.replace(/\+/g,"%20"))}function DS(t){return`${ch(t.path)}${nN(t.parameters)}`}function nN(t){return Object.entries(t).map(([e,n])=>`;${ch(e)}=${ch(n)}`).join("")}function rN(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${xc(n)}=${xc(i)}`).join("&"):`${xc(n)}=${xc(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var iN=/^[^\/()?;#]+/;function nh(t){let e=t.match(iN);return e?e[0]:""}var sN=/^[^\/()?;=#]+/;function oN(t){let e=t.match(sN);return e?e[0]:""}var aN=/^[^=?&#]+/;function cN(t){let e=t.match(aN);return e?e[0]:""}var lN=/^[^&#]+/;function uN(t){let e=t.match(lN);return e?e[0]:""}var lh=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ce([],{}):new ce([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[Q]=new ce(e,n)),r}parseSegment(){let e=nh(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new B(4009,!1);return this.capture(e),new Or(Oc(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=oN(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=nh(this.remaining);i&&(r=i,this.capture(r))}e[Oc(n)]=Oc(r)}parseQueryParam(e){let n=cN(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=uN(this.remaining);o&&(r=o,this.capture(r))}let i=fS(n),s=fS(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=nh(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new B(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Q);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[Q]:new ce([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new B(4011,!1)}};function ES(t){return t.segments.length>0?new ce([],{[Q]:t}):t}function IS(t){let e={};for(let[r,i]of Object.entries(t.children)){let s=IS(i);if(r===Q&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let n=new ce(t.segments,e);return dN(n)}function dN(t){if(t.numberOfChildren===1&&t.children[Q]){let e=t.children[Q];return new ce(t.segments.concat(e.segments),e.children)}return t}function Vi(t){return t instanceof Xn}function fN(t,e,n=null,r=null){let i=TS(t);return RS(i,e,n,r)}function TS(t){let e;function n(s){let o={};for(let c of s.children){let l=n(c);o[c.outlet]=l}let a=new ce(s.url,o);return s===t&&(e=a),a}let r=n(t.root),i=ES(r);return e??i}function RS(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return rh(i,i,i,n,r);let s=hN(e);if(s.toRoot())return rh(i,i,new ce([],{}),n,r);let o=pN(s,i,t),a=o.processChildren?io(o.segmentGroup,o.index,s.commands):_S(o.segmentGroup,o.index,s.commands);return rh(i,o.segmentGroup,a,n,r)}function Fc(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function ao(t){return typeof t=="object"&&t!=null&&t.outlets}function rh(t,e,n,r,i){let s={};r&&Object.entries(r).forEach(([c,l])=>{s[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let o;t===e?o=n:o=kS(t,e,n);let a=ES(IS(o));return new Xn(a,s,i)}function kS(t,e,n){let r={};return Object.entries(t.children).forEach(([i,s])=>{s===e?r[i]=n:r[i]=kS(s,e,n)}),new ce(t.segments,r)}var Lc=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Fc(r[0]))throw new B(4003,!1);let i=r.find(ao);if(i&&i!==yS(r))throw new B(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function hN(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Lc(!0,0,t);let e=0,n=!1,r=t.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new Lc(n,e,r)}var ji=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function pN(t,e,n){if(t.isAbsolute)return new ji(e,!0,0);if(!n)return new ji(e,!1,NaN);if(n.parent===null)return new ji(n,!0,0);let r=Fc(t.commands[0])?0:1,i=n.segments.length-1+r;return mN(n,i,t.numberOfDoubleDots)}function mN(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new B(4005,!1);i=r.segments.length}return new ji(r,!1,i-s)}function gN(t){return ao(t[0])?t[0].outlets:{[Q]:t}}function _S(t,e,n){if(t??=new ce([],{}),t.segments.length===0&&t.hasChildren())return io(t,e,n);let r=yN(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let s=new ce(t.segments.slice(0,r.pathIndex),{});return s.children[Q]=new ce(t.segments.slice(r.pathIndex),t.children),io(s,0,i)}else return r.match&&i.length===0?new ce(t.segments,{}):r.match&&!t.hasChildren()?uh(t,e,n):r.match?io(t,0,i):uh(t,e,n)}function io(t,e,n){if(n.length===0)return new ce(t.segments,{});{let r=gN(n),i={};if(Object.keys(r).some(s=>s!==Q)&&t.children[Q]&&t.numberOfChildren===1&&t.children[Q].segments.length===0){let s=io(t.children[Q],e,n);return new ce(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=_S(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new ce(t.segments,i)}}function yN(t,e,n){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;let o=t.segments[i],a=n[r];if(ao(a))break;let c=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!pS(c,l,o))return s;r+=2}else{if(!pS(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function uh(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let s=n[i];if(ao(s)){let c=vN(s.outlets);return new ce(r,c)}if(i===0&&Fc(n[0])){let c=t.segments[e];r.push(new Or(c.path,hS(n[0]))),i++;continue}let o=ao(s)?s.outlets[Q]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&Fc(a)?(r.push(new Or(o,hS(a))),i+=2):(r.push(new Or(o,{})),i++)}return new ce(r,{})}function vN(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=uh(new ce([],{}),0,r))}),e}function hS(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function pS(t,e,n){return t==n.path&&on(e,n.parameters)}var so="imperative",Je=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(Je||{}),kt=class{constructor(e,n){this.id=e,this.url=n}},co=class extends kt{constructor(e,n,r="imperative",i=null){super(e,n),this.type=Je.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Fr=class extends kt{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=Je.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},bt=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(bt||{}),dh=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(dh||{}),er=class extends kt{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=Je.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Lr=class extends kt{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=Je.NavigationSkipped}},lo=class extends kt{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=Je.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},jc=class extends kt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Je.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},fh=class extends kt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Je.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},hh=class extends kt{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=Je.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},ph=class extends kt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Je.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},mh=class extends kt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Je.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},gh=class{constructor(e){this.route=e,this.type=Je.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},yh=class{constructor(e){this.route=e,this.type=Je.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},vh=class{constructor(e){this.snapshot=e,this.type=Je.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},bh=class{constructor(e){this.snapshot=e,this.type=Je.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},wh=class{constructor(e){this.snapshot=e,this.type=Je.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ch=class{constructor(e){this.snapshot=e,this.type=Je.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var uo=class{},fo=class{constructor(e){this.url=e}};var Sh=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Wc,this.attachRef=null}},Wc=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){let s=this.getOrCreateContext(r);s.outlet=i,this.contexts.set(r,s)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new Sh,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Uc=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Dh(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=Dh(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=Eh(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Eh(e,this._root).map(n=>n.value)}};function Dh(t,e){if(t===e.value)return e;for(let n of e.children){let r=Dh(t,n);if(r)return r}return null}function Eh(t,e){if(t===e.value)return[e];for(let n of e.children){let r=Eh(t,n);if(r.length)return r.unshift(e),r}return[]}var vt=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Li(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Bc=class extends Uc{constructor(e,n){super(e),this.snapshot=n,Ph(this,e)}toString(){return this.snapshot.toString()}};function xS(t){let e=bN(t),n=new M([new Or("",{})]),r=new M({}),i=new M({}),s=new M({}),o=new M(""),a=new $i(n,r,s,o,i,Q,t,e.root);return a.snapshot=e.root,new Bc(new vt(a,[]),e)}function bN(t){let e={},n={},r={},i="",s=new ho([],e,r,i,n,Q,t,null,{});return new Vc("",new vt(s,[]))}var $i=class{constructor(e,n,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(j(l=>l[go]))??P(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(j(e=>Bi(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(j(e=>Bi(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Oh(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:S(S({},e.params),t.params),data:S(S({},e.data),t.data),resolve:S(S(S(S({},t.data),e.data),i?.data),t._resolvedData)}:r={params:S({},t.params),data:S({},t.data),resolve:S(S({},t.data),t._resolvedData??{})},i&&AS(i)&&(r.resolve[go]=i.title),r}var ho=class{get title(){return this.data?.[go]}constructor(e,n,r,i,s,o,a,c,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Bi(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Bi(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Vc=class extends Uc{constructor(e,n){super(n),this.url=e,Ph(this,n)}toString(){return NS(this._root)}};function Ph(t,e){e.value._routerState=t,e.children.forEach(n=>Ph(t,n))}function NS(t){let e=t.children.length>0?` { ${t.children.map(NS).join(", ")} } `:"";return`${t.value}${e}`}function ih(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,on(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),on(e.params,n.params)||t.paramsSubject.next(n.params),Kx(e.url,n.url)||t.urlSubject.next(n.url),on(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Ih(t,e){let n=on(t.params,e.params)&&Zx(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||Ih(t.parent,e.parent))}function AS(t){return typeof t.title=="string"||t.title===null}var Fh=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=Q,this.activateEvents=new we,this.deactivateEvents=new we,this.attachEvents=new we,this.detachEvents=new we,this.parentContexts=N(Wc),this.location=N(Qn),this.changeDetector=N(Mi),this.environmentInjector=N(Et),this.inputBinder=N(Lh,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:s}=r.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new B(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new B(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new B(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new B(4013,!1);this._activatedRoute=r;let s=this.location,a=r.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new Th(r,c,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:l,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Ei({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[lc]});let t=e;return t})(),Th=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===$i?this.route:e===Wc?this.childContexts:this.parent.get(e,n)}},Lh=new Y("");function wN(t,e,n){let r=po(t,e._root,n?n._root:void 0);return new Bc(r,e)}function po(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=CN(t,e,n);return new vt(r,i)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>po(t,a)),o}}let r=SN(e.value),i=e.children.map(s=>po(t,s));return new vt(r,i)}}function CN(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return po(t,r,i);return po(t,r)})}function SN(t){return new $i(new M(t.url),new M(t.params),new M(t.queryParams),new M(t.fragment),new M(t.data),t.outlet,t.component,t)}var MS="ngNavigationCancelingError";function OS(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Vi(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=PS(!1,bt.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function PS(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[MS]=!0,n.cancellationCode=e,n}function DN(t){return FS(t)&&Vi(t.url)}function FS(t){return!!t&&t[MS]}var EN=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=rn({type:e,selectors:[["ng-component"]],standalone:!0,features:[Zn],decls:1,vars:0,template:function(i,s){i&1&&$e(0,"router-outlet")},dependencies:[Fh],encapsulation:2});let t=e;return t})();function IN(t,e){return t.providers&&!t._injector&&(t._injector=Lf(t.providers,e,`Route: ${t.path}`)),t._injector??e}function jh(t){let e=t.children&&t.children.map(jh),n=e?x(S({},t),{children:e}):S({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Q&&(n.component=EN),n}function an(t){return t.outlet||Q}function TN(t,e){let n=t.filter(r=>an(r)===e);return n.push(...t.filter(r=>an(r)!==e)),n}function yo(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var RN=(t,e,n,r)=>j(i=>(new Rh(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),Rh=class{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),ih(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Li(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Li(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Li(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Li(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Ch(s.value.snapshot))}),e.children.length&&this.forwardEvent(new bh(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(ih(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),ih(a.route.value),this.activateChildRoutes(e,null,o.children)}else{let a=yo(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}},$c=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Ui=class{constructor(e,n){this.component=e,this.route=n}};function kN(t,e,n){let r=t._root,i=e?e._root:null;return no(r,i,n,[r.value])}function _N(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Wi(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!Bb(t)?t:e.get(t):r}function no(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Li(e);return t.children.forEach(o=>{xN(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>oo(a,n.getContext(o),i)),i}function xN(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=NN(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new $c(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?no(t,e,a?a.children:null,r,i):no(t,e,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Ui(a.outlet.component,o))}else o&&oo(e,a,i),i.canActivateChecks.push(new $c(r)),s.component?no(t,null,a?a.children:null,r,i):no(t,null,n,r,i);return i}function NN(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Pr(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Pr(t.url,e.url)||!on(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ih(t,e)||!on(t.queryParams,e.queryParams);case"paramsChange":default:return!Ih(t,e)}}function oo(t,e,n){let r=Li(t),i=t.value;Object.entries(r).forEach(([s,o])=>{i.component?e?oo(o,e.children.getContext(s),n):oo(o,null,n):oo(o,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Ui(e.outlet.component,i)):n.canDeactivateChecks.push(new Ui(null,i)):n.canDeactivateChecks.push(new Ui(null,i))}function vo(t){return typeof t=="function"}function AN(t){return typeof t=="boolean"}function MN(t){return t&&vo(t.canLoad)}function ON(t){return t&&vo(t.canActivate)}function PN(t){return t&&vo(t.canActivateChild)}function FN(t){return t&&vo(t.canDeactivate)}function LN(t){return t&&vo(t.canMatch)}function LS(t){return t instanceof bn||t?.name==="EmptyError"}var Nc=Symbol("INITIAL_VALUE");function Hi(){return lt(t=>Jt(t.map(e=>e.pipe(ct(1),Cn(Nc)))).pipe(j(e=>{for(let n of e)if(n!==!0){if(n===Nc)return Nc;if(n===!1||n instanceof Xn)return n}return!0}),ot(e=>e!==Nc),ct(1)))}function jN(t,e){return Te(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?P(x(S({},n),{guardsResult:!0})):UN(o,r,i,t).pipe(Te(a=>a&&AN(a)?BN(r,s,t,e):P(a)),j(a=>x(S({},n),{guardsResult:a})))})}function UN(t,e,n,r){return be(t).pipe(Te(i=>qN(i.component,i.route,n,e,r)),Qt(i=>i!==!0,!0))}function BN(t,e,n,r){return be(e).pipe(at(i=>wn($N(i.route.parent,r),VN(i.route,r),WN(t,i.path,n),HN(t,i.route,n))),Qt(i=>i!==!0,!0))}function VN(t,e){return t!==null&&e&&e(new wh(t)),P(!0)}function $N(t,e){return t!==null&&e&&e(new vh(t)),P(!0)}function HN(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return P(!0);let i=r.map(s=>yr(()=>{let o=yo(e)??n,a=Wi(s,o),c=ON(a)?a.canActivate(e,t):Tr(o,()=>a(e,t));return tr(c).pipe(Qt())}));return P(i).pipe(Hi())}function WN(t,e,n){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>_N(o)).filter(o=>o!==null).map(o=>yr(()=>{let a=o.guards.map(c=>{let l=yo(o.node)??n,u=Wi(c,l),d=PN(u)?u.canActivateChild(r,t):Tr(l,()=>u(r,t));return tr(d).pipe(Qt())});return P(a).pipe(Hi())}));return P(s).pipe(Hi())}function qN(t,e,n,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return P(!0);let o=s.map(a=>{let c=yo(e)??i,l=Wi(a,c),u=FN(l)?l.canDeactivate(t,e,n,r):Tr(c,()=>l(t,e,n,r));return tr(u).pipe(Qt())});return P(o).pipe(Hi())}function zN(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return P(!0);let s=i.map(o=>{let a=Wi(o,t),c=MN(a)?a.canLoad(e,n):Tr(t,()=>a(e,n));return tr(c)});return P(s).pipe(Hi(),jS(r))}function jS(t){return Ru(Ge(e=>{if(Vi(e))throw OS(t,e)}),j(e=>e===!0))}function GN(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return P(!0);let s=i.map(o=>{let a=Wi(o,t),c=LN(a)?a.canMatch(e,n):Tr(t,()=>a(e,n));return tr(c)});return P(s).pipe(Hi(),jS(r))}var mo=class{constructor(e){this.segmentGroup=e||null}},Hc=class extends Error{constructor(e){super(),this.urlTree=e}};function Fi(t){return ci(new mo(t))}function KN(t){return ci(new B(4e3,!1))}function JN(t){return ci(PS(!1,bt.GuardRejected))}var kh=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return P(r);if(i.numberOfChildren>1||!i.children[Q])return KN(e.redirectTo);i=i.children[Q]}}applyRedirectCommands(e,n,r){let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n.startsWith("/"))throw new Hc(i);return i}applyRedirectCreateUrlTree(e,n,r,i){let s=this.createSegmentGroup(e,n.root,r,i);return new Xn(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s.startsWith(":")){let a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){let s=this.createSegments(e,n.segments,r,i),o={};return Object.entries(n.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new ce(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new B(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},_h={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function QN(t,e,n,r,i){let s=Uh(t,e,n);return s.matched?(r=IN(e,r),GN(r,e,n,i).pipe(j(o=>o===!0?s:S({},_h)))):P(s)}function Uh(t,e,n){if(e.path==="**")return YN(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?S({},_h):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||Gx)(n,t,e);if(!i)return S({},_h);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?S(S({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function YN(t){return{matched:!0,parameters:t.length>0?yS(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function mS(t,e,n,r){return n.length>0&&eA(t,n,r)?{segmentGroup:new ce(e,XN(r,new ce(n,t.children))),slicedSegments:[]}:n.length===0&&tA(t,n,r)?{segmentGroup:new ce(t.segments,ZN(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new ce(t.segments,t.children),slicedSegments:n}}function ZN(t,e,n,r){let i={};for(let s of n)if(qc(t,e,s)&&!r[an(s)]){let o=new ce([],{});i[an(s)]=o}return S(S({},r),i)}function XN(t,e){let n={};n[Q]=e;for(let r of t)if(r.path===""&&an(r)!==Q){let i=new ce([],{});n[an(r)]=i}return n}function eA(t,e,n){return n.some(r=>qc(t,e,r)&&an(r)!==Q)}function tA(t,e,n){return n.some(r=>qc(t,e,r))}function qc(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function nA(t,e,n,r){return an(t)!==r&&(r===Q||!qc(e,n,t))?!1:Uh(e,t,n).matched}function rA(t,e,n){return e.length===0&&!t.children[n]}var xh=class{};function iA(t,e,n,r,i,s,o="emptyOnly"){return new Nh(t,e,n,r,i,o,s).recognize()}var sA=31,Nh=class{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new kh(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new B(4002,`'${e.segmentGroup}'`)}recognize(){let e=mS(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(j(n=>{let r=new ho([],Object.freeze({}),Object.freeze(S({},this.urlTree.queryParams)),this.urlTree.fragment,{},Q,this.rootComponentType,null,{}),i=new vt(r,n),s=new Vc("",i),o=fN(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root,null),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,Q).pipe(Un(r=>{if(r instanceof Hc)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof mo?this.noMatchError(r):r}))}inheritParamsAndData(e,n){let r=e.value,i=Oh(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(s=>this.inheritParamsAndData(s,r))}processSegmentGroup(e,n,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0).pipe(j(s=>s instanceof vt?[s]:[]))}processChildren(e,n,r){let i=[];for(let s of Object.keys(r.children))s==="primary"?i.unshift(s):i.push(s);return be(i).pipe(at(s=>{let o=r.children[s],a=TN(n,s);return this.processSegmentGroup(e,a,o,s)}),Bu((s,o)=>(s.push(...o),s)),Bn(null),ju(),Te(s=>{if(s===null)return Fi(r);let o=US(s);return oA(o),P(o)}))}processSegment(e,n,r,i,s,o){return be(n).pipe(at(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,s,o).pipe(Un(c=>{if(c instanceof mo)return P(null);throw c}))),Qt(a=>!!a),Un(a=>{if(LS(a))return rA(r,i,s)?P(new xh):Fi(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,s,o,a){return nA(r,i,s,o)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o):Fi(i):Fi(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){let{matched:a,consumedSegments:c,positionalParamSegments:l,remainingSegments:u}=Uh(n,i,s);if(!a)return Fi(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>sA&&(this.allowRedirects=!1));let d=this.applyRedirects.applyRedirectCommands(c,i.redirectTo,l);return this.applyRedirects.lineralizeSegments(i,d).pipe(Te(f=>this.processSegment(e,r,n,f.concat(u),o,!1)))}matchSegmentAgainstRoute(e,n,r,i,s){let o=QN(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),o.pipe(lt(a=>a.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(lt(({routes:c})=>{let l=r._loadedInjector??e,{consumedSegments:u,remainingSegments:d,parameters:f}=a,h=new ho(u,f,Object.freeze(S({},this.urlTree.queryParams)),this.urlTree.fragment,cA(r),an(r),r.component??r._loadedComponent??null,r,lA(r)),{segmentGroup:p,slicedSegments:m}=mS(n,u,d,c);if(m.length===0&&p.hasChildren())return this.processChildren(l,c,p).pipe(j(v=>v===null?null:new vt(h,v)));if(c.length===0&&m.length===0)return P(new vt(h,[]));let C=an(r)===s;return this.processSegment(l,c,p,m,C?Q:s,!0).pipe(j(v=>new vt(h,v instanceof vt?[v]:[])))}))):Fi(n)))}getChildConfig(e,n,r){return n.children?P({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?P({routes:n._loadedRoutes,injector:n._loadedInjector}):zN(e,n,r,this.urlSerializer).pipe(Te(i=>i?this.configLoader.loadChildren(e,n).pipe(Ge(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):JN(n))):P({routes:[],injector:e})}};function oA(t){t.sort((e,n)=>e.value.outlet===Q?-1:n.value.outlet===Q?1:e.value.outlet.localeCompare(n.value.outlet))}function aA(t){let e=t.value.routeConfig;return e&&e.path===""}function US(t){let e=[],n=new Set;for(let r of t){if(!aA(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=US(r.children);e.push(new vt(r.value,i))}return e.filter(r=>!n.has(r))}function cA(t){return t.data||{}}function lA(t){return t.resolve||{}}function uA(t,e,n,r,i,s){return Te(o=>iA(t,e,n,r,o.extractedUrl,i,s).pipe(j(({state:a,tree:c})=>x(S({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function dA(t,e){return Te(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return P(n);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let l of BS(c))o.add(l);let a=0;return be(o).pipe(at(c=>s.has(c)?fA(c,r,t,e):(c.data=Oh(c,c.parent,t).resolve,P(void 0))),Ge(()=>a++),ui(1),Te(c=>a===o.size?P(n):Ze))})}function BS(t){let e=t.children.map(n=>BS(n)).flat();return[t,...e]}function fA(t,e,n,r){let i=t.routeConfig,s=t._resolve;return i?.title!==void 0&&!AS(i)&&(s[go]=i.title),hA(s,t,e,r).pipe(j(o=>(t._resolvedData=o,t.data=Oh(t,t.parent,n).resolve,null)))}function hA(t,e,n,r){let i=ah(t);if(i.length===0)return P({});let s={};return be(i).pipe(Te(o=>pA(t[o],e,n,r).pipe(Qt(),Ge(a=>{s[o]=a}))),ui(1),Lu(s),Un(o=>LS(o)?Ze:ci(o)))}function pA(t,e,n,r){let i=yo(e)??r,s=Wi(t,i),o=s.resolve?s.resolve(e,n):Tr(i,()=>s(e,n));return tr(o)}function sh(t){return lt(e=>{let n=t(e);return n?be(n).pipe(j(()=>e)):P(e)})}var VS=(()=>{let e=class e{buildTitle(r){let i,s=r.root;for(;s!==void 0;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(o=>o.outlet===Q);return i}getResolvedTitleForRoute(r){return r.data[go]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=U({token:e,factory:()=>N(mA),providedIn:"root"});let t=e;return t})(),mA=(()=>{let e=class e extends VS{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(G(uS))},e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Bh=new Y("",{providedIn:"root",factory:()=>({})}),Vh=new Y(""),gA=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=N($f)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return P(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=tr(r.loadComponent()).pipe(j($S),Ge(o=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o}),Es(()=>{this.componentLoaders.delete(r)})),s=new si(i,()=>new Pe).pipe(ii());return this.componentLoaders.set(r,s),s}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return P({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=yA(i,this.compiler,r,this.onLoadEndListener).pipe(Es(()=>{this.childrenLoaders.delete(i)})),a=new si(o,()=>new Pe).pipe(ii());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function yA(t,e,n,r){return tr(t.loadChildren()).pipe(j($S),Te(i=>i instanceof js||Array.isArray(i)?P(i):be(e.compileModuleAsync(i))),j(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(n).injector,o=s.get(Vh,[],{optional:!0,self:!0}).flat()),{routes:o.map(jh),injector:s}}))}function vA(t){return t&&typeof t=="object"&&"default"in t}function $S(t){return vA(t)?t.default:t}var $h=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=U({token:e,factory:()=>N(bA),providedIn:"root"});let t=e;return t})(),bA=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),wA=new Y("");var CA=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Pe,this.transitionAbortSubject=new Pe,this.configLoader=N(gA),this.environmentInjector=N(Et),this.urlSerializer=N(Mh),this.rootContexts=N(Wc),this.location=N(Ys),this.inputBindingEnabled=N(Lh,{optional:!0})!==null,this.titleStrategy=N(VS),this.options=N(Bh,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=N($h),this.createViewTransition=N(wA,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>P(void 0),this.rootComponentType=null;let r=s=>this.events.next(new gh(s)),i=s=>this.events.next(new yh(s));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(x(S(S({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,s){return this.transitions=new M({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:so,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ot(o=>o.id!==0),j(o=>x(S({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),lt(o=>{let a=!1,c=!1;return P(o).pipe(lt(l=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",bt.SupersededByNewNavigation),Ze;this.currentTransition=o,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?x(S({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let u=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=l.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!u&&d!=="reload"){let f="";return this.events.next(new Lr(l.id,this.urlSerializer.serialize(l.rawUrl),f,dh.IgnoredSameUrlNavigation)),l.resolve(null),Ze}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return P(l).pipe(lt(f=>{let h=this.transitions?.getValue();return this.events.next(new co(f.id,this.urlSerializer.serialize(f.extractedUrl),f.source,f.restoredState)),h!==this.transitions?.getValue()?Ze:Promise.resolve(f)}),uA(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),Ge(f=>{o.targetSnapshot=f.targetSnapshot,o.urlAfterRedirects=f.urlAfterRedirects,this.currentNavigation=x(S({},this.currentNavigation),{finalUrl:f.urlAfterRedirects});let h=new jc(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(h)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:f,extractedUrl:h,source:p,restoredState:m,extras:C}=l,v=new co(f,this.urlSerializer.serialize(h),p,m);this.events.next(v);let E=xS(this.rootComponentType).snapshot;return this.currentTransition=o=x(S({},l),{targetSnapshot:E,urlAfterRedirects:h,extras:x(S({},C),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=h,P(o)}else{let f="";return this.events.next(new Lr(l.id,this.urlSerializer.serialize(l.extractedUrl),f,dh.IgnoredByUrlHandlingStrategy)),l.resolve(null),Ze}}),Ge(l=>{let u=new fh(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),j(l=>(this.currentTransition=o=x(S({},l),{guards:kN(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),o)),jN(this.environmentInjector,l=>this.events.next(l)),Ge(l=>{if(o.guardsResult=l.guardsResult,Vi(l.guardsResult))throw OS(this.urlSerializer,l.guardsResult);let u=new hh(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(u)}),ot(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",bt.GuardRejected),!1)),sh(l=>{if(l.guards.canActivateChecks.length)return P(l).pipe(Ge(u=>{let d=new ph(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),lt(u=>{let d=!1;return P(u).pipe(dA(this.paramsInheritanceStrategy,this.environmentInjector),Ge({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(u,"",bt.NoDataFromResolver)}}))}),Ge(u=>{let d=new mh(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}))}),sh(l=>{let u=d=>{let f=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&f.push(this.configLoader.loadComponent(d.routeConfig).pipe(Ge(h=>{d.component=h}),j(()=>{})));for(let h of d.children)f.push(...u(h));return f};return Jt(u(l.targetSnapshot.root)).pipe(Bn(null),ct(1))}),sh(()=>this.afterPreactivation()),lt(()=>{let{currentSnapshot:l,targetSnapshot:u}=o,d=this.createViewTransition?.(this.environmentInjector,l.root,u.root);return d?be(d).pipe(j(()=>o)):P(o)}),j(l=>{let u=wN(r.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=o=x(S({},l),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,o}),Ge(()=>{this.events.next(new uo)}),RN(this.rootContexts,r.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),ct(1),Ge({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Fr(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),$u(this.transitionAbortSubject.pipe(Ge(l=>{throw l}))),Es(()=>{!a&&!c&&this.cancelNavigationTransition(o,"",bt.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Un(l=>{if(c=!0,FS(l))this.events.next(new er(o.id,this.urlSerializer.serialize(o.extractedUrl),l.message,l.cancellationCode)),DN(l)?this.events.next(new fo(l.url)):o.resolve(!1);else{this.events.next(new lo(o.id,this.urlSerializer.serialize(o.extractedUrl),l,o.targetSnapshot??void 0));try{o.resolve(r.errorHandler(l))}catch(u){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(u)}}return Ze}))}))}cancelNavigationTransition(r,i,s){let o=new er(r.id,this.urlSerializer.serialize(r.extractedUrl),i,s);this.events.next(o),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function SA(t){return t!==so}var DA=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=U({token:e,factory:()=>N(EA),providedIn:"root"});let t=e;return t})(),Ah=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},EA=(()=>{let e=class e extends Ah{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=_r(e)))(s||e)}})(),e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),HS=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=U({token:e,factory:()=>N(IA),providedIn:"root"});let t=e;return t})(),IA=(()=>{let e=class e extends HS{constructor(){super(...arguments),this.location=N(Ys),this.urlSerializer=N(Mh),this.options=N(Bh,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=N($h),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Xn,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=xS(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof co)this.stateMemento=this.createStateMemento();else if(r instanceof Lr)this.rawUrlTree=i.initialUrl;else if(r instanceof jc){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(s,i)}}else r instanceof uo?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof er&&(r.code===bt.GuardRejected||r.code===bt.NoDataFromResolver)?this.restoreHistory(i):r instanceof lo?this.restoreHistory(i,!0):r instanceof Fr&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let s=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){let o=this.browserPageId,a=S(S({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(s,"",a)}else{let o=S(S({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===r.finalUrl&&o===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=_r(e)))(s||e)}})(),e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),ro=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(ro||{});function TA(t,e){t.events.pipe(ot(n=>n instanceof Fr||n instanceof er||n instanceof lo||n instanceof Lr),j(n=>n instanceof Fr||n instanceof Lr?ro.COMPLETE:(n instanceof er?n.code===bt.Redirect||n.code===bt.SupersededByNewNavigation:!1)?ro.REDIRECTING:ro.FAILED),ot(n=>n!==ro.REDIRECTING),ct(1)).subscribe(()=>{e()})}function RA(t){throw t}var kA={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},_A={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},WS=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=N(Dc),this.stateManager=N(HS),this.options=N(Bh,{optional:!0})||{},this.pendingTasks=N(bc),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=N(CA),this.urlSerializer=N(Mh),this.location=N(Ys),this.urlHandlingStrategy=N($h),this._events=new Pe,this.errorHandler=this.options.errorHandler||RA,this.navigated=!1,this.routeReuseStrategy=N(DA),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=N(Vh,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!N(Lh,{optional:!0}),this.eventsSubscription=new Ie,this.isNgZoneEnabled=N(Ne)instanceof Ne&&Ne.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof er&&i.code!==bt.Redirect&&i.code!==bt.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Fr)this.navigated=!0;else if(i instanceof fo){let a=this.urlHandlingStrategy.merge(i.url,s.currentRawUrl),c={info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||SA(s.source)};this.scheduleNavigation(a,so,null,c,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}NA(i)&&this._events.next(i)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),so,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let l=S({},s);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let c=this.parseUrl(r);this.scheduleNavigation(c,i,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(jh),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:c,preserveFragment:l}=i,u=l?this.currentUrlTree.fragment:a,d=null;switch(c){case"merge":d=S(S({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let f;try{let h=s?s.snapshot:this.routerState.snapshot.root;f=TS(h)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),f=this.currentUrlTree.root}return RS(f,r,d,u??null)}navigateByUrl(r,i={skipLocationChange:!1}){let s=Vi(r)?r:this.parseUrl(r),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,so,null,i)}navigate(r,i={skipLocationChange:!1}){return xA(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let s;if(i===!0?s=S({},kA):i===!1?s=S({},_A):s=i,Vi(r))return dS(this.currentUrlTree,r,s);let o=this.parseUrl(r);return dS(this.currentUrlTree,o,s)}removeEmptyProps(r){return Object.entries(r).reduce((i,[s,o])=>(o!=null&&(i[s]=o),i),{})}scheduleNavigation(r,i,s,o,a){if(this.disposed)return Promise.resolve(!1);let c,l,u;a?(c=a.resolve,l=a.reject,u=a.promise):u=new Promise((f,h)=>{c=f,l=h});let d=this.pendingTasks.add();return TA(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:o,resolve:c,reject:l,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(f=>Promise.reject(f))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function xA(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new B(4008,!1)}function NA(t){return!(t instanceof uo)&&!(t instanceof fo)}var AA=new Y("");function qS(t,...e){return ic([{provide:Vh,multi:!0,useValue:t},[],{provide:$i,useFactory:MA,deps:[WS]},{provide:Vf,multi:!0,useFactory:OA},e.map(n=>n.\u0275providers)])}function MA(t){return t.routerState.root}function OA(){let t=N(_i);return e=>{let n=t.get(Qs);if(e!==n.components[0])return;let r=t.get(WS),i=t.get(PA);t.get(FA)===1&&r.initialNavigation(),t.get(LA,null,Z.Optional)?.setUpPreloading(),t.get(AA,null,Z.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var PA=new Y("",{factory:()=>new Pe}),FA=new Y("",{providedIn:"root",factory:()=>1});var LA=new Y("");var qi=class{},zS=(()=>{class t extends qi{getTranslation(n){return P({})}static \u0275fac=(()=>{let n;return function(i){return(n||(n=_r(t)))(i||t)}})();static \u0275prov=U({token:t,factory:t.\u0275fac})}return t})(),bo=class{},GS=(()=>{class t{handle(n){return n.key}static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:t.\u0275fac})}return t})();function jr(t){return typeof t<"u"&&t!==null}function Hh(t){return t&&typeof t=="object"&&!Array.isArray(t)}function YS(t,e){let n=Object.assign({},t);return Hh(t)&&Hh(e)&&Object.keys(e).forEach(r=>{Hh(e[r])?r in t?n[r]=YS(t[r],e[r]):Object.assign(n,{[r]:e[r]}):Object.assign(n,{[r]:e[r]})}),n}var zi=class{},KS=(()=>{class t extends zi{templateMatcher=/{{\s?([^{}\s]*)\s?}}/g;interpolate(n,r){let i;return typeof n=="string"?i=this.interpolateString(n,r):typeof n=="function"?i=this.interpolateFunction(n,r):i=n,i}getValue(n,r){let i=typeof r=="string"?r.split("."):[r];r="";do r+=i.shift(),jr(n)&&jr(n[r])&&(typeof n[r]=="object"||!i.length)?(n=n[r],r=""):i.length?r+=".":n=void 0;while(i.length);return n}interpolateFunction(n,r){return n(r)}interpolateString(n,r){return r?n.replace(this.templateMatcher,(i,s)=>{let o=this.getValue(r,s);return jr(o)?o:i}):n}static \u0275fac=(()=>{let n;return function(i){return(n||(n=_r(t)))(i||t)}})();static \u0275prov=U({token:t,factory:t.\u0275fac})}return t})(),Gi=class{},JS=(()=>{class t extends Gi{compile(n,r){return n}compileTranslations(n,r){return n}static \u0275fac=(()=>{let n;return function(i){return(n||(n=_r(t)))(i||t)}})();static \u0275prov=U({token:t,factory:t.\u0275fac})}return t})(),zc=class{defaultLang;currentLang=this.defaultLang;translations={};langs=[];onTranslationChange=new we;onLangChange=new we;onDefaultLangChange=new we},Wh=new Y("USE_STORE"),qh=new Y("USE_DEFAULT_LANG"),zh=new Y("DEFAULT_LANGUAGE"),Gh=new Y("USE_EXTEND"),QS=(()=>{class t{store;currentLoader;compiler;parser;missingTranslationHandler;useDefaultLang;isolate;extend;loadingTranslations;pending=!1;_onTranslationChange=new we;_onLangChange=new we;_onDefaultLangChange=new we;_defaultLang;_currentLang;_langs=[];_translations={};_translationRequests={};get onTranslationChange(){return this.isolate?this._onTranslationChange:this.store.onTranslationChange}get onLangChange(){return this.isolate?this._onLangChange:this.store.onLangChange}get onDefaultLangChange(){return this.isolate?this._onDefaultLangChange:this.store.onDefaultLangChange}get defaultLang(){return this.isolate?this._defaultLang:this.store.defaultLang}set defaultLang(n){this.isolate?this._defaultLang=n:this.store.defaultLang=n}get currentLang(){return this.isolate?this._currentLang:this.store.currentLang}set currentLang(n){this.isolate?this._currentLang=n:this.store.currentLang=n}get langs(){return this.isolate?this._langs:this.store.langs}set langs(n){this.isolate?this._langs=n:this.store.langs=n}get translations(){return this.isolate?this._translations:this.store.translations}set translations(n){this.isolate?this._translations=n:this.store.translations=n}constructor(n,r,i,s,o,a=!0,c=!1,l=!1,u){this.store=n,this.currentLoader=r,this.compiler=i,this.parser=s,this.missingTranslationHandler=o,this.useDefaultLang=a,this.isolate=c,this.extend=l,u&&this.setDefaultLang(u)}setDefaultLang(n){if(n===this.defaultLang)return;let r=this.retrieveTranslations(n);typeof r<"u"?(this.defaultLang==null&&(this.defaultLang=n),r.pipe(ct(1)).subscribe(i=>{this.changeDefaultLang(n)})):this.changeDefaultLang(n)}getDefaultLang(){return this.defaultLang}use(n){if(n===this.currentLang)return P(this.translations[n]);let r=this.retrieveTranslations(n);return typeof r<"u"?(this.currentLang||(this.currentLang=n),r.pipe(ct(1)).subscribe(i=>{this.changeLang(n)}),r):(this.changeLang(n),P(this.translations[n]))}retrieveTranslations(n){let r;return(typeof this.translations[n]>"u"||this.extend)&&(this._translationRequests[n]=this._translationRequests[n]||this.getTranslation(n),r=this._translationRequests[n]),r}getTranslation(n){this.pending=!0;let r=this.currentLoader.getTranslation(n).pipe(Fe(1),ct(1));return this.loadingTranslations=r.pipe(j(i=>this.compiler.compileTranslations(i,n)),Fe(1),ct(1)),this.loadingTranslations.subscribe({next:i=>{this.translations[n]=this.extend&&this.translations[n]?S(S({},i),this.translations[n]):i,this.updateLangs(),this.pending=!1},error:i=>{this.pending=!1}}),r}setTranslation(n,r,i=!1){r=this.compiler.compileTranslations(r,n),(i||this.extend)&&this.translations[n]?this.translations[n]=YS(this.translations[n],r):this.translations[n]=r,this.updateLangs(),this.onTranslationChange.emit({lang:n,translations:this.translations[n]})}getLangs(){return this.langs}addLangs(n){n.forEach(r=>{this.langs.indexOf(r)===-1&&this.langs.push(r)})}updateLangs(){this.addLangs(Object.keys(this.translations))}getParsedResult(n,r,i){let s;if(r instanceof Array){let o={},a=!1;for(let c of r)o[c]=this.getParsedResult(n,c,i),Kt(o[c])&&(a=!0);if(a){let c=r.map(l=>Kt(o[l])?o[l]:P(o[l]));return Mu(c).pipe(j(l=>{let u={};return l.forEach((d,f)=>{u[r[f]]=d}),u}))}return o}if(n&&(s=this.parser.interpolate(this.parser.getValue(n,r),i)),typeof s>"u"&&this.defaultLang!=null&&this.defaultLang!==this.currentLang&&this.useDefaultLang&&(s=this.parser.interpolate(this.parser.getValue(this.translations[this.defaultLang],r),i)),typeof s>"u"){let o={key:r,translateService:this};typeof i<"u"&&(o.interpolateParams=i),s=this.missingTranslationHandler.handle(o)}return typeof s<"u"?s:r}get(n,r){if(!jr(n)||!n.length)throw new Error('Parameter "key" required');if(this.pending)return this.loadingTranslations.pipe(at(i=>(i=this.getParsedResult(i,n,r),Kt(i)?i:P(i))));{let i=this.getParsedResult(this.translations[this.currentLang],n,r);return Kt(i)?i:P(i)}}getStreamOnTranslationChange(n,r){if(!jr(n)||!n.length)throw new Error('Parameter "key" required');return wn(yr(()=>this.get(n,r)),this.onTranslationChange.pipe(lt(i=>{let s=this.getParsedResult(i.translations,n,r);return typeof s.subscribe=="function"?s:P(s)})))}stream(n,r){if(!jr(n)||!n.length)throw new Error('Parameter "key" required');return wn(yr(()=>this.get(n,r)),this.onLangChange.pipe(lt(i=>{let s=this.getParsedResult(i.translations,n,r);return Kt(s)?s:P(s)})))}instant(n,r){if(!jr(n)||!n.length)throw new Error('Parameter "key" required');let i=this.getParsedResult(this.translations[this.currentLang],n,r);if(Kt(i)){if(n instanceof Array){let s={};return n.forEach((o,a)=>{s[n[a]]=n[a]}),s}return n}else return i}set(n,r,i=this.currentLang){this.translations[i][n]=this.compiler.compile(r,i),this.updateLangs(),this.onTranslationChange.emit({lang:i,translations:this.translations[i]})}changeLang(n){this.currentLang=n,this.onLangChange.emit({lang:n,translations:this.translations[n]}),this.defaultLang==null&&this.changeDefaultLang(n)}changeDefaultLang(n){this.defaultLang=n,this.onDefaultLangChange.emit({lang:n,translations:this.translations[n]})}reloadLang(n){return this.resetLang(n),this.getTranslation(n)}resetLang(n){this._translationRequests[n]=void 0,this.translations[n]=void 0}getBrowserLang(){if(typeof window>"u"||typeof window.navigator>"u")return;let n=window.navigator.languages?window.navigator.languages[0]:null;if(n=n||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage,!(typeof n>"u"))return n.indexOf("-")!==-1&&(n=n.split("-")[0]),n.indexOf("_")!==-1&&(n=n.split("_")[0]),n}getBrowserCultureLang(){if(typeof window>"u"||typeof window.navigator>"u")return;let n=window.navigator.languages?window.navigator.languages[0]:null;return n=n||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage,n}static \u0275fac=function(r){return new(r||t)(G(zc),G(qi),G(Gi),G(zi),G(bo),G(qh),G(Wh),G(Gh),G(zh))};static \u0275prov=U({token:t,factory:t.\u0275fac})}return t})();var ZS=(()=>{class t{static forRoot(n={}){return{ngModule:t,providers:[n.loader||{provide:qi,useClass:zS},n.compiler||{provide:Gi,useClass:JS},n.parser||{provide:zi,useClass:KS},n.missingTranslationHandler||{provide:bo,useClass:GS},zc,{provide:Wh,useValue:n.isolate},{provide:qh,useValue:n.useDefaultLang},{provide:Gh,useValue:n.extend},{provide:zh,useValue:n.defaultLanguage},QS]}}static forChild(n={}){return{ngModule:t,providers:[n.loader||{provide:qi,useClass:zS},n.compiler||{provide:Gi,useClass:JS},n.parser||{provide:zi,useClass:KS},n.missingTranslationHandler||{provide:bo,useClass:GS},{provide:Wh,useValue:n.isolate},{provide:qh,useValue:n.useDefaultLang},{provide:Gh,useValue:n.extend},{provide:zh,useValue:n.defaultLanguage},QS]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Gn({type:t});static \u0275inj=zn({})}return t})();var XS=[];var eD={providers:[qS(XS),rf(ZS.forRoot())]};var nD=!0,rD=!0;function wo(t,e,n){let r=t.match(e);return r&&r.length>=n&&parseInt(r[n],10)}function cn(t,e,n){if(!t.RTCPeerConnection)return;let r=t.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(o,a){if(o!==e)return i.apply(this,arguments);let c=l=>{let u=n(l);u&&(a.handleEvent?a.handleEvent(u):a(u))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(a,c),i.apply(this,[o,c])};let s=r.removeEventListener;r.removeEventListener=function(o,a){if(o!==e||!this._eventMap||!this._eventMap[e])return s.apply(this,arguments);if(!this._eventMap[e].has(a))return s.apply(this,arguments);let c=this._eventMap[e].get(a);return this._eventMap[e].delete(a),this._eventMap[e].size===0&&delete this._eventMap[e],Object.keys(this._eventMap).length===0&&delete this._eventMap,s.apply(this,[o,c])},Object.defineProperty(r,"on"+e,{get(){return this["_on"+e]},set(o){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),o&&this.addEventListener(e,this["_on"+e]=o)},enumerable:!0,configurable:!0})}function iD(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(nD=t,t?"adapter.js logging disabled":"adapter.js logging enabled")}function sD(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(rD=!t,"adapter.js deprecation warnings "+(t?"disabled":"enabled"))}function Gc(){if(typeof window=="object"){if(nD)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function Ki(t,e){rD&&console.warn(t+" is deprecated, please use "+e+" instead.")}function oD(t){let e={browser:null,version:null};if(typeof t>"u"||!t.navigator||!t.navigator.userAgent)return e.browser="Not a browser.",e;let{navigator:n}=t;if(n.mozGetUserMedia)e.browser="firefox",e.version=wo(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||t.isSecureContext===!1&&t.webkitRTCPeerConnection)e.browser="chrome",e.version=wo(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(t.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))e.browser="safari",e.version=wo(n.userAgent,/AppleWebKit\/(\d+)\./,1),e.supportsUnifiedPlan=t.RTCRtpTransceiver&&"currentDirection"in t.RTCRtpTransceiver.prototype;else return e.browser="Not a supported browser.",e;return e}function tD(t){return Object.prototype.toString.call(t)==="[object Object]"}function Jh(t){return tD(t)?Object.keys(t).reduce(function(e,n){let r=tD(t[n]),i=r?Jh(t[n]):t[n],s=r&&!Object.keys(i).length;return i===void 0||s?e:Object.assign(e,{[n]:i})},{}):t}function Kh(t,e,n){!e||n.has(e.id)||(n.set(e.id,e),Object.keys(e).forEach(r=>{r.endsWith("Id")?Kh(t,t.get(e[r]),n):r.endsWith("Ids")&&e[r].forEach(i=>{Kh(t,t.get(i),n)})}))}function Qh(t,e,n){let r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(e===null)return i;let s=[];return t.forEach(o=>{o.type==="track"&&o.trackIdentifier===e.id&&s.push(o)}),s.forEach(o=>{t.forEach(a=>{a.type===r&&a.trackId===o.id&&Kh(t,a,i)})}),i}var Qc={};gs(Qc,{fixNegotiationNeeded:()=>rp,shimAddTrackRemoveTrack:()=>np,shimAddTrackRemoveTrackWithNative:()=>lD,shimGetDisplayMedia:()=>cD,shimGetSendersWithDtmf:()=>Xh,shimGetStats:()=>ep,shimGetUserMedia:()=>Kc,shimMediaStream:()=>Yh,shimOnTrack:()=>Zh,shimPeerConnection:()=>Jc,shimSenderReceiverGetStats:()=>tp});var aD=Gc;function Kc(t,e){let n=t&&t.navigator;if(!n.mediaDevices)return;let r=function(a){if(typeof a!="object"||a.mandatory||a.optional)return a;let c={};return Object.keys(a).forEach(l=>{if(l==="require"||l==="advanced"||l==="mediaSource")return;let u=typeof a[l]=="object"?a[l]:{ideal:a[l]};u.exact!==void 0&&typeof u.exact=="number"&&(u.min=u.max=u.exact);let d=function(f,h){return f?f+h.charAt(0).toUpperCase()+h.slice(1):h==="deviceId"?"sourceId":h};if(u.ideal!==void 0){c.optional=c.optional||[];let f={};typeof u.ideal=="number"?(f[d("min",l)]=u.ideal,c.optional.push(f),f={},f[d("max",l)]=u.ideal,c.optional.push(f)):(f[d("",l)]=u.ideal,c.optional.push(f))}u.exact!==void 0&&typeof u.exact!="number"?(c.mandatory=c.mandatory||{},c.mandatory[d("",l)]=u.exact):["min","max"].forEach(f=>{u[f]!==void 0&&(c.mandatory=c.mandatory||{},c.mandatory[d(f,l)]=u[f])})}),a.advanced&&(c.optional=(c.optional||[]).concat(a.advanced)),c},i=function(a,c){if(e.version>=61)return c(a);if(a=JSON.parse(JSON.stringify(a)),a&&typeof a.audio=="object"){let l=function(u,d,f){d in u&&!(f in u)&&(u[f]=u[d],delete u[d])};a=JSON.parse(JSON.stringify(a)),l(a.audio,"autoGainControl","googAutoGainControl"),l(a.audio,"noiseSuppression","googNoiseSuppression"),a.audio=r(a.audio)}if(a&&typeof a.video=="object"){let l=a.video.facingMode;l=l&&(typeof l=="object"?l:{ideal:l});let u=e.version<66;if(l&&(l.exact==="user"||l.exact==="environment"||l.ideal==="user"||l.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!u)){delete a.video.facingMode;let d;if(l.exact==="environment"||l.ideal==="environment"?d=["back","rear"]:(l.exact==="user"||l.ideal==="user")&&(d=["front"]),d)return n.mediaDevices.enumerateDevices().then(f=>{f=f.filter(p=>p.kind==="videoinput");let h=f.find(p=>d.some(m=>p.label.toLowerCase().includes(m)));return!h&&f.length&&d.includes("back")&&(h=f[f.length-1]),h&&(a.video.deviceId=l.exact?{exact:h.deviceId}:{ideal:h.deviceId}),a.video=r(a.video),aD("chrome: "+JSON.stringify(a)),c(a)})}a.video=r(a.video)}return aD("chrome: "+JSON.stringify(a)),c(a)},s=function(a){return e.version>=64?a:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[a.name]||a.name,message:a.message,constraint:a.constraint||a.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},o=function(a,c,l){i(a,u=>{n.webkitGetUserMedia(u,c,d=>{l&&l(s(d))})})};if(n.getUserMedia=o.bind(n),n.mediaDevices.getUserMedia){let a=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(c){return i(c,l=>a(l).then(u=>{if(l.audio&&!u.getAudioTracks().length||l.video&&!u.getVideoTracks().length)throw u.getTracks().forEach(d=>{d.stop()}),new DOMException("","NotFoundError");return u},u=>Promise.reject(s(u))))}}}function cD(t,e){if(!(t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices)&&t.navigator.mediaDevices){if(typeof e!="function"){console.error("shimGetDisplayMedia: getSourceId argument is not a function");return}t.navigator.mediaDevices.getDisplayMedia=function(r){return e(r).then(i=>{let s=r.video&&r.video.width,o=r.video&&r.video.height,a=r.video&&r.video.frameRate;return r.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:i,maxFrameRate:a||3}},s&&(r.video.mandatory.maxWidth=s),o&&(r.video.mandatory.maxHeight=o),t.navigator.mediaDevices.getUserMedia(r)})}}}function Yh(t){t.MediaStream=t.MediaStream||t.webkitMediaStream}function Zh(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("ontrack"in t.RTCPeerConnection.prototype)){Object.defineProperty(t.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});let e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=r=>{r.stream.addEventListener("addtrack",i=>{let s;t.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(a=>a.track&&a.track.id===i.track.id):s={track:i.track};let o=new Event("track");o.track=i.track,o.receiver=s,o.transceiver={receiver:s},o.streams=[r.stream],this.dispatchEvent(o)}),r.stream.getTracks().forEach(i=>{let s;t.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(a=>a.track&&a.track.id===i.id):s={track:i};let o=new Event("track");o.track=i,o.receiver=s,o.transceiver={receiver:s},o.streams=[r.stream],this.dispatchEvent(o)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else cn(t,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function Xh(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("getSenders"in t.RTCPeerConnection.prototype)&&"createDTMFSender"in t.RTCPeerConnection.prototype){let e=function(i,s){return{track:s,get dtmf(){return this._dtmf===void 0&&(s.kind==="audio"?this._dtmf=i.createDTMFSender(s):this._dtmf=null),this._dtmf},_pc:i}};if(!t.RTCPeerConnection.prototype.getSenders){t.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};let i=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(a,c){let l=i.apply(this,arguments);return l||(l=e(this,a),this._senders.push(l)),l};let s=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(a){s.apply(this,arguments);let c=this._senders.indexOf(a);c!==-1&&this._senders.splice(c,1)}}let n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(s){this._senders=this._senders||[],n.apply(this,[s]),s.getTracks().forEach(o=>{this._senders.push(e(this,o))})};let r=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(s){this._senders=this._senders||[],r.apply(this,[s]),s.getTracks().forEach(o=>{let a=this._senders.find(c=>c.track===o);a&&this._senders.splice(this._senders.indexOf(a),1)})}}else if(typeof t=="object"&&t.RTCPeerConnection&&"getSenders"in t.RTCPeerConnection.prototype&&"createDTMFSender"in t.RTCPeerConnection.prototype&&t.RTCRtpSender&&!("dtmf"in t.RTCRtpSender.prototype)){let e=t.RTCPeerConnection.prototype.getSenders;t.RTCPeerConnection.prototype.getSenders=function(){let r=e.apply(this,[]);return r.forEach(i=>i._pc=this),r},Object.defineProperty(t.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function ep(t){if(!t.RTCPeerConnection)return;let e=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){let[r,i,s]=arguments;if(arguments.length>0&&typeof r=="function")return e.apply(this,arguments);if(e.length===0&&(arguments.length===0||typeof r!="function"))return e.apply(this,[]);let o=function(c){let l={};return c.result().forEach(d=>{let f={id:d.id,timestamp:d.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[d.type]||d.type};d.names().forEach(h=>{f[h]=d.stat(h)}),l[f.id]=f}),l},a=function(c){return new Map(Object.keys(c).map(l=>[l,c[l]]))};if(arguments.length>=2){let c=function(l){i(a(o(l)))};return e.apply(this,[c,r])}return new Promise((c,l)=>{e.apply(this,[function(u){c(a(o(u)))},l])}).then(i,s)}}function tp(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender&&t.RTCRtpReceiver))return;if(!("getStats"in t.RTCRtpSender.prototype)){let n=t.RTCPeerConnection.prototype.getSenders;n&&(t.RTCPeerConnection.prototype.getSenders=function(){let s=n.apply(this,[]);return s.forEach(o=>o._pc=this),s});let r=t.RTCPeerConnection.prototype.addTrack;r&&(t.RTCPeerConnection.prototype.addTrack=function(){let s=r.apply(this,arguments);return s._pc=this,s}),t.RTCRtpSender.prototype.getStats=function(){let s=this;return this._pc.getStats().then(o=>Qh(o,s.track,!0))}}if(!("getStats"in t.RTCRtpReceiver.prototype)){let n=t.RTCPeerConnection.prototype.getReceivers;n&&(t.RTCPeerConnection.prototype.getReceivers=function(){let i=n.apply(this,[]);return i.forEach(s=>s._pc=this),i}),cn(t,"track",r=>(r.receiver._pc=r.srcElement,r)),t.RTCRtpReceiver.prototype.getStats=function(){let i=this;return this._pc.getStats().then(s=>Qh(s,i.track,!1))}}if(!("getStats"in t.RTCRtpSender.prototype&&"getStats"in t.RTCRtpReceiver.prototype))return;let e=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof t.MediaStreamTrack){let r=arguments[0],i,s,o;return this.getSenders().forEach(a=>{a.track===r&&(i?o=!0:i=a)}),this.getReceivers().forEach(a=>(a.track===r&&(s?o=!0:s=a),a.track===r)),o||i&&s?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):i?i.getStats():s?s.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function lD(t){t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(o=>this._shimmedLocalStreams[o][0])};let e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(o,a){if(!a)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};let c=e.apply(this,arguments);return this._shimmedLocalStreams[a.id]?this._shimmedLocalStreams[a.id].indexOf(c)===-1&&this._shimmedLocalStreams[a.id].push(c):this._shimmedLocalStreams[a.id]=[a,c],c};let n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(o){this._shimmedLocalStreams=this._shimmedLocalStreams||{},o.getTracks().forEach(l=>{if(this.getSenders().find(d=>d.track===l))throw new DOMException("Track already exists.","InvalidAccessError")});let a=this.getSenders();n.apply(this,arguments);let c=this.getSenders().filter(l=>a.indexOf(l)===-1);this._shimmedLocalStreams[o.id]=[o].concat(c)};let r=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(o){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[o.id],r.apply(this,arguments)};let i=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(o){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},o&&Object.keys(this._shimmedLocalStreams).forEach(a=>{let c=this._shimmedLocalStreams[a].indexOf(o);c!==-1&&this._shimmedLocalStreams[a].splice(c,1),this._shimmedLocalStreams[a].length===1&&delete this._shimmedLocalStreams[a]}),i.apply(this,arguments)}}function np(t,e){if(!t.RTCPeerConnection)return;if(t.RTCPeerConnection.prototype.addTrack&&e.version>=65)return lD(t);let n=t.RTCPeerConnection.prototype.getLocalStreams;t.RTCPeerConnection.prototype.getLocalStreams=function(){let u=n.apply(this);return this._reverseStreams=this._reverseStreams||{},u.map(d=>this._reverseStreams[d.id])};let r=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(u){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},u.getTracks().forEach(d=>{if(this.getSenders().find(h=>h.track===d))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[u.id]){let d=new t.MediaStream(u.getTracks());this._streams[u.id]=d,this._reverseStreams[d.id]=u,u=d}r.apply(this,[u])};let i=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(u){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[u.id]||u]),delete this._reverseStreams[this._streams[u.id]?this._streams[u.id].id:u.id],delete this._streams[u.id]},t.RTCPeerConnection.prototype.addTrack=function(u,d){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");let f=[].slice.call(arguments,1);if(f.length!==1||!f[0].getTracks().find(m=>m===u))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(m=>m.track===u))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};let p=this._streams[d.id];if(p)p.addTrack(u),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{let m=new t.MediaStream([u]);this._streams[d.id]=m,this._reverseStreams[m.id]=d,this.addStream(m)}return this.getSenders().find(m=>m.track===u)};function s(l,u){let d=u.sdp;return Object.keys(l._reverseStreams||[]).forEach(f=>{let h=l._reverseStreams[f],p=l._streams[h.id];d=d.replace(new RegExp(p.id,"g"),h.id)}),new RTCSessionDescription({type:u.type,sdp:d})}function o(l,u){let d=u.sdp;return Object.keys(l._reverseStreams||[]).forEach(f=>{let h=l._reverseStreams[f],p=l._streams[h.id];d=d.replace(new RegExp(h.id,"g"),p.id)}),new RTCSessionDescription({type:u.type,sdp:d})}["createOffer","createAnswer"].forEach(function(l){let u=t.RTCPeerConnection.prototype[l],d={[l](){let f=arguments;return arguments.length&&typeof arguments[0]=="function"?u.apply(this,[p=>{let m=s(this,p);f[0].apply(null,[m])},p=>{f[1]&&f[1].apply(null,p)},arguments[2]]):u.apply(this,arguments).then(p=>s(this,p))}};t.RTCPeerConnection.prototype[l]=d[l]});let a=t.RTCPeerConnection.prototype.setLocalDescription;t.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?a.apply(this,arguments):(arguments[0]=o(this,arguments[0]),a.apply(this,arguments))};let c=Object.getOwnPropertyDescriptor(t.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(t.RTCPeerConnection.prototype,"localDescription",{get(){let l=c.get.apply(this);return l.type===""?l:s(this,l)}}),t.RTCPeerConnection.prototype.removeTrack=function(u){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!u._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(u._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let f;Object.keys(this._streams).forEach(h=>{this._streams[h].getTracks().find(m=>u.track===m)&&(f=this._streams[h])}),f&&(f.getTracks().length===1?this.removeStream(this._reverseStreams[f.id]):f.removeTrack(u.track),this.dispatchEvent(new Event("negotiationneeded")))}}function Jc(t,e){!t.RTCPeerConnection&&t.webkitRTCPeerConnection&&(t.RTCPeerConnection=t.webkitRTCPeerConnection),t.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){let r=t.RTCPeerConnection.prototype[n],i={[n](){return arguments[0]=new(n==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};t.RTCPeerConnection.prototype[n]=i[n]})}function rp(t,e){cn(t,"negotiationneeded",n=>{let r=n.target;if(!((e.version<72||r.getConfiguration&&r.getConfiguration().sdpSemantics==="plan-b")&&r.signalingState!=="stable"))return n})}var Xc={};gs(Xc,{shimAddTransceiver:()=>lp,shimCreateAnswer:()=>fp,shimCreateOffer:()=>dp,shimGetDisplayMedia:()=>uD,shimGetParameters:()=>up,shimGetUserMedia:()=>Yc,shimOnTrack:()=>ip,shimPeerConnection:()=>Zc,shimRTCDataChannel:()=>cp,shimReceiverGetStats:()=>op,shimRemoveStream:()=>ap,shimSenderGetStats:()=>sp});function Yc(t,e){let n=t&&t.navigator,r=t&&t.MediaStreamTrack;if(n.getUserMedia=function(i,s,o){Ki("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(i).then(s,o)},!(e.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){let i=function(o,a,c){a in o&&!(c in o)&&(o[c]=o[a],delete o[a])},s=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(o){return typeof o=="object"&&typeof o.audio=="object"&&(o=JSON.parse(JSON.stringify(o)),i(o.audio,"autoGainControl","mozAutoGainControl"),i(o.audio,"noiseSuppression","mozNoiseSuppression")),s(o)},r&&r.prototype.getSettings){let o=r.prototype.getSettings;r.prototype.getSettings=function(){let a=o.apply(this,arguments);return i(a,"mozAutoGainControl","autoGainControl"),i(a,"mozNoiseSuppression","noiseSuppression"),a}}if(r&&r.prototype.applyConstraints){let o=r.prototype.applyConstraints;r.prototype.applyConstraints=function(a){return this.kind==="audio"&&typeof a=="object"&&(a=JSON.parse(JSON.stringify(a)),i(a,"autoGainControl","mozAutoGainControl"),i(a,"noiseSuppression","mozNoiseSuppression")),o.apply(this,[a])}}}}function uD(t,e){t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices||t.navigator.mediaDevices&&(t.navigator.mediaDevices.getDisplayMedia=function(r){if(!(r&&r.video)){let i=new DOMException("getDisplayMedia without video constraints is undefined");return i.name="NotFoundError",i.code=8,Promise.reject(i)}return r.video===!0?r.video={mediaSource:e}:r.video.mediaSource=e,t.navigator.mediaDevices.getUserMedia(r)})}function ip(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Zc(t,e){if(typeof t!="object"||!(t.RTCPeerConnection||t.mozRTCPeerConnection))return;!t.RTCPeerConnection&&t.mozRTCPeerConnection&&(t.RTCPeerConnection=t.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(i){let s=t.RTCPeerConnection.prototype[i],o={[i](){return arguments[0]=new(i==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),s.apply(this,arguments)}};t.RTCPeerConnection.prototype[i]=o[i]});let n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){let[s,o,a]=arguments;return r.apply(this,[s||null]).then(c=>{if(e.version<53&&!o)try{c.forEach(l=>{l.type=n[l.type]||l.type})}catch(l){if(l.name!=="TypeError")throw l;c.forEach((u,d)=>{c.set(d,Object.assign({},u,{type:n[u.type]||u.type}))})}return c}).then(o,a)}}function sp(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpSender.prototype)return;let e=t.RTCPeerConnection.prototype.getSenders;e&&(t.RTCPeerConnection.prototype.getSenders=function(){let i=e.apply(this,[]);return i.forEach(s=>s._pc=this),i});let n=t.RTCPeerConnection.prototype.addTrack;n&&(t.RTCPeerConnection.prototype.addTrack=function(){let i=n.apply(this,arguments);return i._pc=this,i}),t.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function op(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpReceiver.prototype)return;let e=t.RTCPeerConnection.prototype.getReceivers;e&&(t.RTCPeerConnection.prototype.getReceivers=function(){let r=e.apply(this,[]);return r.forEach(i=>i._pc=this),r}),cn(t,"track",n=>(n.receiver._pc=n.srcElement,n)),t.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function ap(t){!t.RTCPeerConnection||"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){Ki("removeStream","removeTrack"),this.getSenders().forEach(r=>{r.track&&n.getTracks().includes(r.track)&&this.removeTrack(r)})})}function cp(t){t.DataChannel&&!t.RTCDataChannel&&(t.RTCDataChannel=t.DataChannel)}function lp(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;let e=t.RTCPeerConnection.prototype.addTransceiver;e&&(t.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let r=arguments[1]&&arguments[1].sendEncodings;r===void 0&&(r=[]),r=[...r];let i=r.length>0;i&&r.forEach(o=>{if("rid"in o&&!/^[a-z0-9]{0,16}$/i.test(o.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in o&&!(parseFloat(o.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in o&&!(parseFloat(o.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});let s=e.apply(this,arguments);if(i){let{sender:o}=s,a=o.getParameters();(!("encodings"in a)||a.encodings.length===1&&Object.keys(a.encodings[0]).length===0)&&(a.encodings=r,o.sendEncodings=r,this.setParametersPromises.push(o.setParameters(a).then(()=>{delete o.sendEncodings}).catch(()=>{delete o.sendEncodings})))}return s})}function up(t){if(!(typeof t=="object"&&t.RTCRtpSender))return;let e=t.RTCRtpSender.prototype.getParameters;e&&(t.RTCRtpSender.prototype.getParameters=function(){let r=e.apply(this,arguments);return"encodings"in r||(r.encodings=[].concat(this.sendEncodings||[{}])),r})}function dp(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;let e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function fp(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;let e=t.RTCPeerConnection.prototype.createAnswer;t.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}var el={};gs(el,{shimAudioContext:()=>wp,shimCallbacksAPI:()=>mp,shimConstraints:()=>dD,shimCreateOfferLegacy:()=>bp,shimGetUserMedia:()=>gp,shimLocalStreamsAPI:()=>hp,shimRTCIceServerUrls:()=>yp,shimRemoteStreamsAPI:()=>pp,shimTrackEventTransceiver:()=>vp});function hp(t){if(!(typeof t!="object"||!t.RTCPeerConnection)){if("getLocalStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in t.RTCPeerConnection.prototype)){let e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addStream=function(r){this._localStreams||(this._localStreams=[]),this._localStreams.includes(r)||this._localStreams.push(r),r.getAudioTracks().forEach(i=>e.call(this,i,r)),r.getVideoTracks().forEach(i=>e.call(this,i,r))},t.RTCPeerConnection.prototype.addTrack=function(r,...i){return i&&i.forEach(s=>{this._localStreams?this._localStreams.includes(s)||this._localStreams.push(s):this._localStreams=[s]}),e.apply(this,arguments)}}"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);let r=this._localStreams.indexOf(n);if(r===-1)return;this._localStreams.splice(r,1);let i=n.getTracks();this.getSenders().forEach(s=>{i.includes(s.track)&&this.removeTrack(s)})})}}function pp(t){if(!(typeof t!="object"||!t.RTCPeerConnection)&&("getRemoteStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in t.RTCPeerConnection.prototype))){Object.defineProperty(t.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=r=>{r.streams.forEach(i=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(i))return;this._remoteStreams.push(i);let s=new Event("addstream");s.stream=i,this.dispatchEvent(s)})})}});let e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){let r=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(i){i.streams.forEach(s=>{if(r._remoteStreams||(r._remoteStreams=[]),r._remoteStreams.indexOf(s)>=0)return;r._remoteStreams.push(s);let o=new Event("addstream");o.stream=s,r.dispatchEvent(o)})}),e.apply(r,arguments)}}}function mp(t){if(typeof t!="object"||!t.RTCPeerConnection)return;let e=t.RTCPeerConnection.prototype,n=e.createOffer,r=e.createAnswer,i=e.setLocalDescription,s=e.setRemoteDescription,o=e.addIceCandidate;e.createOffer=function(l,u){let d=arguments.length>=2?arguments[2]:arguments[0],f=n.apply(this,[d]);return u?(f.then(l,u),Promise.resolve()):f},e.createAnswer=function(l,u){let d=arguments.length>=2?arguments[2]:arguments[0],f=r.apply(this,[d]);return u?(f.then(l,u),Promise.resolve()):f};let a=function(c,l,u){let d=i.apply(this,[c]);return u?(d.then(l,u),Promise.resolve()):d};e.setLocalDescription=a,a=function(c,l,u){let d=s.apply(this,[c]);return u?(d.then(l,u),Promise.resolve()):d},e.setRemoteDescription=a,a=function(c,l,u){let d=o.apply(this,[c]);return u?(d.then(l,u),Promise.resolve()):d},e.addIceCandidate=a}function gp(t){let e=t&&t.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){let n=e.mediaDevices,r=n.getUserMedia.bind(n);e.mediaDevices.getUserMedia=i=>r(dD(i))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=(function(r,i,s){e.mediaDevices.getUserMedia(r).then(i,s)}).bind(e))}function dD(t){return t&&t.video!==void 0?Object.assign({},t,{video:Jh(t.video)}):t}function yp(t){if(!t.RTCPeerConnection)return;let e=t.RTCPeerConnection;t.RTCPeerConnection=function(r,i){if(r&&r.iceServers){let s=[];for(let o=0;o<r.iceServers.length;o++){let a=r.iceServers[o];a.urls===void 0&&a.url?(Ki("RTCIceServer.url","RTCIceServer.urls"),a=JSON.parse(JSON.stringify(a)),a.urls=a.url,delete a.url,s.push(a)):s.push(r.iceServers[o])}r.iceServers=s}return new e(r,i)},t.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(t.RTCPeerConnection,"generateCertificate",{get(){return e.generateCertificate}})}function vp(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function bp(t){let e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(r){if(r){typeof r.offerToReceiveAudio<"u"&&(r.offerToReceiveAudio=!!r.offerToReceiveAudio);let i=this.getTransceivers().find(o=>o.receiver.track.kind==="audio");r.offerToReceiveAudio===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):r.offerToReceiveAudio===!0&&!i&&this.addTransceiver("audio",{direction:"recvonly"}),typeof r.offerToReceiveVideo<"u"&&(r.offerToReceiveVideo=!!r.offerToReceiveVideo);let s=this.getTransceivers().find(o=>o.receiver.track.kind==="video");r.offerToReceiveVideo===!1&&s?s.direction==="sendrecv"?s.setDirection?s.setDirection("sendonly"):s.direction="sendonly":s.direction==="recvonly"&&(s.setDirection?s.setDirection("inactive"):s.direction="inactive"):r.offerToReceiveVideo===!0&&!s&&this.addTransceiver("video",{direction:"recvonly"})}return e.apply(this,arguments)}}function wp(t){typeof t!="object"||t.AudioContext||(t.AudioContext=t.webkitAudioContext)}var Dp={};gs(Dp,{removeExtmapAllowMixed:()=>rl,shimAddIceCandidateNullOrEmpty:()=>Eo,shimConnectionState:()=>nl,shimMaxMessageSize:()=>So,shimParameterlessSetLocalDescription:()=>Io,shimRTCIceCandidate:()=>Co,shimRTCIceCandidateRelayProtocol:()=>tl,shimSendThrowTypeError:()=>Do});var Ji=ys(Sp());function Co(t){if(!t.RTCIceCandidate||t.RTCIceCandidate&&"foundation"in t.RTCIceCandidate.prototype)return;let e=t.RTCIceCandidate;t.RTCIceCandidate=function(r){if(typeof r=="object"&&r.candidate&&r.candidate.indexOf("a=")===0&&(r=JSON.parse(JSON.stringify(r)),r.candidate=r.candidate.substring(2)),r.candidate&&r.candidate.length){let i=new e(r),s=Ji.default.parseCandidate(r.candidate);for(let o in s)o in i||Object.defineProperty(i,o,{value:s[o]});return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new e(r)},t.RTCIceCandidate.prototype=e.prototype,cn(t,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new t.RTCIceCandidate(n.candidate),writable:"false"}),n))}function tl(t){!t.RTCIceCandidate||t.RTCIceCandidate&&"relayProtocol"in t.RTCIceCandidate.prototype||cn(t,"icecandidate",e=>{if(e.candidate){let n=Ji.default.parseCandidate(e.candidate.candidate);n.type==="relay"&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[n.priority>>24])}return e})}function So(t,e){if(!t.RTCPeerConnection)return;"sctp"in t.RTCPeerConnection.prototype||Object.defineProperty(t.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});let n=function(a){if(!a||!a.sdp)return!1;let c=Ji.default.splitSections(a.sdp);return c.shift(),c.some(l=>{let u=Ji.default.parseMLine(l);return u&&u.kind==="application"&&u.protocol.indexOf("SCTP")!==-1})},r=function(a){let c=a.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(c===null||c.length<2)return-1;let l=parseInt(c[1],10);return l!==l?-1:l},i=function(a){let c=65536;return e.browser==="firefox"&&(e.version<57?a===-1?c=16384:c=2147483637:e.version<60?c=e.version===57?65535:65536:c=2147483637),c},s=function(a,c){let l=65536;e.browser==="firefox"&&e.version===57&&(l=65535);let u=Ji.default.matchPrefix(a.sdp,"a=max-message-size:");return u.length>0?l=parseInt(u[0].substring(19),10):e.browser==="firefox"&&c!==-1&&(l=2147483637),l},o=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,e.browser==="chrome"&&e.version>=76){let{sdpSemantics:c}=this.getConfiguration();c==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){let c=r(arguments[0]),l=i(c),u=s(arguments[0],c),d;l===0&&u===0?d=Number.POSITIVE_INFINITY:l===0||u===0?d=Math.max(l,u):d=Math.min(l,u);let f={};Object.defineProperty(f,"maxMessageSize",{get(){return d}}),this._sctp=f}return o.apply(this,arguments)}}function Do(t){if(!(t.RTCPeerConnection&&"createDataChannel"in t.RTCPeerConnection.prototype))return;function e(r,i){let s=r.send;r.send=function(){let a=arguments[0],c=a.length||a.size||a.byteLength;if(r.readyState==="open"&&i.sctp&&c>i.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+i.sctp.maxMessageSize+" bytes)");return s.apply(r,arguments)}}let n=t.RTCPeerConnection.prototype.createDataChannel;t.RTCPeerConnection.prototype.createDataChannel=function(){let i=n.apply(this,arguments);return e(i,this),i},cn(t,"datachannel",r=>(e(r.channel,r.target),r))}function nl(t){if(!t.RTCPeerConnection||"connectionState"in t.RTCPeerConnection.prototype)return;let e=t.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{let r=e[n];e[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=i=>{let s=i.target;if(s._lastConnectionState!==s.connectionState){s._lastConnectionState=s.connectionState;let o=new Event("connectionstatechange",i);s.dispatchEvent(o)}return i},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}})}function rl(t,e){if(!t.RTCPeerConnection||e.browser==="chrome"&&e.version>=71||e.browser==="safari"&&e.version>=605)return;let n=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(i){if(i&&i.sdp&&i.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){let s=i.sdp.split(`
`).filter(o=>o.trim()!=="a=extmap-allow-mixed").join(`
`);t.RTCSessionDescription&&i instanceof t.RTCSessionDescription?arguments[0]=new t.RTCSessionDescription({type:i.type,sdp:s}):i.sdp=s}return n.apply(this,arguments)}}function Eo(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;let n=t.RTCPeerConnection.prototype.addIceCandidate;!n||n.length===0||(t.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(e.browser==="chrome"&&e.version<78||e.browser==="firefox"&&e.version<68||e.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function Io(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;let n=t.RTCPeerConnection.prototype.setLocalDescription;!n||n.length===0||(t.RTCPeerConnection.prototype.setLocalDescription=function(){let i=arguments[0]||{};if(typeof i!="object"||i.type&&i.sdp)return n.apply(this,arguments);if(i={type:i.type,sdp:i.sdp},!i.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":i.type="offer";break;default:i.type="answer";break}return i.sdp||i.type!=="offer"&&i.type!=="answer"?n.apply(this,[i]):(i.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(o=>n.apply(this,[o]))})}var jA=ys(Sp());function fD({window:t}={},e={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){let n=Gc,r=oD(t),i={browserDetails:r,commonShim:Dp,extractVersion:wo,disableLog:iD,disableWarnings:sD,sdp:jA};switch(r.browser){case"chrome":if(!Qc||!Jc||!e.shimChrome)return n("Chrome shim is not included in this adapter release."),i;if(r.version===null)return n("Chrome shim can not determine version, not shimming."),i;n("adapter.js shimming chrome."),i.browserShim=Qc,Eo(t,r),Io(t,r),Kc(t,r),Yh(t,r),Jc(t,r),Zh(t,r),np(t,r),Xh(t,r),ep(t,r),tp(t,r),rp(t,r),Co(t,r),tl(t,r),nl(t,r),So(t,r),Do(t,r),rl(t,r);break;case"firefox":if(!Xc||!Zc||!e.shimFirefox)return n("Firefox shim is not included in this adapter release."),i;n("adapter.js shimming firefox."),i.browserShim=Xc,Eo(t,r),Io(t,r),Yc(t,r),Zc(t,r),ip(t,r),ap(t,r),sp(t,r),op(t,r),cp(t,r),lp(t,r),up(t,r),dp(t,r),fp(t,r),Co(t,r),nl(t,r),So(t,r),Do(t,r);break;case"safari":if(!el||!e.shimSafari)return n("Safari shim is not included in this adapter release."),i;n("adapter.js shimming safari."),i.browserShim=el,Eo(t,r),Io(t,r),yp(t,r),bp(t,r),mp(t,r),hp(t,r),pp(t,r),vp(t,r),gp(t,r),wp(t,r),Co(t,r),tl(t,r),So(t,r),Do(t,r),rl(t,r);break;default:n("Unsupported browser!");break}return i}var yH=fD({window:typeof window>"u"?void 0:window});function ln(t){let e=typeof t;if(e=="object"){if(Array.isArray(t))return"array";if(t===null)return"null"}return e}function nr(t){return t!==null&&typeof t=="object"&&!Array.isArray(t)}var _n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),il=[];for(let t=0;t<_n.length;t++)il[_n[t].charCodeAt(0)]=t;il[45]=_n.indexOf("+");il[95]=_n.indexOf("/");function hD(t){let e=t.length*3/4;t[t.length-2]=="="?e-=2:t[t.length-1]=="="&&(e-=1);let n=new Uint8Array(e),r=0,i=0,s,o=0;for(let a=0;a<t.length;a++){if(s=il[t.charCodeAt(a)],s===void 0)switch(t[a]){case"=":i=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(i){case 0:o=s,i=1;break;case 1:n[r++]=o<<2|(s&48)>>4,o=s,i=2;break;case 2:n[r++]=(o&15)<<4|(s&60)>>2,o=s,i=3;break;case 3:n[r++]=(o&3)<<6|s,i=0;break}}if(i==1)throw Error("invalid base64 string.");return n.subarray(0,r)}function pD(t){let e="",n=0,r,i=0;for(let s=0;s<t.length;s++)switch(r=t[s],n){case 0:e+=_n[r>>2],i=(r&3)<<4,n=1;break;case 1:e+=_n[i|r>>4],i=(r&15)<<2,n=2;break;case 2:e+=_n[i|r>>6],e+=_n[r&63],n=0;break}return n&&(e+=_n[i],e+="=",n==1&&(e+="=")),e}var b;(function(t){t.symbol=Symbol.for("protobuf-ts/unknown"),t.onRead=(n,r,i,s,o)=>{(e(r)?r[t.symbol]:r[t.symbol]=[]).push({no:i,wireType:s,data:o})},t.onWrite=(n,r,i)=>{for(let{no:s,wireType:o,data:a}of t.list(r))i.tag(s,o).raw(a)},t.list=(n,r)=>{if(e(n)){let i=n[t.symbol];return r?i.filter(s=>s.no==r):i}return[]},t.last=(n,r)=>t.list(n,r).slice(-1)[0];let e=n=>n&&Array.isArray(n[t.symbol])})(b||(b={}));function Ep(t,e){return Object.assign(Object.assign({},t),e)}var g=function(t){return t[t.Varint=0]="Varint",t[t.Bit64=1]="Bit64",t[t.LengthDelimited=2]="LengthDelimited",t[t.StartGroup=3]="StartGroup",t[t.EndGroup=4]="EndGroup",t[t.Bit32=5]="Bit32",t}(g||{});function mD(){let t=0,e=0;for(let r=0;r<28;r+=7){let i=this.buf[this.pos++];if(t|=(i&127)<<r,!(i&128))return this.assertBounds(),[t,e]}let n=this.buf[this.pos++];if(t|=(n&15)<<28,e=(n&112)>>4,!(n&128))return this.assertBounds(),[t,e];for(let r=3;r<=31;r+=7){let i=this.buf[this.pos++];if(e|=(i&127)<<r,!(i&128))return this.assertBounds(),[t,e]}throw new Error("invalid varint")}function ol(t,e,n){for(let s=0;s<28;s=s+7){let o=t>>>s,a=!(!(o>>>7)&&e==0),c=(a?o|128:o)&255;if(n.push(c),!a)return}let r=t>>>28&15|(e&7)<<4,i=!!(e>>3);if(n.push((i?r|128:r)&255),!!i){for(let s=3;s<31;s=s+7){let o=e>>>s,a=!!(o>>>7),c=(a?o|128:o)&255;if(n.push(c),!a)return}n.push(e>>>31&1)}}var sl=65536*65536;function Ip(t){let e=t[0]=="-";e&&(t=t.slice(1));let n=1e6,r=0,i=0;function s(o,a){let c=Number(t.slice(o,a));i*=n,r=r*n+c,r>=sl&&(i=i+(r/sl|0),r=r%sl)}return s(-24,-18),s(-18,-12),s(-12,-6),s(-6),[e,r,i]}function al(t,e){if(e>>>0<=2097151)return""+(sl*e+(t>>>0));let n=t&16777215,r=(t>>>24|e<<8)>>>0&16777215,i=e>>16&65535,s=n+r*6777216+i*6710656,o=r+i*8147497,a=i*2,c=1e7;s>=c&&(o+=Math.floor(s/c),s%=c),o>=c&&(a+=Math.floor(o/c),o%=c);function l(u,d){let f=u?String(u):"";return d?"0000000".slice(f.length)+f:f}return l(a,0)+l(o,a)+l(s,1)}function Tp(t,e){if(t>=0){for(;t>127;)e.push(t&127|128),t=t>>>7;e.push(t)}else{for(let n=0;n<9;n++)e.push(t&127|128),t=t>>7;e.push(1)}}function gD(){let t=this.buf[this.pos++],e=t&127;if(!(t&128))return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<7,!(t&128))return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<14,!(t&128))return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<21,!(t&128))return this.assertBounds(),e;t=this.buf[this.pos++],e|=(t&15)<<28;for(let n=5;t&128&&n<10;n++)t=this.buf[this.pos++];if(t&128)throw new Error("invalid varint");return this.assertBounds(),e>>>0}var pe;function UA(){let t=new DataView(new ArrayBuffer(8));pe=globalThis.BigInt!==void 0&&typeof t.getBigInt64=="function"&&typeof t.getBigUint64=="function"&&typeof t.setBigInt64=="function"&&typeof t.setBigUint64=="function"?{MIN:BigInt("-9223372036854775808"),MAX:BigInt("9223372036854775807"),UMIN:BigInt("0"),UMAX:BigInt("18446744073709551615"),C:BigInt,V:t}:void 0}UA();function yD(t){if(!t)throw new Error("BigInt unavailable, see https://github.com/timostamm/protobuf-ts/blob/v1.0.8/MANUAL.md#bigint-support")}var vD=/^-?[0-9]+$/,ll=4294967296,cl=2147483648,ul=class{constructor(e,n){this.lo=e|0,this.hi=n|0}isZero(){return this.lo==0&&this.hi==0}toNumber(){let e=this.hi*ll+(this.lo>>>0);if(!Number.isSafeInteger(e))throw new Error("cannot convert to safe number");return e}},Re=class t extends ul{static from(e){if(pe)switch(typeof e){case"string":if(e=="0")return this.ZERO;if(e=="")throw new Error("string is no integer");e=pe.C(e);case"number":if(e===0)return this.ZERO;e=pe.C(e);case"bigint":if(!e)return this.ZERO;if(e<pe.UMIN)throw new Error("signed value for ulong");if(e>pe.UMAX)throw new Error("ulong too large");return pe.V.setBigUint64(0,e,!0),new t(pe.V.getInt32(0,!0),pe.V.getInt32(4,!0))}else switch(typeof e){case"string":if(e=="0")return this.ZERO;if(e=e.trim(),!vD.test(e))throw new Error("string is no integer");let[n,r,i]=Ip(e);if(n)throw new Error("signed value for ulong");return new t(r,i);case"number":if(e==0)return this.ZERO;if(!Number.isSafeInteger(e))throw new Error("number is no integer");if(e<0)throw new Error("signed value for ulong");return new t(e,e/ll)}throw new Error("unknown value "+typeof e)}toString(){return pe?this.toBigInt().toString():al(this.lo,this.hi)}toBigInt(){return yD(pe),pe.V.setInt32(0,this.lo,!0),pe.V.setInt32(4,this.hi,!0),pe.V.getBigUint64(0,!0)}};Re.ZERO=new Re(0,0);var le=class t extends ul{static from(e){if(pe)switch(typeof e){case"string":if(e=="0")return this.ZERO;if(e=="")throw new Error("string is no integer");e=pe.C(e);case"number":if(e===0)return this.ZERO;e=pe.C(e);case"bigint":if(!e)return this.ZERO;if(e<pe.MIN)throw new Error("signed long too small");if(e>pe.MAX)throw new Error("signed long too large");return pe.V.setBigInt64(0,e,!0),new t(pe.V.getInt32(0,!0),pe.V.getInt32(4,!0))}else switch(typeof e){case"string":if(e=="0")return this.ZERO;if(e=e.trim(),!vD.test(e))throw new Error("string is no integer");let[n,r,i]=Ip(e);if(n){if(i>cl||i==cl&&r!=0)throw new Error("signed long too small")}else if(i>=cl)throw new Error("signed long too large");let s=new t(r,i);return n?s.negate():s;case"number":if(e==0)return this.ZERO;if(!Number.isSafeInteger(e))throw new Error("number is no integer");return e>0?new t(e,e/ll):new t(-e,-e/ll).negate()}throw new Error("unknown value "+typeof e)}isNegative(){return(this.hi&cl)!==0}negate(){let e=~this.hi,n=this.lo;return n?n=~n+1:e+=1,new t(n,e)}toString(){if(pe)return this.toBigInt().toString();if(this.isNegative()){let e=this.negate();return"-"+al(e.lo,e.hi)}return al(this.lo,this.hi)}toBigInt(){return yD(pe),pe.V.setInt32(0,this.lo,!0),pe.V.setInt32(4,this.hi,!0),pe.V.getBigInt64(0,!0)}};le.ZERO=new le(0,0);var bD={readUnknownField:!0,readerFactory:t=>new Rp(t)};function wD(t){return t?Object.assign(Object.assign({},bD),t):bD}var Rp=class{constructor(e,n){this.varint64=mD,this.uint32=gD,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=n??new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0})}tag(){let e=this.uint32(),n=e>>>3,r=e&7;if(n<=0||r<0||r>5)throw new Error("illegal tag: field no "+n+" wire type "+r);return[n,r]}skip(e){let n=this.pos;switch(e){case g.Varint:for(;this.buf[this.pos++]&128;);break;case g.Bit64:this.pos+=4;case g.Bit32:this.pos+=4;break;case g.LengthDelimited:let r=this.uint32();this.pos+=r;break;case g.StartGroup:let i;for(;(i=this.tag()[1])!==g.EndGroup;)this.skip(i);break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(n,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let e=this.uint32();return e>>>1^-(e&1)}int64(){return new le(...this.varint64())}uint64(){return new Re(...this.varint64())}sint64(){let[e,n]=this.varint64(),r=-(e&1);return e=(e>>>1|(n&1)<<31)^r,n=n>>>1^r,new le(e,n)}bool(){let[e,n]=this.varint64();return e!==0||n!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return new Re(this.sfixed32(),this.sfixed32())}sfixed64(){return new le(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),n=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(n,n+e)}string(){return this.textDecoder.decode(this.bytes())}};function re(t,e){if(!t)throw new Error(e)}function kp(t,e){throw new Error(e??"Unexpected object: "+t)}var BA=34028234663852886e22,VA=-34028234663852886e22,$A=4294967295,HA=2147483647,WA=-2147483648;function xn(t){if(typeof t!="number")throw new Error("invalid int 32: "+typeof t);if(!Number.isInteger(t)||t>HA||t<WA)throw new Error("invalid int 32: "+t)}function rr(t){if(typeof t!="number")throw new Error("invalid uint 32: "+typeof t);if(!Number.isInteger(t)||t>$A||t<0)throw new Error("invalid uint 32: "+t)}function Br(t){if(typeof t!="number")throw new Error("invalid float 32: "+typeof t);if(Number.isFinite(t)&&(t>BA||t<VA))throw new Error("invalid float 32: "+t)}var CD={writeUnknownFields:!0,writerFactory:()=>new _p};function SD(t){return t?Object.assign(Object.assign({},CD),t):CD}var _p=class{constructor(e){this.stack=[],this.textEncoder=e??new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let i=0;i<this.chunks.length;i++)e+=this.chunks[i].length;let n=new Uint8Array(e),r=0;for(let i=0;i<this.chunks.length;i++)n.set(this.chunks[i],r),r+=this.chunks[i].length;return this.chunks=[],n}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),n=this.stack.pop();if(!n)throw new Error("invalid state, fork stack empty");return this.chunks=n.chunks,this.buf=n.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,n){return this.uint32((e<<3|n)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(rr(e);e>127;)this.buf.push(e&127|128),e=e>>>7;return this.buf.push(e),this}int32(e){return xn(e),Tp(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let n=this.textEncoder.encode(e);return this.uint32(n.byteLength),this.raw(n)}float(e){Br(e);let n=new Uint8Array(4);return new DataView(n.buffer).setFloat32(0,e,!0),this.raw(n)}double(e){let n=new Uint8Array(8);return new DataView(n.buffer).setFloat64(0,e,!0),this.raw(n)}fixed32(e){rr(e);let n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,e,!0),this.raw(n)}sfixed32(e){xn(e);let n=new Uint8Array(4);return new DataView(n.buffer).setInt32(0,e,!0),this.raw(n)}sint32(e){return xn(e),e=(e<<1^e>>31)>>>0,Tp(e,this.buf),this}sfixed64(e){let n=new Uint8Array(8),r=new DataView(n.buffer),i=le.from(e);return r.setInt32(0,i.lo,!0),r.setInt32(4,i.hi,!0),this.raw(n)}fixed64(e){let n=new Uint8Array(8),r=new DataView(n.buffer),i=Re.from(e);return r.setInt32(0,i.lo,!0),r.setInt32(4,i.hi,!0),this.raw(n)}int64(e){let n=le.from(e);return ol(n.lo,n.hi,this.buf),this}sint64(e){let n=le.from(e),r=n.hi>>31,i=n.lo<<1^r,s=(n.hi<<1|n.lo>>>31)^r;return ol(i,s,this.buf),this}uint64(e){let n=Re.from(e);return ol(n.lo,n.hi,this.buf),this}};var DD={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0},ED={ignoreUnknownFields:!1};function xp(t){return t?Object.assign(Object.assign({},ED),t):ED}function Np(t){return t?Object.assign(Object.assign({},DD),t):DD}function Ap(t,e){var n,r;let i=Object.assign(Object.assign({},t),e);return i.typeRegistry=[...(n=t?.typeRegistry)!==null&&n!==void 0?n:[],...(r=e?.typeRegistry)!==null&&r!==void 0?r:[]],i}var dl=Symbol.for("protobuf-ts/message-type");function ir(t){let e=!1,n=[];for(let r=0;r<t.length;r++){let i=t.charAt(r);i=="_"?e=!0:/\d/.test(i)?(n.push(i),e=!0):e?(n.push(i.toUpperCase()),e=!1):r==0?n.push(i.toLowerCase()):n.push(i)}return n.join("")}var D=function(t){return t[t.DOUBLE=1]="DOUBLE",t[t.FLOAT=2]="FLOAT",t[t.INT64=3]="INT64",t[t.UINT64=4]="UINT64",t[t.INT32=5]="INT32",t[t.FIXED64=6]="FIXED64",t[t.FIXED32=7]="FIXED32",t[t.BOOL=8]="BOOL",t[t.STRING=9]="STRING",t[t.BYTES=12]="BYTES",t[t.UINT32=13]="UINT32",t[t.SFIXED32=15]="SFIXED32",t[t.SFIXED64=16]="SFIXED64",t[t.SINT32=17]="SINT32",t[t.SINT64=18]="SINT64",t}(D||{}),ft=function(t){return t[t.BIGINT=0]="BIGINT",t[t.STRING=1]="STRING",t[t.NUMBER=2]="NUMBER",t}(ft||{}),fl=function(t){return t[t.NO=0]="NO",t[t.PACKED=1]="PACKED",t[t.UNPACKED=2]="UNPACKED",t}(fl||{});function ID(t){var e,n,r,i;return t.localName=(e=t.localName)!==null&&e!==void 0?e:ir(t.name),t.jsonName=(n=t.jsonName)!==null&&n!==void 0?n:ir(t.name),t.repeat=(r=t.repeat)!==null&&r!==void 0?r:fl.NO,t.opt=(i=t.opt)!==null&&i!==void 0?i:t.repeat||t.oneof?!1:t.kind=="message",t}function TD(t){if(typeof t!="object"||t===null||!t.hasOwnProperty("oneofKind"))return!1;switch(typeof t.oneofKind){case"string":return t[t.oneofKind]===void 0?!1:Object.keys(t).length==2;case"undefined":return Object.keys(t).length==1;default:return!1}}var hl=class{constructor(e){var n;this.fields=(n=e.fields)!==null&&n!==void 0?n:[]}prepare(){if(this.data)return;let e=[],n=[],r=[];for(let i of this.fields)if(i.oneof)r.includes(i.oneof)||(r.push(i.oneof),e.push(i.oneof),n.push(i.oneof));else switch(n.push(i.localName),i.kind){case"scalar":case"enum":(!i.opt||i.repeat)&&e.push(i.localName);break;case"message":i.repeat&&e.push(i.localName);break;case"map":e.push(i.localName);break}this.data={req:e,known:n,oneofs:Object.values(r)}}is(e,n,r=!1){if(n<0)return!0;if(e==null||typeof e!="object")return!1;this.prepare();let i=Object.keys(e),s=this.data;if(i.length<s.req.length||s.req.some(o=>!i.includes(o))||!r&&i.some(o=>!s.known.includes(o)))return!1;if(n<1)return!0;for(let o of s.oneofs){let a=e[o];if(!TD(a))return!1;if(a.oneofKind===void 0)continue;let c=this.fields.find(l=>l.localName===a.oneofKind);if(!c||!this.field(a[a.oneofKind],c,r,n))return!1}for(let o of this.fields)if(o.oneof===void 0&&!this.field(e[o.localName],o,r,n))return!1;return!0}field(e,n,r,i){let s=n.repeat;switch(n.kind){case"scalar":return e===void 0?n.opt:s?this.scalars(e,n.T,i,n.L):this.scalar(e,n.T,n.L);case"enum":return e===void 0?n.opt:s?this.scalars(e,D.INT32,i):this.scalar(e,D.INT32);case"message":return e===void 0?!0:s?this.messages(e,n.T(),r,i):this.message(e,n.T(),r,i);case"map":if(typeof e!="object"||e===null)return!1;if(i<2)return!0;if(!this.mapKeys(e,n.K,i))return!1;switch(n.V.kind){case"scalar":return this.scalars(Object.values(e),n.V.T,i,n.V.L);case"enum":return this.scalars(Object.values(e),D.INT32,i);case"message":return this.messages(Object.values(e),n.V.T(),r,i)}break}return!0}message(e,n,r,i){return r?n.isAssignable(e,i):n.is(e,i)}messages(e,n,r,i){if(!Array.isArray(e))return!1;if(i<2)return!0;if(r){for(let s=0;s<e.length&&s<i;s++)if(!n.isAssignable(e[s],i-1))return!1}else for(let s=0;s<e.length&&s<i;s++)if(!n.is(e[s],i-1))return!1;return!0}scalar(e,n,r){let i=typeof e;switch(n){case D.UINT64:case D.FIXED64:case D.INT64:case D.SFIXED64:case D.SINT64:switch(r){case ft.BIGINT:return i=="bigint";case ft.NUMBER:return i=="number"&&!isNaN(e);default:return i=="string"}case D.BOOL:return i=="boolean";case D.STRING:return i=="string";case D.BYTES:return e instanceof Uint8Array;case D.DOUBLE:case D.FLOAT:return i=="number"&&!isNaN(e);default:return i=="number"&&Number.isInteger(e)}}scalars(e,n,r,i){if(!Array.isArray(e))return!1;if(r<2)return!0;if(Array.isArray(e)){for(let s=0;s<e.length&&s<r;s++)if(!this.scalar(e[s],n,i))return!1}return!0}mapKeys(e,n,r){let i=Object.keys(e);switch(n){case D.INT32:case D.FIXED32:case D.SFIXED32:case D.SINT32:case D.UINT32:return this.scalars(i.slice(0,r).map(s=>parseInt(s)),n,r);case D.BOOL:return this.scalars(i.slice(0,r).map(s=>s=="true"?!0:s=="false"?!1:s),n,r);default:return this.scalars(i,n,r,ft.STRING)}}};function ht(t,e){switch(e){case ft.BIGINT:return t.toBigInt();case ft.NUMBER:return t.toNumber();default:return t.toString()}}var pl=class{constructor(e){this.info=e}prepare(){var e;if(this.fMap===void 0){this.fMap={};let n=(e=this.info.fields)!==null&&e!==void 0?e:[];for(let r of n)this.fMap[r.name]=r,this.fMap[r.jsonName]=r,this.fMap[r.localName]=r}}assert(e,n,r){if(!e){let i=ln(r);throw(i=="number"||i=="boolean")&&(i=r.toString()),new Error(`Cannot parse JSON ${i} for ${this.info.typeName}#${n}`)}}read(e,n,r){this.prepare();let i=[];for(let[s,o]of Object.entries(e)){let a=this.fMap[s];if(!a){if(!r.ignoreUnknownFields)throw new Error(`Found unknown field while reading ${this.info.typeName} from JSON format. JSON key: ${s}`);continue}let c=a.localName,l;if(a.oneof){if(o===null&&(a.kind!=="enum"||a.T()[0]!=="google.protobuf.NullValue"))continue;if(i.includes(a.oneof))throw new Error(`Multiple members of the oneof group "${a.oneof}" of ${this.info.typeName} are present in JSON.`);i.push(a.oneof),l=n[a.oneof]={oneofKind:c}}else l=n;if(a.kind=="map"){if(o===null)continue;this.assert(nr(o),a.name,o);let u=l[c];for(let[d,f]of Object.entries(o)){this.assert(f!==null,a.name+" map value",null);let h;switch(a.V.kind){case"message":h=a.V.T().internalJsonRead(f,r);break;case"enum":if(h=this.enum(a.V.T(),f,a.name,r.ignoreUnknownFields),h===!1)continue;break;case"scalar":h=this.scalar(f,a.V.T,a.V.L,a.name);break}this.assert(h!==void 0,a.name+" map value",f);let p=d;a.K==D.BOOL&&(p=p=="true"?!0:p=="false"?!1:p),p=this.scalar(p,a.K,ft.STRING,a.name).toString(),u[p]=h}}else if(a.repeat){if(o===null)continue;this.assert(Array.isArray(o),a.name,o);let u=l[c];for(let d of o){this.assert(d!==null,a.name,null);let f;switch(a.kind){case"message":f=a.T().internalJsonRead(d,r);break;case"enum":if(f=this.enum(a.T(),d,a.name,r.ignoreUnknownFields),f===!1)continue;break;case"scalar":f=this.scalar(d,a.T,a.L,a.name);break}this.assert(f!==void 0,a.name,o),u.push(f)}}else switch(a.kind){case"message":if(o===null&&a.T().typeName!="google.protobuf.Value"){this.assert(a.oneof===void 0,a.name+" (oneof member)",null);continue}l[c]=a.T().internalJsonRead(o,r,l[c]);break;case"enum":let u=this.enum(a.T(),o,a.name,r.ignoreUnknownFields);if(u===!1)continue;l[c]=u;break;case"scalar":l[c]=this.scalar(o,a.T,a.L,a.name);break}}}enum(e,n,r,i){if(e[0]=="google.protobuf.NullValue"&&re(n===null||n==="NULL_VALUE",`Unable to parse field ${this.info.typeName}#${r}, enum ${e[0]} only accepts null.`),n===null)return 0;switch(typeof n){case"number":return re(Number.isInteger(n),`Unable to parse field ${this.info.typeName}#${r}, enum can only be integral number, got ${n}.`),n;case"string":let s=n;e[2]&&n.substring(0,e[2].length)===e[2]&&(s=n.substring(e[2].length));let o=e[1][s];return typeof o>"u"&&i?!1:(re(typeof o=="number",`Unable to parse field ${this.info.typeName}#${r}, enum ${e[0]} has no value for "${n}".`),o)}re(!1,`Unable to parse field ${this.info.typeName}#${r}, cannot parse enum value from ${typeof n}".`)}scalar(e,n,r,i){let s;try{switch(n){case D.DOUBLE:case D.FLOAT:if(e===null)return 0;if(e==="NaN")return Number.NaN;if(e==="Infinity")return Number.POSITIVE_INFINITY;if(e==="-Infinity")return Number.NEGATIVE_INFINITY;if(e===""){s="empty string";break}if(typeof e=="string"&&e.trim().length!==e.length){s="extra whitespace";break}if(typeof e!="string"&&typeof e!="number")break;let o=Number(e);if(Number.isNaN(o)){s="not a number";break}if(!Number.isFinite(o)){s="too large or small";break}return n==D.FLOAT&&Br(o),o;case D.INT32:case D.FIXED32:case D.SFIXED32:case D.SINT32:case D.UINT32:if(e===null)return 0;let a;if(typeof e=="number"?a=e:e===""?s="empty string":typeof e=="string"&&(e.trim().length!==e.length?s="extra whitespace":a=Number(e)),a===void 0)break;return n==D.UINT32?rr(a):xn(a),a;case D.INT64:case D.SFIXED64:case D.SINT64:if(e===null)return ht(le.ZERO,r);if(typeof e!="number"&&typeof e!="string")break;return ht(le.from(e),r);case D.FIXED64:case D.UINT64:if(e===null)return ht(Re.ZERO,r);if(typeof e!="number"&&typeof e!="string")break;return ht(Re.from(e),r);case D.BOOL:if(e===null)return!1;if(typeof e!="boolean")break;return e;case D.STRING:if(e===null)return"";if(typeof e!="string"){s="extra whitespace";break}try{encodeURIComponent(e)}catch(c){c="invalid UTF8";break}return e;case D.BYTES:if(e===null||e==="")return new Uint8Array(0);if(typeof e!="string")break;return hD(e)}}catch(o){s=o.message}this.assert(!1,i+(s?" - "+s:""),e)}};var ml=class{constructor(e){var n;this.fields=(n=e.fields)!==null&&n!==void 0?n:[]}write(e,n){let r={},i=e;for(let s of this.fields){if(!s.oneof){let l=this.field(s,i[s.localName],n);l!==void 0&&(r[n.useProtoFieldName?s.name:s.jsonName]=l);continue}let o=i[s.oneof];if(o.oneofKind!==s.localName)continue;let a=s.kind=="scalar"||s.kind=="enum"?Object.assign(Object.assign({},n),{emitDefaultValues:!0}):n,c=this.field(s,o[s.localName],a);re(c!==void 0),r[n.useProtoFieldName?s.name:s.jsonName]=c}return r}field(e,n,r){let i;if(e.kind=="map"){re(typeof n=="object"&&n!==null);let s={};switch(e.V.kind){case"scalar":for(let[c,l]of Object.entries(n)){let u=this.scalar(e.V.T,l,e.name,!1,!0);re(u!==void 0),s[c.toString()]=u}break;case"message":let o=e.V.T();for(let[c,l]of Object.entries(n)){let u=this.message(o,l,e.name,r);re(u!==void 0),s[c.toString()]=u}break;case"enum":let a=e.V.T();for(let[c,l]of Object.entries(n)){re(l===void 0||typeof l=="number");let u=this.enum(a,l,e.name,!1,!0,r.enumAsInteger);re(u!==void 0),s[c.toString()]=u}break}(r.emitDefaultValues||Object.keys(s).length>0)&&(i=s)}else if(e.repeat){re(Array.isArray(n));let s=[];switch(e.kind){case"scalar":for(let c=0;c<n.length;c++){let l=this.scalar(e.T,n[c],e.name,e.opt,!0);re(l!==void 0),s.push(l)}break;case"enum":let o=e.T();for(let c=0;c<n.length;c++){re(n[c]===void 0||typeof n[c]=="number");let l=this.enum(o,n[c],e.name,e.opt,!0,r.enumAsInteger);re(l!==void 0),s.push(l)}break;case"message":let a=e.T();for(let c=0;c<n.length;c++){let l=this.message(a,n[c],e.name,r);re(l!==void 0),s.push(l)}break}(r.emitDefaultValues||s.length>0||r.emitDefaultValues)&&(i=s)}else switch(e.kind){case"scalar":i=this.scalar(e.T,n,e.name,e.opt,r.emitDefaultValues);break;case"enum":i=this.enum(e.T(),n,e.name,e.opt,r.emitDefaultValues,r.enumAsInteger);break;case"message":i=this.message(e.T(),n,e.name,r);break}return i}enum(e,n,r,i,s,o){if(e[0]=="google.protobuf.NullValue")return!s&&!i?void 0:null;if(n===void 0){re(i);return}if(!(n===0&&!s&&!i))return re(typeof n=="number"),re(Number.isInteger(n)),o||!e[1].hasOwnProperty(n)?n:e[2]?e[2]+e[1][n]:e[1][n]}message(e,n,r,i){return n===void 0?i.emitDefaultValues?null:void 0:e.internalJsonWrite(n,i)}scalar(e,n,r,i,s){if(n===void 0){re(i);return}let o=s||i;switch(e){case D.INT32:case D.SFIXED32:case D.SINT32:return n===0?o?0:void 0:(xn(n),n);case D.FIXED32:case D.UINT32:return n===0?o?0:void 0:(rr(n),n);case D.FLOAT:Br(n);case D.DOUBLE:return n===0?o?0:void 0:(re(typeof n=="number"),Number.isNaN(n)?"NaN":n===Number.POSITIVE_INFINITY?"Infinity":n===Number.NEGATIVE_INFINITY?"-Infinity":n);case D.STRING:return n===""?o?"":void 0:(re(typeof n=="string"),n);case D.BOOL:return n===!1?o?!1:void 0:(re(typeof n=="boolean"),n);case D.UINT64:case D.FIXED64:re(typeof n=="number"||typeof n=="string"||typeof n=="bigint");let a=Re.from(n);return a.isZero()&&!o?void 0:a.toString();case D.INT64:case D.SFIXED64:case D.SINT64:re(typeof n=="number"||typeof n=="string"||typeof n=="bigint");let c=le.from(n);return c.isZero()&&!o?void 0:c.toString();case D.BYTES:return re(n instanceof Uint8Array),n.byteLength?pD(n):o?"":void 0}}};function To(t,e=ft.STRING){switch(t){case D.BOOL:return!1;case D.UINT64:case D.FIXED64:return ht(Re.ZERO,e);case D.INT64:case D.SFIXED64:case D.SINT64:return ht(le.ZERO,e);case D.DOUBLE:case D.FLOAT:return 0;case D.BYTES:return new Uint8Array(0);case D.STRING:return"";default:return 0}}var gl=class{constructor(e){this.info=e}prepare(){var e;if(!this.fieldNoToField){let n=(e=this.info.fields)!==null&&e!==void 0?e:[];this.fieldNoToField=new Map(n.map(r=>[r.no,r]))}}read(e,n,r,i){this.prepare();let s=i===void 0?e.len:e.pos+i;for(;e.pos<s;){let[o,a]=e.tag(),c=this.fieldNoToField.get(o);if(!c){let f=r.readUnknownField;if(f=="throw")throw new Error(`Unknown field ${o} (wire type ${a}) for ${this.info.typeName}`);let h=e.skip(a);f!==!1&&(f===!0?b.onRead:f)(this.info.typeName,n,o,a,h);continue}let l=n,u=c.repeat,d=c.localName;switch(c.oneof&&(l=l[c.oneof],l.oneofKind!==d&&(l=n[c.oneof]={oneofKind:d})),c.kind){case"scalar":case"enum":let f=c.kind=="enum"?D.INT32:c.T,h=c.kind=="scalar"?c.L:void 0;if(u){let C=l[d];if(a==g.LengthDelimited&&f!=D.STRING&&f!=D.BYTES){let v=e.uint32()+e.pos;for(;e.pos<v;)C.push(this.scalar(e,f,h))}else C.push(this.scalar(e,f,h))}else l[d]=this.scalar(e,f,h);break;case"message":if(u){let C=l[d],v=c.T().internalBinaryRead(e,e.uint32(),r);C.push(v)}else l[d]=c.T().internalBinaryRead(e,e.uint32(),r,l[d]);break;case"map":let[p,m]=this.mapEntry(c,e,r);l[d][p]=m;break}}}mapEntry(e,n,r){let i=n.uint32(),s=n.pos+i,o,a;for(;n.pos<s;){let[c,l]=n.tag();switch(c){case 1:e.K==D.BOOL?o=n.bool().toString():o=this.scalar(n,e.K,ft.STRING);break;case 2:switch(e.V.kind){case"scalar":a=this.scalar(n,e.V.T,e.V.L);break;case"enum":a=n.int32();break;case"message":a=e.V.T().internalBinaryRead(n,n.uint32(),r);break}break;default:throw new Error(`Unknown field ${c} (wire type ${l}) in map entry for ${this.info.typeName}#${e.name}`)}}if(o===void 0){let c=To(e.K);o=e.K==D.BOOL?c.toString():c}if(a===void 0)switch(e.V.kind){case"scalar":a=To(e.V.T,e.V.L);break;case"enum":a=0;break;case"message":a=e.V.T().create();break}return[o,a]}scalar(e,n,r){switch(n){case D.INT32:return e.int32();case D.STRING:return e.string();case D.BOOL:return e.bool();case D.DOUBLE:return e.double();case D.FLOAT:return e.float();case D.INT64:return ht(e.int64(),r);case D.UINT64:return ht(e.uint64(),r);case D.FIXED64:return ht(e.fixed64(),r);case D.FIXED32:return e.fixed32();case D.BYTES:return e.bytes();case D.UINT32:return e.uint32();case D.SFIXED32:return e.sfixed32();case D.SFIXED64:return ht(e.sfixed64(),r);case D.SINT32:return e.sint32();case D.SINT64:return ht(e.sint64(),r)}}};var yl=class{constructor(e){this.info=e}prepare(){if(!this.fields){let e=this.info.fields?this.info.fields.concat():[];this.fields=e.sort((n,r)=>n.no-r.no)}}write(e,n,r){this.prepare();for(let s of this.fields){let o,a,c=s.repeat,l=s.localName;if(s.oneof){let u=e[s.oneof];if(u.oneofKind!==l)continue;o=u[l],a=!0}else o=e[l],a=!1;switch(s.kind){case"scalar":case"enum":let u=s.kind=="enum"?D.INT32:s.T;if(c)if(re(Array.isArray(o)),c==fl.PACKED)this.packed(n,u,s.no,o);else for(let d of o)this.scalar(n,u,s.no,d,!0);else o===void 0?re(s.opt):this.scalar(n,u,s.no,o,a||s.opt);break;case"message":if(c){re(Array.isArray(o));for(let d of o)this.message(n,r,s.T(),s.no,d)}else this.message(n,r,s.T(),s.no,o);break;case"map":re(typeof o=="object"&&o!==null);for(let[d,f]of Object.entries(o))this.mapEntry(n,r,s,d,f);break}}let i=r.writeUnknownFields;i!==!1&&(i===!0?b.onWrite:i)(this.info.typeName,e,n)}mapEntry(e,n,r,i,s){e.tag(r.no,g.LengthDelimited),e.fork();let o=i;switch(r.K){case D.INT32:case D.FIXED32:case D.UINT32:case D.SFIXED32:case D.SINT32:o=Number.parseInt(i);break;case D.BOOL:re(i=="true"||i=="false"),o=i=="true";break}switch(this.scalar(e,r.K,1,o,!0),r.V.kind){case"scalar":this.scalar(e,r.V.T,2,s,!0);break;case"enum":this.scalar(e,D.INT32,2,s,!0);break;case"message":this.message(e,n,r.V.T(),2,s);break}e.join()}message(e,n,r,i,s){s!==void 0&&(r.internalBinaryWrite(s,e.tag(i,g.LengthDelimited).fork(),n),e.join())}scalar(e,n,r,i,s){let[o,a,c]=this.scalarInfo(n,i);(!c||s)&&(e.tag(r,o),e[a](i))}packed(e,n,r,i){if(!i.length)return;re(n!==D.BYTES&&n!==D.STRING),e.tag(r,g.LengthDelimited),e.fork();let[,s]=this.scalarInfo(n);for(let o=0;o<i.length;o++)e[s](i[o]);e.join()}scalarInfo(e,n){let r=g.Varint,i,s=n===void 0,o=n===0;switch(e){case D.INT32:i="int32";break;case D.STRING:o=s||!n.length,r=g.LengthDelimited,i="string";break;case D.BOOL:o=n===!1,i="bool";break;case D.UINT32:i="uint32";break;case D.DOUBLE:r=g.Bit64,i="double";break;case D.FLOAT:r=g.Bit32,i="float";break;case D.INT64:o=s||le.from(n).isZero(),i="int64";break;case D.UINT64:o=s||Re.from(n).isZero(),i="uint64";break;case D.FIXED64:o=s||Re.from(n).isZero(),r=g.Bit64,i="fixed64";break;case D.BYTES:o=s||!n.byteLength,r=g.LengthDelimited,i="bytes";break;case D.FIXED32:r=g.Bit32,i="fixed32";break;case D.SFIXED32:r=g.Bit32,i="sfixed32";break;case D.SFIXED64:o=s||le.from(n).isZero(),r=g.Bit64,i="sfixed64";break;case D.SINT32:i="sint32";break;case D.SINT64:o=s||le.from(n).isZero(),i="sint64";break}return[r,i,s||o]}};function RD(t){let e=t.messagePrototype?Object.create(t.messagePrototype):Object.defineProperty({},dl,{value:t});for(let n of t.fields){let r=n.localName;if(!n.opt)if(n.oneof)e[n.oneof]={oneofKind:void 0};else if(n.repeat)e[r]=[];else switch(n.kind){case"scalar":e[r]=To(n.T,n.L);break;case"enum":e[r]=0;break;case"map":e[r]={};break}}return e}function R(t,e,n){let r,i=n,s;for(let o of t.fields){let a=o.localName;if(o.oneof){let c=i[o.oneof];if(c?.oneofKind==null)continue;if(r=c[a],s=e[o.oneof],s.oneofKind=c.oneofKind,r==null){delete s[a];continue}}else if(r=i[a],s=e,r==null)continue;switch(o.repeat&&(s[a].length=r.length),o.kind){case"scalar":case"enum":if(o.repeat)for(let l=0;l<r.length;l++)s[a][l]=r[l];else s[a]=r;break;case"message":let c=o.T();if(o.repeat)for(let l=0;l<r.length;l++)s[a][l]=c.create(r[l]);else s[a]===void 0?s[a]=c.create(r):c.mergePartial(s[a],r);break;case"map":switch(o.V.kind){case"scalar":case"enum":Object.assign(s[a],r);break;case"message":let l=o.V.T();for(let u of Object.keys(r))s[a][u]=l.create(r[u]);break}break}}}function xD(t,e,n){if(e===n)return!0;if(!e||!n)return!1;for(let r of t.fields){let i=r.localName,s=r.oneof?e[r.oneof][i]:e[i],o=r.oneof?n[r.oneof][i]:n[i];switch(r.kind){case"enum":case"scalar":let a=r.kind=="enum"?D.INT32:r.T;if(!(r.repeat?kD(a,s,o):ND(a,s,o)))return!1;break;case"map":if(!(r.V.kind=="message"?_D(r.V.T(),vl(s),vl(o)):kD(r.V.kind=="enum"?D.INT32:r.V.T,vl(s),vl(o))))return!1;break;case"message":let c=r.T();if(!(r.repeat?_D(c,s,o):c.equals(s,o)))return!1;break}}return!0}var vl=Object.values;function ND(t,e,n){if(e===n)return!0;if(t!==D.BYTES)return!1;let r=e,i=n;if(r.length!==i.length)return!1;for(let s=0;s<r.length;s++)if(r[s]!=i[s])return!1;return!0}function kD(t,e,n){if(e.length!==n.length)return!1;for(let r=0;r<e.length;r++)if(!ND(t,e[r],n[r]))return!1;return!0}function _D(t,e,n){if(e.length!==n.length)return!1;for(let r=0;r<e.length;r++)if(!t.equals(e[r],n[r]))return!1;return!0}var qA=Object.getOwnPropertyDescriptors(Object.getPrototypeOf({})),k=class{constructor(e,n,r){this.defaultCheckDepth=16,this.typeName=e,this.fields=n.map(ID),this.options=r??{},this.messagePrototype=Object.create(null,Object.assign(Object.assign({},qA),{[dl]:{value:this}})),this.refTypeCheck=new hl(this),this.refJsonReader=new pl(this),this.refJsonWriter=new ml(this),this.refBinReader=new gl(this),this.refBinWriter=new yl(this)}create(e){let n=RD(this);return e!==void 0&&R(this,n,e),n}clone(e){let n=this.create();return R(this,n,e),n}equals(e,n){return xD(this,e,n)}is(e,n=this.defaultCheckDepth){return this.refTypeCheck.is(e,n,!1)}isAssignable(e,n=this.defaultCheckDepth){return this.refTypeCheck.is(e,n,!0)}mergePartial(e,n){R(this,e,n)}fromBinary(e,n){let r=wD(n);return this.internalBinaryRead(r.readerFactory(e),e.byteLength,r)}fromJson(e,n){return this.internalJsonRead(e,xp(n))}fromJsonString(e,n){let r=JSON.parse(e);return this.fromJson(r,n)}toJson(e,n){return this.internalJsonWrite(e,Np(n))}toJsonString(e,n){var r;let i=this.toJson(e,n);return JSON.stringify(i,null,(r=n?.prettySpaces)!==null&&r!==void 0?r:0)}toBinary(e,n){let r=SD(n);return this.internalBinaryWrite(e,r.writerFactory(),r).finish()}internalJsonRead(e,n,r){if(e!==null&&typeof e=="object"&&!Array.isArray(e)){let i=r??this.create();return this.refJsonReader.read(e,i,n),i}throw new Error(`Unable to parse message ${this.typeName} from JSON ${ln(e)}.`)}internalJsonWrite(e,n){return this.refJsonWriter.write(e,n)}internalBinaryWrite(e,n,r){return this.refBinWriter.write(e,n,r),n}internalBinaryRead(e,n,r,i){let s=i??this.create();return this.refBinReader.read(e,s,r,n),s}};function AD(t,e){var n,r,i;let s=t;return s.service=e,s.localName=(n=s.localName)!==null&&n!==void 0?n:ir(s.name),s.serverStreaming=!!s.serverStreaming,s.clientStreaming=!!s.clientStreaming,s.options=(r=s.options)!==null&&r!==void 0?r:{},s.idempotency=(i=s.idempotency)!==null&&i!==void 0?i:void 0,s}var Ro=class{constructor(e,n,r){this.typeName=e,this.methods=n.map(i=>AD(i,this)),this.options=r??{}}};var He=class extends Error{constructor(e,n="UNKNOWN",r){super(e),this.name="RpcError",Object.setPrototypeOf(this,new.target.prototype),this.code=n,this.meta=r??{}}toString(){let e=[this.name+": "+this.message];this.code&&(e.push(""),e.push("Code: "+this.code)),this.serviceName&&this.methodName&&e.push("Method: "+this.serviceName+"/"+this.methodName);let n=Object.entries(this.meta);if(n.length){e.push(""),e.push("Meta:");for(let[r,i]of n)e.push(`  ${r}: ${i}`)}return e.join(`
`)}};function Mp(t,e){if(!e)return t;let n={};bl(t,n),bl(e,n);for(let r of Object.keys(e)){let i=e[r];switch(r){case"jsonOptions":n.jsonOptions=Ap(t.jsonOptions,n.jsonOptions);break;case"binaryOptions":n.binaryOptions=Ep(t.binaryOptions,n.binaryOptions);break;case"meta":n.meta={},bl(t.meta,n.meta),bl(e.meta,n.meta);break;case"interceptors":n.interceptors=t.interceptors?t.interceptors.concat(i):i.concat();break}}return n}function bl(t,e){if(!t)return;let n=e;for(let[r,i]of Object.entries(t))i instanceof Date?n[r]=new Date(i.getTime()):Array.isArray(i)?n[r]=i.concat():n[r]=i}var Ut=function(t){return t[t.PENDING=0]="PENDING",t[t.REJECTED=1]="REJECTED",t[t.RESOLVED=2]="RESOLVED",t}(Ut||{}),sr=class{constructor(e=!0){this._state=Ut.PENDING,this._promise=new Promise((n,r)=>{this._resolve=n,this._reject=r}),e&&this._promise.catch(n=>{})}get state(){return this._state}get promise(){return this._promise}resolve(e){if(this.state!==Ut.PENDING)throw new Error(`cannot resolve ${Ut[this.state].toLowerCase()}`);this._resolve(e),this._state=Ut.RESOLVED}reject(e){if(this.state!==Ut.PENDING)throw new Error(`cannot reject ${Ut[this.state].toLowerCase()}`);this._reject(e),this._state=Ut.REJECTED}resolvePending(e){this._state===Ut.PENDING&&this.resolve(e)}rejectPending(e){this._state===Ut.PENDING&&this.reject(e)}};var zA=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})},ko=class{constructor(e,n,r,i,s,o,a){this.method=e,this.requestHeaders=n,this.request=r,this.headers=i,this.response=s,this.status=o,this.trailers=a}then(e,n){return this.promiseFinished().then(r=>e?Promise.resolve(e(r)):r,r=>n?Promise.resolve(n(r)):Promise.reject(r))}promiseFinished(){return zA(this,void 0,void 0,function*(){let[e,n,r,i]=yield Promise.all([this.headers,this.response,this.status,this.trailers]);return{method:this.method,requestHeaders:this.requestHeaders,request:this.request,headers:e,response:n,status:r,trailers:i}})}};function Bt(t,e,n,r,i){var s,o,a,c;if(t=="unary"){let l=(u,d,f)=>e.unary(u,d,f);for(let u of((s=r.interceptors)!==null&&s!==void 0?s:[]).filter(d=>d.interceptUnary).reverse()){let d=l;l=(f,h,p)=>u.interceptUnary(d,f,h,p)}return l(n,i,r)}if(t=="serverStreaming"){let l=(u,d,f)=>e.serverStreaming(u,d,f);for(let u of((o=r.interceptors)!==null&&o!==void 0?o:[]).filter(d=>d.interceptServerStreaming).reverse()){let d=l;l=(f,h,p)=>u.interceptServerStreaming(d,f,h,p)}return l(n,i,r)}if(t=="clientStreaming"){let l=(u,d)=>e.clientStreaming(u,d);for(let u of((a=r.interceptors)!==null&&a!==void 0?a:[]).filter(d=>d.interceptClientStreaming).reverse()){let d=l;l=(f,h)=>u.interceptClientStreaming(d,f,h)}return l(n,r)}if(t=="duplex"){let l=(u,d)=>e.duplex(u,d);for(let u of((c=r.interceptors)!==null&&c!==void 0?c:[]).filter(d=>d.interceptDuplex).reverse()){let d=l;l=(f,h)=>u.interceptDuplex(d,f,h)}return l(n,r)}kp(t)}function _o(t,e){return function(){return t.apply(e,arguments)}}var{toString:GA}=Object.prototype,{getPrototypeOf:Fp}=Object,Cl=(t=>e=>{let n=GA.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Vt=t=>(t=t.toLowerCase(),e=>Cl(e)===t),Sl=t=>e=>typeof e===t,{isArray:Qi}=Array,xo=Sl("undefined");function KA(t){return t!==null&&!xo(t)&&t.constructor!==null&&!xo(t.constructor)&&wt(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}var PD=Vt("ArrayBuffer");function JA(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&PD(t.buffer),e}var QA=Sl("string"),wt=Sl("function"),FD=Sl("number"),Dl=t=>t!==null&&typeof t=="object",YA=t=>t===!0||t===!1,wl=t=>{if(Cl(t)!=="object")return!1;let e=Fp(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},ZA=Vt("Date"),XA=Vt("File"),eM=Vt("Blob"),tM=Vt("FileList"),nM=t=>Dl(t)&&wt(t.pipe),rM=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||wt(t.append)&&((e=Cl(t))==="formdata"||e==="object"&&wt(t.toString)&&t.toString()==="[object FormData]"))},iM=Vt("URLSearchParams"),[sM,oM,aM,cM]=["ReadableStream","Request","Response","Headers"].map(Vt),lM=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function No(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),Qi(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{let s=n?Object.getOwnPropertyNames(t):Object.keys(t),o=s.length,a;for(r=0;r<o;r++)a=s[r],e.call(null,t[a],a,t)}}function LD(t,e){e=e.toLowerCase();let n=Object.keys(t),r=n.length,i;for(;r-- >0;)if(i=n[r],e===i.toLowerCase())return i;return null}var Vr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,jD=t=>!xo(t)&&t!==Vr;function Pp(){let{caseless:t}=jD(this)&&this||{},e={},n=(r,i)=>{let s=t&&LD(e,i)||i;wl(e[s])&&wl(r)?e[s]=Pp(e[s],r):wl(r)?e[s]=Pp({},r):Qi(r)?e[s]=r.slice():e[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&No(arguments[r],n);return e}var uM=(t,e,n,{allOwnKeys:r}={})=>(No(e,(i,s)=>{n&&wt(i)?t[s]=_o(i,n):t[s]=i},{allOwnKeys:r}),t),dM=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),fM=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},hM=(t,e,n,r)=>{let i,s,o,a={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)o=i[s],(!r||r(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&Fp(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},pM=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;let r=t.indexOf(e,n);return r!==-1&&r===n},mM=t=>{if(!t)return null;if(Qi(t))return t;let e=t.length;if(!FD(e))return null;let n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},gM=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Fp(Uint8Array)),yM=(t,e)=>{let r=(t&&t[Symbol.iterator]).call(t),i;for(;(i=r.next())&&!i.done;){let s=i.value;e.call(t,s[0],s[1])}},vM=(t,e)=>{let n,r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},bM=Vt("HTMLFormElement"),wM=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),MD=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),CM=Vt("RegExp"),UD=(t,e)=>{let n=Object.getOwnPropertyDescriptors(t),r={};No(n,(i,s)=>{let o;(o=e(i,s,t))!==!1&&(r[s]=o||i)}),Object.defineProperties(t,r)},SM=t=>{UD(t,(e,n)=>{if(wt(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;let r=t[n];if(wt(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},DM=(t,e)=>{let n={},r=i=>{i.forEach(s=>{n[s]=!0})};return Qi(t)?r(t):r(String(t).split(e)),n},EM=()=>{},IM=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e,Op="abcdefghijklmnopqrstuvwxyz",OD="0123456789",BD={DIGIT:OD,ALPHA:Op,ALPHA_DIGIT:Op+Op.toUpperCase()+OD},TM=(t=16,e=BD.ALPHA_DIGIT)=>{let n="",{length:r}=e;for(;t--;)n+=e[Math.random()*r|0];return n};function RM(t){return!!(t&&wt(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}var kM=t=>{let e=new Array(10),n=(r,i)=>{if(Dl(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;let s=Qi(r)?[]:{};return No(r,(o,a)=>{let c=n(o,i+1);!xo(c)&&(s[a]=c)}),e[i]=void 0,s}}return r};return n(t,0)},_M=Vt("AsyncFunction"),xM=t=>t&&(Dl(t)||wt(t))&&wt(t.then)&&wt(t.catch),VD=((t,e)=>t?setImmediate:e?((n,r)=>(Vr.addEventListener("message",({source:i,data:s})=>{i===Vr&&s===n&&r.length&&r.shift()()},!1),i=>{r.push(i),Vr.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",wt(Vr.postMessage)),NM=typeof queueMicrotask<"u"?queueMicrotask.bind(Vr):typeof process<"u"&&process.nextTick||VD,w={isArray:Qi,isArrayBuffer:PD,isBuffer:KA,isFormData:rM,isArrayBufferView:JA,isString:QA,isNumber:FD,isBoolean:YA,isObject:Dl,isPlainObject:wl,isReadableStream:sM,isRequest:oM,isResponse:aM,isHeaders:cM,isUndefined:xo,isDate:ZA,isFile:XA,isBlob:eM,isRegExp:CM,isFunction:wt,isStream:nM,isURLSearchParams:iM,isTypedArray:gM,isFileList:tM,forEach:No,merge:Pp,extend:uM,trim:lM,stripBOM:dM,inherits:fM,toFlatObject:hM,kindOf:Cl,kindOfTest:Vt,endsWith:pM,toArray:mM,forEachEntry:yM,matchAll:vM,isHTMLForm:bM,hasOwnProperty:MD,hasOwnProp:MD,reduceDescriptors:UD,freezeMethods:SM,toObjectSet:DM,toCamelCase:wM,noop:EM,toFiniteNumber:IM,findKey:LD,global:Vr,isContextDefined:jD,ALPHABET:BD,generateString:TM,isSpecCompliantForm:RM,toJSONObject:kM,isAsyncFn:_M,isThenable:xM,setImmediate:VD,asap:NM};function Yi(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}w.inherits(Yi,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:w.toJSONObject(this.config),code:this.code,status:this.status}}});var $D=Yi.prototype,HD={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{HD[t]={value:t}});Object.defineProperties(Yi,HD);Object.defineProperty($D,"isAxiosError",{value:!0});Yi.from=(t,e,n,r,i,s)=>{let o=Object.create($D);return w.toFlatObject(t,o,function(c){return c!==Error.prototype},a=>a!=="isAxiosError"),Yi.call(o,t.message,e,n,r,i),o.cause=t,o.name=t.name,s&&Object.assign(o,s),o};var W=Yi;var El=null;function Lp(t){return w.isPlainObject(t)||w.isArray(t)}function qD(t){return w.endsWith(t,"[]")?t.slice(0,-2):t}function WD(t,e,n){return t?t.concat(e).map(function(i,s){return i=qD(i),!n&&s?"["+i+"]":i}).join(n?".":""):e}function AM(t){return w.isArray(t)&&!t.some(Lp)}var MM=w.toFlatObject(w,{},null,function(e){return/^is[A-Z]/.test(e)});function OM(t,e,n){if(!w.isObject(t))throw new TypeError("target must be an object");e=e||new(El||FormData),n=w.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(m,C){return!w.isUndefined(C[m])});let r=n.metaTokens,i=n.visitor||u,s=n.dots,o=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&w.isSpecCompliantForm(e);if(!w.isFunction(i))throw new TypeError("visitor must be a function");function l(p){if(p===null)return"";if(w.isDate(p))return p.toISOString();if(!c&&w.isBlob(p))throw new W("Blob is not supported. Use a Buffer instead.");return w.isArrayBuffer(p)||w.isTypedArray(p)?c&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function u(p,m,C){let v=p;if(p&&!C&&typeof p=="object"){if(w.endsWith(m,"{}"))m=r?m:m.slice(0,-2),p=JSON.stringify(p);else if(w.isArray(p)&&AM(p)||(w.isFileList(p)||w.endsWith(m,"[]"))&&(v=w.toArray(p)))return m=qD(m),v.forEach(function(_,A){!(w.isUndefined(_)||_===null)&&e.append(o===!0?WD([m],A,s):o===null?m:m+"[]",l(_))}),!1}return Lp(p)?!0:(e.append(WD(C,m,s),l(p)),!1)}let d=[],f=Object.assign(MM,{defaultVisitor:u,convertValue:l,isVisitable:Lp});function h(p,m){if(!w.isUndefined(p)){if(d.indexOf(p)!==-1)throw Error("Circular reference detected in "+m.join("."));d.push(p),w.forEach(p,function(v,E){(!(w.isUndefined(v)||v===null)&&i.call(e,v,w.isString(E)?E.trim():E,m,f))===!0&&h(v,m?m.concat(E):[E])}),d.pop()}}if(!w.isObject(t))throw new TypeError("data must be an object");return h(t),e}var or=OM;function zD(t){let e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function GD(t,e){this._pairs=[],t&&or(t,this,e)}var KD=GD.prototype;KD.append=function(e,n){this._pairs.push([e,n])};KD.toString=function(e){let n=e?function(r){return e.call(this,r,zD)}:zD;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};var Il=GD;function PM(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Ao(t,e,n){if(!e)return t;let r=n&&n.encode||PM,i=n&&n.serialize,s;if(i?s=i(e,n):s=w.isURLSearchParams(e)?e.toString():new Il(e,n).toString(r),s){let o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}var jp=class{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){w.forEach(this.handlers,function(r){r!==null&&e(r)})}},Up=jp;var Tl={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1};var JD=typeof URLSearchParams<"u"?URLSearchParams:Il;var QD=typeof FormData<"u"?FormData:null;var YD=typeof Blob<"u"?Blob:null;var ZD={isBrowser:!0,classes:{URLSearchParams:JD,FormData:QD,Blob:YD},protocols:["http","https","file","blob","url","data"]};var $p={};gs($p,{hasBrowserEnv:()=>Vp,hasStandardBrowserEnv:()=>FM,hasStandardBrowserWebWorkerEnv:()=>LM,navigator:()=>Bp,origin:()=>jM});var Vp=typeof window<"u"&&typeof document<"u",Bp=typeof navigator=="object"&&navigator||void 0,FM=Vp&&(!Bp||["ReactNative","NativeScript","NS"].indexOf(Bp.product)<0),LM=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",jM=Vp&&window.location.href||"http://localhost";var ke=S(S({},$p),ZD);function Hp(t,e){return or(t,new ke.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,s){return ke.isNode&&w.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function UM(t){return w.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function BM(t){let e={},n=Object.keys(t),r,i=n.length,s;for(r=0;r<i;r++)s=n[r],e[s]=t[s];return e}function VM(t){function e(n,r,i,s){let o=n[s++];if(o==="__proto__")return!0;let a=Number.isFinite(+o),c=s>=n.length;return o=!o&&w.isArray(i)?i.length:o,c?(w.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!a):((!i[o]||!w.isObject(i[o]))&&(i[o]=[]),e(n,r,i[o],s)&&w.isArray(i[o])&&(i[o]=BM(i[o])),!a)}if(w.isFormData(t)&&w.isFunction(t.entries)){let n={};return w.forEachEntry(t,(r,i)=>{e(UM(r),i,n,0)}),n}return null}var Rl=VM;function $M(t,e,n){if(w.isString(t))try{return(e||JSON.parse)(t),w.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}var Wp={transitional:Tl,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){let r=n.getContentType()||"",i=r.indexOf("application/json")>-1,s=w.isObject(e);if(s&&w.isHTMLForm(e)&&(e=new FormData(e)),w.isFormData(e))return i?JSON.stringify(Rl(e)):e;if(w.isArrayBuffer(e)||w.isBuffer(e)||w.isStream(e)||w.isFile(e)||w.isBlob(e)||w.isReadableStream(e))return e;if(w.isArrayBufferView(e))return e.buffer;if(w.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return Hp(e,this.formSerializer).toString();if((a=w.isFileList(e))||r.indexOf("multipart/form-data")>-1){let c=this.env&&this.env.FormData;return or(a?{"files[]":e}:e,c&&new c,this.formSerializer)}}return s||i?(n.setContentType("application/json",!1),$M(e)):e}],transformResponse:[function(e){let n=this.transitional||Wp.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(w.isResponse(e)||w.isReadableStream(e))return e;if(e&&w.isString(e)&&(r&&!this.responseType||i)){let o=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?W.from(a,W.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ke.classes.FormData,Blob:ke.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};w.forEach(["delete","get","head","post","put","patch"],t=>{Wp.headers[t]={}});var Zi=Wp;var HM=w.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),XD=t=>{let e={},n,r,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),n=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!n||e[n]&&HM[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e};var eE=Symbol("internals");function Mo(t){return t&&String(t).trim().toLowerCase()}function kl(t){return t===!1||t==null?t:w.isArray(t)?t.map(kl):String(t)}function WM(t){let e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g,r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}var qM=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function qp(t,e,n,r,i){if(w.isFunction(r))return r.call(this,e,n);if(i&&(e=n),!!w.isString(e)){if(w.isString(r))return e.indexOf(r)!==-1;if(w.isRegExp(r))return r.test(e)}}function zM(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function GM(t,e){let n=w.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(i,s,o){return this[r].call(this,e,i,s,o)},configurable:!0})})}var Xi=class{constructor(e){e&&this.set(e)}set(e,n,r){let i=this;function s(a,c,l){let u=Mo(c);if(!u)throw new Error("header name must be a non-empty string");let d=w.findKey(i,u);(!d||i[d]===void 0||l===!0||l===void 0&&i[d]!==!1)&&(i[d||c]=kl(a))}let o=(a,c)=>w.forEach(a,(l,u)=>s(l,u,c));if(w.isPlainObject(e)||e instanceof this.constructor)o(e,n);else if(w.isString(e)&&(e=e.trim())&&!qM(e))o(XD(e),n);else if(w.isHeaders(e))for(let[a,c]of e.entries())s(c,a,r);else e!=null&&s(n,e,r);return this}get(e,n){if(e=Mo(e),e){let r=w.findKey(this,e);if(r){let i=this[r];if(!n)return i;if(n===!0)return WM(i);if(w.isFunction(n))return n.call(this,i,r);if(w.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Mo(e),e){let r=w.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||qp(this,this[r],r,n)))}return!1}delete(e,n){let r=this,i=!1;function s(o){if(o=Mo(o),o){let a=w.findKey(r,o);a&&(!n||qp(r,r[a],a,n))&&(delete r[a],i=!0)}}return w.isArray(e)?e.forEach(s):s(e),i}clear(e){let n=Object.keys(this),r=n.length,i=!1;for(;r--;){let s=n[r];(!e||qp(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){let n=this,r={};return w.forEach(this,(i,s)=>{let o=w.findKey(r,s);if(o){n[o]=kl(i),delete n[s];return}let a=e?zM(s):String(s).trim();a!==s&&delete n[s],n[a]=kl(i),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){let n=Object.create(null);return w.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=e&&w.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){let r=new this(e);return n.forEach(i=>r.set(i)),r}static accessor(e){let r=(this[eE]=this[eE]={accessors:{}}).accessors,i=this.prototype;function s(o){let a=Mo(o);r[a]||(GM(i,o),r[a]=!0)}return w.isArray(e)?e.forEach(s):s(e),this}};Xi.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);w.reduceDescriptors(Xi.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});w.freezeMethods(Xi);var Le=Xi;function Oo(t,e){let n=this||Zi,r=e||n,i=Le.from(r.headers),s=r.data;return w.forEach(t,function(a){s=a.call(n,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function Po(t){return!!(t&&t.__CANCEL__)}function tE(t,e,n){W.call(this,t??"canceled",W.ERR_CANCELED,e,n),this.name="CanceledError"}w.inherits(tE,W,{__CANCEL__:!0});var un=tE;function Fo(t,e,n){let r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new W("Request failed with status code "+n.status,[W.ERR_BAD_REQUEST,W.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function zp(t){let e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function KM(t,e){t=t||10;let n=new Array(t),r=new Array(t),i=0,s=0,o;return e=e!==void 0?e:1e3,function(c){let l=Date.now(),u=r[s];o||(o=l),n[i]=c,r[i]=l;let d=s,f=0;for(;d!==i;)f+=n[d++],d=d%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),l-o<e)return;let h=u&&l-u;return h?Math.round(f*1e3/h):void 0}}var nE=KM;function JM(t,e){let n=0,r=1e3/e,i,s,o=(l,u=Date.now())=>{n=u,i=null,s&&(clearTimeout(s),s=null),t.apply(null,l)};return[(...l)=>{let u=Date.now(),d=u-n;d>=r?o(l,u):(i=l,s||(s=setTimeout(()=>{s=null,o(i)},r-d)))},()=>i&&o(i)]}var rE=JM;var es=(t,e,n=3)=>{let r=0,i=nE(50,250);return rE(s=>{let o=s.loaded,a=s.lengthComputable?s.total:void 0,c=o-r,l=i(c),u=o<=a;r=o;let d={loaded:o,total:a,progress:a?o/a:void 0,bytes:c,rate:l||void 0,estimated:l&&a&&u?(a-o)/l:void 0,event:s,lengthComputable:a!=null,[e?"download":"upload"]:!0};t(d)},n)},Gp=(t,e)=>{let n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},Kp=t=>(...e)=>w.asap(()=>t(...e));var iE=ke.hasStandardBrowserEnv?function(){let e=ke.navigator&&/(msie|trident)/i.test(ke.navigator.userAgent),n=document.createElement("a"),r;function i(s){let o=s;return e&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=i(window.location.href),function(o){let a=w.isString(o)?i(o):o;return a.protocol===r.protocol&&a.host===r.host}}():function(){return function(){return!0}}();var sE=ke.hasStandardBrowserEnv?{write(t,e,n,r,i,s){let o=[t+"="+encodeURIComponent(e)];w.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),w.isString(r)&&o.push("path="+r),w.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){let e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Jp(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Qp(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function Lo(t,e){return t&&!Jp(e)?Qp(t,e):e}var oE=t=>t instanceof Le?S({},t):t;function $t(t,e){e=e||{};let n={};function r(l,u,d){return w.isPlainObject(l)&&w.isPlainObject(u)?w.merge.call({caseless:d},l,u):w.isPlainObject(u)?w.merge({},u):w.isArray(u)?u.slice():u}function i(l,u,d){if(w.isUndefined(u)){if(!w.isUndefined(l))return r(void 0,l,d)}else return r(l,u,d)}function s(l,u){if(!w.isUndefined(u))return r(void 0,u)}function o(l,u){if(w.isUndefined(u)){if(!w.isUndefined(l))return r(void 0,l)}else return r(void 0,u)}function a(l,u,d){if(d in e)return r(l,u);if(d in t)return r(void 0,l)}let c={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(l,u)=>i(oE(l),oE(u),!0)};return w.forEach(Object.keys(Object.assign({},t,e)),function(u){let d=c[u]||i,f=d(t[u],e[u],u);w.isUndefined(f)&&d!==a||(n[u]=f)}),n}var _l=t=>{let e=$t({},t),{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:a}=e;e.headers=o=Le.from(o),e.url=Ao(Lo(e.baseURL,e.url),t.params,t.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let c;if(w.isFormData(n)){if(ke.hasStandardBrowserEnv||ke.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((c=o.getContentType())!==!1){let[l,...u]=c?c.split(";").map(d=>d.trim()).filter(Boolean):[];o.setContentType([l||"multipart/form-data",...u].join("; "))}}if(ke.hasStandardBrowserEnv&&(r&&w.isFunction(r)&&(r=r(e)),r||r!==!1&&iE(e.url))){let l=i&&s&&sE.read(s);l&&o.set(i,l)}return e};var QM=typeof XMLHttpRequest<"u",aE=QM&&function(t){return new Promise(function(n,r){let i=_l(t),s=i.data,o=Le.from(i.headers).normalize(),{responseType:a,onUploadProgress:c,onDownloadProgress:l}=i,u,d,f,h,p;function m(){h&&h(),p&&p(),i.cancelToken&&i.cancelToken.unsubscribe(u),i.signal&&i.signal.removeEventListener("abort",u)}let C=new XMLHttpRequest;C.open(i.method.toUpperCase(),i.url,!0),C.timeout=i.timeout;function v(){if(!C)return;let _=Le.from("getAllResponseHeaders"in C&&C.getAllResponseHeaders()),O={data:!a||a==="text"||a==="json"?C.responseText:C.response,status:C.status,statusText:C.statusText,headers:_,config:t,request:C};Fo(function(se){n(se),m()},function(se){r(se),m()},O),C=null}"onloadend"in C?C.onloadend=v:C.onreadystatechange=function(){!C||C.readyState!==4||C.status===0&&!(C.responseURL&&C.responseURL.indexOf("file:")===0)||setTimeout(v)},C.onabort=function(){C&&(r(new W("Request aborted",W.ECONNABORTED,t,C)),C=null)},C.onerror=function(){r(new W("Network Error",W.ERR_NETWORK,t,C)),C=null},C.ontimeout=function(){let A=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded",O=i.transitional||Tl;i.timeoutErrorMessage&&(A=i.timeoutErrorMessage),r(new W(A,O.clarifyTimeoutError?W.ETIMEDOUT:W.ECONNABORTED,t,C)),C=null},s===void 0&&o.setContentType(null),"setRequestHeader"in C&&w.forEach(o.toJSON(),function(A,O){C.setRequestHeader(O,A)}),w.isUndefined(i.withCredentials)||(C.withCredentials=!!i.withCredentials),a&&a!=="json"&&(C.responseType=i.responseType),l&&([f,p]=es(l,!0),C.addEventListener("progress",f)),c&&C.upload&&([d,h]=es(c),C.upload.addEventListener("progress",d),C.upload.addEventListener("loadend",h)),(i.cancelToken||i.signal)&&(u=_=>{C&&(r(!_||_.type?new un(null,t,C):_),C.abort(),C=null)},i.cancelToken&&i.cancelToken.subscribe(u),i.signal&&(i.signal.aborted?u():i.signal.addEventListener("abort",u)));let E=zp(i.url);if(E&&ke.protocols.indexOf(E)===-1){r(new W("Unsupported protocol "+E+":",W.ERR_BAD_REQUEST,t));return}C.send(s||null)})};var YM=(t,e)=>{let{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,i,s=function(l){if(!i){i=!0,a();let u=l instanceof Error?l:this.reason;r.abort(u instanceof W?u:new un(u instanceof Error?u.message:u))}},o=e&&setTimeout(()=>{o=null,s(new W(`timeout ${e} of ms exceeded`,W.ETIMEDOUT))},e),a=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(l=>{l.unsubscribe?l.unsubscribe(s):l.removeEventListener("abort",s)}),t=null)};t.forEach(l=>l.addEventListener("abort",s));let{signal:c}=r;return c.unsubscribe=()=>w.asap(a),c}},cE=YM;var ZM=function*(t,e){let n=t.byteLength;if(!e||n<e){yield t;return}let r=0,i;for(;r<n;)i=r+e,yield t.slice(r,i),r=i},XM=function(t,e){return hu(this,null,function*(){try{for(var n=pv(eO(t)),r,i,s;r=!(i=yield new dr(n.next())).done;r=!1){let o=i.value;yield*pu(ZM(o,e))}}catch{s=[i]}finally{try{r&&(i=n.return)&&(yield new dr(i.call(n)))}finally{if(s)throw s[0]}}})},eO=function(t){return hu(this,null,function*(){if(t[Symbol.asyncIterator]){yield*pu(t);return}let e=t.getReader();try{for(;;){let{done:n,value:r}=yield new dr(e.read());if(n)break;yield r}}finally{yield new dr(e.cancel())}})},Yp=(t,e,n,r)=>{let i=XM(t,e),s=0,o,a=l=>{o||(o=!0,r&&r(l))};return new ReadableStream({pull(l){return y(this,null,function*(){try{let{done:u,value:d}=yield i.next();if(u){a(),l.close();return}let f=d.byteLength;if(n){let h=s+=f;n(h)}l.enqueue(new Uint8Array(d))}catch(u){throw a(u),u}})},cancel(l){return a(l),i.return()}},{highWaterMark:2})};var Nl=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",uE=Nl&&typeof ReadableStream=="function",tO=Nl&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):t=>y(void 0,null,function*(){return new Uint8Array(yield new Response(t).arrayBuffer())})),dE=(t,...e)=>{try{return!!t(...e)}catch{return!1}},nO=uE&&dE(()=>{let t=!1,e=new Request(ke.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),lE=64*1024,Zp=uE&&dE(()=>w.isReadableStream(new Response("").body)),xl={stream:Zp&&(t=>t.body)};Nl&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!xl[e]&&(xl[e]=w.isFunction(t[e])?n=>n[e]():(n,r)=>{throw new W(`Response type '${e}' is not supported`,W.ERR_NOT_SUPPORT,r)})})})(new Response);var rO=t=>y(void 0,null,function*(){if(t==null)return 0;if(w.isBlob(t))return t.size;if(w.isSpecCompliantForm(t))return(yield new Request(ke.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(w.isArrayBufferView(t)||w.isArrayBuffer(t))return t.byteLength;if(w.isURLSearchParams(t)&&(t=t+""),w.isString(t))return(yield tO(t)).byteLength}),iO=(t,e)=>y(void 0,null,function*(){let n=w.toFiniteNumber(t.getContentLength());return n??rO(e)}),fE=Nl&&(t=>y(void 0,null,function*(){let{url:e,method:n,data:r,signal:i,cancelToken:s,timeout:o,onDownloadProgress:a,onUploadProgress:c,responseType:l,headers:u,withCredentials:d="same-origin",fetchOptions:f}=_l(t);l=l?(l+"").toLowerCase():"text";let h=cE([i,s&&s.toAbortSignal()],o),p,m=h&&h.unsubscribe&&(()=>{h.unsubscribe()}),C;try{if(c&&nO&&n!=="get"&&n!=="head"&&(C=yield iO(u,r))!==0){let O=new Request(e,{method:"POST",body:r,duplex:"half"}),K;if(w.isFormData(r)&&(K=O.headers.get("content-type"))&&u.setContentType(K),O.body){let[se,Ee]=Gp(C,es(Kp(c)));r=Yp(O.body,lE,se,Ee)}}w.isString(d)||(d=d?"include":"omit");let v="credentials"in Request.prototype;p=new Request(e,x(S({},f),{signal:h,method:n.toUpperCase(),headers:u.normalize().toJSON(),body:r,duplex:"half",credentials:v?d:void 0}));let E=yield fetch(p),_=Zp&&(l==="stream"||l==="response");if(Zp&&(a||_&&m)){let O={};["status","statusText","headers"].forEach(et=>{O[et]=E[et]});let K=w.toFiniteNumber(E.headers.get("content-length")),[se,Ee]=a&&Gp(K,es(Kp(a),!0))||[];E=new Response(Yp(E.body,lE,se,()=>{Ee&&Ee(),m&&m()}),O)}l=l||"text";let A=yield xl[w.findKey(xl,l)||"text"](E,t);return!_&&m&&m(),yield new Promise((O,K)=>{Fo(O,K,{data:A,headers:Le.from(E.headers),status:E.status,statusText:E.statusText,config:t,request:p})})}catch(v){throw m&&m(),v&&v.name==="TypeError"&&/fetch/i.test(v.message)?Object.assign(new W("Network Error",W.ERR_NETWORK,t,p),{cause:v.cause||v}):W.from(v,v&&v.code,t,p)}}));var Xp={http:El,xhr:aE,fetch:fE};w.forEach(Xp,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});var hE=t=>`- ${t}`,sO=t=>w.isFunction(t)||t===null||t===!1,Al={getAdapter:t=>{t=w.isArray(t)?t:[t];let{length:e}=t,n,r,i={};for(let s=0;s<e;s++){n=t[s];let o;if(r=n,!sO(n)&&(r=Xp[(o=String(n)).toLowerCase()],r===void 0))throw new W(`Unknown adapter '${o}'`);if(r)break;i[o||"#"+s]=r}if(!r){let s=Object.entries(i).map(([a,c])=>`adapter ${a} `+(c===!1?"is not supported by the environment":"is not available in the build")),o=e?s.length>1?`since :
`+s.map(hE).join(`
`):" "+hE(s[0]):"as no adapter specified";throw new W("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:Xp};function em(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new un(null,t)}function Ml(t){return em(t),t.headers=Le.from(t.headers),t.data=Oo.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Al.getAdapter(t.adapter||Zi.adapter)(t).then(function(r){return em(t),r.data=Oo.call(t,t.transformResponse,r),r.headers=Le.from(r.headers),r},function(r){return Po(r)||(em(t),r&&r.response&&(r.response.data=Oo.call(t,t.transformResponse,r.response),r.response.headers=Le.from(r.response.headers))),Promise.reject(r)})}var Ol="1.7.7";var tm={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{tm[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});var pE={};tm.transitional=function(e,n,r){function i(s,o){return"[Axios v"+Ol+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,a)=>{if(e===!1)throw new W(i(o," has been removed"+(n?" in "+n:"")),W.ERR_DEPRECATED);return n&&!pE[o]&&(pE[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,o,a):!0}};function oO(t,e,n){if(typeof t!="object")throw new W("options must be an object",W.ERR_BAD_OPTION_VALUE);let r=Object.keys(t),i=r.length;for(;i-- >0;){let s=r[i],o=e[s];if(o){let a=t[s],c=a===void 0||o(a,s,t);if(c!==!0)throw new W("option "+s+" must be "+c,W.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new W("Unknown option "+s,W.ERR_BAD_OPTION)}}var Pl={assertOptions:oO,validators:tm};var ar=Pl.validators,ts=class{constructor(e){this.defaults=e,this.interceptors={request:new Up,response:new Up}}request(e,n){return y(this,null,function*(){try{return yield this._request(e,n)}catch(r){if(r instanceof Error){let i;Error.captureStackTrace?Error.captureStackTrace(i={}):i=new Error;let s=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}})}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=$t(this.defaults,n);let{transitional:r,paramsSerializer:i,headers:s}=n;r!==void 0&&Pl.assertOptions(r,{silentJSONParsing:ar.transitional(ar.boolean),forcedJSONParsing:ar.transitional(ar.boolean),clarifyTimeoutError:ar.transitional(ar.boolean)},!1),i!=null&&(w.isFunction(i)?n.paramsSerializer={serialize:i}:Pl.assertOptions(i,{encode:ar.function,serialize:ar.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=s&&w.merge(s.common,s[n.method]);s&&w.forEach(["delete","get","head","post","put","patch","common"],p=>{delete s[p]}),n.headers=Le.concat(o,s);let a=[],c=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(n)===!1||(c=c&&m.synchronous,a.unshift(m.fulfilled,m.rejected))});let l=[];this.interceptors.response.forEach(function(m){l.push(m.fulfilled,m.rejected)});let u,d=0,f;if(!c){let p=[Ml.bind(this),void 0];for(p.unshift.apply(p,a),p.push.apply(p,l),f=p.length,u=Promise.resolve(n);d<f;)u=u.then(p[d++],p[d++]);return u}f=a.length;let h=n;for(d=0;d<f;){let p=a[d++],m=a[d++];try{h=p(h)}catch(C){m.call(this,C);break}}try{u=Ml.call(this,h)}catch(p){return Promise.reject(p)}for(d=0,f=l.length;d<f;)u=u.then(l[d++],l[d++]);return u}getUri(e){e=$t(this.defaults,e);let n=Lo(e.baseURL,e.url);return Ao(n,e.params,e.paramsSerializer)}};w.forEach(["delete","get","head","options"],function(e){ts.prototype[e]=function(n,r){return this.request($t(r||{},{method:e,url:n,data:(r||{}).data}))}});w.forEach(["post","put","patch"],function(e){function n(r){return function(s,o,a){return this.request($t(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}ts.prototype[e]=n(),ts.prototype[e+"Form"]=n(!0)});var jo=ts;var nm=class t{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});let r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s,o=new Promise(a=>{r.subscribe(a),s=a}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},e(function(s,o,a){r.reason||(r.reason=new un(s,o,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;let n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){let e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new t(function(i){e=i}),cancel:e}}},mE=nm;function rm(t){return function(n){return t.apply(null,n)}}function im(t){return w.isObject(t)&&t.isAxiosError===!0}var sm={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(sm).forEach(([t,e])=>{sm[e]=t});var gE=sm;function yE(t){let e=new jo(t),n=_o(jo.prototype.request,e);return w.extend(n,jo.prototype,e,{allOwnKeys:!0}),w.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return yE($t(t,i))},n}var Me=yE(Zi);Me.Axios=jo;Me.CanceledError=un;Me.CancelToken=mE;Me.isCancel=Po;Me.VERSION=Ol;Me.toFormData=or;Me.AxiosError=W;Me.Cancel=Me.CanceledError;Me.all=function(e){return Promise.all(e)};Me.spread=rm;Me.isAxiosError=im;Me.mergeConfig=$t;Me.AxiosHeaders=Le;Me.formToJSON=t=>Rl(w.isHTMLForm(t)?new FormData(t):t);Me.getAdapter=Al.getAdapter;Me.HttpStatusCode=gE;Me.default=Me;var $r=Me;var{Axios:S6,AxiosError:D6,CanceledError:E6,isCancel:I6,CancelToken:T6,VERSION:R6,all:k6,Cancel:_6,isAxiosError:x6,spread:N6,toFormData:A6,AxiosHeaders:vE,HttpStatusCode:M6,formToJSON:O6,getAdapter:P6,mergeConfig:F6}=$r;var Se=function(t){return t[t.cancelled=0]="cancelled",t[t.unknown=1]="unknown",t[t.invalid_argument=2]="invalid_argument",t[t.malformed=3]="malformed",t[t.deadline_exceeded=4]="deadline_exceeded",t[t.not_found=5]="not_found",t[t.bad_route=6]="bad_route",t[t.already_exists=7]="already_exists",t[t.permission_denied=8]="permission_denied",t[t.unauthenticated=9]="unauthenticated",t[t.resource_exhausted=10]="resource_exhausted",t[t.failed_precondition=11]="failed_precondition",t[t.aborted=12]="aborted",t[t.out_of_range=13]="out_of_range",t[t.unimplemented=14]="unimplemented",t[t.internal=15]="internal",t[t.unavailable=16]="unavailable",t[t.dataloss=17]="dataloss",t}(Se||{});function bE(t,e,n){if(n)for(let[r,i]of Object.entries(n))if(typeof i=="string")t.append(r,i);else for(let s of i)t.append(r,s);return t.set("Content-Type",e?"application/json":"application/protobuf"),t.set("Accept",e?"application/json":"application/protobuf, application/json"),t}function wE(t){if(!nr(t)||typeof t.code!="string"||typeof t.msg!="string")return new He("cannot read twirp error response",Se[Se.internal]);let e={};if(nr(t.meta))for(let[n,r]of Object.entries(t.meta))typeof r=="string"&&(e[n]=r);return new He(t.msg,t.code,e)}function CE(t){let e={};return t.forEach((n,r)=>{r.toLowerCase()!=="content-type"&&r.toLowerCase()!=="content-length"&&(e.hasOwnProperty(r)?e[r].push(n):e[r]=n)}),e}var Uo=class{constructor(e){this.defaultOptions=e}mergeOptions(e){return Mp(this.defaultOptions,e)}unary(e,n,r){var i,s,o;let a=r,c=this.makeUrl(e,a),l=(i=a.fetchInit)!==null&&i!==void 0?i:{},u=a.sendJson?e.I.toJsonString(n,a.jsonOptions):e.I.toBinary(n,a.binaryOptions),d=new sr,f=new sr,h=new sr,p=new sr;return globalThis.fetch(c,Object.assign(Object.assign({},l),{method:"POST",headers:bE(new globalThis.Headers,!!a.sendJson,a.meta),body:u,signal:(s=r.abort)!==null&&s!==void 0?s:null})).then(m=>{d.resolve(CE(m.headers));let C;try{C=m.type}catch{}switch(C){case"error":case"opaque":case"opaqueredirect":throw new He(`fetch response type ${m.type}`,Se[Se.unknown])}return m.ok?a.sendJson?m.json().then(v=>e.O.fromJson(v,a.jsonOptions),()=>{throw new He("unable to read response body as json",Se[Se.dataloss])}):m.arrayBuffer().then(v=>e.O.fromBinary(new Uint8Array(v),a.binaryOptions),()=>{throw new He("unable to read response body",Se[Se.dataloss])}):m.json().then(v=>{throw wE(v)},()=>{throw new He("received HTTP "+m.status+", unable to read response body as json",Se[Se.internal])})},m=>{throw m instanceof Error&&m.name==="AbortError"?new He(m.message,Se[Se.cancelled]):new He(m instanceof Error?m.message:m)}).then(m=>{f.resolve(m),h.resolve({code:"OK",detail:""}),p.resolve({})}).catch(m=>{let C=m instanceof He?m:new He(m instanceof Error?m.message:m,Se[Se.internal]);C.methodName=e.name,C.serviceName=e.service.typeName,d.rejectPending(C),f.rejectPending(C),h.rejectPending(C),p.rejectPending(C)}),new ko(e,(o=a.meta)!==null&&o!==void 0?o:{},n,d.promise,f.promise,h.promise,p.promise)}makeUrl(e,n){let r=n.baseUrl;r.endsWith("/")&&(r=r.substring(0,r.length-1));let i=e.name;return n.useProtoMethodName!==!0&&(i=ir(i),i=i.substring(0,1).toUpperCase()+i.substring(1)),`${r}/${e.service.typeName}/${i}`}clientStreaming(e){let n=new He("Client streaming is not supported by Twirp",Se[Se.unimplemented]);throw n.methodName=e.name,n.serviceName=e.service.typeName,n}duplex(e){let n=new He("Duplex streaming is not supported by Twirp",Se[Se.unimplemented]);throw n.methodName=e.name,n.serviceName=e.service.typeName,n}serverStreaming(e){let n=new He("Server streaming is not supported by Twirp",Se[Se.unimplemented]);throw n.methodName=e.name,n.serviceName=e.service.typeName,n}};var Ko=ys(_E()),QE=ys(xE());var rs=null;typeof WebSocket<"u"?rs=WebSocket:typeof MozWebSocket<"u"?rs=MozWebSocket:typeof global<"u"?rs=global.WebSocket||global.MozWebSocket:typeof window<"u"?rs=window.WebSocket||window.MozWebSocket:typeof self<"u"&&(rs=self.WebSocket||self.MozWebSocket);var cm=rs;var YE=ys(ME());var um={AVAILABLE:"available",DISABLED:"disabled",AUTO_ON:"auto-on"},Nt={BLOCK_USERS:"block-users",CHANGE_MAX_DURATION:"change-max-duration",CREATE_CALL:"create-call",CREATE_REACTION:"create-reaction",ENABLE_NOISE_CANCELLATION:"enable-noise-cancellation",END_CALL:"end-call",JOIN_BACKSTAGE:"join-backstage",JOIN_CALL:"join-call",JOIN_ENDED_CALL:"join-ended-call",MUTE_USERS:"mute-users",PIN_FOR_EVERYONE:"pin-for-everyone",READ_CALL:"read-call",REMOVE_CALL_MEMBER:"remove-call-member",SCREENSHARE:"screenshare",SEND_AUDIO:"send-audio",SEND_VIDEO:"send-video",START_BROADCAST_CALL:"start-broadcast-call",START_RECORD_CALL:"start-record-call",START_TRANSCRIPTION_CALL:"start-transcription-call",STOP_BROADCAST_CALL:"stop-broadcast-call",STOP_RECORD_CALL:"stop-record-call",STOP_TRANSCRIPTION_CALL:"stop-transcription-call",UPDATE_CALL:"update-call",UPDATE_CALL_MEMBER:"update-call-member",UPDATE_CALL_PERMISSIONS:"update-call-permissions",UPDATE_CALL_SETTINGS:"update-call-settings"};var Ym=class extends Error{},Zm=function(t){return t[t.NULL_VALUE=0]="NULL_VALUE",t}(Zm||{}),Xm=class extends k{constructor(){super("google.protobuf.Struct",[{no:1,name:"fields",kind:"map",K:9,V:{kind:"message",T:()=>Ht}}])}internalJsonWrite(e,n){let r={};for(let[i,s]of Object.entries(e.fields))r[i]=Ht.toJson(s);return r}internalJsonRead(e,n,r){if(!nr(e))throw new globalThis.Error("Unable to parse message "+this.typeName+" from JSON "+ln(e)+".");r||(r=this.create());for(let[i,s]of globalThis.Object.entries(e))r.fields[i]=Ht.fromJson(s);return r}create(e){let n=globalThis.Object.create(this.messagePrototype);return n.fields={},e!==void 0&&R(this,n,e),n}internalBinaryRead(e,n,r,i){let s=i??this.create(),o=e.pos+n;for(;e.pos<o;){let[a,c]=e.tag();switch(a){case 1:this.binaryReadMap1(s.fields,e,r);break;default:let l=r.readUnknownField;if(l==="throw")throw new globalThis.Error(`Unknown field ${a} (wire type ${c}) for ${this.typeName}`);let u=e.skip(c);l!==!1&&(l===!0?b.onRead:l)(this.typeName,s,a,c,u)}}return s}binaryReadMap1(e,n,r){let i=n.uint32(),s=n.pos+i,o,a;for(;n.pos<s;){let[c,l]=n.tag();switch(c){case 1:o=n.string();break;case 2:a=Ht.internalBinaryRead(n,n.uint32(),r);break;default:throw new globalThis.Error("unknown map entry field for field google.protobuf.Struct.fields")}}e[o??""]=a??Ht.create()}internalBinaryWrite(e,n,r){for(let s of globalThis.Object.keys(e.fields))n.tag(1,g.LengthDelimited).fork().tag(1,g.LengthDelimited).string(s),n.tag(2,g.LengthDelimited).fork(),Ht.internalBinaryWrite(e.fields[s],n,r),n.join().join();let i=r.writeUnknownFields;return i!==!1&&(i==!0?b.onWrite:i)(this.typeName,e,n),n}},fn=new Xm,eg=class extends k{constructor(){super("google.protobuf.Value",[{no:1,name:"null_value",kind:"enum",oneof:"kind",T:()=>["google.protobuf.NullValue",Zm]},{no:2,name:"number_value",kind:"scalar",oneof:"kind",T:1},{no:3,name:"string_value",kind:"scalar",oneof:"kind",T:9},{no:4,name:"bool_value",kind:"scalar",oneof:"kind",T:8},{no:5,name:"struct_value",kind:"message",oneof:"kind",T:()=>fn},{no:6,name:"list_value",kind:"message",oneof:"kind",T:()=>jl}])}internalJsonWrite(e,n){if(e.kind.oneofKind===void 0)throw new globalThis.Error;switch(e.kind.oneofKind){case void 0:throw new globalThis.Error;case"boolValue":return e.kind.boolValue;case"nullValue":return null;case"numberValue":let r=e.kind.numberValue;if(typeof r=="number"&&!Number.isFinite(r))throw new globalThis.Error;return r;case"stringValue":return e.kind.stringValue;case"listValue":let i=this.fields.find(o=>o.no===6);if(i?.kind!=="message")throw new globalThis.Error;return i.T().toJson(e.kind.listValue);case"structValue":let s=this.fields.find(o=>o.no===5);if(s?.kind!=="message")throw new globalThis.Error;return s.T().toJson(e.kind.structValue)}}internalJsonRead(e,n,r){switch(r||(r=this.create()),typeof e){case"number":r.kind={oneofKind:"numberValue",numberValue:e};break;case"string":r.kind={oneofKind:"stringValue",stringValue:e};break;case"boolean":r.kind={oneofKind:"boolValue",boolValue:e};break;case"object":e===null?r.kind={oneofKind:"nullValue",nullValue:Zm.NULL_VALUE}:globalThis.Array.isArray(e)?r.kind={oneofKind:"listValue",listValue:jl.fromJson(e)}:r.kind={oneofKind:"structValue",structValue:fn.fromJson(e)};break;default:throw new globalThis.Error("Unable to parse "+this.typeName+" from JSON "+ln(e))}return r}create(e){let n=globalThis.Object.create(this.messagePrototype);return n.kind={oneofKind:void 0},e!==void 0&&R(this,n,e),n}internalBinaryRead(e,n,r,i){let s=i??this.create(),o=e.pos+n;for(;e.pos<o;){let[a,c]=e.tag();switch(a){case 1:s.kind={oneofKind:"nullValue",nullValue:e.int32()};break;case 2:s.kind={oneofKind:"numberValue",numberValue:e.double()};break;case 3:s.kind={oneofKind:"stringValue",stringValue:e.string()};break;case 4:s.kind={oneofKind:"boolValue",boolValue:e.bool()};break;case 5:s.kind={oneofKind:"structValue",structValue:fn.internalBinaryRead(e,e.uint32(),r,s.kind.structValue)};break;case 6:s.kind={oneofKind:"listValue",listValue:jl.internalBinaryRead(e,e.uint32(),r,s.kind.listValue)};break;default:let l=r.readUnknownField;if(l==="throw")throw new globalThis.Error(`Unknown field ${a} (wire type ${c}) for ${this.typeName}`);let u=e.skip(c);l!==!1&&(l===!0?b.onRead:l)(this.typeName,s,a,c,u)}}return s}internalBinaryWrite(e,n,r){e.kind.oneofKind==="nullValue"&&n.tag(1,g.Varint).int32(e.kind.nullValue),e.kind.oneofKind==="numberValue"&&n.tag(2,g.Bit64).double(e.kind.numberValue),e.kind.oneofKind==="stringValue"&&n.tag(3,g.LengthDelimited).string(e.kind.stringValue),e.kind.oneofKind==="boolValue"&&n.tag(4,g.Varint).bool(e.kind.boolValue),e.kind.oneofKind==="structValue"&&fn.internalBinaryWrite(e.kind.structValue,n.tag(5,g.LengthDelimited).fork(),r).join(),e.kind.oneofKind==="listValue"&&jl.internalBinaryWrite(e.kind.listValue,n.tag(6,g.LengthDelimited).fork(),r).join();let i=r.writeUnknownFields;return i!==!1&&(i==!0?b.onWrite:i)(this.typeName,e,n),n}},Ht=new eg,tg=class extends k{constructor(){super("google.protobuf.ListValue",[{no:1,name:"values",kind:"message",repeat:1,T:()=>Ht}])}internalJsonWrite(e,n){return e.values.map(r=>Ht.toJson(r))}internalJsonRead(e,n,r){if(!globalThis.Array.isArray(e))throw new globalThis.Error("Unable to parse "+this.typeName+" from JSON "+ln(e));r||(r=this.create());let i=e.map(s=>Ht.fromJson(s));return r.values.push(...i),r}create(e){let n=globalThis.Object.create(this.messagePrototype);return n.values=[],e!==void 0&&R(this,n,e),n}internalBinaryRead(e,n,r,i){let s=i??this.create(),o=e.pos+n;for(;e.pos<o;){let[a,c]=e.tag();switch(a){case 1:s.values.push(Ht.internalBinaryRead(e,e.uint32(),r));break;default:let l=r.readUnknownField;if(l==="throw")throw new globalThis.Error(`Unknown field ${a} (wire type ${c}) for ${this.typeName}`);let u=e.skip(c);l!==!1&&(l===!0?b.onRead:l)(this.typeName,s,a,c,u)}}return s}internalBinaryWrite(e,n,r){for(let s=0;s<e.values.length;s++)Ht.internalBinaryWrite(e.values[s],n.tag(1,g.LengthDelimited).fork(),r).join();let i=r.writeUnknownFields;return i!==!1&&(i==!0?b.onWrite:i)(this.typeName,e,n),n}},jl=new tg,ng=class extends k{constructor(){super("google.protobuf.Timestamp",[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}])}now(){let e=this.create(),n=Date.now();return e.seconds=le.from(Math.floor(n/1e3)).toString(),e.nanos=n%1e3*1e6,e}toDate(e){return new Date(le.from(e.seconds).toNumber()*1e3+Math.ceil(e.nanos/1e6))}fromDate(e){let n=this.create(),r=e.getTime();return n.seconds=le.from(Math.floor(r/1e3)).toString(),n.nanos=r%1e3*1e6,n}internalJsonWrite(e,n){let r=le.from(e.seconds).toNumber()*1e3;if(r<Date.parse("0001-01-01T00:00:00Z")||r>Date.parse("9999-12-31T23:59:59Z"))throw new Error("Unable to encode Timestamp to JSON. Must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive.");if(e.nanos<0)throw new Error("Unable to encode invalid Timestamp to JSON. Nanos must not be negative.");let i="Z";if(e.nanos>0){let s=(e.nanos+1e9).toString().substring(1);s.substring(3)==="000000"?i="."+s.substring(0,3)+"Z":s.substring(6)==="000"?i="."+s.substring(0,6)+"Z":i="."+s+"Z"}return new Date(r).toISOString().replace(".000Z",i)}internalJsonRead(e,n,r){if(typeof e!="string")throw new Error("Unable to parse Timestamp from JSON "+ln(e)+".");let i=e.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!i)throw new Error("Unable to parse Timestamp from JSON. Invalid format.");let s=Date.parse(i[1]+"-"+i[2]+"-"+i[3]+"T"+i[4]+":"+i[5]+":"+i[6]+(i[8]?i[8]:"Z"));if(Number.isNaN(s))throw new Error("Unable to parse Timestamp from JSON. Invalid value.");if(s<Date.parse("0001-01-01T00:00:00Z")||s>Date.parse("9999-12-31T23:59:59Z"))throw new globalThis.Error("Unable to parse Timestamp from JSON. Must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive.");return r||(r=this.create()),r.seconds=le.from(s/1e3).toString(),r.nanos=0,i[7]&&(r.nanos=parseInt("1"+i[7]+"0".repeat(9-i[7].length))-1e9),r}create(e){let n=globalThis.Object.create(this.messagePrototype);return n.seconds="0",n.nanos=0,e!==void 0&&R(this,n,e),n}internalBinaryRead(e,n,r,i){let s=i??this.create(),o=e.pos+n;for(;e.pos<o;){let[a,c]=e.tag();switch(a){case 1:s.seconds=e.int64().toString();break;case 2:s.nanos=e.int32();break;default:let l=r.readUnknownField;if(l==="throw")throw new globalThis.Error(`Unknown field ${a} (wire type ${c}) for ${this.typeName}`);let u=e.skip(c);l!==!1&&(l===!0?b.onRead:l)(this.typeName,s,a,c,u)}}return s}internalBinaryWrite(e,n,r){e.seconds!=="0"&&n.tag(1,g.Varint).int64(e.seconds),e.nanos!==0&&n.tag(2,g.Varint).int32(e.nanos);let i=r.writeUnknownFields;return i!==!1&&(i==!0?b.onWrite:i)(this.typeName,e,n),n}},Ct=new ng,pt=function(t){return t[t.PUBLISHER_UNSPECIFIED=0]="PUBLISHER_UNSPECIFIED",t[t.SUBSCRIBER=1]="SUBSCRIBER",t}(pt||{}),Ky=function(t){return t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.POOR=1]="POOR",t[t.GOOD=2]="GOOD",t[t.EXCELLENT=3]="EXCELLENT",t}(Ky||{}),ss=function(t){return t[t.LOW_UNSPECIFIED=0]="LOW_UNSPECIFIED",t[t.MID=1]="MID",t[t.HIGH=2]="HIGH",t[t.OFF=3]="OFF",t}(ss||{}),T=function(t){return t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.AUDIO=1]="AUDIO",t[t.VIDEO=2]="VIDEO",t[t.SCREEN_SHARE=3]="SCREEN_SHARE",t[t.SCREEN_SHARE_AUDIO=4]="SCREEN_SHARE_AUDIO",t}(T||{}),Yl=function(t){return t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.PUBLISH_TRACK_NOT_FOUND=100]="PUBLISH_TRACK_NOT_FOUND",t[t.PUBLISH_TRACKS_MISMATCH=101]="PUBLISH_TRACKS_MISMATCH",t[t.PUBLISH_TRACK_OUT_OF_ORDER=102]="PUBLISH_TRACK_OUT_OF_ORDER",t[t.PUBLISH_TRACK_VIDEO_LAYER_NOT_FOUND=103]="PUBLISH_TRACK_VIDEO_LAYER_NOT_FOUND",t[t.LIVE_ENDED=104]="LIVE_ENDED",t[t.PARTICIPANT_NOT_FOUND=200]="PARTICIPANT_NOT_FOUND",t[t.PARTICIPANT_MIGRATING_OUT=201]="PARTICIPANT_MIGRATING_OUT",t[t.PARTICIPANT_MIGRATION_FAILED=202]="PARTICIPANT_MIGRATION_FAILED",t[t.PARTICIPANT_MIGRATING=203]="PARTICIPANT_MIGRATING",t[t.PARTICIPANT_RECONNECT_FAILED=204]="PARTICIPANT_RECONNECT_FAILED",t[t.PARTICIPANT_MEDIA_TRANSPORT_FAILURE=205]="PARTICIPANT_MEDIA_TRANSPORT_FAILURE",t[t.CALL_NOT_FOUND=300]="CALL_NOT_FOUND",t[t.REQUEST_VALIDATION_FAILED=400]="REQUEST_VALIDATION_FAILED",t[t.UNAUTHENTICATED=401]="UNAUTHENTICATED",t[t.PERMISSION_DENIED=403]="PERMISSION_DENIED",t[t.TOO_MANY_REQUESTS=429]="TOO_MANY_REQUESTS",t[t.INTERNAL_SERVER_ERROR=500]="INTERNAL_SERVER_ERROR",t[t.SFU_SHUTTING_DOWN=600]="SFU_SHUTTING_DOWN",t[t.SFU_FULL=700]="SFU_FULL",t}(Yl||{}),ds=function(t){return t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.REACT=1]="REACT",t[t.ANGULAR=2]="ANGULAR",t[t.ANDROID=3]="ANDROID",t[t.IOS=4]="IOS",t[t.FLUTTER=5]="FLUTTER",t[t.REACT_NATIVE=6]="REACT_NATIVE",t[t.UNITY=7]="UNITY",t[t.GO=8]="GO",t[t.PLAIN_JAVASCRIPT=9]="PLAIN_JAVASCRIPT",t}(ds||{}),Jy=function(t){return t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.USER_MUTED=1]="USER_MUTED",t[t.PERMISSION_REVOKED=2]="PERMISSION_REVOKED",t[t.MODERATION=3]="MODERATION",t}(Jy||{}),Wl=function(t){return t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.SHUTTING_DOWN=1]="SHUTTING_DOWN",t[t.REBALANCE=2]="REBALANCE",t}(Wl||{}),ZE=function(t){return t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.ENDED=1]="ENDED",t[t.LIVE_ENDED=2]="LIVE_ENDED",t[t.KICKED=3]="KICKED",t}(ZE||{}),XE=function(t){return t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.DISCONNECT=1]="DISCONNECT",t[t.FAST=2]="FAST",t[t.CLEAN=3]="CLEAN",t[t.FULL=4]="FULL",t[t.MIGRATE=5]="MIGRATE",t}(XE||{}),rg=class extends k{constructor(){super("stream.video.sfu.models.CallState",[{no:1,name:"participants",kind:"message",repeat:1,T:()=>ze},{no:2,name:"started_at",kind:"message",T:()=>Ct},{no:3,name:"participant_count",kind:"message",T:()=>os},{no:4,name:"pins",kind:"message",repeat:1,T:()=>as}])}create(e){let n=globalThis.Object.create(this.messagePrototype);return n.participants=[],n.pins=[],e!==void 0&&R(this,n,e),n}internalBinaryRead(e,n,r,i){let s=i??this.create(),o=e.pos+n;for(;e.pos<o;){let[a,c]=e.tag();switch(a){case 1:s.participants.push(ze.internalBinaryRead(e,e.uint32(),r));break;case 2:s.startedAt=Ct.internalBinaryRead(e,e.uint32(),r,s.startedAt);break;case 3:s.participantCount=os.internalBinaryRead(e,e.uint32(),r,s.participantCount);break;case 4:s.pins.push(as.internalBinaryRead(e,e.uint32(),r));break;default:let l=r.readUnknownField;if(l==="throw")throw new globalThis.Error(`Unknown field ${a} (wire type ${c}) for ${this.typeName}`);let u=e.skip(c);l!==!1&&(l===!0?b.onRead:l)(this.typeName,s,a,c,u)}}return s}internalBinaryWrite(e,n,r){for(let s=0;s<e.participants.length;s++)ze.internalBinaryWrite(e.participants[s],n.tag(1,g.LengthDelimited).fork(),r).join();e.startedAt&&Ct.internalBinaryWrite(e.startedAt,n.tag(2,g.LengthDelimited).fork(),r).join(),e.participantCount&&os.internalBinaryWrite(e.participantCount,n.tag(3,g.LengthDelimited).fork(),r).join();for(let s=0;s<e.pins.length;s++)as.internalBinaryWrite(e.pins[s],n.tag(4,g.LengthDelimited).fork(),r).join();let i=r.writeUnknownFields;return i!==!1&&(i==!0?b.onWrite:i)(this.typeName,e,n),n}},dm=new rg,ig=class extends k{constructor(){super("stream.video.sfu.models.ParticipantCount",[{no:1,name:"total",kind:"scalar",T:13},{no:2,name:"anonymous",kind:"scalar",T:13}])}create(e){let n=globalThis.Object.create(this.messagePrototype);return n.total=0,n.anonymous=0,e!==void 0&&R(this,n,e),n}internalBinaryRead(e,n,r,i){let s=i??this.create(),o=e.pos+n;for(;e.pos<o;){let[a,c]=e.tag();switch(a){case 1:s.total=e.uint32();break;case 2:s.anonymous=e.uint32();break;default:let l=r.readUnknownField;if(l==="throw")throw new globalThis.Error(`Unknown field ${a} (wire type ${c}) for ${this.typeName}`);let u=e.skip(c);l!==!1&&(l===!0?b.onRead:l)(this.typeName,s,a,c,u)}}return s}internalBinaryWrite(e,n,r){e.total!==0&&n.tag(1,g.Varint).uint32(e.total),e.anonymous!==0&&n.tag(2,g.Varint).uint32(e.anonymous);let i=r.writeUnknownFields;return i!==!1&&(i==!0?b.onWrite:i)(this.typeName,e,n),n}},os=new ig,sg=class extends k{constructor(){super("stream.video.sfu.models.Pin",[{no:1,name:"user_id",kind:"scalar",T:9},{no:2,name:"session_id",kind:"scalar",T:9}])}create(e){let n=globalThis.Object.create(this.messagePrototype);return n.userId="",n.sessionId="",e!==void 0&&R(this,n,e),n}internalBinaryRead(e,n,r,i){let s=i??this.create(),o=e.pos+n;for(;e.pos<o;){let[a,c]=e.tag();switch(a){case 1:s.userId=e.string();break;case 2:s.sessionId=e.string();break;default:let l=r.readUnknownField;if(l==="throw")throw new globalThis.Error(`Unknown field ${a} (wire type ${c}) for ${this.typeName}`);let u=e.skip(c);l!==!1&&(l===!0?b.onRead:l)(this.typeName,s,a,c,u)}}return s}internalBinaryWrite(e,n,r){e.userId!==""&&n.tag(1,g.LengthDelimited).string(e.userId),e.sessionId!==""&&n.tag(2,g.LengthDelimited).string(e.sessionId);let i=r.writeUnknownFields;return i!==!1&&(i==!0?b.onWrite:i)(this.typeName,e,n),n}},as=new sg,og=class extends k{constructor(){super("stream.video.sfu.models.Participant",[{no:1,name:"user_id",kind:"scalar",T:9},{no:2,name:"session_id",kind:"scalar",T:9},{no:3,name:"published_tracks",kind:"enum",repeat:1,T:()=>["stream.video.sfu.models.TrackType",T,"TRACK_TYPE_"]},{no:4,name:"joined_at",kind:"message",T:()=>Ct},{no:5,name:"track_lookup_prefix",kind:"scalar",T:9},{no:6,name:"connection_quality",kind:"enum",T:()=>["stream.video.sfu.models.ConnectionQuality",Ky,"CONNECTION_QUALITY_"]},{no:7,name:"is_speaking",kind:"scalar",T:8},{no:8,name:"is_dominant_speaker",kind:"scalar",T:8},{no:9,name:"audio_level",kind:"scalar",T:2},{no:10,name:"name",kind:"scalar",T:9},{no:11,name:"image",kind:"scalar",T:9},{no:12,name:"custom",kind:"message",T:()=>fn},{no:13,name:"roles",kind:"scalar",repeat:2,T:9}])}create(e){let n=globalThis.Object.create(this.messagePrototype);return n.userId="",n.sessionId="",n.publishedTracks=[],n.trackLookupPrefix="",n.connectionQuality=0,n.isSpeaking=!1,n.isDominantSpeaker=!1,n.audioLevel=0,n.name="",n.image="",n.roles=[],e!==void 0&&R(this,n,e),n}internalBinaryRead(e,n,r,i){let s=i??this.create(),o=e.pos+n;for(;e.pos<o;){let[a,c]=e.tag();switch(a){case 1:s.userId=e.string();break;case 2:s.sessionId=e.string();break;case 3:if(c===g.LengthDelimited)for(let d=e.int32()+e.pos;e.pos<d;)s.publishedTracks.push(e.int32());else s.publishedTracks.push(e.int32());break;case 4:s.joinedAt=Ct.internalBinaryRead(e,e.uint32(),r,s.joinedAt);break;case 5:s.trackLookupPrefix=e.string();break;case 6:s.connectionQuality=e.int32();break;case 7:s.isSpeaking=e.bool();break;case 8:s.isDominantSpeaker=e.bool();break;case 9:s.audioLevel=e.float();break;case 10:s.name=e.string();break;case 11:s.image=e.string();break;case 12:s.custom=fn.internalBinaryRead(e,e.uint32(),r,s.custom);break;case 13:s.roles.push(e.string());break;default:let l=r.readUnknownField;if(l==="throw")throw new globalThis.Error(`Unknown field ${a} (wire type ${c}) for ${this.typeName}`);let u=e.skip(c);l!==!1&&(l===!0?b.onRead:l)(this.typeName,s,a,c,u)}}return s}internalBinaryWrite(e,n,r){if(e.userId!==""&&n.tag(1,g.LengthDelimited).string(e.userId),e.sessionId!==""&&n.tag(2,g.LengthDelimited).string(e.sessionId),e.publishedTracks.length){n.tag(3,g.LengthDelimited).fork();for(let s=0;s<e.publishedTracks.length;s++)n.int32(e.publishedTracks[s]);n.join()}e.joinedAt&&Ct.internalBinaryWrite(e.joinedAt,n.tag(4,g.LengthDelimited).fork(),r).join(),e.trackLookupPrefix!==""&&n.tag(5,g.LengthDelimited).string(e.trackLookupPrefix),e.connectionQuality!==0&&n.tag(6,g.Varint).int32(e.connectionQuality),e.isSpeaking!==!1&&n.tag(7,g.Varint).bool(e.isSpeaking),e.isDominantSpeaker!==!1&&n.tag(8,g.Varint).bool(e.isDominantSpeaker),e.audioLevel!==0&&n.tag(9,g.Bit32).float(e.audioLevel),e.name!==""&&n.tag(10,g.LengthDelimited).string(e.name),e.image!==""&&n.tag(11,g.LengthDelimited).string(e.image),e.custom&&fn.internalBinaryWrite(e.custom,n.tag(12,g.LengthDelimited).fork(),r).join();for(let s=0;s<e.roles.length;s++)n.tag(13,g.LengthDelimited).string(e.roles[s]);let i=r.writeUnknownFields;return i!==!1&&(i==!0?b.onWrite:i)(this.typeName,e,n),n}},ze=new og,ag=class extends k{constructor(){super("stream.video.sfu.models.StreamQuality",[{no:1,name:"video_quality",kind:"enum",T:()=>["stream.video.sfu.models.VideoQuality",ss,"VIDEO_QUALITY_"]},{no:2,name:"user_id",kind:"scalar",T:9}])}create(e){let n=globalThis.Object.create(this.messagePrototype);return n.videoQuality=0,n.userId="",e!==void 0&&R(this,n,e),n}internalBinaryRead(e,n,r,i){let s=i??this.create(),o=e.pos+n;for(;e.pos<o;){let[a,c]=e.tag();switch(a){case 1:s.videoQuality=e.int32();break;case 2:s.userId=e.string();break;default:let l=r.readUnknownField;if(l==="throw")throw new globalThis.Error(`Unknown field ${a} (wire type ${c}) for ${this.typeName}`);let u=e.skip(c);l!==!1&&(l===!0?b.onRead:l)(this.typeName,s,a,c,u)}}return s}internalBinaryWrite(e,n,r){e.videoQuality!==0&&n.tag(1,g.Varint).int32(e.videoQuality),e.userId!==""&&n.tag(2,g.LengthDelimited).string(e.userId);let i=r.writeUnknownFields;return i!==!1&&(i==!0?b.onWrite:i)(this.typeName,e,n),n}},lz=new ag,cg=class extends k{constructor(){super("stream.video.sfu.models.VideoDimension",[{no:1,name:"width",kind:"scalar",T:13},{no:2,name:"height",kind:"scalar",T:13}])}create(e){let n=globalThis.Object.create(this.messagePrototype);return n.width=0,n.height=0,e!==void 0&&R(this,n,e),n}internalBinaryRead(e,n,r,i){let s=i??this.create(),o=e.pos+n;for(;e.pos<o;){let[a,c]=e.tag();switch(a){case 1:s.width=e.uint32();break;case 2:s.height=e.uint32();break;default:let l=r.readUnknownField;if(l==="throw")throw new globalThis.Error(`Unknown field ${a} (wire type ${c}) for ${this.typeName}`);let u=e.skip(c);l!==!1&&(l===!0?b.onRead:l)(this.typeName,s,a,c,u)}}return s}internalBinaryWrite(e,n,r){e.width!==0&&n.tag(1,g.Varint).uint32(e.width),e.height!==0&&n.tag(2,g.Varint).uint32(e.height);let i=r.writeUnknownFields;return i!==!1&&(i==!0?b.onWrite:i)(this.typeName,e,n),n}},cs=new cg,lg=class extends k{constructor(){super("stream.video.sfu.models.VideoLayer",[{no:1,name:"rid",kind:"scalar",T:9},{no:2,name:"video_dimension",kind:"message",T:()=>cs},{no:4,name:"bitrate",kind:"scalar",T:13},{no:5,name:"fps",kind:"scalar",T:13},{no:6,name:"quality",kind:"enum",T:()=>["stream.video.sfu.models.VideoQuality",ss,"VIDEO_QUALITY_"]}])}create(e){let n=globalThis.Object.create(this.messagePrototype);return n.rid="",n.bitrate=0,n.fps=0,n.quality=0,e!==void 0&&R(this,n,e),n}internalBinaryRead(e,n,r,i){let s=i??this.create(),o=e.pos+n;for(;e.pos<o;){let[a,c]=e.tag();switch(a){case 1:s.rid=e.string();break;case 2:s.videoDimension=cs.internalBinaryRead(e,e.uint32(),r,s.videoDimension);break;case 4:s.bitrate=e.uint32();break;case 5:s.fps=e.uint32();break;case 6:s.quality=e.int32();break;default:let l=r.readUnknownField;if(l==="throw")throw new globalThis.Error(`Unknown field ${a} (wire type ${c}) for ${this.typeName}`);let u=e.skip(c);l!==!1&&(l===!0?b.onRead:l)(this.typeName,s,a,c,u)}}return s}internalBinaryWrite(e,n,r){e.rid!==""&&n.tag(1,g.LengthDelimited).string(e.rid),e.videoDimension&&cs.internalBinaryWrite(e.videoDimension,n.tag(2,g.LengthDelimited).fork(),r).join(),e.bitrate!==0&&n.tag(4,g.Varint).uint32(e.bitrate),e.fps!==0&&n.tag(5,g.Varint).uint32(e.fps),e.quality!==0&&n.tag(6,g.Varint).int32(e.quality);let i=r.writeUnknownFields;return i!==!1&&(i==!0?b.onWrite:i)(this.typeName,e,n),n}},fm=new lg,ug=class extends k{constructor(){super("stream.video.sfu.models.Codec",[{no:1,name:"payload_type",kind:"scalar",T:13},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"fmtp_line",kind:"scalar",T:9},{no:4,name:"clock_rate",kind:"scalar",T:13},{no:5,name:"encoding_parameters",kind:"scalar",T:9},{no:6,name:"feedbacks",kind:"scalar",repeat:2,T:9}])}create(e){let n=globalThis.Object.create(this.messagePrototype);return n.payloadType=0,n.name="",n.fmtpLine="",n.clockRate=0,n.encodingParameters="",n.feedbacks=[],e!==void 0&&R(this,n,e),n}internalBinaryRead(e,n,r,i){let s=i??this.create(),o=e.pos+n;for(;e.pos<o;){let[a,c]=e.tag();switch(a){case 1:s.payloadType=e.uint32();break;case 2:s.name=e.string();break;case 3:s.fmtpLine=e.string();break;case 4:s.clockRate=e.uint32();break;case 5:s.encodingParameters=e.string();break;case 6:s.feedbacks.push(e.string());break;default:let l=r.readUnknownField;if(l==="throw")throw new globalThis.Error(`Unknown field ${a} (wire type ${c}) for ${this.typeName}`);let u=e.skip(c);l!==!1&&(l===!0?b.onRead:l)(this.typeName,s,a,c,u)}}return s}internalBinaryWrite(e,n,r){e.payloadType!==0&&n.tag(1,g.Varint).uint32(e.payloadType),e.name!==""&&n.tag(2,g.LengthDelimited).string(e.name),e.fmtpLine!==""&&n.tag(3,g.LengthDelimited).string(e.fmtpLine),e.clockRate!==0&&n.tag(4,g.Varint).uint32(e.clockRate),e.encodingParameters!==""&&n.tag(5,g.LengthDelimited).string(e.encodingParameters);for(let s=0;s<e.feedbacks.length;s++)n.tag(6,g.LengthDelimited).string(e.feedbacks[s]);let i=r.writeUnknownFields;return i!==!1&&(i==!0?b.onWrite:i)(this.typeName,e,n),n}},Pn=new ug,SO=class extends k{constructor(){super("stream.video.sfu.models.ICETrickle",[{no:1,name:"peer_type",kind:"enum",T:()=>["stream.video.sfu.models.PeerType",pt,"PEER_TYPE_"]},{no:2,name:"ice_candidate",kind:"scalar",T:9},{no:3,name:"session_id",kind:"scalar",T:9}])}create(e){let n=globalThis.Object.create(this.messagePrototype);return n.peerType=0,n.iceCandidate="",n.sessionId="",e!==void 0&&R(this,n,e),n}internalBinaryRead(e,n,r,i){let s=i??this.create(),o=e.pos+n;for(;e.pos<o;){let[a,c]=e.tag();switch(a){case 1:s.peerType=e.int32();break;case 2:s.iceCandidate=e.string();break;case 3:s.sessionId=e.string();break;default:let l=r.readUnknownField;if(l==="throw")throw new globalThis.Error(`Unknown field ${a} (wire type ${c}) for ${this.typeName}`);let u=e.skip(c);l!==!1&&(l===!0?b.onRead:l)(this.typeName,s,a,c,u)}}return s}internalBinaryWrite(e,n,r){e.peerType!==0&&n.tag(1,g.Varint).int32(e.peerType),e.iceCandidate!==""&&n.tag(2,g.LengthDelimited).string(e.iceCandidate),e.sessionId!==""&&n.tag(3,g.LengthDelimited).string(e.sessionId);let i=r.writeUnknownFields;return i!==!1&&(i==!0?b.onWrite:i)(this.typeName,e,n),n}},$l=new SO,dg=class extends k{constructor(){super("stream.video.sfu.models.TrackInfo",[{no:1,name:"track_id",kind:"scalar",T:9},{no:2,name:"track_type",kind:"enum",T:()=>["stream.video.sfu.models.TrackType",T,"TRACK_TYPE_"]},{no:5,name:"layers",kind:"message",repeat:1,T:()=>fm},{no:6,name:"mid",kind:"scalar",T:9},{no:7,name:"dtx",kind:"scalar",T:8},{no:8,name:"stereo",kind:"scalar",T:8},{no:9,name:"red",kind:"scalar",T:8}])}create(e){let n=globalThis.Object.create(this.messagePrototype);return n.trackId="",n.trackType=0,n.layers=[],n.mid="",n.dtx=!1,n.stereo=!1,n.red=!1,e!==void 0&&R(this,n,e),n}internalBinaryRead(e,n,r,i){let s=i??this.create(),o=e.pos+n;for(;e.pos<o;){let[a,c]=e.tag();switch(a){case 1:s.trackId=e.string();break;case 2:s.trackType=e.int32();break;case 5:s.layers.push(fm.internalBinaryRead(e,e.uint32(),r));break;case 6:s.mid=e.string();break;case 7:s.dtx=e.bool();break;case 8:s.stereo=e.bool();break;case 9:s.red=e.bool();break;default:let l=r.readUnknownField;if(l==="throw")throw new globalThis.Error(`Unknown field ${a} (wire type ${c}) for ${this.typeName}`);let u=e.skip(c);l!==!1&&(l===!0?b.onRead:l)(this.typeName,s,a,c,u)}}return s}internalBinaryWrite(e,n,r){e.trackId!==""&&n.tag(1,g.LengthDelimited).string(e.trackId),e.trackType!==0&&n.tag(2,g.Varint).int32(e.trackType);for(let s=0;s<e.layers.length;s++)fm.internalBinaryWrite(e.layers[s],n.tag(5,g.LengthDelimited).fork(),r).join();e.mid!==""&&n.tag(6,g.LengthDelimited).string(e.mid),e.dtx!==!1&&n.tag(7,g.Varint).bool(e.dtx),e.stereo!==!1&&n.tag(8,g.Varint).bool(e.stereo),e.red!==!1&&n.tag(9,g.Varint).bool(e.red);let i=r.writeUnknownFields;return i!==!1&&(i==!0?b.onWrite:i)(this.typeName,e,n),n}},ls=new dg,fg=class extends k{constructor(){super("stream.video.sfu.models.Call",[{no:1,name:"type",kind:"scalar",T:9},{no:2,name:"id",kind:"scalar",T:9},{no:3,name:"created_by_user_id",kind:"scalar",T:9},{no:4,name:"host_user_id",kind:"scalar",T:9},{no:5,name:"custom",kind:"message",T:()=>fn},{no:6,name:"created_at",kind:"message",T:()=>Ct},{no:7,name:"updated_at",kind:"message",T:()=>Ct}])}create(e){let n=globalThis.Object.create(this.messagePrototype);return n.type="",n.id="",n.createdByUserId="",n.hostUserId="",e!==void 0&&R(this,n,e),n}internalBinaryRead(e,n,r,i){let s=i??this.create(),o=e.pos+n;for(;e.pos<o;){let[a,c]=e.tag();switch(a){case 1:s.type=e.string();break;case 2:s.id=e.string();break;case 3:s.createdByUserId=e.string();break;case 4:s.hostUserId=e.string();break;case 5:s.custom=fn.internalBinaryRead(e,e.uint32(),r,s.custom);break;case 6:s.createdAt=Ct.internalBinaryRead(e,e.uint32(),r,s.createdAt);break;case 7:s.updatedAt=Ct.internalBinaryRead(e,e.uint32(),r,s.updatedAt);break;default:let l=r.readUnknownField;if(l==="throw")throw new globalThis.Error(`Unknown field ${a} (wire type ${c}) for ${this.typeName}`);let u=e.skip(c);l!==!1&&(l===!0?b.onRead:l)(this.typeName,s,a,c,u)}}return s}internalBinaryWrite(e,n,r){e.type!==""&&n.tag(1,g.LengthDelimited).string(e.type),e.id!==""&&n.tag(2,g.LengthDelimited).string(e.id),e.createdByUserId!==""&&n.tag(3,g.LengthDelimited).string(e.createdByUserId),e.hostUserId!==""&&n.tag(4,g.LengthDelimited).string(e.hostUserId),e.custom&&fn.internalBinaryWrite(e.custom,n.tag(5,g.LengthDelimited).fork(),r).join(),e.createdAt&&Ct.internalBinaryWrite(e.createdAt,n.tag(6,g.LengthDelimited).fork(),r).join(),e.updatedAt&&Ct.internalBinaryWrite(e.updatedAt,n.tag(7,g.LengthDelimited).fork(),r).join();let i=r.writeUnknownFields;return i!==!1&&(i==!0?b.onWrite:i)(this.typeName,e,n),n}},dz=new fg,DO=class extends k{constructor(){super("stream.video.sfu.models.Error",[{no:1,name:"code",kind:"enum",T:()=>["stream.video.sfu.models.ErrorCode",Yl,"ERROR_CODE_"]},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"should_retry",kind:"scalar",T:8}])}create(e){let n=globalThis.Object.create(this.messagePrototype);return n.code=0,n.message="",n.shouldRetry=!1,e!==void 0&&R(this,n,e),n}internalBinaryRead(e,n,r,i){let s=i??this.create(),o=e.pos+n;for(;e.pos<o;){let[a,c]=e.tag();switch(a){case 1:s.code=e.int32();break;case 2:s.message=e.string();break;case 3:s.shouldRetry=e.bool();break;default:let l=r.readUnknownField;if(l==="throw")throw new globalThis.Error(`Unknown field ${a} (wire type ${c}) for ${this.typeName}`);let u=e.skip(c);l!==!1&&(l===!0?b.onRead:l)(this.typeName,s,a,c,u)}}return s}internalBinaryWrite(e,n,r){e.code!==0&&n.tag(1,g.Varint).int32(e.code),e.message!==""&&n.tag(2,g.LengthDelimited).string(e.message),e.shouldRetry!==!1&&n.tag(3,g.Varint).bool(e.shouldRetry);let i=r.writeUnknownFields;return i!==!1&&(i==!0?b.onWrite:i)(this.typeName,e,n),n}},ue=new DO,hg=class extends k{constructor(){super("stream.video.sfu.models.ClientDetails",[{no:1,name:"sdk",kind:"message",T:()=>pm},{no:2,name:"os",kind:"message",T:()=>mm},{no:3,name:"browser",kind:"message",T:()=>gm},{no:4,name:"device",kind:"message",T:()=>ym}])}create(e){let n=globalThis.Object.create(this.messagePrototype);return e!==void 0&&R(this,n,e),n}internalBinaryRead(e,n,r,i){let s=i??this.create(),o=e.pos+n;for(;e.pos<o;){let[a,c]=e.tag();switch(a){case 1:s.sdk=pm.internalBinaryRead(e,e.uint32(),r,s.sdk);break;case 2:s.os=mm.internalBinaryRead(e,e.uint32(),r,s.os);break;case 3:s.browser=gm.internalBinaryRead(e,e.uint32(),r,s.browser);break;case 4:s.device=ym.internalBinaryRead(e,e.uint32(),r,s.device);break;default:let l=r.readUnknownField;if(l==="throw")throw new globalThis.Error(`Unknown field ${a} (wire type ${c}) for ${this.typeName}`);let u=e.skip(c);l!==!1&&(l===!0?b.onRead:l)(this.typeName,s,a,c,u)}}return s}internalBinaryWrite(e,n,r){e.sdk&&pm.internalBinaryWrite(e.sdk,n.tag(1,g.LengthDelimited).fork(),r).join(),e.os&&mm.internalBinaryWrite(e.os,n.tag(2,g.LengthDelimited).fork(),r).join(),e.browser&&gm.internalBinaryWrite(e.browser,n.tag(3,g.LengthDelimited).fork(),r).join(),e.device&&ym.internalBinaryWrite(e.device,n.tag(4,g.LengthDelimited).fork(),r).join();let i=r.writeUnknownFields;return i!==!1&&(i==!0?b.onWrite:i)(this.typeName,e,n),n}},hm=new hg,pg=class extends k{constructor(){super("stream.video.sfu.models.Sdk",[{no:1,name:"type",kind:"enum",T:()=>["stream.video.sfu.models.SdkType",ds,"SDK_TYPE_"]},{no:2,name:"major",kind:"scalar",T:9},{no:3,name:"minor",kind:"scalar",T:9},{no:4,name:"patch",kind:"scalar",T:9}])}create(e){let n=globalThis.Object.create(this.messagePrototype);return n.type=0,n.major="",n.minor="",n.patch="",e!==void 0&&R(this,n,e),n}internalBinaryRead(e,n,r,i){let s=i??this.create(),o=e.pos+n;for(;e.pos<o;){let[a,c]=e.tag();switch(a){case 1:s.type=e.int32();break;case 2:s.major=e.string();break;case 3:s.minor=e.string();break;case 4:s.patch=e.string();break;default:let l=r.readUnknownField;if(l==="throw")throw new globalThis.Error(`Unknown field ${a} (wire type ${c}) for ${this.typeName}`);let u=e.skip(c);l!==!1&&(l===!0?b.onRead:l)(this.typeName,s,a,c,u)}}return s}internalBinaryWrite(e,n,r){e.type!==0&&n.tag(1,g.Varint).int32(e.type),e.major!==""&&n.tag(2,g.LengthDelimited).string(e.major),e.minor!==""&&n.tag(3,g.LengthDelimited).string(e.minor),e.patch!==""&&n.tag(4,g.LengthDelimited).string(e.patch);let i=r.writeUnknownFields;return i!==!1&&(i==!0?b.onWrite:i)(this.typeName,e,n),n}},pm=new pg,mg=class extends k{constructor(){super("stream.video.sfu.models.OS",[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"architecture",kind:"scalar",T:9}])}create(e){let n=globalThis.Object.create(this.messagePrototype);return n.name="",n.version="",n.architecture="",e!==void 0&&R(this,n,e),n}internalBinaryRead(e,n,r,i){let s=i??this.create(),o=e.pos+n;for(;e.pos<o;){let[a,c]=e.tag();switch(a){case 1:s.name=e.string();break;case 2:s.version=e.string();break;case 3:s.architecture=e.string();break;default:let l=r.readUnknownField;if(l==="throw")throw new globalThis.Error(`Unknown field ${a} (wire type ${c}) for ${this.typeName}`);let u=e.skip(c);l!==!1&&(l===!0?b.onRead:l)(this.typeName,s,a,c,u)}}return s}internalBinaryWrite(e,n,r){e.name!==""&&n.tag(1,g.LengthDelimited).string(e.name),e.version!==""&&n.tag(2,g.LengthDelimited).string(e.version),e.architecture!==""&&n.tag(3,g.LengthDelimited).string(e.architecture);let i=r.writeUnknownFields;return i!==!1&&(i==!0?b.onWrite:i)(this.typeName,e,n),n}},mm=new mg,gg=class extends k{constructor(){super("stream.video.sfu.models.Browser",[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"version",kind:"scalar",T:9}])}create(e){let n=globalThis.Object.create(this.messagePrototype);return n.name="",n.version="",e!==void 0&&R(this,n,e),n}internalBinaryRead(e,n,r,i){let s=i??this.create(),o=e.pos+n;for(;e.pos<o;){let[a,c]=e.tag();switch(a){case 1:s.name=e.string();break;case 2:s.version=e.string();break;default:let l=r.readUnknownField;if(l==="throw")throw new globalThis.Error(`Unknown field ${a} (wire type ${c}) for ${this.typeName}`);let u=e.skip(c);l!==!1&&(l===!0?b.onRead:l)(this.typeName,s,a,c,u)}}return s}internalBinaryWrite(e,n,r){e.name!==""&&n.tag(1,g.LengthDelimited).string(e.name),e.version!==""&&n.tag(2,g.LengthDelimited).string(e.version);let i=r.writeUnknownFields;return i!==!1&&(i==!0?b.onWrite:i)(this.typeName,e,n),n}},gm=new gg,yg=class extends k{constructor(){super("stream.video.sfu.models.Device",[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"version",kind:"scalar",T:9}])}create(e){let n=globalThis.Object.create(this.messagePrototype);return n.name="",n.version="",e!==void 0&&R(this,n,e),n}internalBinaryRead(e,n,r,i){let s=i??this.create(),o=e.pos+n;for(;e.pos<o;){let[a,c]=e.tag();switch(a){case 1:s.name=e.string();break;case 2:s.version=e.string();break;default:let l=r.readUnknownField;if(l==="throw")throw new globalThis.Error(`Unknown field ${a} (wire type ${c}) for ${this.typeName}`);let u=e.skip(c);l!==!1&&(l===!0?b.onRead:l)(this.typeName,s,a,c,u)}}return s}internalBinaryWrite(e,n,r){e.name!==""&&n.tag(1,g.LengthDelimited).string(e.name),e.version!==""&&n.tag(2,g.LengthDelimited).string(e.version);let i=r.writeUnknownFields;return i!==!1&&(i==!0?b.onWrite:i)(this.typeName,e,n),n}},ym=new yg,vg=class extends k{constructor(){super("stream.video.sfu.models.CallGrants",[{no:1,name:"can_publish_audio",kind:"scalar",T:8},{no:2,name:"can_publish_video",kind:"scalar",T:8},{no:3,name:"can_screenshare",kind:"scalar",T:8}])}create(e){let n=globalThis.Object.create(this.messagePrototype);return n.canPublishAudio=!1,n.canPublishVideo=!1,n.canScreenshare=!1,e!==void 0&&R(this,n,e),n}internalBinaryRead(e,n,r,i){let s=i??this.create(),o=e.pos+n;for(;e.pos<o;){let[a,c]=e.tag();switch(a){case 1:s.canPublishAudio=e.bool();break;case 2:s.canPublishVideo=e.bool();break;case 3:s.canScreenshare=e.bool();break;default:let l=r.readUnknownField;if(l==="throw")throw new globalThis.Error(`Unknown field ${a} (wire type ${c}) for ${this.typeName}`);let u=e.skip(c);l!==!1&&(l===!0?b.onRead:l)(this.typeName,s,a,c,u)}}return s}internalBinaryWrite(e,n,r){e.canPublishAudio!==!1&&n.tag(1,g.Varint).bool(e.canPublishAudio),e.canPublishVideo!==!1&&n.tag(2,g.Varint).bool(e.canPublishVideo),e.canScreenshare!==!1&&n.tag(3,g.Varint).bool(e.canScreenshare);let i=r.writeUnknownFields;return i!==!1&&(i==!0?b.onWrite:i)(this.typeName,e,n),n}},vm=new vg;var bg=class extends k{constructor(){super("stream.video.sfu.signal.StartNoiseCancellationRequest",[{no:1,name:"session_id",kind:"scalar",T:9}])}create(e){let n=globalThis.Object.create(this.messagePrototype);return n.sessionId="",e!==void 0&&R(this,n,e),n}internalBinaryRead(e,n,r,i){let s=i??this.create(),o=e.pos+n;for(;e.pos<o;){let[a,c]=e.tag();switch(a){case 1:s.sessionId=e.string();break;default:let l=r.readUnknownField;if(l==="throw")throw new globalThis.Error(`Unknown field ${a} (wire type ${c}) for ${this.typeName}`);let u=e.skip(c);l!==!1&&(l===!0?b.onRead:l)(this.typeName,s,a,c,u)}}return s}internalBinaryWrite(e,n,r){e.sessionId!==""&&n.tag(1,g.LengthDelimited).string(e.sessionId);let i=r.writeUnknownFields;return i!==!1&&(i==!0?b.onWrite:i)(this.typeName,e,n),n}},EO=new bg,wg=class extends k{constructor(){super("stream.video.sfu.signal.StartNoiseCancellationResponse",[{no:1,name:"error",kind:"message",T:()=>ue}])}create(e){let n=globalThis.Object.create(this.messagePrototype);return e!==void 0&&R(this,n,e),n}internalBinaryRead(e,n,r,i){let s=i??this.create(),o=e.pos+n;for(;e.pos<o;){let[a,c]=e.tag();switch(a){case 1:s.error=ue.internalBinaryRead(e,e.uint32(),r,s.error);break;default:let l=r.readUnknownField;if(l==="throw")throw new globalThis.Error(`Unknown field ${a} (wire type ${c}) for ${this.typeName}`);let u=e.skip(c);l!==!1&&(l===!0?b.onRead:l)(this.typeName,s,a,c,u)}}return s}internalBinaryWrite(e,n,r){e.error&&ue.internalBinaryWrite(e.error,n.tag(1,g.LengthDelimited).fork(),r).join();let i=r.writeUnknownFields;return i!==!1&&(i==!0?b.onWrite:i)(this.typeName,e,n),n}},IO=new wg,Cg=class extends k{constructor(){super("stream.video.sfu.signal.StopNoiseCancellationRequest",[{no:1,name:"session_id",kind:"scalar",T:9}])}create(e){let n=globalThis.Object.create(this.messagePrototype);return n.sessionId="",e!==void 0&&R(this,n,e),n}internalBinaryRead(e,n,r,i){let s=i??this.create(),o=e.pos+n;for(;e.pos<o;){let[a,c]=e.tag();switch(a){case 1:s.sessionId=e.string();break;default:let l=r.readUnknownField;if(l==="throw")throw new globalThis.Error(`Unknown field ${a} (wire type ${c}) for ${this.typeName}`);let u=e.skip(c);l!==!1&&(l===!0?b.onRead:l)(this.typeName,s,a,c,u)}}return s}internalBinaryWrite(e,n,r){e.sessionId!==""&&n.tag(1,g.LengthDelimited).string(e.sessionId);let i=r.writeUnknownFields;return i!==!1&&(i==!0?b.onWrite:i)(this.typeName,e,n),n}},TO=new Cg,Sg=class extends k{constructor(){super("stream.video.sfu.signal.StopNoiseCancellationResponse",[{no:1,name:"error",kind:"message",T:()=>ue}])}create(e){let n=globalThis.Object.create(this.messagePrototype);return e!==void 0&&R(this,n,e),n}internalBinaryRead(e,n,r,i){let s=i??this.create(),o=e.pos+n;for(;e.pos<o;){let[a,c]=e.tag();switch(a){case 1:s.error=ue.internalBinaryRead(e,e.uint32(),r,s.error);break;default:let l=r.readUnknownField;if(l==="throw")throw new globalThis.Error(`Unknown field ${a} (wire type ${c}) for ${this.typeName}`);let u=e.skip(c);l!==!1&&(l===!0?b.onRead:l)(this.typeName,s,a,c,u)}}return s}internalBinaryWrite(e,n,r){e.error&&ue.internalBinaryWrite(e.error,n.tag(1,g.LengthDelimited).fork(),r).join();let i=r.writeUnknownFields;return i!==!1&&(i==!0?b.onWrite:i)(this.typeName,e,n),n}},RO=new Sg,Dg=class extends k{constructor(){super("stream.video.sfu.signal.SendStatsRequest",[{no:1,name:"session_id",kind:"scalar",T:9},{no:2,name:"subscriber_stats",kind:"scalar",T:9},{no:3,name:"publisher_stats",kind:"scalar",T:9},{no:4,name:"webrtc_version",kind:"scalar",T:9},{no:5,name:"sdk",kind:"scalar",T:9},{no:6,name:"sdk_version",kind:"scalar",T:9}])}create(e){let n=globalThis.Object.create(this.messagePrototype);return n.sessionId="",n.subscriberStats="",n.publisherStats="",n.webrtcVersion="",n.sdk="",n.sdkVersion="",e!==void 0&&R(this,n,e),n}internalBinaryRead(e,n,r,i){let s=i??this.create(),o=e.pos+n;for(;e.pos<o;){let[a,c]=e.tag();switch(a){case 1:s.sessionId=e.string();break;case 2:s.subscriberStats=e.string();break;case 3:s.publisherStats=e.string();break;case 4:s.webrtcVersion=e.string();break;case 5:s.sdk=e.string();break;case 6:s.sdkVersion=e.string();break;default:let l=r.readUnknownField;if(l==="throw")throw new globalThis.Error(`Unknown field ${a} (wire type ${c}) for ${this.typeName}`);let u=e.skip(c);l!==!1&&(l===!0?b.onRead:l)(this.typeName,s,a,c,u)}}return s}internalBinaryWrite(e,n,r){e.sessionId!==""&&n.tag(1,g.LengthDelimited).string(e.sessionId),e.subscriberStats!==""&&n.tag(2,g.LengthDelimited).string(e.subscriberStats),e.publisherStats!==""&&n.tag(3,g.LengthDelimited).string(e.publisherStats),e.webrtcVersion!==""&&n.tag(4,g.LengthDelimited).string(e.webrtcVersion),e.sdk!==""&&n.tag(5,g.LengthDelimited).string(e.sdk),e.sdkVersion!==""&&n.tag(6,g.LengthDelimited).string(e.sdkVersion);let i=r.writeUnknownFields;return i!==!1&&(i==!0?b.onWrite:i)(this.typeName,e,n),n}},kO=new Dg,Eg=class extends k{constructor(){super("stream.video.sfu.signal.SendStatsResponse",[{no:1,name:"error",kind:"message",T:()=>ue}])}create(e){let n=globalThis.Object.create(this.messagePrototype);return e!==void 0&&R(this,n,e),n}internalBinaryRead(e,n,r,i){let s=i??this.create(),o=e.pos+n;for(;e.pos<o;){let[a,c]=e.tag();switch(a){case 1:s.error=ue.internalBinaryRead(e,e.uint32(),r,s.error);break;default:let l=r.readUnknownField;if(l==="throw")throw new globalThis.Error(`Unknown field ${a} (wire type ${c}) for ${this.typeName}`);let u=e.skip(c);l!==!1&&(l===!0?b.onRead:l)(this.typeName,s,a,c,u)}}return s}internalBinaryWrite(e,n,r){e.error&&ue.internalBinaryWrite(e.error,n.tag(1,g.LengthDelimited).fork(),r).join();let i=r.writeUnknownFields;return i!==!1&&(i==!0?b.onWrite:i)(this.typeName,e,n),n}},_O=new Eg,Ig=class extends k{constructor(){super("stream.video.sfu.signal.ICERestartRequest",[{no:1,name:"session_id",kind:"scalar",T:9},{no:2,name:"peer_type",kind:"enum",T:()=>["stream.video.sfu.models.PeerType",pt,"PEER_TYPE_"]}])}create(e){let n=globalThis.Object.create(this.messagePrototype);return n.sessionId="",n.peerType=0,e!==void 0&&R(this,n,e),n}internalBinaryRead(e,n,r,i){let s=i??this.create(),o=e.pos+n;for(;e.pos<o;){let[a,c]=e.tag();switch(a){case 1:s.sessionId=e.string();break;case 2:s.peerType=e.int32();break;default:let l=r.readUnknownField;if(l==="throw")throw new globalThis.Error(`Unknown field ${a} (wire type ${c}) for ${this.typeName}`);let u=e.skip(c);l!==!1&&(l===!0?b.onRead:l)(this.typeName,s,a,c,u)}}return s}internalBinaryWrite(e,n,r){e.sessionId!==""&&n.tag(1,g.LengthDelimited).string(e.sessionId),e.peerType!==0&&n.tag(2,g.Varint).int32(e.peerType);let i=r.writeUnknownFields;return i!==!1&&(i==!0?b.onWrite:i)(this.typeName,e,n),n}},xO=new Ig,Tg=class extends k{constructor(){super("stream.video.sfu.signal.ICERestartResponse",[{no:1,name:"error",kind:"message",T:()=>ue}])}create(e){let n=globalThis.Object.create(this.messagePrototype);return e!==void 0&&R(this,n,e),n}internalBinaryRead(e,n,r,i){let s=i??this.create(),o=e.pos+n;for(;e.pos<o;){let[a,c]=e.tag();switch(a){case 1:s.error=ue.internalBinaryRead(e,e.uint32(),r,s.error);break;default:let l=r.readUnknownField;if(l==="throw")throw new globalThis.Error(`Unknown field ${a} (wire type ${c}) for ${this.typeName}`);let u=e.skip(c);l!==!1&&(l===!0?b.onRead:l)(this.typeName,s,a,c,u)}}return s}internalBinaryWrite(e,n,r){e.error&&ue.internalBinaryWrite(e.error,n.tag(1,g.LengthDelimited).fork(),r).join();let i=r.writeUnknownFields;return i!==!1&&(i==!0?b.onWrite:i)(this.typeName,e,n),n}},NO=new Tg,Rg=class extends k{constructor(){super("stream.video.sfu.signal.UpdateMuteStatesRequest",[{no:1,name:"session_id",kind:"scalar",T:9},{no:3,name:"mute_states",kind:"message",repeat:1,T:()=>bm}])}create(e){let n=globalThis.Object.create(this.messagePrototype);return n.sessionId="",n.muteStates=[],e!==void 0&&R(this,n,e),n}internalBinaryRead(e,n,r,i){let s=i??this.create(),o=e.pos+n;for(;e.pos<o;){let[a,c]=e.tag();switch(a){case 1:s.sessionId=e.string();break;case 3:s.muteStates.push(bm.internalBinaryRead(e,e.uint32(),r));break;default:let l=r.readUnknownField;if(l==="throw")throw new globalThis.Error(`Unknown field ${a} (wire type ${c}) for ${this.typeName}`);let u=e.skip(c);l!==!1&&(l===!0?b.onRead:l)(this.typeName,s,a,c,u)}}return s}internalBinaryWrite(e,n,r){e.sessionId!==""&&n.tag(1,g.LengthDelimited).string(e.sessionId);for(let s=0;s<e.muteStates.length;s++)bm.internalBinaryWrite(e.muteStates[s],n.tag(3,g.LengthDelimited).fork(),r).join();let i=r.writeUnknownFields;return i!==!1&&(i==!0?b.onWrite:i)(this.typeName,e,n),n}},AO=new Rg,kg=class extends k{constructor(){super("stream.video.sfu.signal.UpdateMuteStatesResponse",[{no:4,name:"error",kind:"message",T:()=>ue}])}create(e){let n=globalThis.Object.create(this.messagePrototype);return e!==void 0&&R(this,n,e),n}internalBinaryRead(e,n,r,i){let s=i??this.create(),o=e.pos+n;for(;e.pos<o;){let[a,c]=e.tag();switch(a){case 4:s.error=ue.internalBinaryRead(e,e.uint32(),r,s.error);break;default:let l=r.readUnknownField;if(l==="throw")throw new globalThis.Error(`Unknown field ${a} (wire type ${c}) for ${this.typeName}`);let u=e.skip(c);l!==!1&&(l===!0?b.onRead:l)(this.typeName,s,a,c,u)}}return s}internalBinaryWrite(e,n,r){e.error&&ue.internalBinaryWrite(e.error,n.tag(4,g.LengthDelimited).fork(),r).join();let i=r.writeUnknownFields;return i!==!1&&(i==!0?b.onWrite:i)(this.typeName,e,n),n}},MO=new kg,_g=class extends k{constructor(){super("stream.video.sfu.signal.TrackMuteState",[{no:1,name:"track_type",kind:"enum",T:()=>["stream.video.sfu.models.TrackType",T,"TRACK_TYPE_"]},{no:2,name:"muted",kind:"scalar",T:8}])}create(e){let n=globalThis.Object.create(this.messagePrototype);return n.trackType=0,n.muted=!1,e!==void 0&&R(this,n,e),n}internalBinaryRead(e,n,r,i){let s=i??this.create(),o=e.pos+n;for(;e.pos<o;){let[a,c]=e.tag();switch(a){case 1:s.trackType=e.int32();break;case 2:s.muted=e.bool();break;default:let l=r.readUnknownField;if(l==="throw")throw new globalThis.Error(`Unknown field ${a} (wire type ${c}) for ${this.typeName}`);let u=e.skip(c);l!==!1&&(l===!0?b.onRead:l)(this.typeName,s,a,c,u)}}return s}internalBinaryWrite(e,n,r){e.trackType!==0&&n.tag(1,g.Varint).int32(e.trackType),e.muted!==!1&&n.tag(2,g.Varint).bool(e.muted);let i=r.writeUnknownFields;return i!==!1&&(i==!0?b.onWrite:i)(this.typeName,e,n),n}},bm=new _g,xg=class extends k{constructor(){super("stream.video.sfu.signal.AudioMuteChanged",[{no:1,name:"muted",kind:"scalar",T:8}])}create(e){let n=globalThis.Object.create(this.messagePrototype);return n.muted=!1,e!==void 0&&R(this,n,e),n}internalBinaryRead(e,n,r,i){let s=i??this.create(),o=e.pos+n;for(;e.pos<o;){let[a,c]=e.tag();switch(a){case 1:s.muted=e.bool();break;default:let l=r.readUnknownField;if(l==="throw")throw new globalThis.Error(`Unknown field ${a} (wire type ${c}) for ${this.typeName}`);let u=e.skip(c);l!==!1&&(l===!0?b.onRead:l)(this.typeName,s,a,c,u)}}return s}internalBinaryWrite(e,n,r){e.muted!==!1&&n.tag(1,g.Varint).bool(e.muted);let i=r.writeUnknownFields;return i!==!1&&(i==!0?b.onWrite:i)(this.typeName,e,n),n}};new xg;var Ng=class extends k{constructor(){super("stream.video.sfu.signal.VideoMuteChanged",[{no:2,name:"muted",kind:"scalar",T:8}])}create(e){let n=globalThis.Object.create(this.messagePrototype);return n.muted=!1,e!==void 0&&R(this,n,e),n}internalBinaryRead(e,n,r,i){let s=i??this.create(),o=e.pos+n;for(;e.pos<o;){let[a,c]=e.tag();switch(a){case 2:s.muted=e.bool();break;default:let l=r.readUnknownField;if(l==="throw")throw new globalThis.Error(`Unknown field ${a} (wire type ${c}) for ${this.typeName}`);let u=e.skip(c);l!==!1&&(l===!0?b.onRead:l)(this.typeName,s,a,c,u)}}return s}internalBinaryWrite(e,n,r){e.muted!==!1&&n.tag(2,g.Varint).bool(e.muted);let i=r.writeUnknownFields;return i!==!1&&(i==!0?b.onWrite:i)(this.typeName,e,n),n}};new Ng;var Ag=class extends k{constructor(){super("stream.video.sfu.signal.UpdateSubscriptionsRequest",[{no:2,name:"session_id",kind:"scalar",T:9},{no:3,name:"tracks",kind:"message",repeat:1,T:()=>us}])}create(e){let n=globalThis.Object.create(this.messagePrototype);return n.sessionId="",n.tracks=[],e!==void 0&&R(this,n,e),n}internalBinaryRead(e,n,r,i){let s=i??this.create(),o=e.pos+n;for(;e.pos<o;){let[a,c]=e.tag();switch(a){case 2:s.sessionId=e.string();break;case 3:s.tracks.push(us.internalBinaryRead(e,e.uint32(),r));break;default:let l=r.readUnknownField;if(l==="throw")throw new globalThis.Error(`Unknown field ${a} (wire type ${c}) for ${this.typeName}`);let u=e.skip(c);l!==!1&&(l===!0?b.onRead:l)(this.typeName,s,a,c,u)}}return s}internalBinaryWrite(e,n,r){e.sessionId!==""&&n.tag(2,g.LengthDelimited).string(e.sessionId);for(let s=0;s<e.tracks.length;s++)us.internalBinaryWrite(e.tracks[s],n.tag(3,g.LengthDelimited).fork(),r).join();let i=r.writeUnknownFields;return i!==!1&&(i==!0?b.onWrite:i)(this.typeName,e,n),n}},OO=new Ag,Mg=class extends k{constructor(){super("stream.video.sfu.signal.UpdateSubscriptionsResponse",[{no:4,name:"error",kind:"message",T:()=>ue}])}create(e){let n=globalThis.Object.create(this.messagePrototype);return e!==void 0&&R(this,n,e),n}internalBinaryRead(e,n,r,i){let s=i??this.create(),o=e.pos+n;for(;e.pos<o;){let[a,c]=e.tag();switch(a){case 4:s.error=ue.internalBinaryRead(e,e.uint32(),r,s.error);break;default:let l=r.readUnknownField;if(l==="throw")throw new globalThis.Error(`Unknown field ${a} (wire type ${c}) for ${this.typeName}`);let u=e.skip(c);l!==!1&&(l===!0?b.onRead:l)(this.typeName,s,a,c,u)}}return s}internalBinaryWrite(e,n,r){e.error&&ue.internalBinaryWrite(e.error,n.tag(4,g.LengthDelimited).fork(),r).join();let i=r.writeUnknownFields;return i!==!1&&(i==!0?b.onWrite:i)(this.typeName,e,n),n}},PO=new Mg,Og=class extends k{constructor(){super("stream.video.sfu.signal.TrackSubscriptionDetails",[{no:1,name:"user_id",kind:"scalar",T:9},{no:2,name:"session_id",kind:"scalar",T:9},{no:3,name:"track_type",kind:"enum",T:()=>["stream.video.sfu.models.TrackType",T,"TRACK_TYPE_"]},{no:4,name:"dimension",kind:"message",T:()=>cs}])}create(e){let n=globalThis.Object.create(this.messagePrototype);return n.userId="",n.sessionId="",n.trackType=0,e!==void 0&&R(this,n,e),n}internalBinaryRead(e,n,r,i){let s=i??this.create(),o=e.pos+n;for(;e.pos<o;){let[a,c]=e.tag();switch(a){case 1:s.userId=e.string();break;case 2:s.sessionId=e.string();break;case 3:s.trackType=e.int32();break;case 4:s.dimension=cs.internalBinaryRead(e,e.uint32(),r,s.dimension);break;default:let l=r.readUnknownField;if(l==="throw")throw new globalThis.Error(`Unknown field ${a} (wire type ${c}) for ${this.typeName}`);let u=e.skip(c);l!==!1&&(l===!0?b.onRead:l)(this.typeName,s,a,c,u)}}return s}internalBinaryWrite(e,n,r){e.userId!==""&&n.tag(1,g.LengthDelimited).string(e.userId),e.sessionId!==""&&n.tag(2,g.LengthDelimited).string(e.sessionId),e.trackType!==0&&n.tag(3,g.Varint).int32(e.trackType),e.dimension&&cs.internalBinaryWrite(e.dimension,n.tag(4,g.LengthDelimited).fork(),r).join();let i=r.writeUnknownFields;return i!==!1&&(i==!0?b.onWrite:i)(this.typeName,e,n),n}},us=new Og,Pg=class extends k{constructor(){super("stream.video.sfu.signal.SendAnswerRequest",[{no:1,name:"peer_type",kind:"enum",T:()=>["stream.video.sfu.models.PeerType",pt,"PEER_TYPE_"]},{no:2,name:"sdp",kind:"scalar",T:9},{no:3,name:"session_id",kind:"scalar",T:9}])}create(e){let n=globalThis.Object.create(this.messagePrototype);return n.peerType=0,n.sdp="",n.sessionId="",e!==void 0&&R(this,n,e),n}internalBinaryRead(e,n,r,i){let s=i??this.create(),o=e.pos+n;for(;e.pos<o;){let[a,c]=e.tag();switch(a){case 1:s.peerType=e.int32();break;case 2:s.sdp=e.string();break;case 3:s.sessionId=e.string();break;default:let l=r.readUnknownField;if(l==="throw")throw new globalThis.Error(`Unknown field ${a} (wire type ${c}) for ${this.typeName}`);let u=e.skip(c);l!==!1&&(l===!0?b.onRead:l)(this.typeName,s,a,c,u)}}return s}internalBinaryWrite(e,n,r){e.peerType!==0&&n.tag(1,g.Varint).int32(e.peerType),e.sdp!==""&&n.tag(2,g.LengthDelimited).string(e.sdp),e.sessionId!==""&&n.tag(3,g.LengthDelimited).string(e.sessionId);let i=r.writeUnknownFields;return i!==!1&&(i==!0?b.onWrite:i)(this.typeName,e,n),n}},FO=new Pg,Fg=class extends k{constructor(){super("stream.video.sfu.signal.SendAnswerResponse",[{no:4,name:"error",kind:"message",T:()=>ue}])}create(e){let n=globalThis.Object.create(this.messagePrototype);return e!==void 0&&R(this,n,e),n}internalBinaryRead(e,n,r,i){let s=i??this.create(),o=e.pos+n;for(;e.pos<o;){let[a,c]=e.tag();switch(a){case 4:s.error=ue.internalBinaryRead(e,e.uint32(),r,s.error);break;default:let l=r.readUnknownField;if(l==="throw")throw new globalThis.Error(`Unknown field ${a} (wire type ${c}) for ${this.typeName}`);let u=e.skip(c);l!==!1&&(l===!0?b.onRead:l)(this.typeName,s,a,c,u)}}return s}internalBinaryWrite(e,n,r){e.error&&ue.internalBinaryWrite(e.error,n.tag(4,g.LengthDelimited).fork(),r).join();let i=r.writeUnknownFields;return i!==!1&&(i==!0?b.onWrite:i)(this.typeName,e,n),n}},LO=new Fg,Lg=class extends k{constructor(){super("stream.video.sfu.signal.ICETrickleResponse",[{no:4,name:"error",kind:"message",T:()=>ue}])}create(e){let n=globalThis.Object.create(this.messagePrototype);return e!==void 0&&R(this,n,e),n}internalBinaryRead(e,n,r,i){let s=i??this.create(),o=e.pos+n;for(;e.pos<o;){let[a,c]=e.tag();switch(a){case 4:s.error=ue.internalBinaryRead(e,e.uint32(),r,s.error);break;default:let l=r.readUnknownField;if(l==="throw")throw new globalThis.Error(`Unknown field ${a} (wire type ${c}) for ${this.typeName}`);let u=e.skip(c);l!==!1&&(l===!0?b.onRead:l)(this.typeName,s,a,c,u)}}return s}internalBinaryWrite(e,n,r){e.error&&ue.internalBinaryWrite(e.error,n.tag(4,g.LengthDelimited).fork(),r).join();let i=r.writeUnknownFields;return i!==!1&&(i==!0?b.onWrite:i)(this.typeName,e,n),n}},jO=new Lg,jg=class extends k{constructor(){super("stream.video.sfu.signal.SetPublisherRequest",[{no:1,name:"sdp",kind:"scalar",T:9},{no:2,name:"session_id",kind:"scalar",T:9},{no:3,name:"tracks",kind:"message",repeat:1,T:()=>ls}])}create(e){let n=globalThis.Object.create(this.messagePrototype);return n.sdp="",n.sessionId="",n.tracks=[],e!==void 0&&R(this,n,e),n}internalBinaryRead(e,n,r,i){let s=i??this.create(),o=e.pos+n;for(;e.pos<o;){let[a,c]=e.tag();switch(a){case 1:s.sdp=e.string();break;case 2:s.sessionId=e.string();break;case 3:s.tracks.push(ls.internalBinaryRead(e,e.uint32(),r));break;default:let l=r.readUnknownField;if(l==="throw")throw new globalThis.Error(`Unknown field ${a} (wire type ${c}) for ${this.typeName}`);let u=e.skip(c);l!==!1&&(l===!0?b.onRead:l)(this.typeName,s,a,c,u)}}return s}internalBinaryWrite(e,n,r){e.sdp!==""&&n.tag(1,g.LengthDelimited).string(e.sdp),e.sessionId!==""&&n.tag(2,g.LengthDelimited).string(e.sessionId);for(let s=0;s<e.tracks.length;s++)ls.internalBinaryWrite(e.tracks[s],n.tag(3,g.LengthDelimited).fork(),r).join();let i=r.writeUnknownFields;return i!==!1&&(i==!0?b.onWrite:i)(this.typeName,e,n),n}},UO=new jg,Ug=class extends k{constructor(){super("stream.video.sfu.signal.SetPublisherResponse",[{no:1,name:"sdp",kind:"scalar",T:9},{no:2,name:"session_id",kind:"scalar",T:9},{no:3,name:"ice_restart",kind:"scalar",T:8},{no:4,name:"error",kind:"message",T:()=>ue}])}create(e){let n=globalThis.Object.create(this.messagePrototype);return n.sdp="",n.sessionId="",n.iceRestart=!1,e!==void 0&&R(this,n,e),n}internalBinaryRead(e,n,r,i){let s=i??this.create(),o=e.pos+n;for(;e.pos<o;){let[a,c]=e.tag();switch(a){case 1:s.sdp=e.string();break;case 2:s.sessionId=e.string();break;case 3:s.iceRestart=e.bool();break;case 4:s.error=ue.internalBinaryRead(e,e.uint32(),r,s.error);break;default:let l=r.readUnknownField;if(l==="throw")throw new globalThis.Error(`Unknown field ${a} (wire type ${c}) for ${this.typeName}`);let u=e.skip(c);l!==!1&&(l===!0?b.onRead:l)(this.typeName,s,a,c,u)}}return s}internalBinaryWrite(e,n,r){e.sdp!==""&&n.tag(1,g.LengthDelimited).string(e.sdp),e.sessionId!==""&&n.tag(2,g.LengthDelimited).string(e.sessionId),e.iceRestart!==!1&&n.tag(3,g.Varint).bool(e.iceRestart),e.error&&ue.internalBinaryWrite(e.error,n.tag(4,g.LengthDelimited).fork(),r).join();let i=r.writeUnknownFields;return i!==!1&&(i==!0?b.onWrite:i)(this.typeName,e,n),n}},BO=new Ug,wm=new Ro("stream.video.sfu.signal.SignalServer",[{name:"SetPublisher",options:{},I:UO,O:BO},{name:"SendAnswer",options:{},I:FO,O:LO},{name:"IceTrickle",options:{},I:$l,O:jO},{name:"UpdateSubscriptions",options:{},I:OO,O:PO},{name:"UpdateMuteStates",options:{},I:AO,O:MO},{name:"IceRestart",options:{},I:xO,O:NO},{name:"SendStats",options:{},I:kO,O:_O},{name:"StartNoiseCancellation",options:{},I:EO,O:IO},{name:"StopNoiseCancellation",options:{},I:TO,O:RO}]),eI=function(t){return t[t.HIGH_UNSPECIFIED=0]="HIGH_UNSPECIFIED",t[t.LOW=1]="LOW",t[t.MEDIUM=2]="MEDIUM",t[t.VERY_LOW=3]="VERY_LOW",t}(eI||{}),Bg=class extends k{constructor(){super("stream.video.sfu.event.SfuEvent",[{no:1,name:"subscriber_offer",kind:"message",oneof:"eventPayload",T:()=>Mm},{no:2,name:"publisher_answer",kind:"message",oneof:"eventPayload",T:()=>Om},{no:3,name:"connection_quality_changed",kind:"message",oneof:"eventPayload",T:()=>Pm},{no:4,name:"audio_level_changed",kind:"message",oneof:"eventPayload",T:()=>Um},{no:5,name:"ice_trickle",kind:"message",oneof:"eventPayload",T:()=>$l},{no:6,name:"change_publish_quality",kind:"message",oneof:"eventPayload",T:()=>qm},{no:10,name:"participant_joined",kind:"message",oneof:"eventPayload",T:()=>xm},{no:11,name:"participant_left",kind:"message",oneof:"eventPayload",T:()=>Nm},{no:12,name:"dominant_speaker_changed",kind:"message",oneof:"eventPayload",T:()=>Lm},{no:13,name:"join_response",kind:"message",oneof:"eventPayload",T:()=>_m},{no:14,name:"health_check_response",kind:"message",oneof:"eventPayload",T:()=>Im},{no:16,name:"track_published",kind:"message",oneof:"eventPayload",T:()=>Tm},{no:17,name:"track_unpublished",kind:"message",oneof:"eventPayload",T:()=>Rm},{no:18,name:"error",kind:"message",oneof:"eventPayload",T:()=>Sm},{no:19,name:"call_grants_updated",kind:"message",oneof:"eventPayload",T:()=>zm},{no:20,name:"go_away",kind:"message",oneof:"eventPayload",T:()=>Gm},{no:21,name:"ice_restart",kind:"message",oneof:"eventPayload",T:()=>Dm},{no:22,name:"pins_updated",kind:"message",oneof:"eventPayload",T:()=>Cm},{no:23,name:"call_ended",kind:"message",oneof:"eventPayload",T:()=>Km},{no:24,name:"participant_updated",kind:"message",oneof:"eventPayload",T:()=>Am}])}create(e){let n=globalThis.Object.create(this.messagePrototype);return n.eventPayload={oneofKind:void 0},e!==void 0&&R(this,n,e),n}internalBinaryRead(e,n,r,i){let s=i??this.create(),o=e.pos+n;for(;e.pos<o;){let[a,c]=e.tag();switch(a){case 1:s.eventPayload={oneofKind:"subscriberOffer",subscriberOffer:Mm.internalBinaryRead(e,e.uint32(),r,s.eventPayload.subscriberOffer)};break;case 2:s.eventPayload={oneofKind:"publisherAnswer",publisherAnswer:Om.internalBinaryRead(e,e.uint32(),r,s.eventPayload.publisherAnswer)};break;case 3:s.eventPayload={oneofKind:"connectionQualityChanged",connectionQualityChanged:Pm.internalBinaryRead(e,e.uint32(),r,s.eventPayload.connectionQualityChanged)};break;case 4:s.eventPayload={oneofKind:"audioLevelChanged",audioLevelChanged:Um.internalBinaryRead(e,e.uint32(),r,s.eventPayload.audioLevelChanged)};break;case 5:s.eventPayload={oneofKind:"iceTrickle",iceTrickle:$l.internalBinaryRead(e,e.uint32(),r,s.eventPayload.iceTrickle)};break;case 6:s.eventPayload={oneofKind:"changePublishQuality",changePublishQuality:qm.internalBinaryRead(e,e.uint32(),r,s.eventPayload.changePublishQuality)};break;case 10:s.eventPayload={oneofKind:"participantJoined",participantJoined:xm.internalBinaryRead(e,e.uint32(),r,s.eventPayload.participantJoined)};break;case 11:s.eventPayload={oneofKind:"participantLeft",participantLeft:Nm.internalBinaryRead(e,e.uint32(),r,s.eventPayload.participantLeft)};break;case 12:s.eventPayload={oneofKind:"dominantSpeakerChanged",dominantSpeakerChanged:Lm.internalBinaryRead(e,e.uint32(),r,s.eventPayload.dominantSpeakerChanged)};break;case 13:s.eventPayload={oneofKind:"joinResponse",joinResponse:_m.internalBinaryRead(e,e.uint32(),r,s.eventPayload.joinResponse)};break;case 14:s.eventPayload={oneofKind:"healthCheckResponse",healthCheckResponse:Im.internalBinaryRead(e,e.uint32(),r,s.eventPayload.healthCheckResponse)};break;case 16:s.eventPayload={oneofKind:"trackPublished",trackPublished:Tm.internalBinaryRead(e,e.uint32(),r,s.eventPayload.trackPublished)};break;case 17:s.eventPayload={oneofKind:"trackUnpublished",trackUnpublished:Rm.internalBinaryRead(e,e.uint32(),r,s.eventPayload.trackUnpublished)};break;case 18:s.eventPayload={oneofKind:"error",error:Sm.internalBinaryRead(e,e.uint32(),r,s.eventPayload.error)};break;case 19:s.eventPayload={oneofKind:"callGrantsUpdated",callGrantsUpdated:zm.internalBinaryRead(e,e.uint32(),r,s.eventPayload.callGrantsUpdated)};break;case 20:s.eventPayload={oneofKind:"goAway",goAway:Gm.internalBinaryRead(e,e.uint32(),r,s.eventPayload.goAway)};break;case 21:s.eventPayload={oneofKind:"iceRestart",iceRestart:Dm.internalBinaryRead(e,e.uint32(),r,s.eventPayload.iceRestart)};break;case 22:s.eventPayload={oneofKind:"pinsUpdated",pinsUpdated:Cm.internalBinaryRead(e,e.uint32(),r,s.eventPayload.pinsUpdated)};break;case 23:s.eventPayload={oneofKind:"callEnded",callEnded:Km.internalBinaryRead(e,e.uint32(),r,s.eventPayload.callEnded)};break;case 24:s.eventPayload={oneofKind:"participantUpdated",participantUpdated:Am.internalBinaryRead(e,e.uint32(),r,s.eventPayload.participantUpdated)};break;default:let l=r.readUnknownField;if(l==="throw")throw new globalThis.Error(`Unknown field ${a} (wire type ${c}) for ${this.typeName}`);let u=e.skip(c);l!==!1&&(l===!0?b.onRead:l)(this.typeName,s,a,c,u)}}return s}internalBinaryWrite(e,n,r){e.eventPayload.oneofKind==="subscriberOffer"&&Mm.internalBinaryWrite(e.eventPayload.subscriberOffer,n.tag(1,g.LengthDelimited).fork(),r).join(),e.eventPayload.oneofKind==="publisherAnswer"&&Om.internalBinaryWrite(e.eventPayload.publisherAnswer,n.tag(2,g.LengthDelimited).fork(),r).join(),e.eventPayload.oneofKind==="connectionQualityChanged"&&Pm.internalBinaryWrite(e.eventPayload.connectionQualityChanged,n.tag(3,g.LengthDelimited).fork(),r).join(),e.eventPayload.oneofKind==="audioLevelChanged"&&Um.internalBinaryWrite(e.eventPayload.audioLevelChanged,n.tag(4,g.LengthDelimited).fork(),r).join(),e.eventPayload.oneofKind==="iceTrickle"&&$l.internalBinaryWrite(e.eventPayload.iceTrickle,n.tag(5,g.LengthDelimited).fork(),r).join(),e.eventPayload.oneofKind==="changePublishQuality"&&qm.internalBinaryWrite(e.eventPayload.changePublishQuality,n.tag(6,g.LengthDelimited).fork(),r).join(),e.eventPayload.oneofKind==="participantJoined"&&xm.internalBinaryWrite(e.eventPayload.participantJoined,n.tag(10,g.LengthDelimited).fork(),r).join(),e.eventPayload.oneofKind==="participantLeft"&&Nm.internalBinaryWrite(e.eventPayload.participantLeft,n.tag(11,g.LengthDelimited).fork(),r).join(),e.eventPayload.oneofKind==="dominantSpeakerChanged"&&Lm.internalBinaryWrite(e.eventPayload.dominantSpeakerChanged,n.tag(12,g.LengthDelimited).fork(),r).join(),e.eventPayload.oneofKind==="joinResponse"&&_m.internalBinaryWrite(e.eventPayload.joinResponse,n.tag(13,g.LengthDelimited).fork(),r).join(),e.eventPayload.oneofKind==="healthCheckResponse"&&Im.internalBinaryWrite(e.eventPayload.healthCheckResponse,n.tag(14,g.LengthDelimited).fork(),r).join(),e.eventPayload.oneofKind==="trackPublished"&&Tm.internalBinaryWrite(e.eventPayload.trackPublished,n.tag(16,g.LengthDelimited).fork(),r).join(),e.eventPayload.oneofKind==="trackUnpublished"&&Rm.internalBinaryWrite(e.eventPayload.trackUnpublished,n.tag(17,g.LengthDelimited).fork(),r).join(),e.eventPayload.oneofKind==="error"&&Sm.internalBinaryWrite(e.eventPayload.error,n.tag(18,g.LengthDelimited).fork(),r).join(),e.eventPayload.oneofKind==="callGrantsUpdated"&&zm.internalBinaryWrite(e.eventPayload.callGrantsUpdated,n.tag(19,g.LengthDelimited).fork(),r).join(),e.eventPayload.oneofKind==="goAway"&&Gm.internalBinaryWrite(e.eventPayload.goAway,n.tag(20,g.LengthDelimited).fork(),r).join(),e.eventPayload.oneofKind==="iceRestart"&&Dm.internalBinaryWrite(e.eventPayload.iceRestart,n.tag(21,g.LengthDelimited).fork(),r).join(),e.eventPayload.oneofKind==="pinsUpdated"&&Cm.internalBinaryWrite(e.eventPayload.pinsUpdated,n.tag(22,g.LengthDelimited).fork(),r).join(),e.eventPayload.oneofKind==="callEnded"&&Km.internalBinaryWrite(e.eventPayload.callEnded,n.tag(23,g.LengthDelimited).fork(),r).join(),e.eventPayload.oneofKind==="participantUpdated"&&Am.internalBinaryWrite(e.eventPayload.participantUpdated,n.tag(24,g.LengthDelimited).fork(),r).join();let i=r.writeUnknownFields;return i!==!1&&(i==!0?b.onWrite:i)(this.typeName,e,n),n}},OE=new Bg,Vg=class extends k{constructor(){super("stream.video.sfu.event.PinsChanged",[{no:1,name:"pins",kind:"message",repeat:1,T:()=>as}])}create(e){let n=globalThis.Object.create(this.messagePrototype);return n.pins=[],e!==void 0&&R(this,n,e),n}internalBinaryRead(e,n,r,i){let s=i??this.create(),o=e.pos+n;for(;e.pos<o;){let[a,c]=e.tag();switch(a){case 1:s.pins.push(as.internalBinaryRead(e,e.uint32(),r));break;default:let l=r.readUnknownField;if(l==="throw")throw new globalThis.Error(`Unknown field ${a} (wire type ${c}) for ${this.typeName}`);let u=e.skip(c);l!==!1&&(l===!0?b.onRead:l)(this.typeName,s,a,c,u)}}return s}internalBinaryWrite(e,n,r){for(let s=0;s<e.pins.length;s++)as.internalBinaryWrite(e.pins[s],n.tag(1,g.LengthDelimited).fork(),r).join();let i=r.writeUnknownFields;return i!==!1&&(i==!0?b.onWrite:i)(this.typeName,e,n),n}},Cm=new Vg,$g=class extends k{constructor(){super("stream.video.sfu.event.Error",[{no:4,name:"error",kind:"message",T:()=>ue},{no:5,name:"reconnect_strategy",kind:"enum",T:()=>["stream.video.sfu.models.WebsocketReconnectStrategy",XE,"WEBSOCKET_RECONNECT_STRATEGY_"]}])}create(e){let n=globalThis.Object.create(this.messagePrototype);return n.reconnectStrategy=0,e!==void 0&&R(this,n,e),n}internalBinaryRead(e,n,r,i){let s=i??this.create(),o=e.pos+n;for(;e.pos<o;){let[a,c]=e.tag();switch(a){case 4:s.error=ue.internalBinaryRead(e,e.uint32(),r,s.error);break;case 5:s.reconnectStrategy=e.int32();break;default:let l=r.readUnknownField;if(l==="throw")throw new globalThis.Error(`Unknown field ${a} (wire type ${c}) for ${this.typeName}`);let u=e.skip(c);l!==!1&&(l===!0?b.onRead:l)(this.typeName,s,a,c,u)}}return s}internalBinaryWrite(e,n,r){e.error&&ue.internalBinaryWrite(e.error,n.tag(4,g.LengthDelimited).fork(),r).join(),e.reconnectStrategy!==0&&n.tag(5,g.Varint).int32(e.reconnectStrategy);let i=r.writeUnknownFields;return i!==!1&&(i==!0?b.onWrite:i)(this.typeName,e,n),n}},Sm=new $g,Hg=class extends k{constructor(){super("stream.video.sfu.event.ICETrickle",[{no:1,name:"peer_type",kind:"enum",T:()=>["stream.video.sfu.models.PeerType",pt,"PEER_TYPE_"]},{no:2,name:"ice_candidate",kind:"scalar",T:9}])}create(e){let n=globalThis.Object.create(this.messagePrototype);return n.peerType=0,n.iceCandidate="",e!==void 0&&R(this,n,e),n}internalBinaryRead(e,n,r,i){let s=i??this.create(),o=e.pos+n;for(;e.pos<o;){let[a,c]=e.tag();switch(a){case 1:s.peerType=e.int32();break;case 2:s.iceCandidate=e.string();break;default:let l=r.readUnknownField;if(l==="throw")throw new globalThis.Error(`Unknown field ${a} (wire type ${c}) for ${this.typeName}`);let u=e.skip(c);l!==!1&&(l===!0?b.onRead:l)(this.typeName,s,a,c,u)}}return s}internalBinaryWrite(e,n,r){e.peerType!==0&&n.tag(1,g.Varint).int32(e.peerType),e.iceCandidate!==""&&n.tag(2,g.LengthDelimited).string(e.iceCandidate);let i=r.writeUnknownFields;return i!==!1&&(i==!0?b.onWrite:i)(this.typeName,e,n),n}},hz=new Hg,Wg=class extends k{constructor(){super("stream.video.sfu.event.ICERestart",[{no:1,name:"peer_type",kind:"enum",T:()=>["stream.video.sfu.models.PeerType",pt,"PEER_TYPE_"]}])}create(e){let n=globalThis.Object.create(this.messagePrototype);return n.peerType=0,e!==void 0&&R(this,n,e),n}internalBinaryRead(e,n,r,i){let s=i??this.create(),o=e.pos+n;for(;e.pos<o;){let[a,c]=e.tag();switch(a){case 1:s.peerType=e.int32();break;default:let l=r.readUnknownField;if(l==="throw")throw new globalThis.Error(`Unknown field ${a} (wire type ${c}) for ${this.typeName}`);let u=e.skip(c);l!==!1&&(l===!0?b.onRead:l)(this.typeName,s,a,c,u)}}return s}internalBinaryWrite(e,n,r){e.peerType!==0&&n.tag(1,g.Varint).int32(e.peerType);let i=r.writeUnknownFields;return i!==!1&&(i==!0?b.onWrite:i)(this.typeName,e,n),n}},Dm=new Wg,qg=class extends k{constructor(){super("stream.video.sfu.event.SfuRequest",[{no:1,name:"join_request",kind:"message",oneof:"requestPayload",T:()=>Hl},{no:2,name:"health_check_request",kind:"message",oneof:"requestPayload",T:()=>Em}])}create(e){let n=globalThis.Object.create(this.messagePrototype);return n.requestPayload={oneofKind:void 0},e!==void 0&&R(this,n,e),n}internalBinaryRead(e,n,r,i){let s=i??this.create(),o=e.pos+n;for(;e.pos<o;){let[a,c]=e.tag();switch(a){case 1:s.requestPayload={oneofKind:"joinRequest",joinRequest:Hl.internalBinaryRead(e,e.uint32(),r,s.requestPayload.joinRequest)};break;case 2:s.requestPayload={oneofKind:"healthCheckRequest",healthCheckRequest:Em.internalBinaryRead(e,e.uint32(),r,s.requestPayload.healthCheckRequest)};break;default:let l=r.readUnknownField;if(l==="throw")throw new globalThis.Error(`Unknown field ${a} (wire type ${c}) for ${this.typeName}`);let u=e.skip(c);l!==!1&&(l===!0?b.onRead:l)(this.typeName,s,a,c,u)}}return s}internalBinaryWrite(e,n,r){e.requestPayload.oneofKind==="joinRequest"&&Hl.internalBinaryWrite(e.requestPayload.joinRequest,n.tag(1,g.LengthDelimited).fork(),r).join(),e.requestPayload.oneofKind==="healthCheckRequest"&&Em.internalBinaryWrite(e.requestPayload.healthCheckRequest,n.tag(2,g.LengthDelimited).fork(),r).join();let i=r.writeUnknownFields;return i!==!1&&(i==!0?b.onWrite:i)(this.typeName,e,n),n}},Ul=new qg,zg=class extends k{constructor(){super("stream.video.sfu.event.HealthCheckRequest",[])}create(e){let n=globalThis.Object.create(this.messagePrototype);return e!==void 0&&R(this,n,e),n}internalBinaryRead(e,n,r,i){return i??this.create()}internalBinaryWrite(e,n,r){let i=r.writeUnknownFields;return i!==!1&&(i==!0?b.onWrite:i)(this.typeName,e,n),n}},Em=new zg,Gg=class extends k{constructor(){super("stream.video.sfu.event.HealthCheckResponse",[{no:1,name:"participant_count",kind:"message",T:()=>os}])}create(e){let n=globalThis.Object.create(this.messagePrototype);return e!==void 0&&R(this,n,e),n}internalBinaryRead(e,n,r,i){let s=i??this.create(),o=e.pos+n;for(;e.pos<o;){let[a,c]=e.tag();switch(a){case 1:s.participantCount=os.internalBinaryRead(e,e.uint32(),r,s.participantCount);break;default:let l=r.readUnknownField;if(l==="throw")throw new globalThis.Error(`Unknown field ${a} (wire type ${c}) for ${this.typeName}`);let u=e.skip(c);l!==!1&&(l===!0?b.onRead:l)(this.typeName,s,a,c,u)}}return s}internalBinaryWrite(e,n,r){e.participantCount&&os.internalBinaryWrite(e.participantCount,n.tag(1,g.LengthDelimited).fork(),r).join();let i=r.writeUnknownFields;return i!==!1&&(i==!0?b.onWrite:i)(this.typeName,e,n),n}},Im=new Gg,Kg=class extends k{constructor(){super("stream.video.sfu.event.TrackPublished",[{no:1,name:"user_id",kind:"scalar",T:9},{no:2,name:"session_id",kind:"scalar",T:9},{no:3,name:"type",kind:"enum",T:()=>["stream.video.sfu.models.TrackType",T,"TRACK_TYPE_"]},{no:4,name:"participant",kind:"message",T:()=>ze}])}create(e){let n=globalThis.Object.create(this.messagePrototype);return n.userId="",n.sessionId="",n.type=0,e!==void 0&&R(this,n,e),n}internalBinaryRead(e,n,r,i){let s=i??this.create(),o=e.pos+n;for(;e.pos<o;){let[a,c]=e.tag();switch(a){case 1:s.userId=e.string();break;case 2:s.sessionId=e.string();break;case 3:s.type=e.int32();break;case 4:s.participant=ze.internalBinaryRead(e,e.uint32(),r,s.participant);break;default:let l=r.readUnknownField;if(l==="throw")throw new globalThis.Error(`Unknown field ${a} (wire type ${c}) for ${this.typeName}`);let u=e.skip(c);l!==!1&&(l===!0?b.onRead:l)(this.typeName,s,a,c,u)}}return s}internalBinaryWrite(e,n,r){e.userId!==""&&n.tag(1,g.LengthDelimited).string(e.userId),e.sessionId!==""&&n.tag(2,g.LengthDelimited).string(e.sessionId),e.type!==0&&n.tag(3,g.Varint).int32(e.type),e.participant&&ze.internalBinaryWrite(e.participant,n.tag(4,g.LengthDelimited).fork(),r).join();let i=r.writeUnknownFields;return i!==!1&&(i==!0?b.onWrite:i)(this.typeName,e,n),n}},Tm=new Kg,Jg=class extends k{constructor(){super("stream.video.sfu.event.TrackUnpublished",[{no:1,name:"user_id",kind:"scalar",T:9},{no:2,name:"session_id",kind:"scalar",T:9},{no:3,name:"type",kind:"enum",T:()=>["stream.video.sfu.models.TrackType",T,"TRACK_TYPE_"]},{no:4,name:"cause",kind:"enum",T:()=>["stream.video.sfu.models.TrackUnpublishReason",Jy,"TRACK_UNPUBLISH_REASON_"]},{no:5,name:"participant",kind:"message",T:()=>ze}])}create(e){let n=globalThis.Object.create(this.messagePrototype);return n.userId="",n.sessionId="",n.type=0,n.cause=0,e!==void 0&&R(this,n,e),n}internalBinaryRead(e,n,r,i){let s=i??this.create(),o=e.pos+n;for(;e.pos<o;){let[a,c]=e.tag();switch(a){case 1:s.userId=e.string();break;case 2:s.sessionId=e.string();break;case 3:s.type=e.int32();break;case 4:s.cause=e.int32();break;case 5:s.participant=ze.internalBinaryRead(e,e.uint32(),r,s.participant);break;default:let l=r.readUnknownField;if(l==="throw")throw new globalThis.Error(`Unknown field ${a} (wire type ${c}) for ${this.typeName}`);let u=e.skip(c);l!==!1&&(l===!0?b.onRead:l)(this.typeName,s,a,c,u)}}return s}internalBinaryWrite(e,n,r){e.userId!==""&&n.tag(1,g.LengthDelimited).string(e.userId),e.sessionId!==""&&n.tag(2,g.LengthDelimited).string(e.sessionId),e.type!==0&&n.tag(3,g.Varint).int32(e.type),e.cause!==0&&n.tag(4,g.Varint).int32(e.cause),e.participant&&ze.internalBinaryWrite(e.participant,n.tag(5,g.LengthDelimited).fork(),r).join();let i=r.writeUnknownFields;return i!==!1&&(i==!0?b.onWrite:i)(this.typeName,e,n),n}},Rm=new Jg,Qg=class extends k{constructor(){super("stream.video.sfu.event.JoinRequest",[{no:1,name:"token",kind:"scalar",T:9},{no:2,name:"session_id",kind:"scalar",T:9},{no:3,name:"subscriber_sdp",kind:"scalar",T:9},{no:4,name:"client_details",kind:"message",T:()=>hm},{no:5,name:"migration",kind:"message",T:()=>km},{no:6,name:"fast_reconnect",kind:"scalar",T:8}])}create(e){let n=globalThis.Object.create(this.messagePrototype);return n.token="",n.sessionId="",n.subscriberSdp="",n.fastReconnect=!1,e!==void 0&&R(this,n,e),n}internalBinaryRead(e,n,r,i){let s=i??this.create(),o=e.pos+n;for(;e.pos<o;){let[a,c]=e.tag();switch(a){case 1:s.token=e.string();break;case 2:s.sessionId=e.string();break;case 3:s.subscriberSdp=e.string();break;case 4:s.clientDetails=hm.internalBinaryRead(e,e.uint32(),r,s.clientDetails);break;case 5:s.migration=km.internalBinaryRead(e,e.uint32(),r,s.migration);break;case 6:s.fastReconnect=e.bool();break;default:let l=r.readUnknownField;if(l==="throw")throw new globalThis.Error(`Unknown field ${a} (wire type ${c}) for ${this.typeName}`);let u=e.skip(c);l!==!1&&(l===!0?b.onRead:l)(this.typeName,s,a,c,u)}}return s}internalBinaryWrite(e,n,r){e.token!==""&&n.tag(1,g.LengthDelimited).string(e.token),e.sessionId!==""&&n.tag(2,g.LengthDelimited).string(e.sessionId),e.subscriberSdp!==""&&n.tag(3,g.LengthDelimited).string(e.subscriberSdp),e.clientDetails&&hm.internalBinaryWrite(e.clientDetails,n.tag(4,g.LengthDelimited).fork(),r).join(),e.migration&&km.internalBinaryWrite(e.migration,n.tag(5,g.LengthDelimited).fork(),r).join(),e.fastReconnect!==!1&&n.tag(6,g.Varint).bool(e.fastReconnect);let i=r.writeUnknownFields;return i!==!1&&(i==!0?b.onWrite:i)(this.typeName,e,n),n}},Hl=new Qg,Yg=class extends k{constructor(){super("stream.video.sfu.event.Migration",[{no:1,name:"from_sfu_id",kind:"scalar",T:9},{no:2,name:"announced_tracks",kind:"message",repeat:1,T:()=>ls},{no:3,name:"subscriptions",kind:"message",repeat:1,T:()=>us}])}create(e){let n=globalThis.Object.create(this.messagePrototype);return n.fromSfuId="",n.announcedTracks=[],n.subscriptions=[],e!==void 0&&R(this,n,e),n}internalBinaryRead(e,n,r,i){let s=i??this.create(),o=e.pos+n;for(;e.pos<o;){let[a,c]=e.tag();switch(a){case 1:s.fromSfuId=e.string();break;case 2:s.announcedTracks.push(ls.internalBinaryRead(e,e.uint32(),r));break;case 3:s.subscriptions.push(us.internalBinaryRead(e,e.uint32(),r));break;default:let l=r.readUnknownField;if(l==="throw")throw new globalThis.Error(`Unknown field ${a} (wire type ${c}) for ${this.typeName}`);let u=e.skip(c);l!==!1&&(l===!0?b.onRead:l)(this.typeName,s,a,c,u)}}return s}internalBinaryWrite(e,n,r){e.fromSfuId!==""&&n.tag(1,g.LengthDelimited).string(e.fromSfuId);for(let s=0;s<e.announcedTracks.length;s++)ls.internalBinaryWrite(e.announcedTracks[s],n.tag(2,g.LengthDelimited).fork(),r).join();for(let s=0;s<e.subscriptions.length;s++)us.internalBinaryWrite(e.subscriptions[s],n.tag(3,g.LengthDelimited).fork(),r).join();let i=r.writeUnknownFields;return i!==!1&&(i==!0?b.onWrite:i)(this.typeName,e,n),n}},km=new Yg,Zg=class extends k{constructor(){super("stream.video.sfu.event.JoinResponse",[{no:1,name:"call_state",kind:"message",T:()=>dm},{no:2,name:"reconnected",kind:"scalar",T:8}])}create(e){let n=globalThis.Object.create(this.messagePrototype);return n.reconnected=!1,e!==void 0&&R(this,n,e),n}internalBinaryRead(e,n,r,i){let s=i??this.create(),o=e.pos+n;for(;e.pos<o;){let[a,c]=e.tag();switch(a){case 1:s.callState=dm.internalBinaryRead(e,e.uint32(),r,s.callState);break;case 2:s.reconnected=e.bool();break;default:let l=r.readUnknownField;if(l==="throw")throw new globalThis.Error(`Unknown field ${a} (wire type ${c}) for ${this.typeName}`);let u=e.skip(c);l!==!1&&(l===!0?b.onRead:l)(this.typeName,s,a,c,u)}}return s}internalBinaryWrite(e,n,r){e.callState&&dm.internalBinaryWrite(e.callState,n.tag(1,g.LengthDelimited).fork(),r).join(),e.reconnected!==!1&&n.tag(2,g.Varint).bool(e.reconnected);let i=r.writeUnknownFields;return i!==!1&&(i==!0?b.onWrite:i)(this.typeName,e,n),n}},_m=new Zg,Xg=class extends k{constructor(){super("stream.video.sfu.event.ParticipantJoined",[{no:1,name:"call_cid",kind:"scalar",T:9},{no:2,name:"participant",kind:"message",T:()=>ze}])}create(e){let n=globalThis.Object.create(this.messagePrototype);return n.callCid="",e!==void 0&&R(this,n,e),n}internalBinaryRead(e,n,r,i){let s=i??this.create(),o=e.pos+n;for(;e.pos<o;){let[a,c]=e.tag();switch(a){case 1:s.callCid=e.string();break;case 2:s.participant=ze.internalBinaryRead(e,e.uint32(),r,s.participant);break;default:let l=r.readUnknownField;if(l==="throw")throw new globalThis.Error(`Unknown field ${a} (wire type ${c}) for ${this.typeName}`);let u=e.skip(c);l!==!1&&(l===!0?b.onRead:l)(this.typeName,s,a,c,u)}}return s}internalBinaryWrite(e,n,r){e.callCid!==""&&n.tag(1,g.LengthDelimited).string(e.callCid),e.participant&&ze.internalBinaryWrite(e.participant,n.tag(2,g.LengthDelimited).fork(),r).join();let i=r.writeUnknownFields;return i!==!1&&(i==!0?b.onWrite:i)(this.typeName,e,n),n}},xm=new Xg,ey=class extends k{constructor(){super("stream.video.sfu.event.ParticipantLeft",[{no:1,name:"call_cid",kind:"scalar",T:9},{no:2,name:"participant",kind:"message",T:()=>ze}])}create(e){let n=globalThis.Object.create(this.messagePrototype);return n.callCid="",e!==void 0&&R(this,n,e),n}internalBinaryRead(e,n,r,i){let s=i??this.create(),o=e.pos+n;for(;e.pos<o;){let[a,c]=e.tag();switch(a){case 1:s.callCid=e.string();break;case 2:s.participant=ze.internalBinaryRead(e,e.uint32(),r,s.participant);break;default:let l=r.readUnknownField;if(l==="throw")throw new globalThis.Error(`Unknown field ${a} (wire type ${c}) for ${this.typeName}`);let u=e.skip(c);l!==!1&&(l===!0?b.onRead:l)(this.typeName,s,a,c,u)}}return s}internalBinaryWrite(e,n,r){e.callCid!==""&&n.tag(1,g.LengthDelimited).string(e.callCid),e.participant&&ze.internalBinaryWrite(e.participant,n.tag(2,g.LengthDelimited).fork(),r).join();let i=r.writeUnknownFields;return i!==!1&&(i==!0?b.onWrite:i)(this.typeName,e,n),n}},Nm=new ey,ty=class extends k{constructor(){super("stream.video.sfu.event.ParticipantUpdated",[{no:1,name:"call_cid",kind:"scalar",T:9},{no:2,name:"participant",kind:"message",T:()=>ze}])}create(e){let n=globalThis.Object.create(this.messagePrototype);return n.callCid="",e!==void 0&&R(this,n,e),n}internalBinaryRead(e,n,r,i){let s=i??this.create(),o=e.pos+n;for(;e.pos<o;){let[a,c]=e.tag();switch(a){case 1:s.callCid=e.string();break;case 2:s.participant=ze.internalBinaryRead(e,e.uint32(),r,s.participant);break;default:let l=r.readUnknownField;if(l==="throw")throw new globalThis.Error(`Unknown field ${a} (wire type ${c}) for ${this.typeName}`);let u=e.skip(c);l!==!1&&(l===!0?b.onRead:l)(this.typeName,s,a,c,u)}}return s}internalBinaryWrite(e,n,r){e.callCid!==""&&n.tag(1,g.LengthDelimited).string(e.callCid),e.participant&&ze.internalBinaryWrite(e.participant,n.tag(2,g.LengthDelimited).fork(),r).join();let i=r.writeUnknownFields;return i!==!1&&(i==!0?b.onWrite:i)(this.typeName,e,n),n}},Am=new ty,ny=class extends k{constructor(){super("stream.video.sfu.event.SubscriberOffer",[{no:1,name:"ice_restart",kind:"scalar",T:8},{no:2,name:"sdp",kind:"scalar",T:9}])}create(e){let n=globalThis.Object.create(this.messagePrototype);return n.iceRestart=!1,n.sdp="",e!==void 0&&R(this,n,e),n}internalBinaryRead(e,n,r,i){let s=i??this.create(),o=e.pos+n;for(;e.pos<o;){let[a,c]=e.tag();switch(a){case 1:s.iceRestart=e.bool();break;case 2:s.sdp=e.string();break;default:let l=r.readUnknownField;if(l==="throw")throw new globalThis.Error(`Unknown field ${a} (wire type ${c}) for ${this.typeName}`);let u=e.skip(c);l!==!1&&(l===!0?b.onRead:l)(this.typeName,s,a,c,u)}}return s}internalBinaryWrite(e,n,r){e.iceRestart!==!1&&n.tag(1,g.Varint).bool(e.iceRestart),e.sdp!==""&&n.tag(2,g.LengthDelimited).string(e.sdp);let i=r.writeUnknownFields;return i!==!1&&(i==!0?b.onWrite:i)(this.typeName,e,n),n}},Mm=new ny,ry=class extends k{constructor(){super("stream.video.sfu.event.PublisherAnswer",[{no:1,name:"sdp",kind:"scalar",T:9}])}create(e){let n=globalThis.Object.create(this.messagePrototype);return n.sdp="",e!==void 0&&R(this,n,e),n}internalBinaryRead(e,n,r,i){let s=i??this.create(),o=e.pos+n;for(;e.pos<o;){let[a,c]=e.tag();switch(a){case 1:s.sdp=e.string();break;default:let l=r.readUnknownField;if(l==="throw")throw new globalThis.Error(`Unknown field ${a} (wire type ${c}) for ${this.typeName}`);let u=e.skip(c);l!==!1&&(l===!0?b.onRead:l)(this.typeName,s,a,c,u)}}return s}internalBinaryWrite(e,n,r){e.sdp!==""&&n.tag(1,g.LengthDelimited).string(e.sdp);let i=r.writeUnknownFields;return i!==!1&&(i==!0?b.onWrite:i)(this.typeName,e,n),n}},Om=new ry,iy=class extends k{constructor(){super("stream.video.sfu.event.ConnectionQualityChanged",[{no:1,name:"connection_quality_updates",kind:"message",repeat:1,T:()=>Fm}])}create(e){let n=globalThis.Object.create(this.messagePrototype);return n.connectionQualityUpdates=[],e!==void 0&&R(this,n,e),n}internalBinaryRead(e,n,r,i){let s=i??this.create(),o=e.pos+n;for(;e.pos<o;){let[a,c]=e.tag();switch(a){case 1:s.connectionQualityUpdates.push(Fm.internalBinaryRead(e,e.uint32(),r));break;default:let l=r.readUnknownField;if(l==="throw")throw new globalThis.Error(`Unknown field ${a} (wire type ${c}) for ${this.typeName}`);let u=e.skip(c);l!==!1&&(l===!0?b.onRead:l)(this.typeName,s,a,c,u)}}return s}internalBinaryWrite(e,n,r){for(let s=0;s<e.connectionQualityUpdates.length;s++)Fm.internalBinaryWrite(e.connectionQualityUpdates[s],n.tag(1,g.LengthDelimited).fork(),r).join();let i=r.writeUnknownFields;return i!==!1&&(i==!0?b.onWrite:i)(this.typeName,e,n),n}},Pm=new iy,sy=class extends k{constructor(){super("stream.video.sfu.event.ConnectionQualityInfo",[{no:1,name:"user_id",kind:"scalar",T:9},{no:2,name:"session_id",kind:"scalar",T:9},{no:3,name:"connection_quality",kind:"enum",T:()=>["stream.video.sfu.models.ConnectionQuality",Ky,"CONNECTION_QUALITY_"]}])}create(e){let n=globalThis.Object.create(this.messagePrototype);return n.userId="",n.sessionId="",n.connectionQuality=0,e!==void 0&&R(this,n,e),n}internalBinaryRead(e,n,r,i){let s=i??this.create(),o=e.pos+n;for(;e.pos<o;){let[a,c]=e.tag();switch(a){case 1:s.userId=e.string();break;case 2:s.sessionId=e.string();break;case 3:s.connectionQuality=e.int32();break;default:let l=r.readUnknownField;if(l==="throw")throw new globalThis.Error(`Unknown field ${a} (wire type ${c}) for ${this.typeName}`);let u=e.skip(c);l!==!1&&(l===!0?b.onRead:l)(this.typeName,s,a,c,u)}}return s}internalBinaryWrite(e,n,r){e.userId!==""&&n.tag(1,g.LengthDelimited).string(e.userId),e.sessionId!==""&&n.tag(2,g.LengthDelimited).string(e.sessionId),e.connectionQuality!==0&&n.tag(3,g.Varint).int32(e.connectionQuality);let i=r.writeUnknownFields;return i!==!1&&(i==!0?b.onWrite:i)(this.typeName,e,n),n}},Fm=new sy,oy=class extends k{constructor(){super("stream.video.sfu.event.DominantSpeakerChanged",[{no:1,name:"user_id",kind:"scalar",T:9},{no:2,name:"session_id",kind:"scalar",T:9}])}create(e){let n=globalThis.Object.create(this.messagePrototype);return n.userId="",n.sessionId="",e!==void 0&&R(this,n,e),n}internalBinaryRead(e,n,r,i){let s=i??this.create(),o=e.pos+n;for(;e.pos<o;){let[a,c]=e.tag();switch(a){case 1:s.userId=e.string();break;case 2:s.sessionId=e.string();break;default:let l=r.readUnknownField;if(l==="throw")throw new globalThis.Error(`Unknown field ${a} (wire type ${c}) for ${this.typeName}`);let u=e.skip(c);l!==!1&&(l===!0?b.onRead:l)(this.typeName,s,a,c,u)}}return s}internalBinaryWrite(e,n,r){e.userId!==""&&n.tag(1,g.LengthDelimited).string(e.userId),e.sessionId!==""&&n.tag(2,g.LengthDelimited).string(e.sessionId);let i=r.writeUnknownFields;return i!==!1&&(i==!0?b.onWrite:i)(this.typeName,e,n),n}},Lm=new oy,ay=class extends k{constructor(){super("stream.video.sfu.event.AudioLevel",[{no:1,name:"user_id",kind:"scalar",T:9},{no:2,name:"session_id",kind:"scalar",T:9},{no:3,name:"level",kind:"scalar",T:2},{no:4,name:"is_speaking",kind:"scalar",T:8}])}create(e){let n=globalThis.Object.create(this.messagePrototype);return n.userId="",n.sessionId="",n.level=0,n.isSpeaking=!1,e!==void 0&&R(this,n,e),n}internalBinaryRead(e,n,r,i){let s=i??this.create(),o=e.pos+n;for(;e.pos<o;){let[a,c]=e.tag();switch(a){case 1:s.userId=e.string();break;case 2:s.sessionId=e.string();break;case 3:s.level=e.float();break;case 4:s.isSpeaking=e.bool();break;default:let l=r.readUnknownField;if(l==="throw")throw new globalThis.Error(`Unknown field ${a} (wire type ${c}) for ${this.typeName}`);let u=e.skip(c);l!==!1&&(l===!0?b.onRead:l)(this.typeName,s,a,c,u)}}return s}internalBinaryWrite(e,n,r){e.userId!==""&&n.tag(1,g.LengthDelimited).string(e.userId),e.sessionId!==""&&n.tag(2,g.LengthDelimited).string(e.sessionId),e.level!==0&&n.tag(3,g.Bit32).float(e.level),e.isSpeaking!==!1&&n.tag(4,g.Varint).bool(e.isSpeaking);let i=r.writeUnknownFields;return i!==!1&&(i==!0?b.onWrite:i)(this.typeName,e,n),n}},jm=new ay,cy=class extends k{constructor(){super("stream.video.sfu.event.AudioLevelChanged",[{no:1,name:"audio_levels",kind:"message",repeat:1,T:()=>jm}])}create(e){let n=globalThis.Object.create(this.messagePrototype);return n.audioLevels=[],e!==void 0&&R(this,n,e),n}internalBinaryRead(e,n,r,i){let s=i??this.create(),o=e.pos+n;for(;e.pos<o;){let[a,c]=e.tag();switch(a){case 1:s.audioLevels.push(jm.internalBinaryRead(e,e.uint32(),r));break;default:let l=r.readUnknownField;if(l==="throw")throw new globalThis.Error(`Unknown field ${a} (wire type ${c}) for ${this.typeName}`);let u=e.skip(c);l!==!1&&(l===!0?b.onRead:l)(this.typeName,s,a,c,u)}}return s}internalBinaryWrite(e,n,r){for(let s=0;s<e.audioLevels.length;s++)jm.internalBinaryWrite(e.audioLevels[s],n.tag(1,g.LengthDelimited).fork(),r).join();let i=r.writeUnknownFields;return i!==!1&&(i==!0?b.onWrite:i)(this.typeName,e,n),n}},Um=new cy,ly=class extends k{constructor(){super("stream.video.sfu.event.AudioMediaRequest",[{no:1,name:"channel_count",kind:"scalar",T:5}])}create(e){let n=globalThis.Object.create(this.messagePrototype);return n.channelCount=0,e!==void 0&&R(this,n,e),n}internalBinaryRead(e,n,r,i){let s=i??this.create(),o=e.pos+n;for(;e.pos<o;){let[a,c]=e.tag();switch(a){case 1:s.channelCount=e.int32();break;default:let l=r.readUnknownField;if(l==="throw")throw new globalThis.Error(`Unknown field ${a} (wire type ${c}) for ${this.typeName}`);let u=e.skip(c);l!==!1&&(l===!0?b.onRead:l)(this.typeName,s,a,c,u)}}return s}internalBinaryWrite(e,n,r){e.channelCount!==0&&n.tag(1,g.Varint).int32(e.channelCount);let i=r.writeUnknownFields;return i!==!1&&(i==!0?b.onWrite:i)(this.typeName,e,n),n}},Bm=new ly,uy=class extends k{constructor(){super("stream.video.sfu.event.AudioSender",[{no:1,name:"media_request",kind:"message",T:()=>Bm},{no:2,name:"codec",kind:"message",T:()=>Pn}])}create(e){let n=globalThis.Object.create(this.messagePrototype);return e!==void 0&&R(this,n,e),n}internalBinaryRead(e,n,r,i){let s=i??this.create(),o=e.pos+n;for(;e.pos<o;){let[a,c]=e.tag();switch(a){case 1:s.mediaRequest=Bm.internalBinaryRead(e,e.uint32(),r,s.mediaRequest);break;case 2:s.codec=Pn.internalBinaryRead(e,e.uint32(),r,s.codec);break;default:let l=r.readUnknownField;if(l==="throw")throw new globalThis.Error(`Unknown field ${a} (wire type ${c}) for ${this.typeName}`);let u=e.skip(c);l!==!1&&(l===!0?b.onRead:l)(this.typeName,s,a,c,u)}}return s}internalBinaryWrite(e,n,r){e.mediaRequest&&Bm.internalBinaryWrite(e.mediaRequest,n.tag(1,g.LengthDelimited).fork(),r).join(),e.codec&&Pn.internalBinaryWrite(e.codec,n.tag(2,g.LengthDelimited).fork(),r).join();let i=r.writeUnknownFields;return i!==!1&&(i==!0?b.onWrite:i)(this.typeName,e,n),n}},Vm=new uy,dy=class extends k{constructor(){super("stream.video.sfu.event.VideoMediaRequest",[{no:1,name:"ideal_height",kind:"scalar",T:5},{no:2,name:"ideal_width",kind:"scalar",T:5},{no:3,name:"ideal_frame_rate",kind:"scalar",T:5}])}create(e){let n=globalThis.Object.create(this.messagePrototype);return n.idealHeight=0,n.idealWidth=0,n.idealFrameRate=0,e!==void 0&&R(this,n,e),n}internalBinaryRead(e,n,r,i){let s=i??this.create(),o=e.pos+n;for(;e.pos<o;){let[a,c]=e.tag();switch(a){case 1:s.idealHeight=e.int32();break;case 2:s.idealWidth=e.int32();break;case 3:s.idealFrameRate=e.int32();break;default:let l=r.readUnknownField;if(l==="throw")throw new globalThis.Error(`Unknown field ${a} (wire type ${c}) for ${this.typeName}`);let u=e.skip(c);l!==!1&&(l===!0?b.onRead:l)(this.typeName,s,a,c,u)}}return s}internalBinaryWrite(e,n,r){e.idealHeight!==0&&n.tag(1,g.Varint).int32(e.idealHeight),e.idealWidth!==0&&n.tag(2,g.Varint).int32(e.idealWidth),e.idealFrameRate!==0&&n.tag(3,g.Varint).int32(e.idealFrameRate);let i=r.writeUnknownFields;return i!==!1&&(i==!0?b.onWrite:i)(this.typeName,e,n),n}},$m=new dy,fy=class extends k{constructor(){super("stream.video.sfu.event.VideoLayerSetting",[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"active",kind:"scalar",T:8},{no:3,name:"max_bitrate",kind:"scalar",T:5},{no:4,name:"scale_resolution_down_by",kind:"scalar",T:2},{no:5,name:"priority",kind:"enum",T:()=>["stream.video.sfu.event.VideoLayerSetting.Priority",eI,"PRIORITY_"]},{no:6,name:"codec",kind:"message",T:()=>Pn},{no:7,name:"max_framerate",kind:"scalar",T:13}])}create(e){let n=globalThis.Object.create(this.messagePrototype);return n.name="",n.active=!1,n.maxBitrate=0,n.scaleResolutionDownBy=0,n.priority=0,n.maxFramerate=0,e!==void 0&&R(this,n,e),n}internalBinaryRead(e,n,r,i){let s=i??this.create(),o=e.pos+n;for(;e.pos<o;){let[a,c]=e.tag();switch(a){case 1:s.name=e.string();break;case 2:s.active=e.bool();break;case 3:s.maxBitrate=e.int32();break;case 4:s.scaleResolutionDownBy=e.float();break;case 5:s.priority=e.int32();break;case 6:s.codec=Pn.internalBinaryRead(e,e.uint32(),r,s.codec);break;case 7:s.maxFramerate=e.uint32();break;default:let l=r.readUnknownField;if(l==="throw")throw new globalThis.Error(`Unknown field ${a} (wire type ${c}) for ${this.typeName}`);let u=e.skip(c);l!==!1&&(l===!0?b.onRead:l)(this.typeName,s,a,c,u)}}return s}internalBinaryWrite(e,n,r){e.name!==""&&n.tag(1,g.LengthDelimited).string(e.name),e.active!==!1&&n.tag(2,g.Varint).bool(e.active),e.maxBitrate!==0&&n.tag(3,g.Varint).int32(e.maxBitrate),e.scaleResolutionDownBy!==0&&n.tag(4,g.Bit32).float(e.scaleResolutionDownBy),e.priority!==0&&n.tag(5,g.Varint).int32(e.priority),e.codec&&Pn.internalBinaryWrite(e.codec,n.tag(6,g.LengthDelimited).fork(),r).join(),e.maxFramerate!==0&&n.tag(7,g.Varint).uint32(e.maxFramerate);let i=r.writeUnknownFields;return i!==!1&&(i==!0?b.onWrite:i)(this.typeName,e,n),n}},Hm=new fy,hy=class extends k{constructor(){super("stream.video.sfu.event.VideoSender",[{no:1,name:"media_request",kind:"message",T:()=>$m},{no:2,name:"codec",kind:"message",T:()=>Pn},{no:3,name:"layers",kind:"message",repeat:1,T:()=>Hm}])}create(e){let n=globalThis.Object.create(this.messagePrototype);return n.layers=[],e!==void 0&&R(this,n,e),n}internalBinaryRead(e,n,r,i){let s=i??this.create(),o=e.pos+n;for(;e.pos<o;){let[a,c]=e.tag();switch(a){case 1:s.mediaRequest=$m.internalBinaryRead(e,e.uint32(),r,s.mediaRequest);break;case 2:s.codec=Pn.internalBinaryRead(e,e.uint32(),r,s.codec);break;case 3:s.layers.push(Hm.internalBinaryRead(e,e.uint32(),r));break;default:let l=r.readUnknownField;if(l==="throw")throw new globalThis.Error(`Unknown field ${a} (wire type ${c}) for ${this.typeName}`);let u=e.skip(c);l!==!1&&(l===!0?b.onRead:l)(this.typeName,s,a,c,u)}}return s}internalBinaryWrite(e,n,r){e.mediaRequest&&$m.internalBinaryWrite(e.mediaRequest,n.tag(1,g.LengthDelimited).fork(),r).join(),e.codec&&Pn.internalBinaryWrite(e.codec,n.tag(2,g.LengthDelimited).fork(),r).join();for(let s=0;s<e.layers.length;s++)Hm.internalBinaryWrite(e.layers[s],n.tag(3,g.LengthDelimited).fork(),r).join();let i=r.writeUnknownFields;return i!==!1&&(i==!0?b.onWrite:i)(this.typeName,e,n),n}},Wm=new hy,py=class extends k{constructor(){super("stream.video.sfu.event.ChangePublishQuality",[{no:1,name:"audio_senders",kind:"message",repeat:1,T:()=>Vm},{no:2,name:"video_senders",kind:"message",repeat:1,T:()=>Wm}])}create(e){let n=globalThis.Object.create(this.messagePrototype);return n.audioSenders=[],n.videoSenders=[],e!==void 0&&R(this,n,e),n}internalBinaryRead(e,n,r,i){let s=i??this.create(),o=e.pos+n;for(;e.pos<o;){let[a,c]=e.tag();switch(a){case 1:s.audioSenders.push(Vm.internalBinaryRead(e,e.uint32(),r));break;case 2:s.videoSenders.push(Wm.internalBinaryRead(e,e.uint32(),r));break;default:let l=r.readUnknownField;if(l==="throw")throw new globalThis.Error(`Unknown field ${a} (wire type ${c}) for ${this.typeName}`);let u=e.skip(c);l!==!1&&(l===!0?b.onRead:l)(this.typeName,s,a,c,u)}}return s}internalBinaryWrite(e,n,r){for(let s=0;s<e.audioSenders.length;s++)Vm.internalBinaryWrite(e.audioSenders[s],n.tag(1,g.LengthDelimited).fork(),r).join();for(let s=0;s<e.videoSenders.length;s++)Wm.internalBinaryWrite(e.videoSenders[s],n.tag(2,g.LengthDelimited).fork(),r).join();let i=r.writeUnknownFields;return i!==!1&&(i==!0?b.onWrite:i)(this.typeName,e,n),n}},qm=new py,my=class extends k{constructor(){super("stream.video.sfu.event.CallGrantsUpdated",[{no:1,name:"current_grants",kind:"message",T:()=>vm},{no:2,name:"message",kind:"scalar",T:9}])}create(e){let n=globalThis.Object.create(this.messagePrototype);return n.message="",e!==void 0&&R(this,n,e),n}internalBinaryRead(e,n,r,i){let s=i??this.create(),o=e.pos+n;for(;e.pos<o;){let[a,c]=e.tag();switch(a){case 1:s.currentGrants=vm.internalBinaryRead(e,e.uint32(),r,s.currentGrants);break;case 2:s.message=e.string();break;default:let l=r.readUnknownField;if(l==="throw")throw new globalThis.Error(`Unknown field ${a} (wire type ${c}) for ${this.typeName}`);let u=e.skip(c);l!==!1&&(l===!0?b.onRead:l)(this.typeName,s,a,c,u)}}return s}internalBinaryWrite(e,n,r){e.currentGrants&&vm.internalBinaryWrite(e.currentGrants,n.tag(1,g.LengthDelimited).fork(),r).join(),e.message!==""&&n.tag(2,g.LengthDelimited).string(e.message);let i=r.writeUnknownFields;return i!==!1&&(i==!0?b.onWrite:i)(this.typeName,e,n),n}},zm=new my,gy=class extends k{constructor(){super("stream.video.sfu.event.GoAway",[{no:1,name:"reason",kind:"enum",T:()=>["stream.video.sfu.models.GoAwayReason",Wl,"GO_AWAY_REASON_"]}])}create(e){let n=globalThis.Object.create(this.messagePrototype);return n.reason=0,e!==void 0&&R(this,n,e),n}internalBinaryRead(e,n,r,i){let s=i??this.create(),o=e.pos+n;for(;e.pos<o;){let[a,c]=e.tag();switch(a){case 1:s.reason=e.int32();break;default:let l=r.readUnknownField;if(l==="throw")throw new globalThis.Error(`Unknown field ${a} (wire type ${c}) for ${this.typeName}`);let u=e.skip(c);l!==!1&&(l===!0?b.onRead:l)(this.typeName,s,a,c,u)}}return s}internalBinaryWrite(e,n,r){e.reason!==0&&n.tag(1,g.Varint).int32(e.reason);let i=r.writeUnknownFields;return i!==!1&&(i==!0?b.onWrite:i)(this.typeName,e,n),n}},Gm=new gy,yy=class extends k{constructor(){super("stream.video.sfu.event.CallEnded",[{no:1,name:"reason",kind:"enum",T:()=>["stream.video.sfu.models.CallEndedReason",ZE,"CALL_ENDED_REASON_"]}])}create(e){let n=globalThis.Object.create(this.messagePrototype);return n.reason=0,e!==void 0&&R(this,n,e),n}internalBinaryRead(e,n,r,i){let s=i??this.create(),o=e.pos+n;for(;e.pos<o;){let[a,c]=e.tag();switch(a){case 1:s.reason=e.int32();break;default:let l=r.readUnknownField;if(l==="throw")throw new globalThis.Error(`Unknown field ${a} (wire type ${c}) for ${this.typeName}`);let u=e.skip(c);l!==!1&&(l===!0?b.onRead:l)(this.typeName,s,a,c,u)}}return s}internalBinaryWrite(e,n,r){e.reason!==0&&n.tag(1,g.Varint).int32(e.reason);let i=r.writeUnknownFields;return i!==!1&&(i==!0?b.onWrite:i)(this.typeName,e,n),n}},Km=new yy;var Oe=function(t){return t.UNKNOWN="UNKNOWN",t.VISIBLE="VISIBLE",t.INVISIBLE="INVISIBLE",t}(Oe||{}),Wt=function(t){return t[t.IMMEDIATE=20]="IMMEDIATE",t[t.FAST=100]="FAST",t[t.MEDIUM=600]="MEDIUM",t[t.SLOW=1200]="SLOW",t}(Wt||{}),vy=class{constructor(e){this._transport=e,this.typeName=wm.typeName,this.methods=wm.methods,this.options=wm.options}setPublisher(e,n){let r=this.methods[0],i=this._transport.mergeOptions(n);return Bt("unary",this._transport,r,i,e)}sendAnswer(e,n){let r=this.methods[1],i=this._transport.mergeOptions(n);return Bt("unary",this._transport,r,i,e)}iceTrickle(e,n){let r=this.methods[2],i=this._transport.mergeOptions(n);return Bt("unary",this._transport,r,i,e)}updateSubscriptions(e,n){let r=this.methods[3],i=this._transport.mergeOptions(n);return Bt("unary",this._transport,r,i,e)}updateMuteStates(e,n){let r=this.methods[4],i=this._transport.mergeOptions(n);return Bt("unary",this._transport,r,i,e)}iceRestart(e,n){let r=this.methods[5],i=this._transport.mergeOptions(n);return Bt("unary",this._transport,r,i,e)}sendStats(e,n){let r=this.methods[6],i=this._transport.mergeOptions(n);return Bt("unary",this._transport,r,i,e)}startNoiseCancellation(e,n){let r=this.methods[7],i=this._transport.mergeOptions(n);return Bt("unary",this._transport,r,i,e)}stopNoiseCancellation(e,n){let r=this.methods[8],i=this._transport.mergeOptions(n);return Bt("unary",this._transport,r,i,e)}},VO={baseUrl:"",sendJson:!0,timeout:5*1e3,jsonOptions:{ignoreUnknownFields:!0}},$O=t=>({interceptUnary(e,n,r,i){return i.meta=S(S({},i.meta),t),e(n,r,i)}}),HO=t=>{let e=new Uo(S(S({},VO),t));return new vy(e)},qe=()=>typeof navigator>"u"?!1:navigator.product?.toLowerCase()==="reactnative",PE=Object.freeze({trace:0,debug:1,info:2,warn:3,error:4}),tI,nI="info",rI=(t,e,...n)=>{let r;switch(t){case"error":if(qe()){e=`ERROR: ${e}`,r=console.info;break}r=console.error;break;case"warn":if(qe()){e=`WARN: ${e}`,r=console.info;break}r=console.warn;break;case"info":r=console.info;break;case"trace":r=console.trace;break;default:r=console.log;break}r(e,...n)},WO=(t,e)=>{tI=t,e&&qO(e)},qO=t=>{nI=t},_e=t=>{let e=tI||rI,n=(t||[]).join(":");return(i,s,...o)=>{PE[i]>=PE[nI]&&e(i,`[${n}]: ${s}`,...o)}},FE=(t,e,n)=>{let r=_e(["codecs"]);if(!("getCapabilities"in RTCRtpReceiver)){r("warn","RTCRtpReceiver.getCapabilities is not supported");return}let i=RTCRtpReceiver.getCapabilities(t);if(!i)return;let s=[],o=[],a=[];return i.codecs.forEach(c=>{let l=c.mimeType.toLowerCase();if(r("debug",`Found supported codec: ${l}`),n&&l===`${t}/${n.toLowerCase()}`)return;if(!(l===`${t}/${e.toLowerCase()}`)){a.push(c);return}if(l==="h264"){c.sdpFmtpLine&&c.sdpFmtpLine.includes("profile-level-id=42e01f")?s.push(c):o.push(c);return}s.push(c)}),[...s,...o,...a]},zO=t=>y(void 0,null,function*(){let e=new RTCPeerConnection;e.addTransceiver("video",{direction:t}),e.addTransceiver("audio",{direction:t});let r=(yield e.createOffer()).sdp??"";return e.getTransceivers().forEach(i=>{i.stop?.()}),e.close(),r}),GO={subscriberOffer:void 0,publisherAnswer:void 0,connectionQualityChanged:void 0,audioLevelChanged:void 0,iceTrickle:void 0,changePublishQuality:void 0,participantJoined:void 0,participantLeft:void 0,dominantSpeakerChanged:void 0,joinResponse:void 0,healthCheckResponse:void 0,trackPublished:void 0,trackUnpublished:void 0,error:void 0,callGrantsUpdated:void 0,goAway:void 0,iceRestart:void 0,pinsUpdated:void 0,callEnded:void 0,participantUpdated:void 0},LE=t=>Object.prototype.hasOwnProperty.call(GO,t),by=class{constructor(){this.logger=_e(["Dispatcher"]),this.subscribers={},this.dispatch=e=>{let n=e.eventPayload.oneofKind;if(!n)return;let r=e.eventPayload[n];this.logger("debug",`Dispatching ${n}`,r);let i=this.subscribers[n];if(i)for(let s of i)try{s(r)}catch(o){this.logger("warn","Listener failed with error",o)}},this.on=(e,n)=>{var r;return((r=this.subscribers)[e]??(r[e]=[])).push(n),()=>{this.off(e,n)}},this.off=(e,n)=>{this.subscribers[e]=(this.subscribers[e]||[]).filter(r=>r!==n)},this.offAll=e=>{e?this.subscribers[e]=[]:this.subscribers={}}}},wy=class{constructor(){this.subscriberCandidates=new Ln,this.publisherCandidates=new Ln,this.logger=_e(["sfu-client"]),this.push=e=>{e.peerType===pt.SUBSCRIBER?this.subscriberCandidates.next(e):e.peerType===pt.PUBLISHER_UNSPECIFIED?this.publisherCandidates.next(e):this.logger("warn","ICETrickle, Unknown peer type",e)}}};function iI(t){if(t.usernameFragment)return JSON.stringify(t.toJSON());{let e=t.candidate.split(" "),n=e.findIndex(i=>i==="ufrag")+1,r=e[n];return JSON.stringify(x(S({},t),{usernameFragment:r}))}}var KO="1.5.2",[JO,QO,YO]=KO.split("."),ZO={type:ds.PLAIN_JAVASCRIPT,major:JO,minor:QO,patch:YO},XO,eP,tP;var Cy=()=>ZO;var Qy=()=>XO;var nP=()=>eP,rP=()=>tP;var jE=()=>{if(qe())return{sdk:Cy(),os:Qy(),device:nP()};let t=new QE.UAParser(navigator.userAgent),{browser:e,os:n,device:r,cpu:i}=t.getResult();return{sdk:Cy(),browser:{name:e.name||navigator.userAgent,version:e.version||""},os:{name:n.name||"",version:n.version||"",architecture:i.architecture||""},device:{name:[r.vendor,r.model,r.type].filter(Boolean).join(" "),version:""}}},sI=125e4,iP={bitrate:sI,width:1280,height:720},sP={q:3e5,h:75e4,f:sI},UE=(t,e=iP)=>{let n=[],r=t.getSettings(),{width:i=0,height:s=0}=r,o=qe()&&Qy()?.name.toLowerCase()==="ios",a=oP(e,i,s),c=1;return["f","h","q"].forEach(l=>{n.unshift({active:!0,rid:l,width:Math.round(i/c),height:Math.round(s/c),maxBitrate:Math.round(a/c)||sP[l],scaleResolutionDownBy:c,maxFramerate:{f:30,h:o?30:25,q:o?30:20}[l]}),c*=2}),aP(r,n)},oP=(t,e,n)=>{let{width:r,height:i}=t;if(e<r||n<i){let s=e*n,o=r*i,a=s/o;return Math.round(t.bitrate*a)}return t.bitrate},aP=(t,e)=>{let n,r=Math.max(t.width||0,t.height||0);r<=320?n=e.filter(s=>s.rid==="f"):r<=640?n=e.filter(s=>s.rid!=="h"):n=e;let i=["q","h","f"];return n.map((s,o)=>x(S({},s),{rid:i[o]}))},BE=(t,e,n=3e6)=>{let r=t.getSettings();return[{active:!0,rid:"q",width:r.width||0,height:r.height||0,scaleResolutionDownBy:1,maxBitrate:e?.maxBitrate??n,maxFramerate:e?.maxFramerate??30}]},cP=t=>{switch(t){case T.SCREEN_SHARE:return"screenShareStream";case T.SCREEN_SHARE_AUDIO:return"screenShareAudioStream";case T.VIDEO:return"videoStream";case T.AUDIO:return"audioStream";case T.UNSPECIFIED:throw new Error("Track type is unspecified");default:let e=t;throw new Error(`Unknown track type: ${e}`)}},lP=t=>{switch(t){case"audio":return T.AUDIO;case"video":return T.VIDEO;case"screenshare":return T.SCREEN_SHARE;case"screenshare_audio":return T.SCREEN_SHARE_AUDIO;default:let e=t;throw new Error(`Unknown mute type: ${e}`)}},Jr=oI(dP),VE=oI(fP),Wo=new Map;function uP(t){return y(this,null,function*(){yield Wo.get(t)?.promise})}function oI(t){return function(n,r){let{cb:i,onContinued:s}=t(n,r),o=Wo.get(n);o?.onContinued();let a=o?o.promise.then(i,i):i();return Wo.set(n,{promise:a,onContinued:s}),a}}function dP(t,e){let n=!1;return{cb:()=>e().finally(()=>{n||Wo.delete(t)}),onContinued:()=>n=!0}}function fP(t,e){let n=new AbortController;return{cb:()=>n.signal.aborted?Promise.resolve("canceled"):e(n.signal).finally(()=>{n.signal.aborted||Wo.delete(t)}),onContinued:()=>n.abort()}}var hP=t=>typeof t=="function",hn=t=>{let e,n;if(Jt([t]).subscribe({next:([r])=>{e=r},error:r=>{n=r}}).unsubscribe(),n)throw n;return e},Zl=(t,e)=>{let n=hP(e)?e(hn(t)):e;return t.next(n),n},xt=(t,e)=>{let n=t.subscribe(e);return()=>{n.unsubscribe()}};var cr=(...t)=>(e,n)=>{for(let r of t){let i=r(e,n);if(i!==0)return i}return 0};var aI=t=>e=>(n,r)=>t(n,r)?e(n,r):0;var is=t=>t.publishedTracks.includes(T.VIDEO),Bl=t=>t.publishedTracks.includes(T.AUDIO),Gr=t=>t.publishedTracks.includes(T.SCREEN_SHARE),pP=t=>t.publishedTracks.includes(T.SCREEN_SHARE_AUDIO);var Xl=(t,e)=>t.isDominantSpeaker&&!e.isDominantSpeaker?-1:!t.isDominantSpeaker&&e.isDominantSpeaker?1:0,eu=(t,e)=>t.isSpeaking&&!e.isSpeaking?-1:!t.isSpeaking&&e.isSpeaking?1:0,cI=(t,e)=>Gr(t)&&!Gr(e)?-1:!Gr(t)&&Gr(e)?1:0,tu=(t,e)=>is(t)&&!is(e)?-1:!is(t)&&is(e)?1:0,nu=(t,e)=>Bl(t)&&!Bl(e)?-1:!Bl(t)&&Bl(e)?1:0,Yy=(t,e)=>{if(t.pin&&e.pin){if(!t.pin.isLocalPin&&e.pin.isLocalPin)return-1;if(t.pin.isLocalPin&&!e.pin.isLocalPin)return 1;if(t.pin.pinnedAt>e.pin.pinnedAt)return-1;if(t.pin.pinnedAt<e.pin.pinnedAt)return 1}return t.pin&&!e.pin?-1:!t.pin&&e.pin?1:0},ru=t=>(e,n)=>e.reaction?.type===t&&n.reaction?.type!==t?-1:e.reaction?.type!==t&&n.reaction?.type===t?1:0,mP=(...t)=>(e,n)=>Vl(e,t)&&!Vl(n,t)?-1:!Vl(e,t)&&Vl(n,t)?1:0;var Vl=(t,e)=>(t.roles||[]).some(n=>e.includes(n)),Zy=aI((t,e)=>t.viewportVisibilityState?.videoTrack===Oe.INVISIBLE||e.viewportVisibilityState?.videoTrack===Oe.INVISIBLE),gP=aI((t,e)=>t.viewportVisibilityState?.videoTrack===Oe.INVISIBLE||t.viewportVisibilityState?.videoTrack===Oe.UNKNOWN||e.viewportVisibilityState?.videoTrack===Oe.INVISIBLE||e.viewportVisibilityState?.videoTrack===Oe.UNKNOWN),ql=cr(Yy,cI,Zy(cr(Xl,eu,ru("raised-hand"),tu,nu))),pz=cr(Yy,cI,Xl,Zy(cr(eu,ru("raised-hand"),tu,nu))),mz=cr(Yy,gP(cr(Xl,eu,ru("raised-hand"),tu,nu))),$E=cr(Zy(cr(Xl,eu,ru("raised-hand"),tu,nu)),mP("admin","host","speaker")),F=function(t){return t.UNKNOWN="unknown",t.IDLE="idle",t.RINGING="ringing",t.JOINING="joining",t.JOINED="joined",t.LEFT="left",t.RECONNECTING="reconnecting",t.MIGRATING="migrating",t.RECONNECTING_FAILED="reconnecting-failed",t.OFFLINE="offline",t}(F||{}),Jm={broadcasting:!1,hls:{playlist_url:""},rtmps:[]},Sy=class{constructor(){this.backstageSubject=new M(!0),this.blockedUserIdsSubject=new M([]),this.createdAtSubject=new M(new Date),this.endedAtSubject=new M(void 0),this.startsAtSubject=new M(void 0),this.updatedAtSubject=new M(new Date),this.createdBySubject=new M(void 0),this.customSubject=new M({}),this.egressSubject=new M(void 0),this.ingressSubject=new M(void 0),this.recordingSubject=new M(!1),this.sessionSubject=new M(void 0),this.settingsSubject=new M(void 0),this.transcribingSubject=new M(!1),this.endedBySubject=new M(void 0),this.thumbnailsSubject=new M(void 0),this.membersSubject=new M([]),this.ownCapabilitiesSubject=new M([]),this.callingStateSubject=new M(F.UNKNOWN),this.startedAtSubject=new M(void 0),this.participantCountSubject=new M(0),this.anonymousParticipantCountSubject=new M(0),this.participantsSubject=new M([]),this.callStatsReportSubject=new M(void 0),this.logger=_e(["CallState"]),this.sortParticipantsBy=ql,this.setSortParticipantsBy=r=>{this.sortParticipantsBy=r,this.setCurrentValue(this.participantsSubject,i=>i)},this.getCurrentValue=hn,this.setCurrentValue=Zl,this.setParticipantCount=r=>this.setCurrentValue(this.participantCountSubject,r),this.setStartedAt=r=>this.setCurrentValue(this.startedAtSubject,r),this.setAnonymousParticipantCount=r=>this.setCurrentValue(this.anonymousParticipantCountSubject,r),this.setParticipants=r=>this.setCurrentValue(this.participantsSubject,r),this.setCallingState=r=>this.setCurrentValue(this.callingStateSubject,r),this.setCallStatsReport=r=>this.setCurrentValue(this.callStatsReportSubject,r),this.setMembers=r=>{this.setCurrentValue(this.membersSubject,r)},this.setOwnCapabilities=r=>this.setCurrentValue(this.ownCapabilitiesSubject,r),this.findParticipantBySessionId=r=>this.participants.find(i=>i.sessionId===r),this.getParticipantLookupBySessionId=()=>this.participants.reduce((r,i)=>(r[i.sessionId]=i,r),{}),this.updateParticipant=(r,i)=>{let s=this.findParticipantBySessionId(r);if(!s){this.logger("warn",`Participant with sessionId ${r} not found`);return}let o=typeof i=="function"?i(s):i,a=S(S({},s),o);return this.setParticipants(c=>c.map(l=>l.sessionId===r?a:l))},this.updateOrAddParticipant=(r,i)=>this.setParticipants(s=>{let o=!0,a=s.map(c=>c.sessionId===r?(o=!1,S(S({},c),i)):c);return o&&a.push(i),a}),this.updateParticipants=r=>{if(Object.keys(r).length!==0)return this.setParticipants(i=>i.map(s=>{let o=r[s.sessionId];return o?S(S({},s),o):s}))},this.updateFromEvent=r=>{let i=this.eventHandlers[r.type];i&&i(r)},this.setServerSidePins=r=>{let i=r.reduce((s,o)=>(s[o.sessionId]=Date.now(),s),{});return this.setParticipants(s=>s.map(o=>{let a=i[o.sessionId];return a?x(S({},o),{pin:{isLocalPin:!1,pinnedAt:a}}):o.pin&&!o.pin.isLocalPin?x(S({},o),{pin:void 0}):o}))},this.updateFromCallResponse=r=>{this.setCurrentValue(this.backstageSubject,r.backstage),this.setCurrentValue(this.blockedUserIdsSubject,r.blocked_user_ids),this.setCurrentValue(this.createdAtSubject,new Date(r.created_at)),this.setCurrentValue(this.updatedAtSubject,new Date(r.updated_at)),this.setCurrentValue(this.startsAtSubject,r.starts_at?new Date(r.starts_at):void 0),this.setCurrentValue(this.endedAtSubject,r.ended_at?new Date(r.ended_at):void 0),this.setCurrentValue(this.createdBySubject,r.created_by),this.setCurrentValue(this.customSubject,r.custom),this.setCurrentValue(this.egressSubject,r.egress),this.setCurrentValue(this.ingressSubject,r.ingress),this.setCurrentValue(this.recordingSubject,r.recording);let i=this.setCurrentValue(this.sessionSubject,r.session);this.updateParticipantCountFromSession(i),this.setCurrentValue(this.settingsSubject,r.settings),this.setCurrentValue(this.transcribingSubject,r.transcribing),this.setCurrentValue(this.thumbnailsSubject,r.thumbnails)},this.updateFromMemberRemoved=r=>{this.updateFromCallResponse(r.call),this.setCurrentValue(this.membersSubject,i=>i.filter(s=>r.members.indexOf(s.user_id)===-1))},this.updateFromMemberAdded=r=>{this.updateFromCallResponse(r.call),this.setCurrentValue(this.membersSubject,i=>[...i,...r.members])},this.updateFromHLSBroadcastStopped=()=>{this.setCurrentValue(this.egressSubject,(r=Jm)=>x(S({},r),{broadcasting:!1}))},this.updateFromHLSBroadcastingFailed=()=>{this.setCurrentValue(this.egressSubject,(r=Jm)=>x(S({},r),{broadcasting:!1}))},this.updateFromHLSBroadcastStarted=r=>{this.setCurrentValue(this.egressSubject,(i=Jm)=>x(S({},i),{broadcasting:!0,hls:x(S({},i.hls),{playlist_url:r.hls_playlist_url})}))},this.updateParticipantCountFromSession=r=>{if(!r||this.callingState===F.JOINED)return;let i=Object.values(r.participants_count_by_role).reduce((o,a)=>o+a,0),s=Math.max(i,r.participants.length);this.setParticipantCount(s),this.setAnonymousParticipantCount(r.anonymous_participant_count||0)},this.updateFromSessionParticipantCountUpdate=r=>{let i=this.setCurrentValue(this.sessionSubject,s=>s&&x(S({},s),{anonymous_participant_count:r.anonymous_participant_count,participants_count_by_role:r.participants_count_by_role}));this.updateParticipantCountFromSession(i)},this.updateFromSessionParticipantLeft=r=>{let i=this.setCurrentValue(this.sessionSubject,s=>{if(!s)return s;let{participants:o,participants_count_by_role:a}=s,{user:c,user_session_id:l}=r.participant;return x(S({},s),{participants:o.filter(u=>u.user_session_id!==l),participants_count_by_role:x(S({},a),{[c.role]:Math.max(0,(a[c.role]||0)-1)})})});this.updateParticipantCountFromSession(i)},this.updateFromSessionParticipantJoined=r=>{let i=this.setCurrentValue(this.sessionSubject,s=>{if(!s)return s;let{participants:o,participants_count_by_role:a}=s,{user:c,user_session_id:l}=r.participant,u=!0,d=o.map(h=>h.user_session_id===l?(u=!1,r.participant):h);u&&d.push(r.participant);let f=u?1:0;return x(S({},s),{participants:d,participants_count_by_role:x(S({},a),{[c.role]:(a[c.role]||0)+f})})});this.updateParticipantCountFromSession(i)},this.updateMembers=r=>{this.updateFromCallResponse(r.call),this.setCurrentValue(this.membersSubject,i=>i.map(s=>{let o=r.members.find(a=>a.user_id===s.user_id);return o||s}))},this.updateParticipantReaction=r=>{let{user:i,custom:s,type:o,emoji_code:a}=r.reaction;this.setParticipants(c=>c.map(l=>l.userId!==i.id?l:x(S({},l),{reaction:{type:o,emoji_code:a,custom:s}})))},this.unblockUser=r=>{this.setCurrentValue(this.blockedUserIdsSubject,i=>i&&i.filter(s=>s!==r.user.id))},this.blockUser=r=>{this.setCurrentValue(this.blockedUserIdsSubject,i=>[...i||[],r.user.id])},this.updateOwnCapabilities=r=>{r.user.id===this.localParticipant?.userId&&this.setCurrentValue(this.ownCapabilitiesSubject,r.own_capabilities)},this.participants$=this.participantsSubject.asObservable().pipe(j(r=>r.sort(this.sortParticipantsBy)),Fe({bufferSize:1,refCount:!0})),this.localParticipant$=this.participants$.pipe(j(r=>r.find(i=>i.isLocalParticipant)),Fe({bufferSize:1,refCount:!0})),this.remoteParticipants$=this.participants$.pipe(j(r=>r.filter(i=>!i.isLocalParticipant)),Fe({bufferSize:1,refCount:!0})),this.pinnedParticipants$=this.participants$.pipe(j(r=>r.filter(i=>!!i.pin)),Fe({bufferSize:1,refCount:!0})),this.dominantSpeaker$=this.participants$.pipe(j(r=>r.find(i=>i.isDominantSpeaker)),Fe({bufferSize:1,refCount:!0})),this.hasOngoingScreenShare$=this.participants$.pipe(j(r=>r.some(i=>Gr(i))),Ue(),Fe({bufferSize:1,refCount:!0})),this.createdAt$=this.createdAtSubject.asObservable(),this.endedAt$=this.endedAtSubject.asObservable(),this.startsAt$=this.startsAtSubject.asObservable(),this.startedAt$=this.startedAtSubject.asObservable(),this.updatedAt$=this.updatedAtSubject.asObservable(),this.callStatsReport$=this.callStatsReportSubject.asObservable(),this.members$=this.membersSubject.asObservable(),this.createdBy$=this.createdBySubject.asObservable(),this.custom$=this.customSubject.asObservable(),this.egress$=this.egressSubject.asObservable(),this.ingress$=this.ingressSubject.asObservable(),this.session$=this.sessionSubject.asObservable(),this.settings$=this.settingsSubject.asObservable(),this.endedBy$=this.endedBySubject.asObservable(),this.thumbnails$=this.thumbnailsSubject.asObservable();let e=(r,i)=>{if(r.length!==i.length)return!1;for(let s of r)if(!i.includes(s))return!1;for(let s of i)if(!r.includes(s))return!1;return!0},n=(r,i)=>r.asObservable().pipe(Ue(i));this.anonymousParticipantCount$=n(this.anonymousParticipantCountSubject),this.blockedUserIds$=n(this.blockedUserIdsSubject,e),this.backstage$=n(this.backstageSubject),this.callingState$=n(this.callingStateSubject),this.ownCapabilities$=n(this.ownCapabilitiesSubject,e),this.participantCount$=n(this.participantCountSubject),this.recording$=n(this.recordingSubject),this.transcribing$=n(this.transcribingSubject),this.eventHandlers={"call.closed_caption":void 0,"call.deleted":void 0,"call.permission_request":void 0,"call.recording_ready":void 0,"call.transcription_ready":void 0,"call.user_muted":void 0,"connection.error":void 0,"connection.ok":void 0,"health.check":void 0,"user.banned":void 0,"user.deactivated":void 0,"user.deleted":void 0,"user.muted":void 0,"user.presence.changed":void 0,"user.reactivated":void 0,"user.unbanned":void 0,"user.updated":void 0,custom:void 0,"call.accepted":r=>this.updateFromCallResponse(r.call),"call.blocked_user":this.blockUser,"call.created":r=>this.updateFromCallResponse(r.call),"call.ended":r=>{this.updateFromCallResponse(r.call),this.setCurrentValue(this.endedBySubject,r.user)},"call.hls_broadcasting_failed":this.updateFromHLSBroadcastingFailed,"call.hls_broadcasting_started":this.updateFromHLSBroadcastStarted,"call.hls_broadcasting_stopped":this.updateFromHLSBroadcastStopped,"call.live_started":r=>this.updateFromCallResponse(r.call),"call.member_added":this.updateFromMemberAdded,"call.member_removed":this.updateFromMemberRemoved,"call.member_updated_permission":this.updateMembers,"call.member_updated":this.updateMembers,"call.notification":r=>{this.updateFromCallResponse(r.call),this.setMembers(r.members)},"call.permissions_updated":this.updateOwnCapabilities,"call.reaction_new":this.updateParticipantReaction,"call.recording_started":()=>this.setCurrentValue(this.recordingSubject,!0),"call.recording_stopped":()=>this.setCurrentValue(this.recordingSubject,!1),"call.recording_failed":()=>this.setCurrentValue(this.recordingSubject,!1),"call.rejected":r=>this.updateFromCallResponse(r.call),"call.ring":r=>this.updateFromCallResponse(r.call),"call.missed":r=>this.updateFromCallResponse(r.call),"call.session_ended":r=>this.updateFromCallResponse(r.call),"call.session_participant_count_updated":this.updateFromSessionParticipantCountUpdate,"call.session_participant_joined":this.updateFromSessionParticipantJoined,"call.session_participant_left":this.updateFromSessionParticipantLeft,"call.session_started":r=>this.updateFromCallResponse(r.call),"call.transcription_started":()=>{this.setCurrentValue(this.transcribingSubject,!0)},"call.transcription_stopped":()=>{this.setCurrentValue(this.transcribingSubject,!1)},"call.transcription_failed":()=>{this.setCurrentValue(this.transcribingSubject,!1)},"call.unblocked_user":this.unblockUser,"call.updated":r=>this.updateFromCallResponse(r.call)}}get participantCount(){return this.getCurrentValue(this.participantCount$)}get startedAt(){return this.getCurrentValue(this.startedAt$)}get anonymousParticipantCount(){return this.getCurrentValue(this.anonymousParticipantCount$)}get participants(){return this.getCurrentValue(this.participants$)}get localParticipant(){return this.getCurrentValue(this.localParticipant$)}get remoteParticipants(){return this.getCurrentValue(this.remoteParticipants$)}get dominantSpeaker(){return this.getCurrentValue(this.dominantSpeaker$)}get pinnedParticipants(){return this.getCurrentValue(this.pinnedParticipants$)}get hasOngoingScreenShare(){return this.getCurrentValue(this.hasOngoingScreenShare$)}get callingState(){return this.getCurrentValue(this.callingState$)}get callStatsReport(){return this.getCurrentValue(this.callStatsReport$)}get members(){return this.getCurrentValue(this.members$)}get ownCapabilities(){return this.getCurrentValue(this.ownCapabilities$)}get backstage(){return this.getCurrentValue(this.backstage$)}get blockedUserIds(){return this.getCurrentValue(this.blockedUserIds$)}get createdAt(){return this.getCurrentValue(this.createdAt$)}get endedAt(){return this.getCurrentValue(this.endedAt$)}get startsAt(){return this.getCurrentValue(this.startsAt$)}get updatedAt(){return this.getCurrentValue(this.updatedAt$)}get createdBy(){return this.getCurrentValue(this.createdBy$)}get custom(){return this.getCurrentValue(this.custom$)}get egress(){return this.getCurrentValue(this.egress$)}get ingress(){return this.getCurrentValue(this.ingress$)}get recording(){return this.getCurrentValue(this.recording$)}get session(){return this.getCurrentValue(this.session$)}get settings(){return this.getCurrentValue(this.settings$)}get transcribing(){return this.getCurrentValue(this.transcribing$)}get endedBy(){return this.getCurrentValue(this.endedBy$)}get thumbnails(){return this.getCurrentValue(this.thumbnails$)}},Dy=class{constructor(){this.connectedUserSubject=new M(void 0),this.callsSubject=new M([]),this.getCurrentValue=hn,this.setCurrentValue=Zl,this.setConnectedUser=e=>this.setCurrentValue(this.connectedUserSubject,e),this.setCalls=e=>this.setCurrentValue(this.callsSubject,e),this.registerCall=e=>{this.calls.find(n=>n.cid===e.cid)||this.setCalls(n=>[...n,e])},this.unregisterCall=e=>this.setCalls(n=>n.filter(r=>r!==e)),this.findCall=(e,n)=>this.calls.find(r=>r.type===e&&r.id===n),this.connectedUserSubject.subscribe(e=>y(this,null,function*(){if(!e){let n=_e(["client-state"]);for(let r of this.calls)r.state.callingState!==F.LEFT&&(n("info",`User disconnected, leaving call: ${r.cid}`),yield r.leave({reason:"client.disconnectUser() called"}).catch(i=>{n("error",`Error leaving call: ${r.cid}`,i)}))}}))}get connectedUser(){return this.getCurrentValue(this.connectedUserSubject)}get calls(){return this.getCurrentValue(this.callsSubject)}},Ey=class{constructor(e){this.getCurrentValue=hn,this.connectedUser$=e.connectedUserSubject.asObservable(),this.calls$=e.callsSubject.asObservable()}get connectedUser(){return hn(this.connectedUser$)}get calls(){return hn(this.calls$)}},yP=t=>{let n=/^a=rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/.exec(t);if(n)return{original:n[0],payload:n[1],codec:n[2]}},vP=t=>{let n=/^a=fmtp:(\d*) (.*)/.exec(t);if(n)return{original:n[0],payload:n[1],config:n[2]}},bP=(t,e)=>{let r=new RegExp(`(m=${e} \\d+ [\\w/]+) ([\\d\\s]+)`).exec(t);if(r)return{original:r[0],mediaWithPorts:r[1],codecOrder:r[2]}},wP=(t,e)=>{let n,r=[],i=[],s=!1;if(t.split(/(\r\n|\r|\n)/).forEach(o=>{if(!/^([a-z])=(.*)/.test(o))return;let c=o[0];if(c==="m"){let l=bP(o,e);s=!!l,l&&(n=l)}else if(s&&c==="a"){let l=yP(o),u=vP(o);l?r.push(l):u&&i.push(u)}}),n)return{media:n,rtpMap:r,fmtp:i}},CP=t=>{let e=wP(t,"audio"),r=e?.rtpMap.find(i=>i.codec.toLowerCase()==="opus")?.payload;if(r)return e?.fmtp.find(i=>i.payload===r)},SP=(t,e)=>{let n=CP(t);if(n){let r=/usedtx=(\d)/.exec(n.config),i=`usedtx=${e?"1":"0"}`;if(r){let s=n.original.replace(/usedtx=(\d)/,i);return t.replace(n.original,s)}else{let s=`${n.original};${i}`;return t.replace(n.original,s)}}return t},DP=(t,e,n=51e4)=>{n=Math.max(Math.min(n,51e4),96e3);let r=Ko.parse(t),i=r.media.find(a=>a.type==="audio"&&String(a.mid)===e);if(!i)return t;let s=i.rtp.find(a=>a.codec==="opus");if(!s)return t;let o=i.fmtp.find(a=>a.payload===s.payload);return o?(o.config.match(/stereo=(\d)/)?o.config=o.config.replace(/stereo=(\d)/,"stereo=1"):o.config=`${o.config};stereo=1`,o.config.match(/maxaveragebitrate=(\d*)/)?o.config=o.config.replace(/maxaveragebitrate=(\d*)/,`maxaveragebitrate=${n}`):o.config=`${o.config};maxaveragebitrate=${n}`,Ko.write(r)):t},ie=_e(["Publisher"]),Iy=class{get connectionConfiguration(){return this.pc.getConfiguration?this.pc.getConfiguration():this._connectionConfiguration}constructor({connectionConfig:e,sfuClient:n,dispatcher:r,state:i,isDtxEnabled:s,isRedEnabled:o,iceRestartDelay:a=2500,onUnrecoverableError:c}){this.transceiverRegistry={[T.AUDIO]:void 0,[T.VIDEO]:void 0,[T.SCREEN_SHARE]:void 0,[T.SCREEN_SHARE_AUDIO]:void 0,[T.UNSPECIFIED]:void 0},this.publishOptionsPerTrackType=new Map,this.transceiverInitOrder=[],this.trackKindMapping={[T.AUDIO]:"audio",[T.VIDEO]:"video",[T.SCREEN_SHARE]:"video",[T.SCREEN_SHARE_AUDIO]:"audio",[T.UNSPECIFIED]:void 0},this.trackLayersCache={[T.AUDIO]:void 0,[T.VIDEO]:void 0,[T.SCREEN_SHARE]:void 0,[T.SCREEN_SHARE_AUDIO]:void 0,[T.UNSPECIFIED]:void 0},this.isIceRestarting=!1,this.createPeerConnection=l=>{let u=new RTCPeerConnection(l);return this._connectionConfiguration=l,u.addEventListener("icecandidate",this.onIceCandidate),u.addEventListener("negotiationneeded",this.onNegotiationNeeded),u.addEventListener("icecandidateerror",this.onIceCandidateError),u.addEventListener("iceconnectionstatechange",this.onIceConnectionStateChange),u.addEventListener("icegatheringstatechange",this.onIceGatheringStateChange),u.addEventListener("signalingstatechange",this.onSignalingStateChange),u},this.close=({stopTracks:l=!0}={})=>{l&&(this.stopPublishing(),Object.keys(this.transceiverRegistry).forEach(u=>{this.transceiverRegistry[u]=void 0}),Object.keys(this.trackLayersCache).forEach(u=>{this.trackLayersCache[u]=void 0})),clearTimeout(this.iceRestartTimeout),this.unsubscribeOnIceRestart(),this.pc.removeEventListener("negotiationneeded",this.onNegotiationNeeded),this.pc.close()},this.publishStream=(h,p,m,...C)=>y(this,[h,p,m,...C],function*(l,u,d,f={}){if(u.readyState==="ended")throw new Error("Can't publish a track that has ended already.");let v=this.pc.getTransceivers().find(_=>_===this.transceiverRegistry[d]&&_.sender.track&&_.sender.track?.kind===this.trackKindMapping[d]),E=()=>y(this,null,function*(){ie("info",`Track ${T[d]} has ended, notifying the SFU`),yield this.notifyTrackMuteStateChanged(l,d,!0),u.removeEventListener("ended",E)});if(v){let _=v.sender.track;_&&_!==u&&(_.stop(),_.removeEventListener("ended",E),u.addEventListener("ended",E)),u.enabled||(u.enabled=!0),yield v.sender.replaceTrack(u)}else{let{settings:_}=this.state,A=_?.video.target_resolution,O=_?.screensharing.target_resolution?.bitrate,K=d===T.VIDEO?UE(u,A):d===T.SCREEN_SHARE?BE(u,f.screenShareSettings,O):void 0,se=f.preferredCodec;if(!se&&d===T.VIDEO&&qe()){let et=Qy()?.name.toLowerCase();et==="ipados"?se="H264":et==="android"&&(se="VP8")}let Ee=this.getCodecPreferences(d,se);if(u.addEventListener("ended",E),u.enabled||(u.enabled=!0),v=this.pc.addTransceiver(u,{direction:"sendonly",streams:d===T.VIDEO||d===T.SCREEN_SHARE?[l]:void 0,sendEncodings:K}),ie("debug",`Added ${T[d]} transceiver`),this.transceiverInitOrder.push(d),this.transceiverRegistry[d]=v,this.publishOptionsPerTrackType.set(d,f),"setCodecPreferences"in v&&Ee){ie("info",`Setting ${T[d]} codec preferences`,Ee);try{v.setCodecPreferences(Ee)}catch(et){ie("warn","Couldn't set codec preferences",et)}}}yield this.notifyTrackMuteStateChanged(l,d,!1)}),this.unpublishStream=(l,u)=>y(this,null,function*(){let d=this.pc.getTransceivers().find(f=>f===this.transceiverRegistry[l]&&f.sender.track);d&&d.sender.track&&(u?d.sender.track.readyState==="live":d.sender.track.enabled)&&(u?d.sender.track.stop():d.sender.track.enabled=!1,this.state.localParticipant?.publishedTracks.includes(l)&&(yield this.notifyTrackMuteStateChanged(void 0,l,!0)))}),this.isPublishing=l=>{let u=this.transceiverRegistry[l];if(u&&u.sender){let d=u.sender;return!!d.track&&d.track.readyState==="live"&&d.track.enabled}return!1},this.isLive=l=>{let u=this.transceiverRegistry[l];if(u&&u.sender){let d=u.sender;return!!d.track&&d.track.readyState==="live"}return!1},this.notifyTrackMuteStateChanged=(l,u,d)=>y(this,null,function*(){yield this.sfuClient.updateMuteState(u,d);let f=cP(u);d?this.state.updateParticipant(this.sfuClient.sessionId,h=>({publishedTracks:h.publishedTracks.filter(p=>p!==u),[f]:void 0})):this.state.updateParticipant(this.sfuClient.sessionId,h=>({publishedTracks:h.publishedTracks.includes(u)?h.publishedTracks:[...h.publishedTracks,u],[f]:l}))}),this.stopPublishing=()=>{ie("debug","Stopping publishing all tracks"),this.pc.getSenders().forEach(l=>{l.track?.stop(),this.pc.signalingState!=="closed"&&this.pc.removeTrack(l)})},this.updateVideoPublishQuality=l=>y(this,null,function*(){ie("info","Update publish quality, requested layers by SFU:",l);let u=this.transceiverRegistry[T.VIDEO]?.sender;if(!u){ie("warn","Update publish quality, no video sender found.");return}let d=u.getParameters();if(d.encodings.length===0){ie("warn","Update publish quality, No suitable video encoding quality found");return}let f=!1,h=l.filter(m=>m.active).map(m=>m.name);d.encodings.forEach(m=>{let C=h.includes(m.rid);if(C!==m.active&&(m.active=C,f=!0),C){let v=l.find(E=>E.name===m.rid);v!==void 0&&(v.scaleResolutionDownBy>=1&&v.scaleResolutionDownBy!==m.scaleResolutionDownBy&&(ie("debug","[dynascale]: setting scaleResolutionDownBy from server","layer",v.name,"scale-resolution-down-by",v.scaleResolutionDownBy),m.scaleResolutionDownBy=v.scaleResolutionDownBy,f=!0),v.maxBitrate>0&&v.maxBitrate!==m.maxBitrate&&(ie("debug","[dynascale] setting max-bitrate from the server","layer",v.name,"max-bitrate",v.maxBitrate),m.maxBitrate=v.maxBitrate,f=!0),v.maxFramerate>0&&v.maxFramerate!==m.maxFramerate&&(ie("debug","[dynascale]: setting maxFramerate from server","layer",v.name,"max-framerate",v.maxFramerate),m.maxFramerate=v.maxFramerate,f=!0))}});let p=d.encodings.filter(m=>m.active);f?(yield u.setParameters(d),ie("info","Update publish quality, enabled rids: ",p)):ie("info","Update publish quality, no change: ",p)}),this.getStats=l=>this.pc.getStats(l),this.getCodecPreferences=(l,u)=>{if(l===T.VIDEO)return FE("video",u||"vp8");if(l===T.AUDIO){let d=this.isRedEnabled?"red":"opus",f=this.isRedEnabled?void 0:"red";return FE("audio",u??d,f)}},this.onIceCandidate=l=>{let{candidate:u}=l;if(!u){ie("debug","null ice candidate");return}this.sfuClient.iceTrickle({iceCandidate:iI(u),peerType:pt.PUBLISHER_UNSPECIFIED}).catch(d=>{ie("warn","ICETrickle failed",d)})},this.setSfuClient=l=>{this.sfuClient=l},this.migrateTo=(l,u)=>y(this,null,function*(){this.sfuClient=l,this.pc.setConfiguration(u),this._connectionConfiguration=u,this.pc.iceConnectionState==="connected"&&(yield this.negotiate({iceRestart:!0}))}),this.restartIce=()=>y(this,null,function*(){ie("debug","Restarting ICE connection");let l=this.pc.signalingState;if(this.isIceRestarting||l==="have-local-offer"){ie("debug","ICE restart is already in progress");return}yield this.negotiate({iceRestart:!0})}),this.onNegotiationNeeded=()=>{this.negotiate().catch(l=>ie("warn","Negotiation failed.",l))},this.negotiate=l=>y(this,null,function*(){this.isIceRestarting=l?.iceRestart??!1;let u=yield this.pc.createOffer(l),d=this.mungeCodecs(u.sdp);if(d&&this.isPublishing(T.SCREEN_SHARE_AUDIO)){let p=this.transceiverRegistry[T.SCREEN_SHARE_AUDIO];if(p&&p.sender.track){let m=p.mid??this.extractMid(d,p.sender.track,T.SCREEN_SHARE_AUDIO);d=DP(d,m)}}u.sdp=d;let f=this.getCurrentTrackInfos(u.sdp);if(f.length===0)throw new Error("Can't initiate negotiation without announcing any tracks");yield this.pc.setLocalDescription(u);let{response:h}=yield this.sfuClient.setPublisher({sdp:u.sdp||"",tracks:f});try{yield this.pc.setRemoteDescription({type:"answer",sdp:h.sdp})}catch(p){ie("error","setRemoteDescription error",{sdp:h.sdp,error:p})}this.isIceRestarting=!1,this.sfuClient.iceTrickleBuffer.publisherCandidates.subscribe(p=>y(this,null,function*(){try{let m=JSON.parse(p.iceCandidate);yield this.pc.addIceCandidate(m)}catch(m){ie("warn","ICE candidate error",[m,p])}}))}),this.mungeCodecs=l=>(l&&(l=SP(l,this.isDtxEnabled)),l),this.extractMid=(l,u,d)=>{if(!l)return ie("warn","No SDP found. Returning empty mid"),"";ie("debug","No 'mid' found for track. Trying to find it from the Offer SDP");let h=Ko.parse(l).media.find(p=>p.type===u.kind&&(p.msid?.includes(u.id)??!0));if(typeof h?.mid>"u"){ie("debug",`No mid found in SDP for track type ${u.kind} and id ${u.id}. Attempting to find a heuristic mid`);let p=this.transceiverInitOrder.indexOf(d);return p!==-1?String(p):(ie("debug","No heuristic mid found. Returning empty mid"),"")}return String(h.mid)},this.getCurrentTrackInfos=l=>{l=l||this.pc.localDescription?.sdp;let{settings:u}=this.state,d=u?.video.target_resolution;return this.pc.getTransceivers().filter(f=>f.direction==="sendonly"&&f.sender.track).map(f=>{let h=Number(Object.keys(this.transceiverRegistry).find(A=>this.transceiverRegistry[A]===f)),p=f.sender.track,m;if(p.readyState==="live"){let A=this.publishOptionsPerTrackType.get(h);m=h===T.VIDEO?UE(p,d):h===T.SCREEN_SHARE?BE(p,A?.screenShareSettings):[],this.trackLayersCache[h]=m}else m=this.trackLayersCache[h]||[],ie("debug",`Track ${T[h]} is ended. Announcing last known optimal layers`,m);let C=m.map(A=>({rid:A.rid||"",bitrate:A.maxBitrate||0,fps:A.maxFramerate||0,quality:this.ridToVideoQuality(A.rid||""),videoDimension:{width:A.width,height:A.height}})),v=[T.AUDIO,T.SCREEN_SHARE_AUDIO].includes(h),E=p.getSettings(),_=v&&E.channelCount===2;return{trackId:p.id,layers:C,trackType:h,mid:f.mid??this.extractMid(l,p,h),stereo:_,dtx:v&&this.isDtxEnabled,red:v&&this.isRedEnabled}})},this.onIceCandidateError=l=>{let u=l instanceof RTCPeerConnectionIceErrorEvent&&`${l.errorCode}: ${l.errorText}`,d=this.pc.iceConnectionState;ie(d==="connected"||d==="checking"?"debug":"warn","ICE Candidate error",u)},this.onIceConnectionStateChange=()=>{let l=this.pc.iceConnectionState;ie("debug","ICE Connection state changed to",l);let u=this.state.callingState!==F.OFFLINE;l==="failed"?(ie("debug","Attempting to restart ICE"),this.restartIce().catch(d=>{ie("error","ICE restart error",d),this.onUnrecoverableError?.()})):l==="disconnected"&&u&&(ie("debug",`Scheduling ICE restart in ${this.iceRestartDelay} ms.`),this.iceRestartTimeout=setTimeout(()=>{this.pc.iceConnectionState==="disconnected"||this.pc.iceConnectionState==="failed"?this.restartIce().catch(d=>{ie("error","ICE restart error",d),this.onUnrecoverableError?.()}):ie("debug","Scheduled ICE restart: connection recovered, canceled.")},this.iceRestartDelay))},this.onIceGatheringStateChange=()=>{ie("debug","ICE Gathering State",this.pc.iceGatheringState)},this.onSignalingStateChange=()=>{ie("debug","Signaling state changed",this.pc.signalingState)},this.ridToVideoQuality=l=>l==="q"?ss.LOW_UNSPECIFIED:l==="h"?ss.MID:ss.HIGH,this.pc=this.createPeerConnection(e),this.sfuClient=n,this.state=i,this.isDtxEnabled=s,this.isRedEnabled=o,this.iceRestartDelay=a,this.onUnrecoverableError=c,this.unsubscribeOnIceRestart=r.on("iceRestart",l=>{l.peerType===pt.PUBLISHER_UNSPECIFIED&&this.restartIce().catch(u=>{ie("warn","ICERestart failed",u),this.onUnrecoverableError?.()})})}},ge=_e(["Subscriber"]),Ty=class{get connectionConfiguration(){return this.pc.getConfiguration?this.pc.getConfiguration():this._connectionConfiguration}constructor({sfuClient:e,dispatcher:n,state:r,connectionConfig:i,iceRestartDelay:s=2500,onUnrecoverableError:o}){this.isIceRestarting=!1,this.createPeerConnection=a=>{let c=new RTCPeerConnection(a);return this._connectionConfiguration=a,c.addEventListener("icecandidate",this.onIceCandidate),c.addEventListener("track",this.handleOnTrack),c.addEventListener("icecandidateerror",this.onIceCandidateError),c.addEventListener("iceconnectionstatechange",this.onIceConnectionStateChange),c.addEventListener("icegatheringstatechange",this.onIceGatheringStateChange),c},this.close=()=>{clearTimeout(this.iceRestartTimeout),this.unregisterOnSubscriberOffer(),this.unregisterOnIceRestart(),this.pc.close()},this.getStats=a=>this.pc.getStats(a),this.setSfuClient=a=>{this.sfuClient=a},this.migrateTo=(a,c)=>{this.setSfuClient(a);let l=this.pc,u=new Set;l.getReceivers().forEach(C=>{C.track.kind==="video"&&u.add(C.track.id)});let d=this.createPeerConnection(c),f,h=()=>{l.close(),clearTimeout(f)},p=C=>{ge("debug",`[Migration]: Migrated track: ${C.track.id}, ${C.track.kind}`),u.delete(C.track.id),u.size===0&&(ge("debug","[Migration]: Migration complete"),d.removeEventListener("track",p),h())},m=()=>{d.connectionState==="connected"&&(f=setTimeout(()=>{d.removeEventListener("track",p),h()},2e3),d.removeEventListener("connectionstatechange",m))};d.addEventListener("track",p),d.addEventListener("connectionstatechange",m),this.pc=d},this.restartIce=()=>y(this,null,function*(){if(ge("debug","Restarting ICE connection"),this.pc.signalingState==="have-remote-offer"){ge("debug","ICE restart is already in progress");return}if(this.pc.connectionState==="new"){ge("debug","ICE connection is not yet established, skipping restart.");return}let a=this.isIceRestarting;try{this.isIceRestarting=!0,yield this.sfuClient.iceRestart({peerType:pt.SUBSCRIBER})}catch(c){throw this.isIceRestarting=a,c}}),this.handleOnTrack=a=>{let[c]=a.streams,[l,u]=c.id.split(":"),d=this.state.participants.find(m=>m.trackLookupPrefix===l);if(ge("debug",`[onTrack]: Got remote ${u} track for userId: ${d?.userId}`,a.track.id,a.track),!d){ge("warn",`[onTrack]: Received track for unknown participant: ${l}`,a);return}let f=`${d.userId} ${u}:${l}`;a.track.addEventListener("mute",()=>{ge("info",`[onTrack]: Track muted: ${f}`)}),a.track.addEventListener("unmute",()=>{ge("info",`[onTrack]: Track unmuted: ${f}`)}),a.track.addEventListener("ended",()=>{ge("info",`[onTrack]: Track ended: ${f}`)});let h={TRACK_TYPE_AUDIO:"audioStream",TRACK_TYPE_VIDEO:"videoStream",TRACK_TYPE_SCREEN_SHARE:"screenShareStream",TRACK_TYPE_SCREEN_SHARE_AUDIO:"screenShareAudioStream"}[u];if(!h){ge("error",`Unknown track type: ${u}`);return}let p=d[h];p&&(ge("info",`[onTrack]: Cleaning up previous remote ${a.track.kind} tracks for userId: ${d.userId}`),p.getTracks().forEach(m=>{m.stop(),p.removeTrack(m)})),this.state.updateParticipant(d.sessionId,{[h]:c})},this.onIceCandidate=a=>{let{candidate:c}=a;if(!c){ge("debug","null ice candidate");return}this.sfuClient.iceTrickle({iceCandidate:iI(c),peerType:pt.SUBSCRIBER}).catch(l=>{ge("warn","ICETrickle failed",l)})},this.negotiate=a=>y(this,null,function*(){ge("info","Received subscriberOffer",a),yield this.pc.setRemoteDescription({type:"offer",sdp:a.sdp}),this.sfuClient.iceTrickleBuffer.subscriberCandidates.subscribe(l=>y(this,null,function*(){try{let u=JSON.parse(l.iceCandidate);yield this.pc.addIceCandidate(u)}catch(u){ge("warn","ICE candidate error",[u,l])}}));let c=yield this.pc.createAnswer();yield this.pc.setLocalDescription(c),yield this.sfuClient.sendAnswer({peerType:pt.SUBSCRIBER,sdp:c.sdp||""}),this.isIceRestarting=!1}),this.onIceConnectionStateChange=()=>{let a=this.pc.iceConnectionState;if(ge("debug","ICE connection state changed",a),this.isIceRestarting)return;let c=this.state.callingState!==F.OFFLINE;a==="failed"?(ge("debug","Attempting to restart ICE"),this.restartIce().catch(l=>{ge("error","ICE restart failed",l),this.onUnrecoverableError?.()})):a==="disconnected"&&c&&(ge("debug",`Scheduling ICE restart in ${this.iceRestartDelay} ms.`),this.iceRestartTimeout=setTimeout(()=>{this.pc.iceConnectionState==="disconnected"||this.pc.iceConnectionState==="failed"?this.restartIce().catch(l=>{ge("error","ICE restart failed",l),this.onUnrecoverableError?.()}):ge("debug","Scheduled ICE restart: connection recovered, canceled.")},this.iceRestartDelay))},this.onIceGatheringStateChange=()=>{ge("debug","ICE gathering state changed",this.pc.iceGatheringState)},this.onIceCandidateError=a=>{let c=a instanceof RTCPeerConnectionIceErrorEvent&&`${a.errorCode}: ${a.errorText}`,l=this.pc.iceConnectionState;ge(l==="connected"||l==="checking"?"debug":"warn","ICE Candidate error",c)},this.sfuClient=e,this.state=r,this.iceRestartDelay=s,this.onUnrecoverableError=o,this.pc=this.createPeerConnection(i),this.unregisterOnSubscriberOffer=n.on("subscriberOffer",a=>{this.negotiate(a).catch(c=>{ge("warn","Negotiation failed.",c)})}),this.unregisterOnIceRestart=n.on("iceRestart",a=>{a.peerType===pt.SUBSCRIBER&&this.restartIce().catch(c=>{ge("warn","ICERestart failed",c),this.onUnrecoverableError?.()})})}},EP=t=>{let e=_e(["sfu-client"]),{endpoint:n,onMessage:r}=t,i=new cm(n);return i.binaryType="arraybuffer",i.addEventListener("error",s=>{e("error","Signaling WS channel error",s)}),i.addEventListener("close",s=>{e("info","Signaling WS channel is closed",s)}),i.addEventListener("open",s=>{e("info","Signaling WS channel is open",s)}),i.addEventListener("message",s=>{try{let o=s.data instanceof ArrayBuffer?OE.fromBinary(new Uint8Array(s.data)):OE.fromJsonString(s.data.toString());r(o)}catch(o){e("error","Failed to decode a message. Check whether the Proto models match.",{event:s,error:o})}}),i},pn=t=>new Promise(e=>setTimeout(e,t));function Ry(t){return t&&(Object.prototype.toString.call(t)==="[object Function]"||typeof t=="function"||t instanceof Function)}var On={TOKEN_EXPIRED:40,WS_CLOSED_SUCCESS:1e3,WS_CLOSED_ABRUPTLY:1006,WS_POLICY_VIOLATION:1008};function Qr(t){let e=Math.min(500+t*2e3,5e3),n=Math.min(Math.max(250,(t-1)*2e3),5e3);return Math.floor(Math.random()*(e-n)+n)}function Ho(){return lI()}function $o(t){let e="";for(let n=0;n<t.length;n++)e+=t[n].toString(16).padStart(2,"0");return e}function lI(){let t=RP(16);return t[6]=t[6]&15|64,t[8]=t[8]&191|128,$o(t.subarray(0,4))+"-"+$o(t.subarray(4,6))+"-"+$o(t.subarray(6,8))+"-"+$o(t.subarray(8,10))+"-"+$o(t.subarray(10,16))}function IP(t){let e=Math.pow(2,8*t.byteLength/t.length);for(let n=0;n<t.length;n++)t[n]=Math.random()*e}var TP=typeof crypto<"u"&&typeof crypto?.getRandomValues<"u"?crypto.getRandomValues.bind(crypto):typeof msCrypto<"u"?msCrypto.getRandomValues.bind(msCrypto):IP;function RP(t){let e=new Uint8Array(t);return TP(e),e}function kP(t){let e={};if(!t)return e;try{Object.getOwnPropertyNames(t).forEach(n=>{e[n]=Object.getOwnPropertyDescriptor(t,n)})}catch{return{error:"failed to serialize the error"}}return e}function _P(t){let e=typeof navigator<"u"?navigator:typeof window<"u"&&window.navigator?window.navigator:void 0;return e?typeof e.onLine!="boolean"?!0:e.onLine:(t("warn","isOnline failed to access window.navigator and assume browser is online"),!0)}function uI(t){typeof window<"u"&&window.addEventListener&&(window.addEventListener("offline",t),window.addEventListener("online",t))}function dI(t){typeof window<"u"&&window.removeEventListener&&(window.removeEventListener("offline",t),window.removeEventListener("online",t))}var qr=(()=>{class t{constructor({dispatcher:n,sfuServer:r,token:i,sessionId:s}){this.iceTrickleBuffer=new wy,this.isMigratingAway=!1,this.isFastReconnecting=!1,this.pingIntervalInMs=10*1e3,this.unhealthyTimeoutInMs=this.pingIntervalInMs+5*1e3,this.close=(a,c)=>{this.logger("debug",`Closing SFU WS connection: ${a} - ${c}`),this.signalWs.readyState!==this.signalWs.CLOSED&&this.signalWs.close(a,`js-client: ${c}`),this.unsubscribeIceTrickle(),clearInterval(this.keepAliveInterval),clearTimeout(this.connectionCheckTimeout)},this.updateSubscriptions=a=>y(this,null,function*(){return Mn(()=>this.rpc.updateSubscriptions({sessionId:this.sessionId,tracks:a}),this.logger,"debug")}),this.setPublisher=a=>y(this,null,function*(){return Mn(()=>this.rpc.setPublisher(x(S({},a),{sessionId:this.sessionId})),this.logger)}),this.sendAnswer=a=>y(this,null,function*(){return Mn(()=>this.rpc.sendAnswer(x(S({},a),{sessionId:this.sessionId})),this.logger)}),this.iceTrickle=a=>y(this,null,function*(){return Mn(()=>this.rpc.iceTrickle(x(S({},a),{sessionId:this.sessionId})),this.logger)}),this.iceRestart=a=>y(this,null,function*(){return Mn(()=>this.rpc.iceRestart(x(S({},a),{sessionId:this.sessionId})),this.logger)}),this.updateMuteState=(a,c)=>y(this,null,function*(){return this.updateMuteStates({muteStates:[{trackType:a,muted:c}]})}),this.updateMuteStates=a=>y(this,null,function*(){return Mn(()=>this.rpc.updateMuteStates(x(S({},a),{sessionId:this.sessionId})),this.logger)}),this.sendStats=a=>y(this,null,function*(){return Mn(()=>this.rpc.sendStats(x(S({},a),{sessionId:this.sessionId})),this.logger,"debug")}),this.startNoiseCancellation=()=>y(this,null,function*(){return Mn(()=>this.rpc.startNoiseCancellation({sessionId:this.sessionId}),this.logger)}),this.stopNoiseCancellation=()=>y(this,null,function*(){return Mn(()=>this.rpc.stopNoiseCancellation({sessionId:this.sessionId}),this.logger)}),this.join=a=>y(this,null,function*(){let c=Hl.create(x(S({},a),{sessionId:this.sessionId,token:this.token}));return this.send(Ul.create({requestPayload:{oneofKind:"joinRequest",joinRequest:c}}))}),this.send=a=>y(this,null,function*(){return this.signalReady.then(c=>{c.readyState===c.OPEN&&(this.logger("debug",`Sending message to: ${this.edgeName}`,Ul.toJson(a)),c.send(Ul.toBinary(a)))})}),this.keepAlive=()=>{clearInterval(this.keepAliveInterval),this.keepAliveInterval=setInterval(()=>{this.logger("trace","Sending healthCheckRequest to SFU");let a=Ul.create({requestPayload:{oneofKind:"healthCheckRequest",healthCheckRequest:{}}});this.send(a).catch(c=>{this.logger("error","Error sending healthCheckRequest to SFU",c)})},this.pingIntervalInMs)},this.scheduleConnectionCheck=()=>{clearTimeout(this.connectionCheckTimeout),this.connectionCheckTimeout=setTimeout(()=>{this.lastMessageTimestamp&&new Date().getTime()-this.lastMessageTimestamp.getTime()>this.unhealthyTimeoutInMs&&this.close(t.ERROR_CONNECTION_UNHEALTHY,`SFU connection unhealthy. Didn't receive any message for ${this.unhealthyTimeoutInMs}ms`)},this.unhealthyTimeoutInMs)},this.sessionId=s||lI(),this.sfuServer=r,this.edgeName=r.edge_name,this.token=i,this.logger=_e(["sfu-client"]);let o={interceptUnary:(a,c,l,u)=>(this.logger("trace",`Calling SFU RPC method ${c.name}`,{input:l,options:u}),a(c,l,u))};this.rpc=HO({baseUrl:r.url,interceptors:[$O({Authorization:`Bearer ${i}`}),o]}),this.unsubscribeIceTrickle=n.on("iceTrickle",a=>{this.iceTrickleBuffer.push(a)}),this.signalWs=EP({endpoint:r.ws_endpoint,onMessage:a=>{this.lastMessageTimestamp=new Date,this.scheduleConnectionCheck(),n.dispatch(a)}}),this.signalReady=new Promise(a=>{let c=()=>{this.signalWs.removeEventListener("open",c),this.keepAlive(),a(this.signalWs)};this.signalWs.addEventListener("open",c)})}}return t.NORMAL_CLOSURE=1e3,t.ERROR_CONNECTION_UNHEALTHY=4001,t.ERROR_CONNECTION_BROKEN=4002,t})(),xP=5,Mn=(t,e,n="error")=>y(void 0,null,function*(){let r=0,i;do r>0&&(yield pn(Qr(r))),i=yield t(),i.response.error&&e(n,`SFU RPC Error (${i.method.name}):`,i.response.error),r++;while(i.response.error?.shouldRetry&&r<xP);if(i.response.error)throw i.response.error;return i}),NP=t=>function(n){return y(this,null,function*(){if(n.user.id===t.currentUserId)return;let{state:r}=t;n.call.created_by.id===t.currentUserId&&r.callingState===F.RINGING&&(yield t.join())})},AP=t=>function(n){return y(this,null,function*(){if(n.user.id===t.currentUserId)return;let{call:r}=n,{session:i}=r;if(!i){t.logger("warn","No call session provided. Ignoring call.rejected event.",n);return}let s=i.rejected_by,{members:o,callingState:a}=t.state;if(a!==F.RINGING){t.logger("info","Call is not in ringing mode (it is either accepted or rejected already). Ignoring call.rejected event.",n);return}t.isCreatedByMe?o.filter(l=>l.user_id!==t.currentUserId).every(l=>s[l.user_id])&&(t.logger("info","everyone rejected, leaving the call"),yield t.leave({reason:"ring: everyone rejected"})):s[r.created_by.id]&&(t.logger("info","call creator rejected, leaving call"),yield t.leave({reason:"ring: creator rejected"}))})},MP=t=>function(){return y(this,null,function*(){let{callingState:n}=t.state;(n===F.RINGING||n===F.JOINED||n===F.JOINING)&&(yield t.leave({reason:"call.ended event received"}))})},OP=t=>function(n){let{currentGrants:r}=n;if(r){let{canPublishAudio:i,canPublishVideo:s,canScreenshare:o}=r,a={[Nt.SEND_AUDIO]:i,[Nt.SEND_VIDEO]:s,[Nt.SCREENSHARE]:o},c=t.ownCapabilities.filter(l=>a[l]!==!1);Object.entries(a).forEach(([l,u])=>{u&&!c.includes(l)&&c.push(l)}),t.setOwnCapabilities(c)}},fI=_e(["events"]),PP=(t,e)=>t.on("changePublishQuality",n=>{let{videoSenders:r}=n;r.forEach(i=>{let{layers:s}=i;e.updatePublishQuality(s.filter(o=>o.active))})}),FP=(t,e)=>t.on("connectionQualityChanged",n=>{let{connectionQualityUpdates:r}=n;r&&e.updateParticipants(r.reduce((i,s)=>{let{sessionId:o,connectionQuality:a}=s;return i[o]={connectionQuality:a},i},{}))}),LP=(t,e)=>t.on("healthCheckResponse",n=>{let{participantCount:r}=n;r&&(e.setParticipantCount(r.total),e.setAnonymousParticipantCount(r.anonymous))}),jP=(t,e)=>t.on("error",n=>{n.error&&n.error.code!==Yl.LIVE_ENDED||e.permissionsContext.hasPermission(Nt.JOIN_BACKSTAGE)||e.leave({reason:"live ended"}).catch(r=>{fI("error","Failed to leave call after live ended",r)})}),UP=t=>t.on("error",e=>{if(!e.error)return;let{error:n}=e;fI("error","SFU reported error",{code:Yl[n.code],message:n.message,shouldRetry:n.shouldRetry})}),BP=t=>function(n){let{pins:r}=n;t.setServerSidePins(r)},VP=t=>t.on("trackUnpublished",e=>y(void 0,null,function*(){let{cause:n,type:r,sessionId:i}=e,{localParticipant:s}=t.state;if(n===Jy.MODERATION&&i===s?.sessionId){let o=t.logger;o("info",`Local participant's ${T[r]} track is muted remotely`);try{r===T.VIDEO?yield t.camera.disable():r===T.AUDIO?yield t.microphone.disable():o("warn","Unsupported track type to soft mute",T[r]),t.publisher?.isPublishing(r)&&(yield t.stopPublish(r))}catch(a){o("error","Failed to stop publishing",a)}}})),$P=t=>function(n){let{participant:r}=n;r&&t.updateOrAddParticipant(r.sessionId,Object.assign(r,{viewportVisibilityState:{videoTrack:Oe.UNKNOWN,screenShareTrack:Oe.UNKNOWN}}))},HP=t=>function(n){let{participant:r}=n;r&&t.setParticipants(i=>i.filter(s=>s.sessionId!==r.sessionId))},WP=t=>function(n){let{participant:r}=n;r&&t.updateParticipant(r.sessionId,r)},qP=t=>function(n){let{type:r,sessionId:i,participant:s}=n;s?t.updateOrAddParticipant(i,s):t.updateParticipant(i,o=>({publishedTracks:[...o.publishedTracks,r].filter(GP)}))},zP=t=>function(n){let{type:r,sessionId:i,participant:s}=n;s?t.updateOrAddParticipant(i,s):t.updateParticipant(i,o=>({publishedTracks:o.publishedTracks.filter(a=>a!==r)}))},GP=(t,e,n)=>n.indexOf(t)===e,KP=(t,e)=>t.on("dominantSpeakerChanged",n=>{let{sessionId:r}=n;r!==e.dominantSpeaker?.sessionId&&e.setParticipants(i=>i.map(s=>s.sessionId===r?x(S({},s),{isDominantSpeaker:!0}):s.isDominantSpeaker?x(S({},s),{isDominantSpeaker:!1}):s))}),JP=(t,e)=>t.on("audioLevelChanged",n=>{let{audioLevels:r}=n;e.updateParticipants(r.reduce((i,s)=>(i[s.sessionId]={audioLevel:s.level,isSpeaking:s.isSpeaking},i),{}))}),QP=(t,e,n)=>{let r=[t.on("call.ended",MP(t)),jP(n,t),UP(n),PP(n,t),FP(n,e),LP(n,e),t.on("participantJoined",$P(e)),t.on("participantLeft",HP(e)),t.on("participantUpdated",WP(e)),t.on("trackPublished",qP(e)),t.on("trackUnpublished",zP(e)),JP(n,e),KP(n,e),t.on("callGrantsUpdated",OP(e)),t.on("pinsUpdated",BP(e)),VP(t)];return t.ringing&&r.push(hI(t)),()=>{r.forEach(i=>i())}},hI=t=>{let e={"call.accepted":NP(t),"call.rejected":AP(t)},n=Object.keys(e).map(r=>{let i=r;return t.on(i,e[i])});return()=>{n.forEach(r=>r())}},YP=(t,e,n,r)=>y(void 0,null,function*(){let{call:i,credentials:s,members:o,own_capabilities:a,stats_options:c}=yield ZP(t,e,n,r);return{connectionConfig:XP(s.ice_servers),sfuServer:s.server,token:s.token,metadata:i,members:o,ownCapabilities:a,statsOptions:c}}),ZP=(t,e,n,r)=>y(void 0,null,function*(){let i=yield t.getLocationHint(),s=x(S({},r),{location:i});return t.post(`/call/${e}/${n}/join`,s)}),XP=t=>!t||t.length===0?void 0:{iceServers:t.map(n=>({urls:n.urls,username:n.username,credential:n.password}))},zl=t=>{let e=[];return t.forEach(n=>{e.push(n)}),e},e1=t=>{let s=t,{sdk:e}=s,n=fu(s,["sdk"]),r=pI(e),i=mI(e);return S({sdkName:r,sdkVersion:i},n)},pI=t=>t&&t.type===ds.REACT?"stream-react":t&&t.type===ds.REACT_NATIVE?"stream-react-native":"stream-js",mI=t=>t?`${t.major}.${t.minor}.${t.patch}`:"0.0.0-development",t1=({subscriber:t,publisher:e,state:n,datacenter:r,pollingIntervalInMs:i=2e3})=>{let s=_e(["stats"]),o=(p,m)=>y(void 0,null,function*(){return p==="subscriber"&&t?t.getStats(m):p==="publisher"&&e?e.getStats(m):void 0}),a=(p,m)=>y(void 0,null,function*(){let C=p==="subscriber"?t:e;if(!C)return[];let v=[];for(let E of m.getTracks()){let _=yield C.getStats(E),A=Qm(_,{trackKind:E.kind,kind:p});v.push(A)}return v}),c=p=>{u.add(p),d()},l=p=>{u.delete(p),d()},u=new Set,d=()=>y(void 0,null,function*(){let p={},m=new Set(u);if(m.size>0)for(let A of n.participants){if(!m.has(A.sessionId))continue;let O=A.isLocalParticipant?"publisher":"subscriber";try{let K=new MediaStream([...A.videoStream?.getVideoTracks()||[],...A.audioStream?.getAudioTracks()||[]]);p[A.sessionId]=yield a(O,K),K.getTracks().forEach(se=>{K.removeTrack(se)})}catch(K){s("error",`Failed to collect stats for ${O} of ${A.userId}`,K)}}let[C,v]=yield Promise.all([t.getStats().then(A=>Qm(A,{kind:"subscriber",trackKind:"video"})).then(HE),e?e.getStats().then(A=>Qm(A,{kind:"publisher",trackKind:"video"})).then(HE):gI()]),[E,_]=yield Promise.all([o("subscriber"),e?o("publisher"):void 0]);n.setCallStatsReport({datacenter:r,publisherStats:v,subscriberStats:C,subscriberRawStats:E,publisherRawStats:_,participants:p,timestamp:Date.now()})}),f;if(i>0){let p=()=>y(void 0,null,function*(){yield d().catch(m=>{s("debug","Failed to collect stats",m)}),f=setTimeout(p,i)});p()}return{getRawStatsForTrack:o,getStatsForStream:a,startReportingStatsFor:c,stopReportingStatsFor:l,stop:()=>{f&&clearTimeout(f)}}},Qm=(t,e)=>{let{trackKind:n,kind:r}=e,i=r==="subscriber"?"inbound-rtp":"outbound-rtp",s=zl(t),o=s.filter(a=>a.type===i&&a.kind===n).map(a=>{let c=a,l=s.find(f=>f.type==="codec"&&f.id===c.codecId),u=s.find(f=>f.type==="transport"&&f.id===c.transportId),d;return u&&u.dtlsState==="connected"&&(d=s.find(h=>h.type==="candidate-pair"&&h.id===u.selectedCandidatePairId)?.currentRoundTripTime),{bytesSent:c.bytesSent,bytesReceived:c.bytesReceived,codec:l?.mimeType,currentRoundTripTime:d,frameHeight:c.frameHeight,frameWidth:c.frameWidth,framesPerSecond:c.framesPerSecond,jitter:c.jitter,kind:c.kind,qualityLimitationReason:c.qualityLimitationReason,rid:c.rid,ssrc:c.ssrc}});return{rawStats:t,streams:o,timestamp:Date.now()}},gI=t=>({rawReport:t??{streams:[],timestamp:Date.now()},totalBytesSent:0,totalBytesReceived:0,averageJitterInMs:0,averageRoundTripTimeInMs:0,qualityLimitationReasons:"none",highestFrameWidth:0,highestFrameHeight:0,highestFramesPerSecond:0,timestamp:Date.now()}),HE=t=>{let e=gI(t),n=-1,r=(c,l)=>c*l,i=new Set,s=t.streams,o=s.reduce((c,l)=>{c.totalBytesSent+=l.bytesSent||0,c.totalBytesReceived+=l.bytesReceived||0,c.averageJitterInMs+=l.jitter||0,c.averageRoundTripTimeInMs+=l.currentRoundTripTime||0;let u=r(l.frameWidth||0,l.frameHeight||0);return u>n&&(c.highestFrameWidth=l.frameWidth||0,c.highestFrameHeight=l.frameHeight||0,c.highestFramesPerSecond=l.framesPerSecond||0,n=u),i.add(l.qualityLimitationReason||""),c},e);s.length>0&&(o.averageJitterInMs=Math.round(o.averageJitterInMs/s.length*1e3),o.averageRoundTripTimeInMs=Math.round(o.averageRoundTripTimeInMs/s.length*1e3));let a=[i.has("cpu")&&"cpu",i.has("bandwidth")&&"bandwidth",i.has("other")&&"other"].filter(Boolean).join(", ");return a&&(o.qualityLimitationReasons=a),o},ky=class{constructor(e,{options:n,clientDetails:r,subscriber:i,publisher:s}){this.logger=_e(["SfuStatsReporter"]),this.run=()=>y(this,null,function*(){let[l,u]=yield Promise.all([this.subscriber.getStats().then(zl).then(JSON.stringify),this.publisher?.getStats().then(zl).then(JSON.stringify)??"[]"]);yield this.sfuClient.sendStats({sdk:this.sdkName,sdkVersion:this.sdkVersion,webrtcVersion:this.webRTCVersion,subscriberStats:l,publisherStats:u})}),this.start=()=>{this.options.reporting_interval_ms<=0||(this.intervalId=setInterval(()=>{this.run().catch(l=>{this.logger("warn","Failed to report stats",l)})},this.options.reporting_interval_ms))},this.stop=()=>{clearInterval(this.intervalId),this.intervalId=void 0},this.sfuClient=e,this.options=n,this.subscriber=i,this.publisher=s;let o=rP(),{sdk:a,browser:c}=r;this.sdkName=pI(a),this.sdkVersion=mI(a),this.webRTCVersion=o?.version||`${c?.name||""}-${c?.version||""}`||"N/A"}},n1=.35,_y=class{constructor(){this.elementHandlerMap=new Map,this.observer=null,this.queueSet=new Set,this.setViewport=(e,n)=>{let r=()=>{this.observer?.disconnect(),this.observer=null,this.elementHandlerMap.clear()};return this.observer=new IntersectionObserver(i=>{i.forEach(s=>{this.elementHandlerMap.get(s.target)?.(s)})},x(S({root:e},n),{threshold:n?.threshold??n1})),this.queueSet.size&&(this.queueSet.forEach(([i,s])=>{e.contains(i)&&(this.observer.observe(i),this.elementHandlerMap.set(i,s))}),this.queueSet.clear()),r},this.observe=(e,n)=>{let r=[e,n],i=()=>{this.elementHandlerMap.delete(e),this.observer?.unobserve(e),this.queueSet.delete(r)};return this.elementHandlerMap.has(e)?i:this.observer?(this.observer.root.contains(e)&&(this.elementHandlerMap.set(e,n),this.observer.observe(e)),i):(this.queueSet.add(r),i)}}},r1=()=>typeof navigator>"u"?!1:/^((?!chrome|android).)*safari/i.test(navigator.userAgent||""),i1=()=>typeof navigator>"u"?!1:navigator.userAgent?.includes("Firefox");var WE={videoTrack:Oe.UNKNOWN,screenShareTrack:Oe.UNKNOWN},xy=class{constructor(e){this.viewportTracker=new _y,this.logger=_e(["DynascaleManager"]),this.trackElementVisibility=(n,r,i)=>{let s=this.viewportTracker.observe(n,o=>{this.call.state.updateParticipant(r,a=>{let c=a.viewportVisibilityState??WE,l=o.isIntersecting||document.fullscreenElement===n?Oe.VISIBLE:Oe.INVISIBLE;return x(S({},a),{viewportVisibilityState:x(S({},c),{[i]:l})})})});return()=>{s(),this.call.state.updateParticipant(r,o=>{let a=o.viewportVisibilityState??WE;return x(S({},o),{viewportVisibilityState:x(S({},a),{[i]:Oe.UNKNOWN})})})}},this.setViewport=n=>this.viewportTracker.setViewport(n),this.bindVideoElement=(n,r,i)=>{let s=this.call.state.findParticipantBySessionId(r);if(!s)return;let o=(p,m)=>{m&&(m.width===0||m.height===0)&&(this.logger("debug","Ignoring 0x0 dimension",s),m=void 0),this.call.updateSubscriptionsPartial(i,{[r]:{dimension:m}},p)},a=this.call.state.participants$.pipe(j(p=>p.find(m=>m.sessionId===r)),Is(p=>!!p),Ue(),Fe({bufferSize:1,refCount:!0})),c,l=s.isLocalParticipant?null:a.pipe(j(p=>p.viewportVisibilityState?.[i]),Ue()).subscribe(p=>{if(!c){c=p??Oe.UNKNOWN;return}if(c=p??Oe.UNKNOWN,p===Oe.INVISIBLE)return o(Wt.MEDIUM,void 0);o(Wt.MEDIUM,{width:n.clientWidth,height:n.clientHeight})}),u,d=s.isLocalParticipant?null:new ResizeObserver(()=>{let p=`${n.clientWidth},${n.clientHeight}`;if(!u){u=p;return}u===p||c===Oe.INVISIBLE||(o(Wt.SLOW,{width:n.clientWidth,height:n.clientHeight}),u=p)});d?.observe(n);let f=s.isLocalParticipant?null:a.pipe(li("publishedTracks"),j(p=>i==="videoTrack"?is(p):Gr(p)),Ue()).subscribe(p=>{p?o(Wt.FAST,{width:n.clientWidth,height:n.clientHeight}):o(Wt.FAST,void 0)});n.autoplay=!0,n.playsInline=!0,n.muted=!0;let h=a.pipe(li(i==="videoTrack"?"videoStream":"screenShareStream")).subscribe(p=>{let m=i==="videoTrack"?p.videoStream:p.screenShareStream;n.srcObject!==m&&(n.srcObject=m??null,(r1()||i1())&&setTimeout(()=>{n.srcObject=m??null,n.play().catch(C=>{this.logger("warn","Failed to play stream",C)})},25))});return()=>{o(Wt.FAST,void 0),l?.unsubscribe(),f?.unsubscribe(),h.unsubscribe(),d?.disconnect()}},this.bindAudioElement=(n,r,i)=>{let s=this.call.state.findParticipantBySessionId(r);if(!s||s.isLocalParticipant)return;let o=this.call.state.participants$.pipe(j(u=>u.find(d=>d.sessionId===r)),Is(u=>!!u),Ue(),Fe({bufferSize:1,refCount:!0})),a=o.pipe(li(i==="screenShareAudioTrack"?"screenShareAudioStream":"audioStream")).subscribe(u=>{let d=i==="screenShareAudioTrack"?u.screenShareAudioStream:u.audioStream;n.srcObject!==d&&setTimeout(()=>{if(n.srcObject=d??null,n.srcObject){n.play().catch(h=>{this.logger("warn","Failed to play stream",h)});let{selectedDevice:f}=this.call.speaker.state;f&&"setSinkId"in n&&n.setSinkId(f)}})}),c="setSinkId"in n?this.call.speaker.state.selectedDevice$.subscribe(u=>{u&&n.setSinkId(u)}):null,l=Jt([this.call.speaker.state.volume$,o.pipe(li("audioVolume"))]).subscribe(([u,d])=>{n.volume=d.audioVolume??u});return n.autoplay=!0,()=>{c?.unsubscribe(),l.unsubscribe(),a.unsubscribe()}},this.call=e}},Ny=class{constructor(){this.permissions=[],this.setPermissions=e=>{this.permissions=e||[]},this.setCallSettings=e=>{this.settings=e},this.hasPermission=e=>this.permissions.includes(e),this.canRequest=(e,n=this.settings)=>{if(!n)return!1;let{audio:r,video:i,screensharing:s}=n;switch(e){case Nt.SEND_AUDIO:return r.access_request_enabled;case Nt.SEND_VIDEO:return i.access_request_enabled;case Nt.SCREENSHARE:return s.access_request_enabled;default:return!1}}}},Kr=class{constructor(e,n={sortParticipantsBy:ql}){this.name=e,this.options=n}},Ay=class{constructor(e){this.register=n=>{this.callTypes[n.name]=n},this.unregister=n=>{delete this.callTypes[n]},this.get=n=>(this.callTypes[n]||this.register(new Kr(n)),this.callTypes[n]),this.callTypes=e.reduce((n,r)=>(n[r.name]=r,n),{})}},s1=new Ay([new Kr("default",{sortParticipantsBy:ql}),new Kr("development",{sortParticipantsBy:ql}),new Kr("livestream",{sortParticipantsBy:$E}),new Kr("audio_room",{sortParticipantsBy:$E})]),Gl=class{constructor(e){this.permission=e,this.disposeController=new AbortController,this.wasPrompted=!1,this.listeners=new Set,this.logger=_e(["permissions"]);let n=this.disposeController.signal;this.ready=y(this,null,function*(){let r=i=>{this.setState("granted")};if(!o1())return r();try{let i=yield navigator.permissions.query({name:e.queryName});n.aborted||(this.setState(i.state),i.addEventListener("change",()=>this.setState(i.state),{signal:n}))}catch{r()}})}dispose(){this.state=void 0,this.disposeController.abort()}getState(){return y(this,null,function*(){if(yield this.ready,!this.state)throw new Error("BrowserPermission instance possibly disposed");return this.state})}prompt(){return y(this,arguments,function*({forcePrompt:e=!1,throwOnNotAllowed:n=!1}={}){yield Jr(`permission-prompt-${this.permission.queryName}`,()=>y(this,null,function*(){if((yield this.getState())!=="prompt"||this.wasPrompted&&!e){let r=this.state==="granted";if(!r&&n)throw new DOMException("Permission was not granted previously, and prompting again is not allowed","NotAllowedError");return r}try{this.wasPrompted=!0;let r=yield navigator.mediaDevices.getUserMedia(this.permission.constraints);return p1(r),!0}catch(r){if(r instanceof DOMException&&r.name==="NotAllowedError"){if(this.logger("info","Browser permission was not granted",{permission:this.permission}),n)throw r;return!1}throw this.logger("error","Failed to getUserMedia",{error:r,permission:this.permission}),r}}))})}listen(e){return this.listeners.add(e),this.state&&e(this.state),()=>this.listeners.delete(e)}asObservable(){return _a(e=>this.listen(e),(e,n)=>n()).pipe(j(e=>e!=="denied"))}setState(e){this.state!==e&&(this.state=e,this.listeners.forEach(n=>n(e)))}};function o1(){return!qe()&&typeof navigator<"u"&&!!navigator.permissions?.query}var qE=Symbol("uninitialized");function iu(t){let e=qE;return()=>(e===qE&&(e=t()),e)}var Xy=(t,e)=>be(y(void 0,null,function*(){let n=yield navigator.mediaDevices.enumerateDevices();return n.some(i=>i.kind===e&&i.label==="")&&(yield t.prompt({throwOnNotAllowed:!0}),n=yield navigator.mediaDevices.enumerateDevices()),n.filter(i=>i.kind===e)})),a1=()=>typeof document>"u"?!1:"setSinkId"in document.createElement("audio"),yI={audio:{autoGainControl:!0,noiseSuppression:!0,echoCancellation:!0}},vI={video:{width:1280,height:720}},fs=iu(()=>new Gl({constraints:yI,queryName:"microphone"})),Kl=iu(()=>new Gl({constraints:vI,queryName:"camera"})),su=iu(()=>navigator.mediaDevices.addEventListener?Ss(navigator.mediaDevices,"devicechange").pipe(j(()=>{}),Fu(500)):be([])),c1=iu(()=>Ds(su(),fs().asObservable()).pipe(Cn(void 0),at(()=>Xy(fs(),"audioinput")),Fe(1))),l1=()=>Ds(su(),Kl().asObservable()).pipe(Cn(void 0),at(()=>Xy(Kl(),"videoinput")),Fe(1)),u1=()=>Ds(su(),fs().asObservable()).pipe(Cn(void 0),at(()=>Xy(fs(),"audiooutput")),Fe(1)),bI=t=>y(void 0,null,function*(){return yield navigator.mediaDevices.getUserMedia(t)}),d1=t=>y(void 0,null,function*(){let e={audio:S(S({},yI.audio),t)};try{return yield fs().prompt({throwOnNotAllowed:!0,forcePrompt:!0}),bI(e)}catch(n){throw _e(["devices"])("error","Failed to get audio stream",{error:n,constraints:e}),n}}),f1=t=>y(void 0,null,function*(){let e={video:S(S({},vI.video),t)};try{return yield Kl().prompt({throwOnNotAllowed:!0,forcePrompt:!0}),bI(e)}catch(n){throw _e(["devices"])("error","Failed to get video stream",{error:n,constraints:e}),n}}),h1=t=>y(void 0,null,function*(){try{return yield navigator.mediaDevices.getDisplayMedia(S({video:!0,audio:{channelCount:{ideal:2},echoCancellation:!1,autoGainControl:!1,noiseSuppression:!1},systemAudio:"include"},t))}catch(e){throw _e(["devices"])("error","Failed to get screen share stream",e),e}}),Jl=typeof navigator<"u"&&typeof navigator.mediaDevices<"u"?su().pipe(Cn(void 0),at(()=>navigator.mediaDevices.enumerateDevices()),Fe(1)):void 0,p1=t=>{t.active&&(t.getTracks().forEach(e=>{e.stop(),t.removeTrack(e)}),typeof t.release=="function"&&t.release())},qo=class{constructor(e,n,r){this.call=e,this.state=n,this.trackType=r,this.stopOnLeave=!0,this.subscriptions=[],this.isTrackStoppedDueToTrackEnd=!1,this.filters=[],this.statusChangeConcurrencyTag=Symbol("statusChangeConcurrencyTag"),this.filterRegistrationConcurrencyTag=Symbol("filterRegistrationConcurrencyTag"),this.dispose=()=>{this.subscriptions.forEach(i=>i())},this.logger=_e([`${T[r].toLowerCase()} manager`]),Jl&&!qe()&&(this.trackType===T.AUDIO||this.trackType===T.VIDEO)&&this.handleDisconnectedOrReplacedDevices()}listDevices(){return this.getDevices()}enable(){return y(this,null,function*(){this.state.optimisticStatus!=="enabled"&&(this.state.setPendingStatus("enabled"),yield VE(this.statusChangeConcurrencyTag,e=>y(this,null,function*(){try{yield this.unmuteStream(),this.state.setStatus("enabled")}finally{e.aborted||this.state.setPendingStatus(this.state.status)}})))})}disable(e=!1){return y(this,null,function*(){this.state.prevStatus=this.state.status,!(!e&&this.state.optimisticStatus==="disabled")&&(this.state.setPendingStatus("disabled"),yield VE(this.statusChangeConcurrencyTag,n=>y(this,null,function*(){try{let r=e||this.state.disableMode==="stop-tracks";yield this.muteStream(r),this.state.setStatus("disabled")}finally{n.aborted||this.state.setPendingStatus(this.state.status)}})))})}statusChangeSettled(){return y(this,null,function*(){yield uP(this.statusChangeConcurrencyTag)})}resume(){return y(this,null,function*(){this.state.prevStatus==="enabled"&&this.state.status==="disabled"&&(yield this.enable())})}toggle(){return y(this,null,function*(){return this.state.optimisticStatus==="enabled"?yield this.disable():yield this.enable()})}registerFilter(e){let n={start:e,stop:void 0};return{registered:Jr(this.filterRegistrationConcurrencyTag,()=>y(this,null,function*(){this.filters.push(n),yield this.applySettingsToStream()})),unregister:()=>Jr(this.filterRegistrationConcurrencyTag,()=>y(this,null,function*(){n.stop?.(),this.filters=this.filters.filter(i=>i!==n),yield this.applySettingsToStream()}))}}setDefaultConstraints(e){this.state.setDefaultConstraints(e)}select(e){return y(this,null,function*(){if(qe())throw new Error("This method is not supported in React Native. Please visit https://getstream.io/video/docs/reactnative/core/camera-and-microphone/#speaker-management for reference.");e!==this.state.selectedDevice&&(this.state.setDevice(e),yield this.applySettingsToStream())})}applySettingsToStream(){return y(this,null,function*(){this.state.status==="enabled"&&(yield this.muteStream(),yield this.unmuteStream())})}getTracks(){return this.state.mediaStream?.getTracks()??[]}muteStream(e=!0){return y(this,null,function*(){if(!this.state.mediaStream)return;this.logger("debug",`${e?"Stopping":"Disabling"} stream`),this.call.state.callingState===F.JOINED&&(yield this.stopPublishStream(e)),this.muteLocalStream(e),this.getTracks().every(r=>r.readyState==="ended")&&(this.state.mediaStream&&typeof this.state.mediaStream.release=="function"&&this.state.mediaStream.release(),this.state.setMediaStream(void 0,void 0),this.filters.forEach(r=>r.stop?.()))})}muteTracks(){this.getTracks().forEach(e=>{e.enabled&&(e.enabled=!1)})}unmuteTracks(){this.getTracks().forEach(e=>{e.enabled||(e.enabled=!0)})}stopTracks(){this.getTracks().forEach(e=>{e.readyState==="live"&&e.stop()})}muteLocalStream(e){this.state.mediaStream&&(e?this.stopTracks():this.muteTracks())}unmuteStream(){return y(this,null,function*(){this.logger("debug","Starting stream");let e,n;if(this.state.mediaStream&&this.getTracks().every(r=>r.readyState==="live"))e=this.state.mediaStream,this.unmuteTracks();else{let r=this.state.defaultConstraints,i=x(S({},r),{deviceId:this.state.selectedDevice}),s=o=>a=>y(this,null,function*(){if(!o)return a;let c=yield o;return a.getTracks().forEach(l=>{let u=l.stop;l.stop=function(){u.call(l),c.getTracks().forEach(f=>{f.kind===l.kind&&f.stop()})}}),c.getTracks().forEach(l=>{let u=()=>{a.getTracks().forEach(d=>{l.kind===d.kind&&(d.stop(),d.dispatchEvent(new Event("ended")))})};l.addEventListener("ended",u),this.subscriptions.push(()=>{l.removeEventListener("ended",u)})}),a});n=this.getStream(i),e=yield this.filters.reduce((o,a)=>o.then(c=>{let{stop:l,output:u}=a.start(c);return a.stop=l,u}).then(s(o),c=>(this.logger("warn","Fitler failed to start and will be ignored",c),o)),n)}this.call.state.callingState===F.JOINED&&(yield this.publishStream(e)),this.state.mediaStream!==e&&(this.state.setMediaStream(e,yield n),this.getTracks().forEach(r=>{r.addEventListener("ended",()=>y(this,null,function*(){yield this.statusChangeSettled(),this.state.status==="enabled"&&(this.isTrackStoppedDueToTrackEnd=!0,setTimeout(()=>{this.isTrackStoppedDueToTrackEnd=!1},2e3),yield this.disable())}))}))})}get mediaDeviceKind(){return this.trackType===T.AUDIO?"audioinput":this.trackType===T.VIDEO?"videoinput":""}handleDisconnectedOrReplacedDevices(){this.subscriptions.push(xt(Jt([Jl.pipe(Uu()),this.state.selectedDevice$]),i=>y(this,[i],function*([[e,n],r]){try{if(!r)return;yield this.statusChangeSettled();let s=!1,o=!1,a=this.findDeviceInList(n,r),c=this.findDeviceInList(e,r);!a&&c?s=!0:a&&c&&a.deviceId===c.deviceId&&a.groupId!==c.groupId&&(o=!0),s&&(yield this.disable(),yield this.select(void 0)),o&&(this.isTrackStoppedDueToTrackEnd&&this.state.status==="disabled"?(yield this.enable(),this.isTrackStoppedDueToTrackEnd=!1):yield this.applySettingsToStream())}catch(s){this.logger("warn","Unexpected error while handling disconnected or replaced device",s)}})))}findDeviceInList(e,n){return e.find(r=>r.deviceId===n&&r.kind===this.mediaDeviceKind)}},zo=class{constructor(e="stop-tracks",n){this.disableMode=e,this.statusSubject=new M(void 0),this.optimisticStatusSubject=new M(void 0),this.mediaStreamSubject=new M(void 0),this.selectedDeviceSubject=new M(void 0),this.defaultConstraintsSubject=new M(void 0),this.mediaStream$=this.mediaStreamSubject.asObservable(),this.selectedDevice$=this.selectedDeviceSubject.asObservable().pipe(Ue()),this.status$=this.statusSubject.asObservable().pipe(Ue()),this.optimisticStatus$=this.optimisticStatusSubject.asObservable().pipe(Ue()),this.defaultConstraints$=this.defaultConstraintsSubject.asObservable(),this.getCurrentValue=hn,this.setCurrentValue=Zl,this.hasBrowserPermission$=n?n.asObservable().pipe(Fe(1)):P(!0)}get status(){return this.getCurrentValue(this.status$)}get optimisticStatus(){return this.getCurrentValue(this.optimisticStatus$)}get selectedDevice(){return this.getCurrentValue(this.selectedDevice$)}get mediaStream(){return this.getCurrentValue(this.mediaStream$)}setStatus(e){this.setCurrentValue(this.statusSubject,e)}setPendingStatus(e){this.setCurrentValue(this.optimisticStatusSubject,e)}setMediaStream(e,n){this.setCurrentValue(this.mediaStreamSubject,e),n&&this.setDevice(this.getDeviceIdFromStream(n))}setDevice(e){this.setCurrentValue(this.selectedDeviceSubject,e)}get defaultConstraints(){return this.getCurrentValue(this.defaultConstraints$)}setDefaultConstraints(e){this.setCurrentValue(this.defaultConstraintsSubject,e)}},My=class extends zo{constructor(){super("stop-tracks",Kl()),this.directionSubject=new M(void 0),this.direction$=this.directionSubject.asObservable().pipe(Ue())}get direction(){return this.getCurrentValue(this.direction$)}setDirection(e){this.setCurrentValue(this.directionSubject,e)}setMediaStream(e,n){if(super.setMediaStream(e,n),e){let r=qe()?this.direction:e.getVideoTracks()[0]?.getSettings().facingMode==="environment"?"back":"front";this.setDirection(r)}}getDeviceIdFromStream(e){let[n]=e.getVideoTracks();return n?.getSettings().deviceId}},Oy=class extends qo{constructor(e){super(e,new My,T.VIDEO),this.targetResolution={width:1280,height:720}}selectDirection(e){return y(this,null,function*(){this.state.setDirection(e),this.state.setDevice(void 0),yield this.applySettingsToStream()})}flip(){return y(this,null,function*(){let e=this.state.direction==="front"?"back":"front";yield this.selectDirection(e)})}selectTargetResolution(e){return y(this,null,function*(){if(this.targetResolution.height=e.height,this.targetResolution.width=e.width,this.state.optimisticStatus==="enabled")try{yield this.statusChangeSettled()}catch(n){this.logger("warn","could not apply target resolution",n)}if(this.state.status==="enabled"){let{width:n,height:r}=this.state.mediaStream.getVideoTracks()[0]?.getSettings();(n!==this.targetResolution.width||r!==this.targetResolution.height)&&(yield this.applySettingsToStream(),this.logger("debug",`${n}x${r} target resolution applied to media stream`))}})}setPreferredCodec(e){this.preferredCodec=e}getDevices(){return l1()}getStream(e){return e.width=this.targetResolution.width,e.height=this.targetResolution.height,!e.deviceId&&this.state.direction&&(e.facingMode=this.state.direction==="front"?"user":"environment"),f1(e)}publishStream(e){return this.call.publishVideoStream(e,{preferredCodec:this.preferredCodec})}stopPublishStream(e){return this.call.stopPublish(T.VIDEO,e)}},Py=class extends zo{constructor(e){super(e,fs()),this.speakingWhileMutedSubject=new M(!1),this.speakingWhileMuted$=this.speakingWhileMutedSubject.asObservable().pipe(Ue())}get speakingWhileMuted(){return this.getCurrentValue(this.speakingWhileMuted$)}setSpeakingWhileMuted(e){this.setCurrentValue(this.speakingWhileMutedSubject,e)}getDeviceIdFromStream(e){let[n]=e.getAudioTracks();return n?.getSettings().deviceId}},m1=500,g1=150,y1=128,v1=(t,e,n={})=>{let{detectionFrequencyInMs:r=m1,audioLevelThreshold:i=g1,fftSize:s=y1,destroyStreamOnStop:o=!0}=n,a=new AudioContext,c=a.createAnalyser();c.fftSize=s;let l=a.createMediaStreamSource(t);l.connect(c);let u=setInterval(()=>{let d=new Uint8Array(c.frequencyBinCount);c.getByteFrequencyData(d);let f=d.some(m=>m>=i),h=d.reduce((m,C)=>m+C,0)/d.length,p=h>i?100:Math.round(h/i*100);t.getAudioTracks()[0]?.enabled?e({isSoundDetected:f,audioLevel:p}):e({isSoundDetected:!1,audioLevel:0})},r);return function(){return y(this,null,function*(){clearInterval(u),l.disconnect(),c.disconnect(),a.state!=="closed"&&(yield a.close()),o&&t.getTracks().forEach(f=>{f.stop(),t.removeTrack(f)})})}},b1=.2,Fy=class{constructor(){this.pc1=new RTCPeerConnection({}),this.pc2=new RTCPeerConnection({})}start(){return y(this,null,function*(){try{let e=yield navigator.mediaDevices.getUserMedia({audio:!0});this.pc1.addEventListener("icecandidate",s=>y(this,null,function*(){yield this.pc2.addIceCandidate(s.candidate)})),this.pc2.addEventListener("icecandidate",s=>y(this,null,function*(){yield this.pc1.addIceCandidate(s.candidate)})),e.getTracks().forEach(s=>this.pc1.addTrack(s,e));let n=yield this.pc1.createOffer({});yield this.pc2.setRemoteDescription(n),yield this.pc1.setLocalDescription(n);let r=yield this.pc2.createAnswer();yield this.pc1.setRemoteDescription(r),yield this.pc2.setLocalDescription(r),e.getAudioTracks().forEach(s=>s.enabled=!1)}catch(e){console.error("Error connecting and negotiating between PeerConnections:",e)}})}stop(){this.pc1.close(),this.pc2.close(),this.intervalId&&clearInterval(this.intervalId)}onSpeakingDetectedStateChange(e){return this.intervalId=setInterval(()=>y(this,null,function*(){let n=yield this.pc1.getStats(),i=zl(n).find(s=>s.type==="media-source"&&s.kind==="audio");if(i){let{audioLevel:s}=i;s&&(s>=b1?e({isSoundDetected:!0,audioLevel:s}):e({isSoundDetected:!1,audioLevel:0}))}}),1e3),()=>{clearInterval(this.intervalId)}}},Ly=class extends qo{constructor(e,n=qe()?"disable-tracks":"stop-tracks"){super(e,new Py(n),T.AUDIO),this.speakingWhileMutedNotificationEnabled=!0,this.soundDetectorConcurrencyTag=Symbol("soundDetectorConcurrencyTag"),this.subscriptions.push(xt(Jt([this.call.state.callingState$,this.call.state.ownCapabilities$,this.state.selectedDevice$,this.state.status$]),a=>y(this,[a],function*([r,i,s,o]){try{if(r===F.LEFT&&(yield this.stopSpeakingWhileMutedDetection()),r!==F.JOINED||!this.speakingWhileMutedNotificationEnabled)return;i.includes(Nt.SEND_AUDIO)?o==="disabled"?yield this.startSpeakingWhileMutedDetection(s):yield this.stopSpeakingWhileMutedDetection():yield this.stopSpeakingWhileMutedDetection()}catch(c){this.logger("warn","Could not enable speaking while muted",c)}}))),this.subscriptions.push(xt(this.call.state.callingState$,r=>{if(!this.noiseCancellationRegistration||!this.noiseCancellation)return;this.call.state.settings?.audio.noise_cancellation?.mode===um.AUTO_ON&&r===F.JOINED?this.noiseCancellationRegistration.then(()=>this.noiseCancellation?.enable()).catch(s=>(this.logger("warn","Failed to enable noise cancellation",s),this.call.notifyNoiseCancellationStopped())):r===F.LEFT&&this.noiseCancellationRegistration.then(()=>this.noiseCancellation?.disable()).catch(s=>{this.logger("warn","Failed to disable noise cancellation",s)})}))}enableNoiseCancellation(e){return y(this,null,function*(){if(qe())throw new Error("Noise cancellation is not supported in React Native");let{ownCapabilities:n,settings:r}=this.call.state;if(!n.includes(Nt.ENABLE_NOISE_CANCELLATION))throw new Error("Noise cancellation is not available.");let s=r?.audio.noise_cancellation;if(!s||s.mode===um.DISABLED)throw new Error("Noise cancellation is disabled for this call type.");try{this.noiseCancellation=e,this.noiseCancellationChangeUnsubscribe=this.noiseCancellation.on("change",a=>{a?this.call.notifyNoiseCancellationStarting().catch(c=>{this.logger("warn","notifyNoiseCancellationStart failed",c)}):this.call.notifyNoiseCancellationStopped().catch(c=>{this.logger("warn","notifyNoiseCancellationStop failed",c)})});let o=this.registerFilter(e.toFilter());this.noiseCancellationRegistration=o.registered,this.uregisterNoiseCancellation=o.unregister,yield this.noiseCancellationRegistration,s.mode===um.AUTO_ON&&this.call.state.callingState===F.JOINED&&e.enable()}catch(o){this.logger("warn","Failed to enable noise cancellation",o),yield this.disableNoiseCancellation().catch(a=>{this.logger("warn","Failed to disable noise cancellation",a)})}})}disableNoiseCancellation(){return y(this,null,function*(){if(qe())throw new Error("Noise cancellation is not supported in React Native");yield(this.uregisterNoiseCancellation?.()??Promise.resolve()).then(()=>this.noiseCancellation?.disable()).then(()=>this.noiseCancellationChangeUnsubscribe?.()).catch(e=>{this.logger("warn","Failed to unregister noise cancellation",e)}),yield this.call.notifyNoiseCancellationStopped()})}enableSpeakingWhileMutedNotification(){return y(this,null,function*(){this.speakingWhileMutedNotificationEnabled=!0,this.state.status==="disabled"&&(yield this.startSpeakingWhileMutedDetection(this.state.selectedDevice))})}disableSpeakingWhileMutedNotification(){return y(this,null,function*(){this.speakingWhileMutedNotificationEnabled=!1,yield this.stopSpeakingWhileMutedDetection()})}getDevices(){return c1()}getStream(e){return d1(e)}publishStream(e){return this.call.publishAudioStream(e)}stopPublishStream(e){return this.call.stopPublish(T.AUDIO,e)}startSpeakingWhileMutedDetection(e){return y(this,null,function*(){yield Jr(this.soundDetectorConcurrencyTag,()=>y(this,null,function*(){if(yield this.stopSpeakingWhileMutedDetection(),qe()){this.rnSpeechDetector=new Fy,yield this.rnSpeechDetector.start();let n=this.rnSpeechDetector?.onSpeakingDetectedStateChange(r=>{this.state.setSpeakingWhileMuted(r.isSoundDetected)});this.soundDetectorCleanup=()=>{n(),this.rnSpeechDetector?.stop(),this.rnSpeechDetector=void 0}}else{let n=yield this.getStream({deviceId:e});this.soundDetectorCleanup=v1(n,r=>{this.state.setSpeakingWhileMuted(r.isSoundDetected)})}}))})}stopSpeakingWhileMutedDetection(){return y(this,null,function*(){yield Jr(this.soundDetectorConcurrencyTag,()=>y(this,null,function*(){if(!this.soundDetectorCleanup)return;let e=this.soundDetectorCleanup;this.soundDetectorCleanup=void 0,this.state.setSpeakingWhileMuted(!1),yield e()}))})}},jy=class extends zo{constructor(){super(...arguments),this.audioEnabledSubject=new M(!0),this.settingsSubject=new M(void 0),this.audioEnabled$=this.audioEnabledSubject.asObservable().pipe(Ue()),this.settings$=this.settingsSubject.asObservable(),this.getDeviceIdFromStream=e=>{let[n]=e.getTracks();return n?.getSettings().deviceId}}get audioEnabled(){return this.getCurrentValue(this.audioEnabled$)}setAudioEnabled(e){this.setCurrentValue(this.audioEnabledSubject,e)}get settings(){return this.getCurrentValue(this.settings$)}setSettings(e){this.setCurrentValue(this.settingsSubject,e)}},Uy=class extends qo{constructor(e){super(e,new jy,T.SCREEN_SHARE),this.subscriptions.push(xt(e.state.settings$,n=>{let r=n?.screensharing.target_resolution;r&&this.setDefaultConstraints({video:{width:r.width,height:r.height}})}))}enableScreenShareAudio(){this.state.setAudioEnabled(!0)}disableScreenShareAudio(){return y(this,null,function*(){this.state.setAudioEnabled(!1),this.call.publisher?.isPublishing(T.SCREEN_SHARE_AUDIO)&&(yield this.call.stopPublish(T.SCREEN_SHARE_AUDIO,!0))})}getSettings(){return this.state.settings}setSettings(e){this.state.setSettings(e)}getDevices(){return P([])}getStream(e){return this.state.audioEnabled||(e.audio=!1),h1(e)}publishStream(e){return this.call.publishScreenShareStream(e,{screenShareSettings:this.state.settings})}stopPublishStream(e){return y(this,null,function*(){yield this.call.stopPublish(T.SCREEN_SHARE,e),yield this.call.stopPublish(T.SCREEN_SHARE_AUDIO,e)})}select(e){return y(this,null,function*(){throw new Error("This method is not supported in for Screen Share")})}},By=class{constructor(){this.selectedDeviceSubject=new M(""),this.volumeSubject=new M(1),this.isDeviceSelectionSupported=a1(),this.getCurrentValue=hn,this.setCurrentValue=Zl,this.selectedDevice$=this.selectedDeviceSubject.asObservable().pipe(Ue()),this.volume$=this.volumeSubject.asObservable().pipe(Ue())}get selectedDevice(){return this.getCurrentValue(this.selectedDevice$)}get volume(){return this.getCurrentValue(this.volume$)}setDevice(e){this.setCurrentValue(this.selectedDeviceSubject,e)}setVolume(e){this.setCurrentValue(this.volumeSubject,e)}},Vy=class{constructor(e){this.state=new By,this.subscriptions=[],this.dispose=()=>{this.subscriptions.forEach(n=>n.unsubscribe())},this.call=e,Jl&&!qe()&&this.subscriptions.push(Jt([Jl,this.state.selectedDevice$]).subscribe(([n,r])=>{if(!r)return;n.find(s=>s.deviceId===r&&s.kind==="audiooutput")||this.select("")}))}listDevices(){if(qe())throw new Error("This feature is not supported in React Native. Please visit https://getstream.io/video/docs/reactnative/core/camera-and-microphone/#speaker-management for more details");return u1()}select(e){if(qe())throw new Error("This feature is not supported in React Native. Please visit https://getstream.io/video/docs/reactnative/core/camera-and-microphone/#speaker-management for more details");this.state.setDevice(e)}setVolume(e){if(qe())throw new Error("This feature is not supported in React Native. Please visit https://getstream.io/video/docs/reactnative/core/camera-and-microphone/#speaker-management for more details");if(e&&(e<0||e>1))throw new Error("Volume must be between 0 and 1");this.state.setVolume(e)}setParticipantVolume(e,n){if(qe())throw new Error("This feature is not supported in React Native. Please visit https://getstream.io/video/docs/reactnative/core/camera-and-microphone/#speaker-management for more details");if(n&&(n<0||n>1))throw new Error("Volume must be between 0 and 1, or undefined");this.call.state.updateParticipant(e,{audioVolume:n})}},zr=class{constructor({type:e,id:n,streamClient:r,members:i,ownCapabilities:s,sortParticipantsBy:o,clientStore:a,ringing:c=!1,watching:l=!1}){this.state=new Sy,this.dynascaleManager=new xy(this),this.permissionsContext=new Ny,this.dispatcher=new by,this.trackSubscriptionsSubject=new M({type:Wt.MEDIUM,data:[]}),this.reconnectAttempts=0,this.maxReconnectAttempts=10,this.isLeaving=!1,this.initialized=!1,this.joinLeaveConcurrencyTag=Symbol("joinLeaveConcurrencyTag"),this.leaveCallHooks=new Set,this.streamClientEventHandlers=new Map,this.on=(f,h)=>{if(LE(f))return this.dispatcher.on(f,h);let p=this.streamClient.on(f,m=>{let C=m;C.call_cid&&C.call_cid===this.cid&&h(C)});return this.streamClientEventHandlers.set(h,p),()=>{this.off(f,h)}},this.off=(f,h)=>{if(LE(f))return this.dispatcher.off(f,h);let p=this.streamClientEventHandlers.get(h);p&&p()},this.leave=(...p)=>y(this,[...p],function*({reject:f=!1,reason:h="user is leaving the call"}={}){yield Jr(this.joinLeaveConcurrencyTag,()=>y(this,null,function*(){let m=this.state.callingState;if(m===F.LEFT)throw new Error("Cannot leave call that has already been left.");if(m===F.JOINING&&(yield this.assertCallJoined()),this.isLeaving=!0,this.ringing){let v=this.state.remoteParticipants.length>0;this.isCreatedByMe&&!v&&m===F.RINGING?yield this.reject():f&&m===F.RINGING&&(yield this.reject())}this.statsReporter?.stop(),this.statsReporter=void 0,this.sfuStatsReporter?.stop(),this.sfuStatsReporter=void 0,this.subscriber?.close(),this.subscriber=void 0,this.publisher?.close(),this.publisher=void 0,this.sfuClient?.close(qr.NORMAL_CLOSURE,h),this.sfuClient=void 0,this.state.setCallingState(F.LEFT),this.leaveCallHooks.forEach(v=>v()),this.initialized=!1,this.clientStore.unregisterCall(this),this.camera.dispose(),this.microphone.dispose(),this.screenShare.dispose(),this.speaker.dispose();let C=[];this.camera.stopOnLeave&&C.push(this.camera.disable(!0)),this.microphone.stopOnLeave&&C.push(this.microphone.disable(!0)),this.screenShare.stopOnLeave&&C.push(this.screenShare.disable(!0)),yield Promise.all(C)}))}),this.get=f=>y(this,null,function*(){yield this.setup();let h=yield this.streamClient.get(this.streamClientBasePath,f);return this.state.updateFromCallResponse(h.call),this.state.setMembers(h.members),this.state.setOwnCapabilities(h.own_capabilities),(f?.ring||this.ringing)&&this.ringingSubject.next(!0),this.streamClient._hasConnectionID()&&(this.watching=!0,this.clientStore.registerCall(this)),yield this.applyDeviceConfig(),h}),this.getOrCreate=f=>y(this,null,function*(){yield this.setup();let h=yield this.streamClient.post(this.streamClientBasePath,f);return this.state.updateFromCallResponse(h.call),this.state.setMembers(h.members),this.state.setOwnCapabilities(h.own_capabilities),(f?.ring||this.ringing)&&this.ringingSubject.next(!0),this.streamClient._hasConnectionID()&&(this.watching=!0,this.clientStore.registerCall(this)),yield this.applyDeviceConfig(),h}),this.create=f=>y(this,null,function*(){return this.getOrCreate(f)}),this.ring=()=>y(this,null,function*(){return yield this.get({ring:!0})}),this.notify=()=>y(this,null,function*(){return yield this.get({notify:!0})}),this.accept=()=>y(this,null,function*(){return this.streamClient.post(`${this.streamClientBasePath}/accept`)}),this.reject=f=>y(this,null,function*(){return this.streamClient.post(`${this.streamClientBasePath}/reject`,{reason:f})}),this.join=f=>y(this,null,function*(){yield this.setup();let h=this.state.callingState;if([F.JOINED,F.JOINING].includes(h))throw this.logger("warn","Join method called twice, you should only call this once"),new Error("Illegal State: Already joined.");let p=h===F.MIGRATING,m=h===F.RECONNECTING;this.state.setCallingState(F.JOINING),this.logger("debug","Starting join flow"),f?.ring&&!this.ringing&&this.ringingSubject.next(!0),this.ringing&&!this.isCreatedByMe&&(yield this.accept());let C,v,E,_;try{if(this.sfuClient?.isFastReconnecting)E=this.publisher?.connectionConfiguration,C=this.sfuClient.sfuServer,v=this.sfuClient.token,_=this.sfuStatsReporter?.options;else{let V=yield YP(this.streamClient,this.type,this.id,f);this.state.updateFromCallResponse(V.metadata),this.state.setMembers(V.members),this.state.setOwnCapabilities(V.ownCapabilities),E=V.connectionConfig,C=V.sfuServer,v=V.token,_=V.statsOptions}this.streamClient._hasConnectionID()&&(this.watching=!0,this.clientStore.registerCall(this))}catch(V){throw this.state.setCallingState(h),V}let A=this.sfuClient,O=this.sfuClient=new qr({dispatcher:this.dispatcher,sfuServer:C,token:v,sessionId:A?.sessionId}),K=(V,ve)=>y(this,null,function*(){let tt=this.state.callingState;if(tt===F.MIGRATING||tt===F.RECONNECTING)return;this.reconnectAttempts++,this.state.setCallingState(V==="migrate"?F.MIGRATING:F.RECONNECTING),V==="migrate"?(this.logger("debug",`[Migration]: migrating call ${this.cid} away from ${C.edge_name}`),O.isMigratingAway=!0):this.logger("debug",`[Rejoin]: ${V} rejoin call ${this.cid} (${this.reconnectAttempts})...`);let xe=this.state.localParticipant;if(V==="fast"?O.close(qr.ERROR_CONNECTION_BROKEN,`attempting fast reconnect: ${ve}`):V==="full"&&(yield pn(Qr(this.reconnectAttempts)),this.subscriber?.close(),this.subscriber=void 0,this.publisher?.close({stopTracks:!1}),this.publisher=void 0,this.statsReporter?.stop(),this.statsReporter=void 0,this.sfuStatsReporter?.stop(),this.sfuStatsReporter=void 0,O.close(qr.NORMAL_CLOSURE,`attempting full reconnect: ${ve}`)),yield this.join(S(S({},f),V==="migrate"&&{migrating_from:C.edge_name})),V==="migrate"&&O.close(qr.NORMAL_CLOSURE,"attempting migration"),this.logger("info",`[Rejoin]: Attempt ${this.reconnectAttempts} successful!`),xe&&V==="full"){let{audioStream:nt,videoStream:mn,screenShareStream:gn,screenShareAudioStream:Qe}=xe,rt;(gn||Qe)&&(rt=new MediaStream,gn?.getVideoTracks().forEach(it=>{rt?.addTrack(it)}),Qe?.getAudioTracks().forEach(it=>{rt?.addTrack(it)})),nt&&(yield this.publishAudioStream(nt)),mn&&(yield this.publishVideoStream(mn,{preferredCodec:this.camera.preferredCodec})),rt&&(yield this.publishScreenShareStream(rt)),this.logger("info",`[Rejoin]: State restored. Attempt: ${this.reconnectAttempts}`)}});O.signalReady.then(()=>{let V=this.dispatcher.on("goAway",ve=>{let{reason:tt}=ve;this.logger("info",`[Migration]: Going away from SFU... Reason: ${Wl[tt]}`),K("migrate",Wl[tt]).catch(xe=>{this.logger("warn","[Migration]: Failed to migrate to another SFU.",xe)})});O.signalWs.addEventListener("close",ve=>{if(V(),this.isLeaving||ve.code===qr.NORMAL_CLOSURE||ve.code===On.WS_POLICY_VIOLATION)return;let tt=ve.code===On.WS_CLOSED_ABRUPTLY&&O.isMigratingAway,xe=ve.code===On.WS_CLOSED_ABRUPTLY&&O.isFastReconnecting;if(!(tt||xe)&&ve.code!==qr.ERROR_CONNECTION_BROKEN)if(this.reconnectAttempts<this.maxReconnectAttempts){O.isFastReconnecting=this.reconnectAttempts===0;let nt=O.isFastReconnecting?"fast":"full";K(nt,`SFU closed the WS with code: ${ve.code}`).catch(mn=>{this.logger("error",`[Rejoin]: ${nt} rejoin failed for ${this.reconnectAttempts} times. Giving up.`,mn),this.state.setCallingState(F.RECONNECTING_FAILED)})}else this.logger("error","[Rejoin]: Reconnect attempts exceeded. Giving up..."),this.state.setCallingState(F.RECONNECTING_FAILED)})});let se=this.streamClient.on("connection.changed",V=>y(this,null,function*(){if(V.type!=="connection.changed"||!V.online)return;se();let ve=this.state.callingState;if(!(ve===F.OFFLINE||ve===F.RECONNECTING_FAILED))return;this.logger("info","[Rejoin]: Going online...");let xe=!0;do{try{O.isFastReconnecting=xe,yield K(xe?"fast":"full","Network: online");return}catch(nt){this.logger("error",`[Rejoin][Network]: Rejoin failed for attempt ${this.reconnectAttempts}`,nt)}yield pn(Qr(this.reconnectAttempts)),xe=!1}while(this.reconnectAttempts<this.maxReconnectAttempts);this.logger("error","[Rejoin][Network]: Rejoin failed. Giving up."),this.state.setCallingState(F.RECONNECTING_FAILED)})),Ee=this.streamClient.on("connection.changed",V=>{V.type==="connection.changed"&&(V.online||(Ee(),this.state.setCallingState(F.OFFLINE)))});this.leaveCallHooks.add(()=>{se(),Ee()}),this.subscriber||(this.subscriber=new Ty({sfuClient:O,dispatcher:this.dispatcher,state:this.state,connectionConfig:E,onUnrecoverableError:()=>{K("full","unrecoverable subscriber error").catch(V=>{this.logger("debug","[Rejoin]: Rejoin failed",V)})}}));let et=this.streamClient.user?.type==="anonymous";if(!this.publisher&&!et){let V=this.state.settings?.audio,ve=!!V?.opus_dtx_enabled,tt=!!V?.redundant_coding_enabled;this.publisher=new Iy({sfuClient:O,dispatcher:this.dispatcher,state:this.state,connectionConfig:E,isDtxEnabled:ve,isRedEnabled:tt,onUnrecoverableError:()=>{K("full","unrecoverable publisher error").catch(xe=>{this.logger("debug","[Rejoin]: Rejoin failed",xe)})}})}this.statsReporter||(this.statsReporter=t1({subscriber:this.subscriber,publisher:this.publisher,state:this.state,datacenter:this.sfuClient.edgeName}));let lr=jE();!this.sfuStatsReporter&&_&&(this.sfuStatsReporter=new ky(O,{clientDetails:lr,options:_,subscriber:this.subscriber,publisher:this.publisher}),this.sfuStatsReporter.start());try{O.signalReady.catch(Qe=>this.logger("error","Signal ready failed",Qe)).then(()=>zO("recvonly")).then(Qe=>{let rt=hn(this.trackSubscriptionsSubject),it=p?{fromSfuId:f?.migrating_from||"",subscriptions:rt.data||[],announcedTracks:this.publisher?.getCurrentTrackInfos()||[]}:void 0;return O.join({subscriberSdp:Qe||"",clientDetails:lr,migration:it,fastReconnect:A?.isFastReconnecting??!1})});let{callState:V,reconnected:ve}=yield this.waitForJoinResponse();if(m&&this.logger("debug","[Rejoin] fast reconnected:",ve),p)yield this.subscriber.migrateTo(O,E),yield this.publisher?.migrateTo(O,E);else if(m){if(ve)this.subscriber.setSfuClient(O),this.publisher&&(this.publisher.setSfuClient(O),yield this.publisher.restartIce());else if(A?.isFastReconnecting)return yield K("full","re-attempting").catch(Qe=>{this.logger("error","[Rejoin]: Rejoin failed forced full rejoin.",Qe)})}let tt=V?.participants||[],xe=V?.participantCount,nt=V?.startedAt?Ct.toDate(V.startedAt):new Date,mn=V?.pins??[];this.state.setParticipants(()=>{let Qe=this.state.getParticipantLookupBySessionId();return tt.map(rt=>{let it=Qe[rt.sessionId];return Object.assign(rt,it,{isLocalParticipant:rt.sessionId===O.sessionId,viewportVisibilityState:it?.viewportVisibilityState??{videoTrack:Oe.UNKNOWN,screenShareTrack:Oe.UNKNOWN}})})}),this.state.setParticipantCount(xe?.total||0),this.state.setAnonymousParticipantCount(xe?.anonymous||0),this.state.setStartedAt(nt),this.state.setServerSidePins(mn),this.reconnectAttempts=0,this.state.setCallingState(F.JOINED);try{yield this.initCamera({setStatus:!0}),yield this.initMic({setStatus:!0})}catch(Qe){this.logger("warn","Camera and/or mic init failed during join call",Qe)}let{remoteParticipants:gn}=this.state;gn.length>0&&this.updateSubscriptions(gn,Wt.FAST),this.logger("info",`Joined call ${this.cid}`)}catch(V){if(this.reconnectAttempts<this.maxReconnectAttempts)this.logger("error",`[Rejoin]: Rejoin ${this.reconnectAttempts} failed.`,V),yield K("full","previous attempt failed"),this.logger("info",`[Rejoin]: Rejoin ${this.reconnectAttempts} successful!`);else throw this.logger("error",`[Rejoin]: Rejoin failed for ${this.reconnectAttempts} times. Giving up.`),this.state.setCallingState(F.RECONNECTING_FAILED),new Error("Join failed")}}),this.waitForJoinResponse=(f=5e3)=>new Promise((h,p)=>{let m=this.on("joinResponse",v=>{clearTimeout(C),m(),h(v)}),C=setTimeout(()=>{m(),p(new Error('Waiting for "joinResponse" has timed out'))},f)}),this.publishVideoStream=(p,...m)=>y(this,[p,...m],function*(f,h={}){if(yield this.assertCallJoined(),!this.publisher)throw this.logger("error","Trying to publish video before join is completed"),new Error("Call not joined yet.");let[C]=f.getVideoTracks();if(!C){this.logger("error","There is no video track to publish in the stream.");return}yield this.publisher.publishStream(f,C,T.VIDEO,h)}),this.publishAudioStream=f=>y(this,null,function*(){if(yield this.assertCallJoined(),!this.publisher)throw this.logger("error","Trying to publish audio before join is completed"),new Error("Call not joined yet.");let[h]=f.getAudioTracks();if(!h){this.logger("error","There is no audio track in the stream to publish");return}yield this.publisher.publishStream(f,h,T.AUDIO)}),this.publishScreenShareStream=(p,...m)=>y(this,[p,...m],function*(f,h={}){if(yield this.assertCallJoined(),!this.publisher)throw this.logger("error","Trying to publish screen share before join is completed"),new Error("Call not joined yet.");let[C]=f.getVideoTracks();if(!C){this.logger("error","There is no video track in the screen share stream to publish");return}yield this.publisher.publishStream(f,C,T.SCREEN_SHARE,h);let[v]=f.getAudioTracks();v&&(yield this.publisher.publishStream(f,v,T.SCREEN_SHARE_AUDIO,h))}),this.stopPublish=(f,h=!0)=>y(this,null,function*(){this.logger("info",`stopPublish ${T[f]}, stop tracks: ${h}`),yield this.publisher?.unpublishStream(f,h)}),this.notifyNoiseCancellationStarting=()=>y(this,null,function*(){return this.sfuClient?.startNoiseCancellation().catch(f=>{this.logger("warn","Failed to notify start of noise cancellation",f)})}),this.notifyNoiseCancellationStopped=()=>y(this,null,function*(){return this.sfuClient?.stopNoiseCancellation().catch(f=>{this.logger("warn","Failed to notify stop of noise cancellation",f)})}),this.updateSubscriptionsPartial=(f,h,p=Wt.SLOW)=>{f==="video"?(this.logger("warn",`updateSubscriptionsPartial: ${f} is deprecated. Please switch to 'videoTrack'`),f="videoTrack"):f==="screen"&&(this.logger("warn",`updateSubscriptionsPartial: ${f} is deprecated. Please switch to 'screenShareTrack'`),f="screenShareTrack");let m=this.state.updateParticipants(Object.entries(h).reduce((C,[v,E])=>{E.dimension?.height&&(E.dimension.height=Math.ceil(E.dimension.height)),E.dimension?.width&&(E.dimension.width=Math.ceil(E.dimension.width));let _=f==="videoTrack"?"videoDimension":f==="screenShareTrack"?"screenShareDimension":void 0;return _&&(C[v]={[_]:E.dimension}),C},{}));m&&this.updateSubscriptions(m,p)},this.updateSubscriptions=(f,h=Wt.SLOW)=>{let p=[];for(let m of f)m.isLocalParticipant||(m.videoDimension&&is(m)&&p.push({userId:m.userId,sessionId:m.sessionId,trackType:T.VIDEO,dimension:m.videoDimension}),m.screenShareDimension&&Gr(m)&&p.push({userId:m.userId,sessionId:m.sessionId,trackType:T.SCREEN_SHARE,dimension:m.screenShareDimension}),pP(m)&&p.push({userId:m.userId,sessionId:m.sessionId,trackType:T.SCREEN_SHARE_AUDIO}));this.trackSubscriptionsSubject.next({type:h,data:p})},this.startReportingStatsFor=f=>this.statsReporter?.startReportingStatsFor(f),this.stopReportingStatsFor=f=>this.statsReporter?.stopReportingStatsFor(f),this.resetReaction=f=>{this.state.updateParticipant(f,{reaction:void 0})},this.setSortParticipantsBy=f=>this.state.setSortParticipantsBy(f),this.updatePublishQuality=f=>y(this,null,function*(){return this.publisher?.updateVideoPublishQuality(f)}),this.assertCallJoined=()=>new Promise(f=>{this.state.callingState$.pipe(Is(h=>h!==F.JOINED,!0),ot(h=>h===F.JOINED)).subscribe(()=>f())}),this.sendReaction=f=>y(this,null,function*(){return this.streamClient.post(`${this.streamClientBasePath}/reaction`,f)}),this.blockUser=f=>y(this,null,function*(){return this.streamClient.post(`${this.streamClientBasePath}/block`,{user_id:f})}),this.unblockUser=f=>y(this,null,function*(){return this.streamClient.post(`${this.streamClientBasePath}/unblock`,{user_id:f})}),this.muteSelf=f=>{let h=this.currentUserId;if(h)return this.muteUser(h,f)},this.muteOthers=f=>{let h=lP(f);if(!h)return;let p=[];for(let m of this.state.remoteParticipants)m.publishedTracks.includes(h)&&p.push(m.userId);if(p.length>0)return this.muteUser(p,f)},this.muteUser=(f,h)=>this.streamClient.post(`${this.streamClientBasePath}/mute_users`,{user_ids:Array.isArray(f)?f:[f],[h]:!0}),this.muteAllUsers=f=>this.streamClient.post(`${this.streamClientBasePath}/mute_users`,{mute_all_users:!0,[f]:!0}),this.startRecording=f=>y(this,null,function*(){return this.streamClient.post(`${this.streamClientBasePath}/start_recording`,f||{})}),this.stopRecording=()=>y(this,null,function*(){return this.streamClient.post(`${this.streamClientBasePath}/stop_recording`,{})}),this.startTranscription=f=>y(this,null,function*(){return this.streamClient.post(`${this.streamClientBasePath}/start_transcription`,f)}),this.stopTranscription=()=>y(this,null,function*(){return this.streamClient.post(`${this.streamClientBasePath}/stop_transcription`)}),this.requestPermissions=f=>y(this,null,function*(){let{permissions:h}=f;if(!h.every(m=>this.permissionsContext.canRequest(m)))throw new Error(`You are not allowed to request permissions: ${h.join(", ")}`);return this.streamClient.post(`${this.streamClientBasePath}/request_permission`,f)}),this.grantPermissions=(f,h)=>y(this,null,function*(){return this.updateUserPermissions({user_id:f,grant_permissions:h})}),this.revokePermissions=(f,h)=>y(this,null,function*(){return this.updateUserPermissions({user_id:f,revoke_permissions:h})}),this.updateUserPermissions=f=>y(this,null,function*(){return this.streamClient.post(`${this.streamClientBasePath}/user_permissions`,f)}),this.goLive=(...p)=>y(this,[...p],function*(f={},h){return this.streamClient.post(`${this.streamClientBasePath}/go_live`,f,h)}),this.stopLive=()=>y(this,null,function*(){return this.streamClient.post(`${this.streamClientBasePath}/stop_live`,{})}),this.startHLS=()=>y(this,null,function*(){return this.streamClient.post(`${this.streamClientBasePath}/start_broadcasting`,{})}),this.stopHLS=()=>y(this,null,function*(){return this.streamClient.post(`${this.streamClientBasePath}/stop_broadcasting`,{})}),this.update=f=>y(this,null,function*(){let h=yield this.streamClient.patch(`${this.streamClientBasePath}`,f),{call:p,members:m,own_capabilities:C}=h;return this.state.updateFromCallResponse(p),this.state.setMembers(m),this.state.setOwnCapabilities(C),h}),this.endCall=()=>y(this,null,function*(){return this.streamClient.post(`${this.streamClientBasePath}/mark_ended`)}),this.pin=f=>{this.state.updateParticipant(f,{pin:{isLocalPin:!0,pinnedAt:Date.now()}})},this.unpin=f=>{this.state.updateParticipant(f,{pin:void 0})},this.pinForEveryone=f=>y(this,null,function*(){return this.streamClient.post(`${this.streamClientBasePath}/pin`,f)}),this.unpinForEveryone=f=>y(this,null,function*(){return this.streamClient.post(`${this.streamClientBasePath}/unpin`,f)}),this.queryMembers=f=>this.streamClient.post("/call/members",x(S({},f||{}),{id:this.id,type:this.type})),this.updateCallMembers=f=>y(this,null,function*(){return this.streamClient.post(`${this.streamClientBasePath}/members`,f)}),this.scheduleAutoDrop=()=>{clearTimeout(this.dropTimeout),this.leaveCallHooks.add(xt(this.state.settings$,f=>{if(!f||this.state.callingState!==F.RINGING)return;let h=f.ring.auto_cancel_timeout_ms;h<=0||(clearTimeout(this.dropTimeout),this.dropTimeout=setTimeout(()=>{this.leave({reason:"ring: timeout"}).catch(p=>{this.logger("error","Failed to drop call",p)})},h))}))},this.queryRecordings=f=>y(this,null,function*(){let h=this.streamClientBasePath;return f&&(h=`${h}/${f}`),this.streamClient.get(`${h}/recordings`)}),this.queryTranscriptions=()=>y(this,null,function*(){return this.streamClient.get(`${this.streamClientBasePath}/transcriptions`)}),this.getCallStats=f=>y(this,null,function*(){let h=`${this.streamClientBasePath}/stats/${f}`;return this.streamClient.get(h)}),this.submitFeedback=(m,...C)=>y(this,[m,...C],function*(f,{reason:h,custom:p}={}){if(f<1||f>5)throw new Error("Rating must be between 1 and 5");let v=this.state.session?.id;if(!v)throw new Error("Feedback can be submitted only in the context of a call session");let se=e1(jE()),{sdkName:E,sdkVersion:_}=se,A=fu(se,["sdkName","sdkVersion"]),O=this.sfuClient?.sessionId??"N/A",K=`${this.streamClientBasePath}/feedback/${v}`;return this.streamClient.post(K,{rating:f,reason:h,user_session_id:O,sdk:E,sdk_version:_,custom:x(S({},p),{"x-stream-platform-data":A})})}),this.sendCustomEvent=f=>y(this,null,function*(){return this.streamClient.post(`${this.streamClientBasePath}/event`,{custom:f})}),this.applyDeviceConfig=()=>y(this,null,function*(){yield this.initCamera({setStatus:!1}).catch(f=>{this.logger("warn","Camera init failed",f)}),yield this.initMic({setStatus:!1}).catch(f=>{this.logger("warn","Mic init failed",f)})}),this.trackElementVisibility=(f,h,p)=>this.dynascaleManager.trackElementVisibility(f,h,p),this.setViewport=f=>this.dynascaleManager.setViewport(f),this.bindVideoElement=(f,h,p)=>{let m=this.dynascaleManager.bindVideoElement(f,h,p);if(m)return this.leaveCallHooks.add(m),()=>{this.leaveCallHooks.delete(m),m()}},this.bindAudioElement=(f,h,p="audioTrack")=>{let m=this.dynascaleManager.bindAudioElement(f,h,p);if(m)return this.leaveCallHooks.add(m),()=>{this.leaveCallHooks.delete(m),m()}},this.bindCallThumbnailElement=(f,h={})=>{let p=()=>{f.src=h.fallbackImageSource||"https://getstream.io/random_svg/?name=x&id=x"},m=xt(this.state.thumbnails$,C=>{if(!C)return;f.addEventListener("error",p);let v=new URL(C.image_url);v.searchParams.set("w",String(f.clientWidth)),v.searchParams.set("h",String(f.clientHeight)),f.src=v.toString()});return()=>{m(),f.removeEventListener("error",p)}},this.type=e,this.id=n,this.cid=`${e}:${n}`,this.ringingSubject=new M(c),this.watching=l,this.streamClient=r,this.clientStore=a,this.streamClientBasePath=`/call/${this.type}/${this.id}`,this.logger=_e(["Call"]);let u=s1.get(e),d=o||u.options.sortParticipantsBy;d&&this.state.setSortParticipantsBy(d),this.state.setMembers(i||[]),this.state.setOwnCapabilities(s||[]),this.state.setCallingState(c?F.RINGING:F.IDLE),this.camera=new Oy(this),this.microphone=new Ly(this),this.speaker=new Vy(this),this.screenShare=new Uy(this)}setup(){return y(this,null,function*(){yield Jr(this.joinLeaveConcurrencyTag,()=>y(this,null,function*(){this.initialized||(this.leaveCallHooks.add(this.on("all",e=>{this.state.updateFromEvent(e)})),this.leaveCallHooks.add(QP(this,this.state,this.dispatcher)),this.registerEffects(),this.leaveCallHooks.add(xt(this.trackSubscriptionsSubject.pipe(Pu(e=>Ou(e.type)),j(e=>e.data)),e=>this.sfuClient?.updateSubscriptions(e).catch(n=>{this.logger("debug","Failed to update track subscriptions",n)}))),this.state.callingState===F.LEFT&&this.state.setCallingState(F.IDLE),this.initialized=!0)}))})}registerEffects(){this.leaveCallHooks.add(xt(this.state.settings$,e=>{e&&this.permissionsContext.setCallSettings(e)})),this.leaveCallHooks.add(xt(this.state.ownCapabilities$,e=>{if(this.permissionsContext.setPermissions(e),!this.publisher)return;let n={[Nt.SEND_AUDIO]:T.AUDIO,[Nt.SEND_VIDEO]:T.VIDEO,[Nt.SCREENSHARE]:T.SCREEN_SHARE};for(let[r,i]of Object.entries(n))!this.permissionsContext.hasPermission(r)&&(this.publisher.isPublishing(i)||this.publisher.isLive(i))&&this.stopPublish(i).catch(o=>{this.logger("error",`Error stopping publish ${i}`,o)}).then(()=>{i===T.VIDEO&&this.camera.state.status==="enabled"&&this.camera.disable().catch(o=>this.logger("error","Error disabling camera after permission revoked",o)),i===T.AUDIO&&this.microphone.state.status==="enabled"&&this.microphone.disable().catch(o=>this.logger("error","Error disabling microphone after permission revoked",o))})})),this.leaveCallHooks.add(xt(this.state.blockedUserIds$,e=>y(this,null,function*(){if(!e||e.length===0)return;let n=this.currentUserId;n&&e.includes(n)&&(this.logger("info","Leaving call because of being blocked"),yield this.leave({reason:"user blocked"}).catch(r=>{this.logger("error","Error leaving call after being blocked",r)}))}))),this.leaveCallHooks.add(xt(this.state.callingState$,e=>{this.ringing&&(e===F.JOINED||e===F.JOINING||e===F.LEFT)&&(clearTimeout(this.dropTimeout),this.dropTimeout=void 0)})),this.leaveCallHooks.add(xt(this.ringingSubject,e=>{if(!e)return;let n=this.state.session,r=this.clientStore.connectedUser?.id,i=n?.ended_at,s=this.state.createdBy?.id,o=n?.rejected_by,a=n?.accepted_by,c=!1;i?c=!0:s&&o?o[s]&&(c=!0):r&&o?o[r]&&(c=!0):r&&a&&a[r]&&(c=!0),c?this.state.callingState!==F.IDLE&&this.state.setCallingState(F.IDLE):(this.state.callingState===F.IDLE&&this.state.setCallingState(F.RINGING),this.scheduleAutoDrop(),this.leaveCallHooks.add(hI(this)))}))}get ringing(){return hn(this.ringingSubject)}get currentUserId(){return this.clientStore.connectedUser?.id}get isCreatedByMe(){return this.state.createdBy?.id===this.currentUserId}initCamera(e){return y(this,null,function*(){if(yield this.camera.statusChangeSettled(),this.state.localParticipant?.videoStream||!this.permissionsContext.hasPermission("send-video"))return;if(!this.camera.state.direction&&!this.camera.state.selectedDevice){let r="front",i=this.state.settings?.video.camera_facing;i&&(r=i==="front"?"front":"back"),this.camera.state.setDirection(r)}let n=this.state.settings?.video.target_resolution;n&&(yield this.camera.selectTargetResolution(n)),e.setStatus&&(this.camera.state.status==="enabled"&&this.camera.state.mediaStream&&!this.publisher?.isPublishing(T.VIDEO)&&(yield this.publishVideoStream(this.camera.state.mediaStream,{preferredCodec:this.camera.preferredCodec})),this.camera.state.status===void 0&&this.state.settings?.video.camera_default_on&&(yield this.camera.enable()))})}initMic(e){return y(this,null,function*(){yield this.microphone.statusChangeSettled(),!(this.state.localParticipant?.audioStream||!this.permissionsContext.hasPermission("send-audio"))&&e.setStatus&&(this.microphone.state.status==="enabled"&&this.microphone.state.mediaStream&&!this.publisher?.isPublishing(T.AUDIO)&&(yield this.publishAudioStream(this.microphone.state.mediaStream)),this.microphone.state.status===void 0&&this.state.settings?.audio.mic_default_on&&(yield this.microphone.enable()))})}},w1=null,$y=class{constructor(){this.connectionStartTimestamp=null,this.wsTotalFailures=0,this.wsConsecutiveFailures=0,this.instanceClientId=Ho()}},Hy=(t,e)=>y(void 0,null,function*(){for(let r=0;r<3;r++){try{yield $r.post(`https://chat-insights.getstream.io/insights/${t}`,e)}catch{yield pn((r+1)*3e3);continue}break}});function C1(t,e){return S(S({},e),wI(t))}function wI(t){let{client:e}=t;return{ready_state:t.ws?.readyState,url:t._buildUrl(),api_key:e.key,start_ts:e.insightMetrics.connectionStartTimestamp,end_ts:new Date().getTime(),auth_type:e.getAuthType(),token:e.tokenManager.token,user_id:e.userID,user_details:e._user,device:"browser",client_id:t.connectionID,ws_details:t.ws,ws_consecutive_failures:e.insightMetrics.wsConsecutiveFailures,ws_total_failures:e.insightMetrics.wsTotalFailures,request_id:t.requestID,online:typeof navigator<"u"?navigator?.onLine:null,user_agent:typeof navigator<"u"?navigator?.userAgent:null,instance_client_id:e.insightMetrics.instanceClientId}}function S1(t){return wI(t)}var D1=t=>t.code!==void 0,E1=t=>t.error!==void 0,Wy=class{constructor(e){this._log=(n,r={},i="info")=>{this.client.logger(i,"connection:"+n,S({},r))},this.setClient=n=>{this.client=n},this._buildUrl=()=>{let n=new URLSearchParams;return n.set("api_key",this.client.key),n.set("stream-auth-type",this.client.getAuthType()),n.set("X-Stream-Client",this.client.getUserAgent()),`${this.client.wsBaseURL}/connect?${n.toString()}`},this.onlineStatusChanged=n=>{n.type==="offline"?(this._log("onlineStatusChanged() - Status changing to offline"),this._setHealth(!1,!0)):n.type==="online"&&(this._log(`onlineStatusChanged() - Status changing to online. isHealthy: ${this.isHealthy}`),this.isHealthy||this._reconnect({interval:10}))},this.onopen=n=>{if(this.wsID!==n)return;let r=this.client.user;if(!r){this.client.logger("error","User not set, can't connect to WS");return}let i=this.client._getToken();if(!i){this.client.logger("error","Token not set, can't connect authenticate");return}let s={token:i,user_details:{id:r.id,name:r.name,image:r.image,custom:r.custom}};this.authenticationSent=!0,this.ws?.send(JSON.stringify(s)),this._log("onopen() - onopen callback",{wsID:n})},this.onmessage=(n,r)=>{if(this.wsID!==n)return;this._log("onmessage() - onmessage callback",{event:r,wsID:n});let i=typeof r.data=="string"?JSON.parse(r.data):null;if(!this.isResolved&&i&&i.type==="connection.error"&&(this.isResolved=!0,i.error)){this.rejectPromise?.(this._errorFromWSEvent(i,!1));return}if(this.lastEvent=new Date,i&&(i.type==="health.check"||i.type==="connection.ok")&&this.scheduleNextPing(),i&&i.type==="connection.ok"&&(this.resolvePromise?.(i),this._setHealth(!0)),i&&i.type==="connection.error"&&i.error){let{code:s}=i.error;this.isHealthy=!1,this.isConnecting=!1,this.consecutiveFailures+=1,s===On.TOKEN_EXPIRED&&!this.client.tokenManager.isStatic()&&(clearTimeout(this.connectionCheckTimeoutRef),this._log("connect() - WS failure due to expired token, so going to try to reload token and reconnect"),this._reconnect({refreshToken:!0}))}i&&this.client.dispatchEvent(i),this.scheduleConnectionCheck()},this.onclose=(n,r)=>{if(this.wsID===n)if(this._log("onclose() - onclose callback - "+r.code,{event:r,wsID:n}),r.code===On.WS_CLOSED_SUCCESS){let i=new Error(`WS connection reject with error ${r.reason}`);i.reason=r.reason,i.code=r.code,i.wasClean=r.wasClean,i.target=r.target,this.rejectPromise?.(i),this._log(`onclose() - WS connection reject with error ${r.reason}`,{event:r})}else this.consecutiveFailures+=1,this.totalFailures+=1,this._setHealth(!1),this.isConnecting=!1,this.rejectPromise?.(this._errorFromWSEvent(r)),this._log("onclose() - WS connection closed. Calling reconnect ...",{event:r}),this._reconnect()},this.onerror=(n,r)=>{this.wsID===n&&(this.consecutiveFailures+=1,this.totalFailures+=1,this._setHealth(!1),this.isConnecting=!1,this.rejectPromise?.(this._errorFromWSEvent(r)),this._log("onerror() - WS connection resulted into error",{event:r}),this._reconnect())},this._setHealth=(n,r=!1)=>{if(n!==this.isHealthy){if(this.isHealthy=n,this.isHealthy||r){this.client.dispatchEvent({type:"connection.changed",online:this.isHealthy});return}setTimeout(()=>{this.isHealthy||this.client.dispatchEvent({type:"connection.changed",online:this.isHealthy})},5e3)}},this._errorFromWSEvent=(n,r=!0)=>{let i,s,o;D1(n)&&(i=n.code,s="unknown",o=n.reason),E1(n)&&(i=n.error.code,s=n.error.StatusCode,o=n.error.message),this._log(`_errorFromWSEvent() - WS failed with code ${i}`,{event:n},"warn");let a=new Error(`WS failed with code ${i} and reason - ${o}`);return a.code=i,a.StatusCode=s,a.isWSFailure=r,a},this._setupConnectionPromise=()=>{this.isResolved=!1,this.connectionOpen=new Promise((n,r)=>{this.resolvePromise=n,this.rejectPromise=r})},this.scheduleNextPing=()=>{this.healthCheckTimeoutRef&&clearTimeout(this.healthCheckTimeoutRef),this.healthCheckTimeoutRef=setTimeout(()=>{let n=[{type:"health.check",client_id:this.client.clientID}];try{this.ws?.send(JSON.stringify(n))}catch{}},this.pingInterval)},this.scheduleConnectionCheck=()=>{this.connectionCheckTimeoutRef&&clearTimeout(this.connectionCheckTimeoutRef),this.connectionCheckTimeoutRef=setTimeout(()=>{let n=new Date;this.lastEvent&&n.getTime()-this.lastEvent.getTime()>this.connectionCheckTimeout&&(this._log("scheduleConnectionCheck - going to reconnect"),this._setHealth(!1),this._reconnect())},this.connectionCheckTimeout)},this.client=e,this.consecutiveFailures=0,this.totalFailures=0,this.isConnecting=!1,this.authenticationSent=!1,this.isDisconnected=!1,this.isResolved=!1,this.isHealthy=!1,this.wsID=1,this.lastEvent=null,this.pingInterval=25*1e3,this.connectionCheckTimeout=this.pingInterval+10*1e3,uI(this.onlineStatusChanged)}connect(e=15e3){return y(this,null,function*(){if(this.isConnecting)throw Error("You've called connect twice, can only attempt 1 connection at the time");this.isDisconnected=!1;try{let n=yield this._connect();this.consecutiveFailures=0,this._log(`connect() - Established ws connection with healthcheck: ${n}`)}catch(n){if(this.isHealthy=!1,this.consecutiveFailures+=1,n.code===On.TOKEN_EXPIRED&&!this.client.tokenManager.isStatic())this._log("connect() - WS failure due to expired token, so going to try to reload token and reconnect"),this._reconnect({refreshToken:!0});else if(!n.isWSFailure)throw new Error(JSON.stringify({code:n.code,StatusCode:n.StatusCode,message:n.message,isWSFailure:n.isWSFailure}))}return yield this._waitForHealthy(e)})}_waitForHealthy(e=15e3){return y(this,null,function*(){return Promise.race([y(this,null,function*(){for(let r=0;r<=e;r+=50)try{return yield this.connectionOpen}catch(i){if(r===e)throw new Error(JSON.stringify({code:i.code,StatusCode:i.StatusCode,message:i.message,isWSFailure:i.isWSFailure}));yield pn(50)}}),y(this,null,function*(){throw yield pn(e),this.isConnecting=!1,new Error(JSON.stringify({code:"",StatusCode:"",message:"initial WS connection could not be established",isWSFailure:!0}))})])})}disconnect(e){this._log(`disconnect() - Closing the websocket connection for wsID ${this.wsID}`),this.wsID+=1,this.isConnecting=!1,this.isDisconnected=!0,this.healthCheckTimeoutRef&&clearInterval(this.healthCheckTimeoutRef),this.connectionCheckTimeoutRef&&clearInterval(this.connectionCheckTimeoutRef),dI(this.onlineStatusChanged),this.isHealthy=!1,this.ws&&this.ws.removeAllListeners&&this.ws.removeAllListeners();let n,{ws:r}=this;return r&&r.close&&r.readyState===r.OPEN?(n=new Promise(i=>{let s=o=>{this._log(`disconnect() - resolving isClosedPromise ${o?"with":"without"} close frame`,{event:o}),i()};r.onclose=s,setTimeout(s,e??1e3)}),this._log("disconnect() - Manually closed connection by calling client.disconnect()"),r.close(On.WS_CLOSED_SUCCESS,"Manually closed connection by calling client.disconnect()")):(this._log("disconnect() - ws connection doesn't exist or it is already closed."),n=Promise.resolve()),delete this.ws,n}_connect(){return y(this,null,function*(){if(this.isConnecting||this.isDisconnected&&this.client.options.enableWSFallback)return;this.isConnecting=!0,this.requestID=Ho(),this.client.insightMetrics.connectionStartTimestamp=new Date().getTime();let e=!1;try{this._log("_connect() - waiting for token"),yield this.client.tokenManager.tokenReady(),e=!0}catch{}try{e||(this._log("_connect() - tokenProvider failed before, so going to retry"),yield this.client.tokenManager.loadToken()),this._setupConnectionPromise();let n=this._buildUrl();this._log(`_connect() - Connecting to ${n}`,{wsURL:n,requestID:this.requestID}),this.ws=new cm(n),this.ws.onopen=this.onopen.bind(this,this.wsID),this.ws.onclose=this.onclose.bind(this,this.wsID),this.ws.onerror=this.onerror.bind(this,this.wsID),this.ws.onmessage=this.onmessage.bind(this,this.wsID);let r=yield this.connectionOpen;if(this.isConnecting=!1,r)return this.connectionID=r.connection_id,this.client.resolveConnectionId?.(this.connectionID),this.client.insightMetrics.wsConsecutiveFailures>0&&this.client.options.enableInsights&&(Hy("ws_success_after_failure",S1(this)),this.client.insightMetrics.wsConsecutiveFailures=0),r}catch(n){if(this.isConnecting=!1,this._log("_connect() - Error - ",n),this.client.options.enableInsights){this.client.insightMetrics.wsConsecutiveFailures++,this.client.insightMetrics.wsTotalFailures++;let r=C1(this,kP(n));Hy?.("ws_fatal",r)}throw this.client.rejectConnectionId?.(n),n}})}_reconnect(){return y(this,arguments,function*(e={}){if(this._log("_reconnect() - Initiating the reconnect"),this.isConnecting||this.isHealthy){this._log("_reconnect() - Abort (1) since already connecting or healthy");return}let n=e.interval;if(n||(n=Qr(this.consecutiveFailures)),yield pn(n),this.isConnecting||this.isHealthy){this._log("_reconnect() - Abort (2) since already connecting or healthy");return}if(this.isDisconnected&&this.client.options.enableWSFallback){this._log("_reconnect() - Abort (3) since disconnect() is called");return}this._log("_reconnect() - Destroying current WS connection"),this._destroyCurrentWSConnection(),e.refreshToken&&(yield this.client.tokenManager.loadToken());try{yield this._connect(),this._log("_reconnect() - Waiting for recoverCallBack"),this._log("_reconnect() - Finished recoverCallBack"),this.consecutiveFailures=0}catch(r){if(this.isHealthy=!1,this.consecutiveFailures+=1,r.code===On.TOKEN_EXPIRED&&!this.client.tokenManager.isStatic())return this._log("_reconnect() - WS failure due to expired token, so going to try to reload token and reconnect"),this._reconnect({refreshToken:!0});r.isWSFailure&&(this._log("_reconnect() - WS failure, so going to try to reconnect"),this._reconnect())}this._log("_reconnect() - == END ==")})}_destroyCurrentWSConnection(){this.wsID+=1;try{this?.ws?.removeAllListeners(),this?.ws?.close()}catch{}}};function qy(t){return typeof t=="string"}function zE(t,e){return!!e&&qy(t)}function I1(t,e){let n=[];if(qy(t)&&zE(t,e)){for(let r=0,i=t.length;r<i;r++)if(t.charAt(r)){let s=t.charAt(r),o=e(s,r,t);n[r]=o}}else if(!qy(t)&&!zE(t,e)){for(let r=0,i=t.length;r<i;r++)if(r in t){let s=t[r],o=e(s,r,t);n[r]=o}}return n}var T1=t=>(0,YE.fromByteArray)(new Uint8Array(I1(t,e=>e.charCodeAt(0)))),R1=t=>{let e={},n=String.fromCharCode,r=t.length,i,s=0,o,a,c=0,l,u="",d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(i=0;i<64;i++)e[d.charAt(i)]=i;for(a=0;a<r;a++)for(o=e[t.charAt(a)],s=(s<<6)+o,c+=6;c>=8;)((l=s>>>(c-=8)&255)||a<r-2)&&(u+=n(l));return u};function k1(t){return["eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9",T1(JSON.stringify({user_id:t})),"devtoken"].join(".")}function _1(t){let e=t.split(".");if(e.length!==3)return"";let n=e[1],r=R1(n);return JSON.parse(r).user_id}var zy=class{constructor(e){this.setTokenOrProvider=(n,r,i)=>y(this,null,function*(){this.validateToken(n,r,i),this.user=r,Ry(n)&&(this.tokenProvider=n,this.type="provider"),typeof n=="string"&&(this.token=n,this.type="static"),yield this.loadToken()}),this.reset=()=>{this.token=void 0,this.user=void 0,this.loadTokenPromise=null},this.validateToken=(n,r,i)=>{if(!(r&&i&&!n)){if(!this.secret&&!n)throw new Error("UserWithId token can not be empty");if(n&&typeof n!="string"&&!Ry(n))throw new Error("user token should either be a string or a function");if(typeof n=="string"){if(i&&n==="")return;let s=_1(n);if(n!=null&&(s==null||s===""||!i&&s!==r.id))throw new Error("userToken does not have a user_id or is not matching with user.id")}}},this.tokenReady=()=>this.loadTokenPromise,this.loadToken=()=>(this.loadTokenPromise=new Promise((n,r)=>y(this,null,function*(){if(this.type==="static")return n(this.token);if(this.tokenProvider&&typeof this.tokenProvider!="string"){try{this.token=yield this.tokenProvider()}catch(i){return r(new Error(`Call to tokenProvider failed with message: ${i}`))}n(this.token)}})),this.loadTokenPromise),this.getToken=()=>{if(this.token)return this.token;if(this.user&&!this.token)return this.token;throw new Error("User token is not set. Either client.connectUser wasn't called or client.disconnect was called")},this.isStatic=()=>this.type==="static",this.loadTokenPromise=null,e&&(this.secret=e),this.type="static"}},x1={"-1":{name:"InternalSystemError",retryable:!0},2:{name:"AccessKeyError",retryable:!1},3:{name:"AuthenticationFailedError",retryable:!0},4:{name:"InputError",retryable:!1},6:{name:"DuplicateUsernameError",retryable:!1},9:{name:"RateLimitError",retryable:!0},16:{name:"DoesNotExistError",retryable:!1},17:{name:"NotAllowedError",retryable:!1},18:{name:"EventNotSupportedError",retryable:!1},19:{name:"ChannelFeatureNotSupportedError",retryable:!1},20:{name:"MessageTooLongError",retryable:!1},21:{name:"MultipleNestingLevelError",retryable:!1},22:{name:"PayloadTooBigError",retryable:!1},23:{name:"RequestTimeoutError",retryable:!0},24:{name:"MaxHeaderSizeExceededError",retryable:!1},40:{name:"AuthErrorTokenExpired",retryable:!1},41:{name:"AuthErrorTokenNotValidYet",retryable:!1},42:{name:"AuthErrorTokenUsedBeforeIssuedAt",retryable:!1},43:{name:"AuthErrorTokenSignatureInvalid",retryable:!1},44:{name:"CustomCommandEndpointMissingError",retryable:!1},45:{name:"CustomCommandEndpointCallError",retryable:!0},46:{name:"ConnectionIDNotFoundError",retryable:!1},60:{name:"CoolDownError",retryable:!0},69:{name:"ErrWrongRegion",retryable:!1},70:{name:"ErrQueryChannelPermissions",retryable:!1},71:{name:"ErrTooManyConnections",retryable:!0},99:{name:"AppSuspendedError",retryable:!1}};function N1(t){return t.code!==void 0}function GE(t){if(!t.code)return!1;let e=x1[`${t.code}`];return e?e.retryable:!1}function A1(t){return t.code===46}function M1(t){if(typeof t.isWSFailure=="boolean")return t.isWSFailure;try{return JSON.parse(t.message).isWSFailure}catch{return!1}}function O1(t){return!t.status||t.status<200||300<=t.status}var We=function(t){return t.Closed="CLOSED",t.Connected="CONNECTED",t.Connecting="CONNECTING",t.Disconnected="DISCONNECTED",t.Init="INIT",t}(We||{}),Gy=class{constructor(e){this._onlineStatusChanged=n=>{if(this._log(`_onlineStatusChanged() - ${n.type}`),n.type==="offline"){this._setState(We.Closed),this.cancelToken?.cancel("disconnect() is called"),this.cancelToken=void 0;return}n.type==="online"&&this.state===We.Closed&&this.connect(!0)},this._req=(n,r,i)=>y(this,null,function*(){!this.cancelToken&&!n.close&&(this.cancelToken=$r.CancelToken.source());try{let s=yield this.client.doAxiosRequest("get",this.client.baseURL.replace(":3030",":8900")+"/longpoll",void 0,{config:x(S({},r),{cancelToken:this.cancelToken?.token}),params:n,publicEndpoint:!0});return this.consecutiveFailures=0,s}catch(s){if(this.consecutiveFailures+=1,i&&GE(s))return this._log("_req() - Retryable error, retrying request"),yield pn(Qr(this.consecutiveFailures)),this._req(n,r,i);throw s}}),this._poll=()=>y(this,null,function*(){for(;this.state===We.Connected;)try{let n=yield this._req({},{timeout:3e4},!0);if(n.events?.length)for(let r=0;r<n.events.length;r++)this.client.dispatchEvent(n.events[r])}catch(n){if($r.isCancel(n)){this._log("_poll() - axios canceled request");return}if(A1(n)){this._log("_poll() - ConnectionID error, connecting without ID..."),this._setState(We.Disconnected),this.connect(!0);return}if(N1(n)&&!GE(n)){this._setState(We.Closed);return}yield pn(Qr(this.consecutiveFailures))}}),this.connect=(n=!1)=>y(this,null,function*(){if(this.state===We.Connecting){this._log("connect() - connecting already in progress",{reconnect:n},"warn");return}if(this.state===We.Connected){this._log("connect() - already connected and polling",{reconnect:n},"warn");return}this._setState(We.Connecting),this.connectionID=void 0;try{let{event:r}=yield this._req({json:this.client._buildWSPayload()},{timeout:8e3},n);return this._setState(We.Connected),this.connectionID=r.connection_id,this.client.resolveConnectionId?.(),this.client.dispatchEvent(r),this._poll(),r}catch(r){throw this._setState(We.Closed),this.client.rejectConnectionId?.(),r}}),this.isHealthy=()=>!!this.connectionID&&this.state===We.Connected,this.disconnect=(n=2e3)=>y(this,null,function*(){dI(this._onlineStatusChanged),this._setState(We.Disconnected),this.cancelToken?.cancel("disconnect() is called"),this.cancelToken=void 0;let r=this.connectionID;this.connectionID=void 0;try{yield this._req({close:!0,connection_id:r},{timeout:n},!1),this._log("disconnect() - Closed connectionID")}catch(i){this._log("disconnect() - Failed",{err:i},"error")}}),this.client=e,this.state=We.Init,this.consecutiveFailures=0,uI(this._onlineStatusChanged)}_log(e,n={},r="info"){this.client.logger(r,"WSConnectionFallback:"+e,S({},n))}_setState(e){this._log(`_setState() - ${e}`),this.state===We.Connecting&&e===We.Connected&&this.client.dispatchEvent({type:"connection.changed",online:!0}),(e===We.Closed||e===We.Disconnected)&&this.client.dispatchEvent({type:"connection.changed",online:!1}),this.state=e}},KE=_e(["location"]),P1="https://hint.stream-io-video.com/",JE=(...n)=>y(void 0,[...n],function*(t=P1,e=2e3){let r=new AbortController,i=setTimeout(()=>r.abort(),e);try{let o=(yield fetch(t,{method:"HEAD",signal:r.signal})).headers.get("x-amz-cf-pop")||"ERR";return KE("debug",`Location header: ${o}`),o.substring(0,3)}catch(s){return KE("warn",`Failed to get location hint from ${t}`,s),"ERR"}finally{clearTimeout(i)}}),Ql=class{constructor(e,n){this.listeners={},this.nextRequestAbortController=null,this.devToken=i=>k1(i),this.getAuthType=()=>this.anonymous?"anonymous":"jwt",this.setBaseURL=i=>{this.baseURL=i,this.wsBaseURL=this.baseURL.replace("http","ws").replace(":3030",":8800")},this.getLocationHint=(i,s)=>y(this,null,function*(){let o=yield this.locationHint;return!o||o==="ERR"?(this.locationHint=JE(i??this.options.locationHintUrl,s??this.options.locationHintTimeout),this.locationHint):o}),this._getConnectionID=()=>this.wsConnection?.connectionID||this.wsFallback?.connectionID,this._hasConnectionID=()=>!!this._getConnectionID(),this.connectUser=(i,s)=>y(this,null,function*(){if(!i.id)throw new Error('The "id" field on the user is missing');if(this.userID===i.id&&this.setUserPromise)return this.logger("warn","Consecutive calls to connectUser is detected, ideally you should only call this function once in your app."),this.setUserPromise;if(this.userID)throw new Error("Use client.disconnect() before trying to connect as a different user. connectUser was called twice.");(this._isUsingServerAuth()||this.node)&&!this.options.allowServerSideConnect&&this.logger("warn",'Please do not use connectUser server side. connectUser impacts MAU and concurrent connection usage and thus your bill. If you have a valid use-case, add "allowServerSideConnect: true" to the client options to disable this warning.'),this.userID=i.id,this.anonymous=!1;let o=this._setToken(i,s,this.anonymous);this._setUser(i);let a=this.openConnection();this.setUserPromise=Promise.all([o,a]).then(c=>c[1]);try{return yield this.setUserPromise}catch(c){throw this.persistUserOnConnectionFailure?this.closeConnection():this.disconnectUser(),c}}),this._setToken=(i,s,o)=>this.tokenManager.setTokenOrProvider(s,i,o),this._setUser=i=>{this.user=i,this.userID=i.id,this._user=S({},i)},this.closeConnection=i=>y(this,null,function*(){return this.cleaningIntervalRef!=null&&(clearInterval(this.cleaningIntervalRef),this.cleaningIntervalRef=void 0),yield Promise.all([this.wsConnection?.disconnect(i),this.wsFallback?.disconnect(i)]),Promise.resolve()}),this.openConnection=()=>y(this,null,function*(){if(!this.userID)throw Error("UserWithId is not set on client, use client.connectUser or client.connectAnonymousUser instead");return this.wsConnection?.isConnecting&&this.wsPromise?(this.logger("info","client:openConnection() - connection already in progress"),this.wsPromise):(this.wsConnection?.isHealthy||this.wsFallback?.isHealthy())&&this._hasConnectionID()?(this.logger("info","client:openConnection() - openConnection called twice, healthy connection already exists"),Promise.resolve()):(this.connectionIdPromise=new Promise((i,s)=>{this.resolveConnectionId=i,this.rejectConnectionId=s}),this.clientID=`${this.userID}--${Ho()}`,this.wsPromise=this.connect(),this.wsPromise)}),this._normalizeDate=i=>{if(i instanceof Date&&(i=i.toISOString()),i==="")throw new Error("Don't pass blank string for since, use null instead if resetting the token revoke");return i},this.disconnectUser=i=>y(this,null,function*(){this.logger("info","client:disconnect() - Disconnecting the client"),delete this.user,delete this._user,delete this.userID,this.anonymous=!1,yield this.closeConnection(i),this.tokenManager.reset(),this.connectionIdPromise=void 0,this.rejectConnectionId=void 0,this.resolveConnectionId=void 0}),this.connectGuestUser=i=>y(this,null,function*(){this.guestUserCreatePromise=this.doAxiosRequest("post","/guest",{user:S({},i)},{publicEndpoint:!0});let s=yield this.guestUserCreatePromise;return this.guestUserCreatePromise.finally(()=>this.guestUserCreatePromise=void 0),this.connectUser(s.user,s.access_token)}),this.connectAnonymousUser=(i,s)=>y(this,null,function*(){this.connectionIdPromise=new Promise((o,a)=>{this.resolveConnectionId=o,this.rejectConnectionId=a}),this.anonymous=!0,yield this._setToken(i,s,this.anonymous),this._setUser(i),this.resolveConnectionId?.()}),this.on=(i,s)=>(this.listeners[i]||(this.listeners[i]=[]),this.logger("debug",`Adding listener for ${i} event`),this.listeners[i]?.push(s),()=>{this.off(i,s)}),this.off=(i,s)=>{this.listeners[i]||(this.listeners[i]=[]),this.logger("debug",`Removing listener for ${i} event`),this.listeners[i]=this.listeners[i]?.filter(o=>o!==s)},this._logApiRequest=(i,s,o,a)=>{this.logger("trace",`client: ${i} - Request - ${s}`,{payload:o,config:a})},this._logApiResponse=(i,s,o)=>{this.logger("trace",`client:${i} - Response - url: ${s} > status ${o.status}`,{response:o})},this._logApiError=(i,s,o)=>{this.logger("error",`client:${i} - Error - url: ${s}`,{url:s,error:o})},this.doAxiosRequest=(c,l,u,...d)=>y(this,[c,l,u,...d],function*(i,s,o,a={}){a.publicEndpoint||(yield Promise.all([this.tokenManager.tokenReady(),this.guestUserCreatePromise,this.connectionIdPromise]));let f=this._enrichAxiosOptions(a);try{let h;switch(this._logApiRequest(i,s,o,f),i){case"get":h=yield this.axiosInstance.get(s,f);break;case"delete":h=yield this.axiosInstance.delete(s,f);break;case"post":h=yield this.axiosInstance.post(s,o,f);break;case"put":h=yield this.axiosInstance.put(s,o,f);break;case"patch":h=yield this.axiosInstance.patch(s,o,f);break;case"options":h=yield this.axiosInstance.options(s,f);break;default:throw new Error("Invalid request type")}return this._logApiResponse(i,s,h),this.consecutiveFailures=0,this.handleResponse(h)}catch(h){if(h.client_request_id=f.headers?.["x-client-request-id"],this.consecutiveFailures+=1,h.response)return this._logApiError(i,s,h.response),h.response.data.code===On.TOKEN_EXPIRED&&!this.tokenManager.isStatic()?(this.consecutiveFailures>1&&(yield pn(Qr(this.consecutiveFailures))),yield this.tokenManager.loadToken(),yield this.doAxiosRequest(i,s,o,a)):this.handleResponse(h.response);throw this._logApiError(i,s,h),h}}),this.get=(i,s)=>this.doAxiosRequest("get",i,null,{params:s}),this.put=(i,s,o)=>this.doAxiosRequest("put",i,s,{params:o}),this.post=(i,s,o)=>this.doAxiosRequest("post",i,s,{params:o}),this.patch=(i,s,o)=>this.doAxiosRequest("patch",i,s,{params:o}),this.delete=(i,s)=>this.doAxiosRequest("delete",i,null,{params:s}),this.errorFromResponse=i=>{let s;return s=new Ym(`Stream error HTTP code: ${i.status}`),i.data&&i.data.code&&(s=new Error(`Stream error code ${i.data.code}: ${i.data.message}`),s.code=i.data.code),s.response=i,s.status=i.status,s},this.handleResponse=i=>{let s=i.data;if(O1(i))throw this.errorFromResponse(i);return s},this.dispatchEvent=i=>{if(i.received_at||(i.received_at=new Date),this.logger("debug",`Dispatching event: ${i.type}`,i),!!this.listeners){for(let s of this.listeners.all||[])s(i);for(let s of this.listeners[i.type]||[])s(i)}},this.connect=()=>y(this,null,function*(){if(!this.userID||!this._user)throw Error("Call connectUser or connectAnonymousUser before starting the connection");if(!this.wsBaseURL)throw Error("Websocket base url not set");if(!this.clientID)throw Error("clientID is not set");!this.wsConnection&&(this.options.warmUp||this.options.enableInsights)&&this._sayHi(),this.options.wsConnection&&this.node?(this.options.wsConnection.setClient(this),this.wsConnection=this.options.wsConnection):this.wsConnection=new Wy(this);try{return this.wsFallback?yield this.wsFallback.connect():(this.logger("info","StreamClient.connect: this.wsConnection.connect()"),yield this.wsConnection.connect(this.options.enableWSFallback?this.defaultWSTimeoutWithFallback:this.defaultWSTimeout))}catch(i){if(this.options.enableWSFallback&&M1(i)&&_P(this.logger))return this.logger("warn","client:connect() - WS failed, fallback to longpoll"),this.dispatchEvent({type:"transport.changed",mode:"longpoll"}),this.wsConnection._destroyCurrentWSConnection(),this.wsConnection.disconnect().then(),this.wsFallback=new Gy(this),yield this.wsFallback.connect();throw i}}),this._sayHi=()=>{let i=Ho(),s={headers:vE.from({"x-client-request-id":i})};this.doAxiosRequest("get",this.baseURL+"/hi",null,s).catch(o=>{this.options.enableInsights&&Hy("http_hi_failed",{api_key:this.key,err:o,client_request_id:i})})},this.getUserAgent=()=>this.userAgent||`stream-video-javascript-client-${this.node?"node":"browser"}-1.5.2`,this.setUserAgent=i=>{this.userAgent=i},this._isUsingServerAuth=()=>!!this.secret,this._enrichAxiosOptions=(i={params:{},headers:{},config:{}})=>{let s=i.publicEndpoint&&!this.user?void 0:this._getToken(),o=s?{Authorization:s}:void 0,a=null;return this.nextRequestAbortController!==null&&(a=this.nextRequestAbortController.signal,this.nextRequestAbortController=null),i.headers?.["x-client-request-id"]||(i.headers=x(S({},i.headers),{"x-client-request-id":Ho()})),S(S(S({params:S({user_id:this.userID,connection_id:this._getConnectionID(),api_key:this.key},i.params),headers:S(x(S({},o),{"stream-auth-type":i.publicEndpoint&&!this.user?"anonymous":this.getAuthType(),"X-Stream-Client":this.getUserAgent()}),i.headers)},a?{signal:a}:{}),i.config),this.options.axiosRequestConfig)},this._getToken=()=>this.tokenManager?this.tokenManager.getToken():null,this._buildWSPayload=i=>JSON.stringify({user_id:this.userID,user_details:this._user,client_request_id:i}),this.createAbortControllerForNextRequest=()=>this.nextRequestAbortController=new AbortController,this.key=e,this.secret=n?.secret;let r=n||{browser:typeof window<"u"};this.browser=r.browser||typeof window<"u",this.node=!this.browser,this.browser&&(this.locationHint=JE(n?.locationHintUrl,n?.locationHintTimeout)),this.options=S({timeout:5e3,withCredentials:!1,warmUp:!1},r),this.node&&!this.options.httpsAgent&&(this.options.httpsAgent=new w1.Agent({keepAlive:!0,keepAliveMsecs:3e3})),this.setBaseURL(this.options.baseURL||"https://video.stream-io-api.com/video"),typeof process<"u"&&process.env.STREAM_LOCAL_TEST_RUN&&this.setBaseURL("http://localhost:3030/video"),typeof process<"u"&&process.env.STREAM_LOCAL_TEST_HOST&&this.setBaseURL(`http://${process.env.STREAM_LOCAL_TEST_HOST}/video`),this.axiosInstance=$r.create(x(S({},this.options),{baseURL:this.baseURL})),this.wsConnection=null,this.wsPromise=null,this.setUserPromise=null,this.anonymous=!1,this.persistUserOnConnectionFailure=this.options?.persistUserOnConnectionFailure,this.tokenManager=new zy(this.secret),this.consecutiveFailures=0,this.insightMetrics=new $y,this.defaultWSTimeoutWithFallback=6e3,this.defaultWSTimeout=15e3,this.logger=Ry(r.logger)?r.logger:()=>null}},Go=class t{constructor(e,n){this.logLevel="warn",this.eventHandlersToUnregister=[],this.disconnectUser=s=>y(this,null,function*(){if(!this.streamClient.user&&!this.connectionPromise)return;let o=this.streamClient.user?.id,a=()=>this.streamClient.disconnectUser(s);this.disconnectionPromise=this.connectionPromise?this.connectionPromise.then(()=>a()):a(),this.disconnectionPromise.finally(()=>this.disconnectionPromise=void 0),yield this.disconnectionPromise,o&&t._instanceMap.delete(o),this.eventHandlersToUnregister.forEach(c=>c()),this.eventHandlersToUnregister=[],this.writeableStateStore.setConnectedUser(void 0)}),this.on=(s,o)=>this.streamClient.on(s,o),this.off=(s,o)=>this.streamClient.off(s,o),this.call=(s,o)=>new zr({streamClient:this.streamClient,id:o,type:s,clientStore:this.writeableStateStore}),this.createGuestUser=s=>y(this,null,function*(){return this.streamClient.doAxiosRequest("post","/guest",s,{publicEndpoint:!0})}),this.queryCalls=(...o)=>y(this,[...o],function*(s={}){let a=yield this.streamClient.post("/calls",s),c=[];for(let l of a.calls){let u=new zr({streamClient:this.streamClient,id:l.call.id,type:l.call.type,members:l.members,ownCapabilities:l.own_capabilities,watching:s.watch,clientStore:this.writeableStateStore});u.state.updateFromCallResponse(l.call),yield u.applyDeviceConfig(),s.watch&&this.writeableStateStore.registerCall(u),c.push(u)}return x(S({},a),{calls:c})}),this.queryCallStats=(...o)=>y(this,[...o],function*(s={}){return this.streamClient.post("/call/stats",s)}),this.edges=()=>y(this,null,function*(){return this.streamClient.get("/edges")}),this.addDevice=(s,o,a,c,l)=>y(this,null,function*(){return yield this.streamClient.post("/devices",S(S({id:s,push_provider:o,voip_token:l},c!=null?{user_id:c}:{}),a!=null?{push_provider_name:a}:{}))}),this.getDevices=s=>y(this,null,function*(){return yield this.streamClient.get("/devices",s?{user_id:s}:{})}),this.removeDevice=(s,o)=>y(this,null,function*(){return yield this.streamClient.delete("/devices",S({id:s},o?{user_id:o}:{}))}),this.onRingingCall=s=>y(this,null,function*(){let o=this.readOnlyStateStore.calls.find(a=>a.cid===s&&a.ringing);if(!o){let[a,c]=s.split(":");o=new zr({streamClient:this.streamClient,type:a,id:c,clientStore:this.writeableStateStore,ringing:!0}),yield o.get()}return o}),this.connectAnonymousUser=(s,o)=>y(this,null,function*(){let a=()=>this.streamClient.connectAnonymousUser(s,o);return this.connectionPromise=this.disconnectionPromise?this.disconnectionPromise.then(()=>a()):a(),this.connectionPromise.finally(()=>this.connectionPromise=void 0),this.connectionPromise});let r=rI,i="warn";if(typeof e=="string"?(i=n?.logLevel||i,r=n?.logger||r):(i=e.options?.logLevel||i,r=e.options?.logger||r),WO(r,i),this.logger=_e(["client"]),typeof e=="string")this.streamClient=new Ql(e,x(S({persistUserOnConnectionFailure:!0},n),{logLevel:i,logger:this.logger}));else{this.streamClient=new Ql(e.apiKey,x(S({persistUserOnConnectionFailure:!0},e.options),{logLevel:i,logger:this.logger}));let s=Cy();s&&this.streamClient.setUserAgent(this.streamClient.getUserAgent()+`-video-${ds[s.type].toLowerCase()}-sdk-${s.major}.${s.minor}.${s.patch}`)}if(this.writeableStateStore=new Dy,this.readOnlyStateStore=new Ey(this.writeableStateStore),typeof e!="string"){let s=e.user,o=e.token||e.tokenProvider;if(s){let a=s.id;s.type==="anonymous"&&(a="!anon"),a&&(t._instanceMap.has(e.apiKey+a)&&this.logger("warn",`A StreamVideoClient already exists for ${s.type==="anonymous"?"an anyonymous user":a}; Prefer using getOrCreateInstance method`),s.id=a,t._instanceMap.set(e.apiKey+a,this)),this.connectUser(s,o).catch(c=>{this.logger("error","Failed to connect",c)})}}}static getOrCreateInstance(e){let n=e.user;if(!n.id)if(e.user.type==="anonymous")n.id="!anon";else throw new Error("User ID is required for a non-anonymous user");if(!e.token&&!e.tokenProvider&&e.user.type!=="anonymous"&&e.user.type!=="guest")throw new Error("TokenProvider or token is required for a user that is not a guest or anonymous");let r=t._instanceMap.get(e.apiKey+n.id);return r||(r=new t(x(S({},e),{user:n}))),r}get state(){return this.readOnlyStateStore}connectUser(e,n){return y(this,null,function*(){if(e.type==="anonymous")return e.id="!anon",this.connectAnonymousUser(e,n);let r=()=>this.streamClient.connectUser(e,n);e.type==="guest"&&(r=()=>y(this,null,function*(){return this.streamClient.connectGuestUser(e)})),this.connectionPromise=this.disconnectionPromise?this.disconnectionPromise.then(()=>r()):r(),this.connectionPromise?.finally(()=>this.connectionPromise=void 0);let i=yield this.connectionPromise;return i?.me&&this.writeableStateStore.setConnectedUser(i.me),this.eventHandlersToUnregister.push(this.on("connection.changed",s=>{if(s.online){let o=this.writeableStateStore.calls.filter(a=>a.watching).map(a=>a.cid);this.logger("info",`Rewatching calls after connection changed ${o.join(", ")}`),o.length>0&&this.queryCalls({watch:!0,filter_conditions:{cid:{$in:o}},sort:[{field:"cid",direction:1}]}).catch(a=>{this.logger("error","Failed to re-watch calls",a)})}})),this.eventHandlersToUnregister.push(this.on("call.created",s=>{let{call:o,members:a}=s;if(e.id===o.created_by.id){this.logger("warn","Received `call.created` sent by the current user");return}this.logger("info",`New call created and registered: ${o.cid}`);let c=new zr({streamClient:this.streamClient,type:o.type,id:o.id,members:a,clientStore:this.writeableStateStore});c.state.updateFromCallResponse(o),this.writeableStateStore.registerCall(c)})),this.eventHandlersToUnregister.push(this.on("call.ring",s=>y(this,null,function*(){let{call:o,members:a}=s;if(e.id===o.created_by.id){this.logger("debug","Received `call.ring` sent by the current user so ignoring the event");return}yield this.writeableStateStore.findCall(o.type,o.id)?.leave({reason:"cleaning-up in call.ring"});let l=new zr({streamClient:this.streamClient,type:o.type,id:o.id,members:a,clientStore:this.writeableStateStore,ringing:!0});l.state.updateFromCallResponse(o),yield l.get(),this.writeableStateStore.registerCall(l)}))),i})}addVoipDevice(e,n,r,i){return y(this,null,function*(){return yield this.addDevice(e,n,r,i,!0)})}};Go._instanceMap=new Map;var hs=(()=>{let e=class e{constructor(){this.callId=zs(void 0),this.call=Ec(()=>{let o=this.callId();if(o!==void 0){let a=this.client.call("default",o);return a.join({create:!0}).then(()=>y(this,null,function*(){a.camera.enable(),a.microphone.enable()})),a}else return});let r="mmhfdzb5evj2",i="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiQ2Fybm9yX0pheCIsImlzcyI6Imh0dHBzOi8vcHJvbnRvLmdldHN0cmVhbS5pbyIsInN1YiI6InVzZXIvQ2Fybm9yX0pheCIsImlhdCI6MTcwODU5NjE3NSwiZXhwIjoxNzA5MjAwOTgwfQ.aaanw1N3BctIGtX8869uJXb8cnbTt8JXzZHFjEm5y8M",s={id:"Carnor_Jax"};this.client=new Go({apiKey:r,token:i,user:s})}setCallId(r){r===void 0&&this.call()?.leave(),this.callId.set(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var F1=["videoElement"],L1=["audioElement"],CI=(()=>{let e=class e{constructor(r){this.callingService=r}ngAfterViewInit(){this.unbindVideoElement=this.callingService.call()?.bindVideoElement(this.videoElement.nativeElement,this.participant.sessionId,"videoTrack"),this.unbindAudioElement=this.callingService.call()?.bindAudioElement(this.audioElement.nativeElement,this.participant.sessionId)}ngOnDestroy(){this.unbindVideoElement?.(),this.unbindAudioElement?.()}};e.\u0275fac=function(i){return new(i||e)(Xe(hs))},e.\u0275cmp=rn({type:e,selectors:[["app-participants"]],viewQuery:function(i,s){if(i&1&&(Ai(F1,5),Ai(L1,5)),i&2){let o;xr(o=Nr())&&(s.videoElement=o.first),xr(o=Nr())&&(s.audioElement=o.first)}},inputs:{participant:"participant"},standalone:!0,features:[Zn],decls:7,vars:6,consts:[["videoElement",""],["audioElement",""],[1,"participant-container"],["autoplay","",3,"id"],[3,"id"]],template:function(i,s){i&1&&(Ce(0,"div",2),$e(1,"video",3,0),Ce(3,"p"),Yn(4),De(),$e(5,"audio",4,1),De()),i&2&&(Ae(),Sc("id","video-",s.participant.sessionId,""),Cc("sessionId",s.participant.sessionId),Ae(3),Bf(s.participant.name),Ae(),Sc("id","audio-",s.participant.sessionId,""))},styles:["[_nghost-%COMP%]{flex:1}.participant-container[_ngcontent-%COMP%]{display:flex;position:relative;width:100%;height:100%}video[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;overflow:hidden}p[_ngcontent-%COMP%]{text-align:center;font-size:smaller;font-weight:700;letter-spacing:.3px;color:#fff;margin:0;padding:.5rem 1rem;position:absolute;bottom:0;right:0;background:#0003;border-radius:1rem 0 0;box-shadow:0 4px 30px #0000001a;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}"]});let t=e;return t})();function tv(t,e){let n=!e?.manualCleanup;n&&!e?.injector&&lw(tv);let r=n?e?.injector?.get(Ws)??N(Ws):null,i;e?.requireSync?i=zs({kind:0}):i=zs({kind:1,value:e?.initialValue});let s=t.subscribe({next:o=>i.set({kind:1,value:o}),error:o=>{if(e?.rejectErrors)throw o;i.set({kind:2,error:o})}});return r?.onDestroy(s.unsubscribe.bind(s)),Ec(()=>{let o=i();switch(o.kind){case 1:return o.value;case 2:throw o.error;case 0:throw new B(601,"`toSignal()` called with `requireSync` but `Observable` did not emit synchronously.")}})}var j1=["video"],U1=["canvas"];function B1(t,e){if(t&1){let n=Gs();Ce(0,"div",6),Tt("click",function(){Ti(n);let i=Ks();return Ri(i.rotateVideoInput(!0))}),De()}}var nv=class t{constructor(e,n,r){this._mimeType=null,this._imageAsBase64=null,this._imageAsDataUrl=null,this._imageData=null,this._mimeType=n,this._imageAsDataUrl=e,this._imageData=r}static getDataFromDataUrl(e,n){return e.replace(`data:${n};base64,`,"")}get imageAsBase64(){return this._imageAsBase64?this._imageAsBase64:this._imageAsBase64=t.getDataFromDataUrl(this._imageAsDataUrl,this._mimeType)}get imageAsDataUrl(){return this._imageAsDataUrl}get imageData(){return this._imageData}},rv=class{static getAvailableVideoInputs(){return!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices?Promise.reject("enumerateDevices() not supported."):new Promise((e,n)=>{navigator.mediaDevices.enumerateDevices().then(r=>{e(r.filter(i=>i.kind==="videoinput"))}).catch(r=>{n(r.message||r)})})}},SI=(()=>{class t{constructor(){this.width=640,this.height=480,this.videoOptions=t.DEFAULT_VIDEO_OPTIONS,this.allowCameraSwitch=!0,this.captureImageData=!1,this.imageType=t.DEFAULT_IMAGE_TYPE,this.imageQuality=t.DEFAULT_IMAGE_QUALITY,this.imageCapture=new we,this.initError=new we,this.imageClick=new we,this.cameraSwitched=new we,this.availableVideoInputs=[],this.videoInitialized=!1,this.activeVideoInputIndex=-1,this.mediaStream=null,this.activeVideoSettings=null}set trigger(n){this.triggerSubscription&&this.triggerSubscription.unsubscribe(),this.triggerSubscription=n.subscribe(()=>{this.takeSnapshot()})}set switchCamera(n){this.switchCameraSubscription&&this.switchCameraSubscription.unsubscribe(),this.switchCameraSubscription=n.subscribe(r=>{typeof r=="string"?this.switchToVideoInput(r):this.rotateVideoInput(r!==!1)})}static getMediaConstraintsForDevice(n,r){let i=r||this.DEFAULT_VIDEO_OPTIONS;return n&&(i.deviceId={exact:n}),i}static getDeviceIdFromMediaStreamTrack(n){if(n.getSettings&&n.getSettings()&&n.getSettings().deviceId)return n.getSettings().deviceId;if(n.getConstraints&&n.getConstraints()&&n.getConstraints().deviceId){let r=n.getConstraints().deviceId;return t.getValueFromConstrainDOMString(r)}}static getFacingModeFromMediaStreamTrack(n){if(n){if(n.getSettings&&n.getSettings()&&n.getSettings().facingMode)return n.getSettings().facingMode;if(n.getConstraints&&n.getConstraints()&&n.getConstraints().facingMode){let r=n.getConstraints().facingMode;return t.getValueFromConstrainDOMString(r)}}}static isUserFacing(n){let r=t.getFacingModeFromMediaStreamTrack(n);return r?r.toLowerCase()==="user":!1}static getValueFromConstrainDOMString(n){if(n){if(n instanceof String)return String(n);if(Array.isArray(n)&&Array(n).length>0)return String(n[0]);if(typeof n=="object"){if(n.exact)return String(n.exact);if(n.ideal)return String(n.ideal)}}return null}ngAfterViewInit(){this.detectAvailableDevices().then(()=>{this.switchToVideoInput(null)}).catch(n=>{this.initError.next({message:n}),this.switchToVideoInput(null)})}ngOnDestroy(){this.stopMediaTracks(),this.unsubscribeFromSubscriptions()}takeSnapshot(){let n=this.nativeVideoElement,r={width:this.width,height:this.height};n.videoWidth&&(r.width=n.videoWidth,r.height=n.videoHeight);let i=this.canvas.nativeElement;i.width=r.width,i.height=r.height;let s=i.getContext("2d");s.drawImage(n,0,0);let o=this.imageType?this.imageType:t.DEFAULT_IMAGE_TYPE,a=this.imageQuality?this.imageQuality:t.DEFAULT_IMAGE_QUALITY,c=i.toDataURL(o,a),l=null;this.captureImageData&&(l=s.getImageData(0,0,i.width,i.height)),this.imageCapture.next(new nv(c,o,l))}rotateVideoInput(n){if(this.availableVideoInputs&&this.availableVideoInputs.length>1){let r=n?1:this.availableVideoInputs.length-1,i=(this.activeVideoInputIndex+r)%this.availableVideoInputs.length;this.switchToVideoInput(this.availableVideoInputs[i].deviceId)}}switchToVideoInput(n){this.videoInitialized=!1,this.stopMediaTracks(),this.initWebcam(n,this.videoOptions)}videoResize(){}get videoWidth(){let n=this.getVideoAspectRatio();return Math.min(this.width,this.height*n)}get videoHeight(){let n=this.getVideoAspectRatio();return Math.min(this.height,this.width/n)}get videoStyleClasses(){let n="";return this.isMirrorImage()&&(n+="mirrored "),n.trim()}get nativeVideoElement(){return this.video.nativeElement}getVideoAspectRatio(){let n=this.nativeVideoElement;return n.videoWidth&&n.videoWidth>0&&n.videoHeight&&n.videoHeight>0?n.videoWidth/n.videoHeight:this.width/this.height}initWebcam(n,r){let i=this.nativeVideoElement;if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){let s=t.getMediaConstraintsForDevice(n,r);navigator.mediaDevices.getUserMedia({video:s}).then(o=>{this.mediaStream=o,i.srcObject=o,i.play(),this.activeVideoSettings=o.getVideoTracks()[0].getSettings();let a=t.getDeviceIdFromMediaStreamTrack(o.getVideoTracks()[0]);this.cameraSwitched.next(a),this.detectAvailableDevices().then(()=>{this.activeVideoInputIndex=a?this.availableVideoInputs.findIndex(c=>c.deviceId===a):-1,this.videoInitialized=!0}).catch(()=>{this.activeVideoInputIndex=-1,this.videoInitialized=!0})}).catch(o=>{this.initError.next({message:o.message,mediaStreamError:o})})}else this.initError.next({message:"Cannot read UserMedia from MediaDevices."})}getActiveVideoTrack(){return this.mediaStream?this.mediaStream.getVideoTracks()[0]:null}isMirrorImage(){if(!this.getActiveVideoTrack())return!1;{let n="auto";switch(this.mirrorImage&&(typeof this.mirrorImage=="string"?n=String(this.mirrorImage).toLowerCase():this.mirrorImage.x&&(n=this.mirrorImage.x.toLowerCase())),n){case"always":return!0;case"never":return!1}}return t.isUserFacing(this.getActiveVideoTrack())}stopMediaTracks(){this.mediaStream&&this.mediaStream.getTracks&&(this.nativeVideoElement.pause(),this.mediaStream.getTracks().forEach(n=>n.stop()))}unsubscribeFromSubscriptions(){this.triggerSubscription&&this.triggerSubscription.unsubscribe(),this.switchCameraSubscription&&this.switchCameraSubscription.unsubscribe()}detectAvailableDevices(){return new Promise((n,r)=>{rv.getAvailableVideoInputs().then(i=>{this.availableVideoInputs=i,n(i)}).catch(i=>{this.availableVideoInputs=[],r(i)})})}}return t.DEFAULT_VIDEO_OPTIONS={facingMode:"environment"},t.DEFAULT_IMAGE_TYPE="image/jpeg",t.DEFAULT_IMAGE_QUALITY=.92,t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=rn({type:t,selectors:[["webcam"]],viewQuery:function(n,r){if(n&1&&(Ai(j1,7),Ai(U1,7)),n&2){let i;xr(i=Nr())&&(r.video=i.first),xr(i=Nr())&&(r.canvas=i.first)}},inputs:{width:"width",height:"height",videoOptions:"videoOptions",allowCameraSwitch:"allowCameraSwitch",mirrorImage:"mirrorImage",captureImageData:"captureImageData",imageType:"imageType",imageQuality:"imageQuality",trigger:"trigger",switchCamera:"switchCamera"},outputs:{imageCapture:"imageCapture",initError:"initError",imageClick:"imageClick",cameraSwitched:"cameraSwitched"},decls:6,vars:7,consts:[["video",""],["canvas",""],[1,"webcam-wrapper",3,"click"],["autoplay","","muted","","playsinline","",3,"resize","width","height"],["class","camera-switch",3,"click",4,"ngIf"],[3,"width","height"],[1,"camera-switch",3,"click"]],template:function(n,r){if(n&1){let i=Gs();Ce(0,"div",2),Tt("click",function(){return Ti(i),Ri(r.imageClick.next())}),Ce(1,"video",3,0),Tt("resize",function(){return Ti(i),Ri(r.videoResize())}),De(),sn(3,B1,1,0,"div",4),$e(4,"canvas",5,1),De()}n&2&&(Ae(),AC(r.videoStyleClasses),Ve("width",r.videoWidth)("height",r.videoHeight),Ae(2),Ve("ngIf",r.allowCameraSwitch&&r.availableVideoInputs.length>1&&r.videoInitialized),Ae(),Ve("width",r.width)("height",r.height))},dependencies:[Pi],styles:[".webcam-wrapper[_ngcontent-%COMP%]{display:inline-block;position:relative;line-height:0}.webcam-wrapper[_ngcontent-%COMP%]   video.mirrored[_ngcontent-%COMP%]{transform:scaleX(-1)}.webcam-wrapper[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{display:none}.webcam-wrapper[_ngcontent-%COMP%]   .camera-switch[_ngcontent-%COMP%]{background-color:#0000001a;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAE9UlEQVR42u2aT2hdRRTGf+cRQqghSqihdBFDkRISK2KDfzDWxHaRQHEhaINKqa1gKQhd6EZLN+IidCH+Q0oWIkVRC21BQxXRitVaSbKoJSGtYGoK2tQ/tU1jY5v0c5F54Xl7b/KSO/PyEt+3e5f75p7zzZwzZ74zUEIJJfyfYaEGllQGVAGZlENdBy6Z2cSiYFTSKkkfS/pH/nBF0kFJdUW9AiRVASeAukD8DgNrzOySrwEzng18KaDzALXuG8W3AiStAvqBisBRNg40mtlPxbYCOgvgPO4bncWW+JpVeDQXRQhIygDfA00F5r0XuNfMrgclQFI98DDQCNQA5ZFXqoCWBVp8XwHRHeEqcN7loy/NbHBesyqpQ1KfFj/6nC+ZvFaApFrgPaCZpYVvgCfNbDiRAElNwGFg+RIt/X8H2s2s9wYCJDUAR4HqJX7++RN40MwGpgmQVAH0AQ2BPz4AHHPl8nBOAqtyFWQjsA6oL4Ada81sPDv7uwImod8kvSJp9RyS8O2SXnb/DYVd2Y9VSroQ4ANXJO2WVJmixqh0kzMWwL4LkiqRtDnA4D1zmfE8j9g9AezcnAHaPcfXdbfdnPZ2Yps6+DwAvO/Z1naTdApY7Xng48BDZnY1MpMVQBuw3iXc5Tnb0wBwBPjUzP6eoezuArZ6svM0geJLkvZEYnl3nkntoqROSbckSW2Suj3ZOIangc7GPJuUtNGdFIfmMeavktoSSKiW9LMPw30Q8JqkekmjCbOZRhuclLQjgYSNxUBAj6RyZ9ATgUJpUtJTCSR8vpAEXHAyWK5BXYFIGHOlepSAloUk4NEYgyoknQhEwhFJ0e8h6VSaQeerCb5uZgdi9utxYBNwOUD93hIVXswM4INCi6K9wAszFC2DwLOBDjHbYp59karIUnRdzYy/3ClqVklaUhfwTICj7K25OqA7a4wWagVsm4Me/xzwg2cCqqONFzO7DPxSCAJi436GUBgHHguQD2oTlJ55oSzP9ybccsttSJw1szdjFOSnI/8dTCGZHwcORp4Nx7y3B1iZ8/sm4MW8/Euxg5wIsS/HaAp3zeP4/G7obRDXI4jiTIA22H7Xdc7X+S3A5lC7QBQ357aq3VAjCeSkwUfAJrfvz+R8A9ADLAtZB+TinpjC5JMA+//jwPZZnF8G7J+L8z4IWB/zbG+gIujVWfLBW/NStVMmqaG4POJRsIjix7h8IGnLQuoBbQki5sVAJHyYm7YkNaRRtXwQ8G1cHpX0iKRrgUjYno17Sf0LrQhJUkdCeHWkVITGJI0k1QeS3ikGSUzOyJUJJNznYneuOCnpTldcxa2kP3xJYqOeSDjqZG8ShJLnE8TTuMS6Iyu1BW7djZqkfo9N0QOuYJmYQddfB7RG+gLTNzqAY9FrL+5/nwEbvDdJJe3zzOrhNP3AWRqmk55t3ZcBuj3b2gb0Sbrbo/NNzk7fFzu7s/E5EiC+rrmeQU0Kx2skvRFoOx2ZzlmSdgbsw49JetvtBpk8nM64d/cGbNtJ0s7cGyJlwHeEv+t3nqnLSgPAUOSGyG3AHUxdzqoJbEcvcL+ZTeTeEapzJKxgaeOcc/7Mf06D7kFrguS0VDAMtGadv+E47DT9tcChJej8ISfpD+abgTe45uOkFi8mnQ+JBVQ+d4VXuOptjavcyot8pq86mfwk8LWZnaOEEkoooYQSSojDv8AhQNeGfe0jAAAAAElFTkSuQmCC);background-repeat:no-repeat;border-radius:5px;position:absolute;right:13px;top:10px;height:48px;width:48px;background-size:80%;cursor:pointer;background-position:center;transition:background-color .2s ease}.webcam-wrapper[_ngcontent-%COMP%]   .camera-switch[_ngcontent-%COMP%]:hover{background-color:#0000002e}"]}),t})();var DI=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Gn({type:t}),t.\u0275inj=zn({imports:[[Mr]]}),t})();function $1(t,e){t&1&&$e(0,"webcam",11),t&2&&Ve("height",900)("width",900)}function H1(t,e){if(t&1&&(jf(0),$e(1,"app-participants",12),Uf()),t&2){let n=e.$implicit;Ae(),Ve("participant",n)}}function W1(t,e){t&1&&(Ce(0,"div"),$e(1,"img",13),De())}function q1(t,e){t&1&&(Ce(0,"div"),$e(1,"img",14),De())}function z1(t,e){t&1&&(Ce(0,"div"),$e(1,"img",15),De())}function G1(t,e){t&1&&(Ce(0,"div"),$e(1,"img",16),De())}var EI=(()=>{let e=class e{constructor(r){this.callingService=r,this.isCameraOn=!1,this.isMicOn=!1,this.isCamOn=!1,this.participants=tv(this.callingService.call().state.participants$,{requireSync:!0})}toggleMicrophone(){this.isMicOn=!this.isMicOn,this.call.microphone.toggle()}toggleCamera(){this.call.camera.toggle(),this.isCameraOn=!this.isCameraOn,this.isCamOn=!this.isCamOn}trackBySessionId(r,i){return i.sessionId}leaveCall(){this.callingService.setCallId(void 0)}};e.\u0275fac=function(i){return new(i||e)(Xe(hs))},e.\u0275cmp=rn({type:e,selectors:[["app-call"]],inputs:{call:"call"},standalone:!0,features:[Zn],decls:18,vars:7,consts:[[1,"call-section"],[1,"participant-container"],[1,"participant"],[3,"height","width",4,"ngIf"],[1,"participant-info"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"controls"],[1,"call-controls"],[1,"control-button",3,"click"],[4,"ngIf"],[1,"leave-button",3,"click"],[3,"height","width"],[3,"participant"],["src","https://angularicons.com/media/pages/icons/mic/731e39cfdf-1602599283/mic-48x48-crop.jpg","alt","Mic On","width","24","height","24"],["src","https://angularicons.com/media/pages/icons/mic-off/28c762a744-1602599283/mic-off-48x48-crop.jpg","alt","Mic Off","width","24","height","24"],["src","https://angularicons.com/media/pages/icons/camera/553b8e6f22-1602599203/camera-48x48-crop.jpg","alt","Camera On","width","24","height","24"],["src","https://angularicons.com/media/pages/icons/camera-off/4561067c26-1602599364/camera-off-48x48-crop.jpg","alt","Camera Off","width","24","height","24"]],template:function(i,s){i&1&&(Ce(0,"section",0)(1,"div",1)(2,"div",2),sn(3,$1,1,2,"webcam",3),Ce(4,"div",4),sn(5,H1,2,1,"ng-container",5),De()()(),Ce(6,"div",6)(7,"div",7)(8,"button",8),Tt("click",function(){return s.toggleMicrophone()}),sn(9,W1,2,0,"div",9)(10,q1,2,0,"div",9),Yn(11," Mic "),De(),Ce(12,"button",8),Tt("click",function(){return s.toggleCamera()}),sn(13,z1,2,0,"div",9)(14,G1,2,0,"div",9),Yn(15," Camera "),De(),Ce(16,"button",10),Tt("click",function(){return s.leaveCall()}),Yn(17,"Leave"),De()()()()),i&2&&(Ae(3),Ve("ngIf",s.isCameraOn),Ae(2),Ve("ngForOf",s.participants())("ngForTrackBy",s.trackBySessionId),Ae(4),Ve("ngIf",s.isMicOn),Ae(),Ve("ngIf",!s.isMicOn),Ae(3),Ve("ngIf",s.isCamOn),Ae(),Ve("ngIf",!s.isCamOn))},dependencies:[CI,Mr,eS,Pi,DI,SI],styles:[".call-section[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh;background-color:#1c1c1c;color:#ffffff85}.participant-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;margin-bottom:20px}.participant[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;border-radius:50%;width:300px;height:300px;overflow:hidden;position:relative;background-color:#fdfafa}.participant-info[_ngcontent-%COMP%]{margin-top:10px;font-size:16px}.controls[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-top:20px}.call-controls[_ngcontent-%COMP%]{display:flex;justify-content:space-around;max-width:400px;width:100%}.control-button[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border:none;border-radius:5px;padding:10px 15px;display:flex;align-items:center;cursor:pointer;transition:background-color .3s,transform .3s;font-size:16px}.leave-button[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff;border:none;border-radius:5px;padding:10px 20px;font-size:16px;cursor:pointer;transition:background-color .3s,transform .3s}@media (min-width: 768px){.call-section[_ngcontent-%COMP%]{flex-direction:row}.participant[_ngcontent-%COMP%]{width:400px;height:400px}}@media (min-width: 1024px){.participant[_ngcontent-%COMP%]{width:500px;height:500px}.call-controls[_ngcontent-%COMP%]{max-width:500px}}"]});let t=e;return t})();function K1(t,e){if(t&1){let n=Gs();Ce(0,"section",2)(1,"button",3),Tt("click",function(){Ti(n);let i=Ks();return Ri(i.setCallId())}),Yn(2,"Join Call"),De()()}}function J1(t,e){if(t&1&&(Ce(0,"section"),$e(1,"app-call",4),De()),t&2){let n=Ks();Ae(),Ve("call",n.callingService.call())}}var II=(()=>{let e=class e{constructor(r){this.callingService=r}setCallId(){this.callingService.setCallId("cvYdDsTmdyPc")}};e.\u0275fac=function(i){return new(i||e)(Xe(hs))},e.\u0275cmp=rn({type:e,selectors:[["app-root"]],standalone:!0,features:[Zn],decls:4,vars:2,consts:[["class","join-section",4,"ngIf"],[4,"ngIf"],[1,"join-section"],[3,"click"],[3,"call"]],template:function(i,s){i&1&&(Ce(0,"main"),sn(1,K1,3,0,"section",0)(2,J1,2,1,"section",1),$e(3,"router-outlet"),De()),i&2&&(Ae(),Ve("ngIf",!s.callingService.callId()),Ae(),Ve("ngIf",s.callingService.call()))},dependencies:[Mr,Pi,Fh,EI],styles:[".join-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center}"]});let t=e;return t})();lS(II,eD).catch(t=>console.error(t));
